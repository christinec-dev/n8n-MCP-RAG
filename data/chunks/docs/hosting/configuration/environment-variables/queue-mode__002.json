{
  "source": "docs/hosting/configuration/environment-variables/queue-mode.md",
  "index": 2,
  "content": "# Queue mode environment variables\n\n--8<-- \"_snippets/self-hosting/file-based-configuration.md\"\n\nYou can run n8n in different modes depending on your needs. Queue mode provides the best scalability. Refer to [Queue mode](/hosting/scaling/queue-mode.md) for more information.\n\n| Variable | Type  | Default  | Description |\n| :------- | :---- | :------- | :---------- |\n| `QUEUE_BULL_PREFIX` | String | - | Prefix to use for all queue keys. |\n| `QUEUE_BULL_REDIS_DB` | Number | `0` | The Redis database used. |\n| `QUEUE_BULL_REDIS_HOST` | String | `localhost` | The Redis host. |\n| `QUEUE_BULL_REDIS_PORT` | Number | `6379` | The Redis port used. |\n| `QUEUE_BULL_REDIS_USERNAME` | String | - | The Redis username (needs Redis version 6 or above). Don't define it for Redis < 6 compatibility |\n| `QUEUE_BULL_REDIS_PASSWORD` | String | - | The Redis password. |\n| `QUEUE_BULL_REDIS_TIMEOUT_THRESHOLD` | Number | `10000` | The Redis timeout threshold (in ms). |\n| `QUEUE_BULL_REDIS_CLUSTER_NODES` | String | - | Expects a comma-separated list of Redis Cluster nodes in the format `host:port`, for the Redis client to initially connect to. If running in queue mode (`EXECUTIONS_MODE = queue`), setting this variable will create a Redis Cluster client instead of a Redis client, and n8n will ignore `QUEUE_BULL_REDIS_HOST` and `QUEUE_BULL_REDIS_PORT`. |\n| `QUEUE_BULL_REDIS_TLS` | Boolean | `false` | Enable TLS on Redis connections. |\n| `QUEUE_BULL_REDIS_DUALSTACK` | Boolean | `false` | Enable dual-stack support (IPv4 and IPv6) on Redis connections. |\n| `QUEUE_WORKER_TIMEOUT` (**deprecated**) | Number | `30` | **Deprecated** Use `N8N_GRACEFUL_SHUTDOWN_TIMEOUT` instead.<br/><br/>How long should n8n wait (seconds) for running executions before exiting worker process on shutdown. |\n| `QUEUE_HEALTH_CHECK_ACTIVE` | Boolean | `false` | Whether to enable health checks (true) or disable (false). |\n| `QUEUE_HEALTH_CHECK_PORT` | Number | - | The port to serve health checks on. |\n| `QUEUE_WORKER_LOCK_DURATION` | Number | `30000` | How long (in ms) is the lease period for a worker to work on a message. |\n| `QUEUE_WORKER_LOCK_RENEW_TIME` | Number | `15000` | How frequently (in ms) should a worker renew the lease time. |\n| `QUEUE_WORKER_STALLED_INTERVAL` | Number | `30000` | How often should a worker check for stalled jobs (use 0 for never). |\n| `QUEUE_WORKER_MAX_STALLED_COUNT` | Number | `1` | Maximum amount of times a stalled job will be re-processed. |"
}