{
  "source": "docs/external-secrets.md",
  "index": 3,
  "content": "## Connect n8n to your secrets store\n\n/// note | Secret names\nYour secret names can't contain spaces, hyphens, or other special characters. n8n supports secret names containing alphanumeric characters (`a-z`, `A-Z`, and `0-9`), and underscores. n8n currently only supports plaintext values for secrets, not JSON objects or key-value pairs.\n///\n\n1. In n8n, go to **Settings** > **External Secrets**.\n1. Select **Set Up** for your store provider.\n1. Enter the credentials for your provider:\n\t* Azure Key Vault: Provide your **vault name**, **tenant ID**, **client ID**, and **client secret**. Refer to the Azure documentation to [register a Microsoft Entra ID app and create a service principal](https://learn.microsoft.com/en-us/entra/identity-platform/howto-create-service-principal-portal). n8n supports only single-line values for secrets.\n\t* AWS Secrets Manager: provide your **access key ID**, **secret access key**, and **region**. The IAM user must have the `secretsmanager:ListSecrets`, `secretsmanager:BatchGetSecretValue`, and `secretsmanager:GetSecretValue` permissions.\n\n\t\tTo give n8n access to all secrets in your AWS Secrets Manager, you can attach the following policy to the IAM user:\n\t\t```json\n\t\t{\n\t\t\t\"Version\": \"2012-10-17\",\n\t\t\t\"Statement\": [\n\t\t\t\t{\n\t\t\t\t\t\"Sid\": \"AccessAllSecrets\",\n\t\t\t\t\t\"Effect\": \"Allow\",\n\t\t\t\t\t\"Action\": [\n\t\t\t\t\t\t\"secretsmanager:ListSecrets\",\n\t\t\t\t\t\t\"secretsmanager:BatchGetSecretValue\",\n \t\t\t\t\t\t\"secretsmanager:GetResourcePolicy\",\n\t\t\t\t\t\t\"secretsmanager:GetSecretValue\",\n\t\t\t\t\t\t\"secretsmanager:DescribeSecret\",\n\t\t\t\t\t\t\"secretsmanager:ListSecretVersionIds\",\n\t\t\t\t\t],\n\t\t\t\t\t\"Resource\": \"*\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t\t```\n\n\t\tYou can also be more restrictive and give n8n access to select specific AWS Secret Manager secrets. You still need to allow the `secretsmanager:ListSecrets` and `secretsmanager:BatchGetSecretValue` permissions to access all resources. These permissions allow n8n to retrieve ARN-scoped secrets, but don't provide access to the secret values.\n\n\t\tNext, you need set the scope for the `secretsmanager:GetSecretValue` permission to the specific Amazon Resource Names (ARNs) for the secrets you wish to share with n8n. Ensure you use the correct region and account ID in each resource ARNs. You can find the ARN details in the AWS dashboard for your secrets.\n\t\t\n\t\tFor example, the following IAM policy only allows access to secrets with a name starting with `n8n` in your specified AWS account and region:\n\n\t\t```json\n\t\t{\n\t\t\t\"Version\": \"2012-10-17\",\n\t\t\t\"Statement\": [\n\t\t\t\t{\n\t\t\t\t\t\"Sid\": \"ListingSecrets\",\n\t\t\t\t\t\"Effect\": \"Allow\",\n\t\t\t\t\t\"Action\": [\n\t\t\t\t\t\t\"secretsmanager:ListSecrets\",\n\t\t\t\t\t\t\"secretsmanager:BatchGetSecretValue\"\n\t\t\t\t\t],\n\t\t\t\t\t\"Resource\": \"*\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"Sid\": \"RetrievingSecrets\",\n\t\t\t\t\t\"Effect\": \"Allow\",\n\t\t\t\t\t\"Action\": [\n\t\t\t\t\t\t\"secretsmanager:GetSecretValue\",\n\t\t\t\t\t\t\"secretsmanager:DescribeSecret\"\n\t\t\t\t\t],\n\t\t\t\t\t\"Resource\": [\n\t\t\t\t\t\t\"arn:aws:secretsmanager:us-west-2:123456789000:secret:n8n*\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t\t``"
}