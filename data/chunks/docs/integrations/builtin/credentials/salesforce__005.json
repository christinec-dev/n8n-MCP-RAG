{
  "source": "docs/integrations/builtin/credentials/salesforce.md",
  "index": 5,
  "content": "## Using JWT\n\nTo configure this credential, you'll need a [Salesforce](https://www.salesforce.com/) account and:\n\n- Your **Environment Type** (Production or Sandbox)\n- A **Client ID**: Generated when you create a connected app.\n- Your Salesforce **Username**\n- A **Private Key** for a self-signed digital certificate\n\nTo set things up, first you'll create a private key and certificate, then a connected app:\n\n1. In n8n, select the **Environment Type** for your connection. Choose the option that best describes your environment from **Production** or **Sandbox**.\n2. Enter your Salesforce **Username**.\n1. Log in to your org in Salesforce.\n2. You'll need a private key and certificate issued by a certification authority. Use your own key/cert or use OpenSSL to create a key and a self-signed digital certificate. Refer to the Salesforce [Create a Private Key and Self-Signed Digital Certificate documentation](https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_auth_key_and_cert.htm) for instructions on creating your own key and certificate.\n3. From **Setup** in Salesforce, enter `App Manager` in the Quick Find box, then select **App Manager**.\n3. On the App Manager page, select **New Connected App**.\n4. Enter the required **Basic Info** for your connected app, including a **Name** and **Contact Email address**. Refer to Salesforce's [Configure Basic Connected App Settings](https://help.salesforce.com/s/articleView?id=sf.connected_app_create_basics.htm&type=5) documentation for more information.\n5. Check the box to **Enable OAuth Settings**.\n6. For the **Callback URL**, enter `http://localhost:1717/OauthRedirect`.\n7. Check the box to **Use digital signatures**.\n8. Select **Choose File** and upload the file that contains your digital certificate, such as `server.crt`.\n9. Add these **OAuth scopes**:\n\t- **Full access (full)**\n\t- **Perform requests at any time (refresh_token, offline_access)**\n10. Select **Save**, then **Continue**. The **Manage Connected Apps** page should open to the app you just created.\n11. In the **API (Enable OAuth Settings)** section, select **Manage Consumer Details**.\n12. Copy the **Consumer Key** and add it to your n8n credential as the **Client ID**.\n13. Enter the contents of the private key file in n8n as **Private Key**.\n\t- Use the multi-line editor in n8n.\n\t- Enter the private key in standard PEM key format:\n        ```\n        -----BEGIN PRIVATE KEY-----\n        KEY DATA GOES HERE\n        -----END PRIVATE KEY-----\n        ```\n\nThese steps are what's required on the n8n side. Salesforce recommends setting refresh token policies, session policies, and OAuth policies too:\n\n14. In Salesforce, select **Back to Manage Connected Apps**.\n15. Select **Manage**.\n16. Select **Edit Policies**.\n17. Review the **Refresh Token Policy** field. Salesforce recommends using expire refresh token after 90 days.\n18. In the **Session Policies** section, Salesforce recommends setting **Timeout Value** to 15 minutes.\n19. In the **OAuth Policies** section, select **Admin approved users are pre-authorized for permitted users** for **Permitted Users**, and select **OK**.\n20. Select **Save**.\n21. Select **Manage Profiles**, select the profiles that are pre-authorized to use this connected app, and select **Save**.\n22. Select **Manage Permission Sets** to select the permission sets. Create permission sets if necessary.\n\nRefer to Salesforce's [Create a Connected App in Your Org](https://developer.salesforce.com/docs/atlas.en-us.sfd"
}