{
  "source": "docs/integrations/builtin/credentials/salesforce.md",
  "index": 7,
  "content": "## Using OAuth2\n\nTo configure this credential, you'll need a [Salesforce](https://www.salesforce.com/) account.\n\n--8<-- \"_snippets/integrations/builtin/credentials/cloud-oauth-button.md\"\n\nCloud and hosted users will need to select your **Environment Type**. Choose between **Production** and **Sandbox**.\n\nIf you're [self-hosting](/hosting/index.md) n8n, you'll need to configure OAuth2 from scratch by creating a connected app:\n\n1. In n8n, select the **Environment Type** for your connection. Choose the option that best describes your environment from **Production** or **Sandbox**.\n2. Enter your Salesforce **Username**.\n1. Log in to your org in Salesforce.\n3. From **Setup** in Salesforce, enter `App Manager` in the Quick Find box, then select **App Manager**.\n3. On the App Manager page, select **New Connected App**.\n4. Enter the required **Basic Info** for your connected app, including a **Name** and **Contact Email address**. Refer to Salesforce's [Configure Basic Connected App Settings](https://help.salesforce.com/s/articleView?id=sf.connected_app_create_basics.htm&type=5) documentation for more information.\n5. Check the box to **Enable OAuth Settings**.\n6. For the **Callback URL**, enter `http://localhost:1717/OauthRedirect`.\n9. Add these **OAuth scopes**:\n\t- **Full access (full)**\n\t- **Perform requests at any time (refresh_token, offline_access)**\n10. Make sure the following settings are unchecked:\n\t- **Require Proof Key for Code Exchange (PKCE) Extension for Supported Authorization Flows**\n\t- **Require Secret for Web Server Flow**\n\t- **Require Secret for Refresh Token Flow**\n10. Select **Save**, then **Continue**. The **Manage Connected Apps** page should open to the app you just created.\n11. In the **API (Enable OAuth Settings)** section, select **Manage Consumer Details**.\n12. Copy the **Consumer Key** and add it to your n8n credential as the **Client ID**.\n13. Copy the **Consumer Secret** and add it to your n8n credential as the **Client Secret**.\n\nThese steps are what's required on the n8n side. Salesforce recommends setting refresh token policies and session policies, too:\n\n14. In Salesforce, select **Back to Manage Connected Apps**.\n15. Select **Manage**.\n16. Select **Edit Policies**.\n17. Review the **Refresh Token Policy** field. Salesforce recommends using expire refresh token after 90 days.\n18. In the **Session Policies** section, Salesforce recommends setting **Timeout Value** to 15 minutes.\n\nRefer to Salesforce's [Create a Connected App in Your Org](https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_auth_connected_app.htm) documentation for more information."
}