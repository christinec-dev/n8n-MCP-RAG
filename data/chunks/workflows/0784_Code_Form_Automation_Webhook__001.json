{
  "source": "0784_Code_Form_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"7614f731d9ac88c16c6149bd495fa54d325e3f79ab527ffc7e3b1b1f42dbf884\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"56e70371-54a2-4421-9ce2-e626d9c6ef60\",\n      \"name\": \"Form\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        -440,\n        -120\n      ],\n      \"webhookId\": \"622256ee-9248-43a2-840e-b28436800aac\",\n      \"parameters\": {\n        \"options\": {},\n        \"formTitle\": \"Form\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldLabel\": \"name\",\n              \"requiredField\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"7cbd263e-ca5b-436e-bdce-c30a66df73a6\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -440,\n        100\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 320,\n        \"content\": \"# üëÜ\\nPlease add authentication to form by selecting Basic Auth to prevent unauthorized access to the form.\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e1c4d0a8-6e48-45d9-bec6-ee8bb3751b4f\",\n      \"name\": \"Copy template file\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -220,\n        -120\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $json.name }}\",\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1KyR0UMIOpEkjwa6o1gTggNBP2A6EWwppV59Y6NQuDYw\",\n          \"cachedResultUrl\": \"https://docs.google.com/document/d/1KyR0UMIOpEkjwa6o1gTggNBP2A6EWwppV59Y6NQuDYw/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Szablon: Dokument testowy\"\n        },\n        \"options\": {},\n        \"operation\": \"copy\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"aPSwizdvnxio0J7A\",\n          \"name\": \"Google Drive account 2\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"52a27a15-ca68-4381-9a0d-faa1127d7de9\",\n      \"name\": \"Format form data\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        0,\n        -120\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const data = [];\\n\\nObject.keys($('Form').all().map((item) => {\\n  Object.keys(item.json).map((bodyProperty) => {\\n    data.push({\\n      key: bodyProperty,\\n      value: item.json[bodyProperty],\\n    });\\n  })\\n}));\\n\\nreturn {\\n  webhook_data: data,\\n  pairedItem: 0,\\n};\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"08dbeb42-16f6-4771-bbf8-a358fda54097\",\n      \"name\": \"Format form data to Google Doc API\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        220,\n        -120\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const result = [];\\n\\n$('Format form data').all().map((item) => {\\n  item.json.webhook_data.map((data) => {\\n    if (\\\"submittedAt\\\" !== data.key && \\\"formMode\\\" !== data.key) {\\n      result.push({\\n        \\\"replaceAllText\\\": {\\n            \\\"containsText\\\": {\\n              \\\"text\\\": `{{${data.key}}}`, \\n              \\\"matchCase\\\": true\\n            },\\n            \\\"replaceText\\\": `${data.value}`\\n        },\\n      });\\n    }\\n  });\\n})\\n\\nreturn {\\n  data: result,\\n  pairedItem: 0,\\n};\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"99b03034-8c9b-4e23-8cc9-bf9960a4e06a\",\n      \"name\": \"Replace data in Google Doc\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        440,\n        -120\n      ],\n      \"parameters\": {\n        \"url\": \"=https://docs.googleapis.com/v1/documents/{{ $('Copy template file').first().json.id }}:batchUpdate\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"requests\",\n              \"value\": \"={{ $json.data }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"googleDocsOAuth2Api\"\n      },\n      \"credentials\": {\n        \"googleDocsOAuth2Api\": {\n          \"id\": \"uhqGUvBF00zGb9vB\",\n          \"name\": \"Google Docs account 2\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"204b57da-2791-40e3-84f5-23a0ed5c8beb\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -440,\n        -420\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 520,\n        \"height\": 180,\n        \"content\": \"# üôã‚Äç‚ôÇÔ∏è\\nThe workflow automatically fetches all form fields and converts them into variables in Google Doc. For example, if you add a text field to the form called \\\"address,\\\" you can use the variable {{address}} in the Google Doc template.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fa17044d-191e-45eb-9559-563889ad2aef\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        440,\n        100\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"content\": \"# üëÜ\\nIn Authentication, you need to select Predefined Credential Type and then choose Google Docs OAuth API.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Form\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Copy template file\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format form data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format form data to Google Doc API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Copy template file\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format form data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Replace data in Google Doc\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Format form data to Google Doc API\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Replace data in Google Doc\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.formTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.code",
      "n8n-nodes-base.code",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}