{
  "source": "0752_HTTP_Rssfeedread_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"2\",\n  \"name\": \"post to mattermost v2\",\n  \"nodes\": [\n    {\n      \"name\": \"RSS Feed Read\",\n      \"type\": \"n8n-nodes-base.rssFeedRead\",\n      \"position\": [\n        580,\n        150\n      ],\n      \"parameters\": {\n        \"url\": \"{HERE YOUR TINY TINY RSS PUBLIC FEED}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"HTTP Request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1170,\n        90\n      ],\n      \"parameters\": {\n        \"url\": \"=https://{HERE YOUR MASTONDON INSTANCE URL}/api/v1/statuses?access_token={HERE YOUR MASTODON ACCESS TOKEN}\",\n        \"options\": {},\n        \"requestMethod\": \"POST\",\n        \"queryParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"status\",\n              \"value\": \"={{$node[\\\"RSS Feed Read\\\"].json[\\\"title\\\"]}} \\n{{$node[\\\"RSS Feed Read\\\"].json[\\\"link\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Cron\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        400,\n        150\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyX\",\n              \"unit\": \"minutes\",\n              \"value\": 10\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Function\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        790,\n        150\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Get the global workflow static data\\nconst staticData = getWorkflowStaticData('global');\\n\\n// Access its data\\nconst lastRssId = staticData.lastRssId\\n\\nlet list = []\\n\\n\\nfor (const item of $items(\\\"RSS Feed Read\\\")){\\n  let currentId = item.json[\\\"id\\\"].split('/').pop()\\n  if(currentId == lastRssId) break;\\n  list.push({'json': {\\n    'id': currentId,\\n    'lastId': lastRssId,\\n    'title': item.json[\\\"title\\\"],\\n    'url': item.json[\\\"link\\\"]\\n  }})\\n}\\n\\n\\n// Get the last ID from Rss Feed\\nlet currentRssId = $item(0).$node[\\\"RSS Feed Read\\\"].json[\\\"id\\\"].split('/').pop()\\n\\n// TODO: make a loop to get all the items beyond the last saved id\\nif(!lastRssId || currentRssId != lastRssId)\\n{  \\n  // Update its data\\n  staticData.lastRssId = currentRssId;\\n  \\n}\\nelse { list = [{'json':{'id': 'NaN', 'lastId': staticData.lastRssId }}] }\\nreturn list;\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        960,\n        150\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Function\\\"].json[\\\"id\\\"]}}\",\n              \"value2\": \"NaN\",\n              \"operation\": \"notEqual\"\n            }\n          ],\n          \"boolean\": []\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"NoOp\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1180,\n        280\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"settings\": {},\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"NoOp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Cron\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"RSS Feed Read\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Function\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"RSS Feed Read\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Function\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.rssFeedRead",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.cron",
      "n8n-nodes-base.function",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp"
    ],
    "trigger": null
  }
}