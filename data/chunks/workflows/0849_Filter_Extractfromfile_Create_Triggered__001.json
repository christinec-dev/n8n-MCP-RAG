{
  "source": "0849_Filter_Extractfromfile_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"ee3cd6ff-40ba-40d4-bbbf-90244da4a272\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        0,\n        -155\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"68584aab-c5f3-450a-a1e3-cddc8d64082d\",\n      \"name\": \"Extract from File\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        1100,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"fromJson\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e23a67a1-44df-4b83-a80a-9383f4432c7d\",\n      \"name\": \"If is archived is false\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1540,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"e051d2f2-7c22-4864-bbe7-4832cc54acaa\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"false\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.data.isArchived }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"313764d0-f115-46d3-a2e3-1fde647f7d85\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1848,\n        -60\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"1IOLtYX7aTspCAN8\",\n          \"name\": \"OpenAI Pollup\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"81fcc7a0-955d-4930-b203-8e98d57e3c4c\",\n      \"name\": \"If extension is json\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        660,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"7b80be39-b5cc-4f96-8529-75559aaece38\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.name.split('.').pop(); }}\",\n              \"rightValue\": \"=json\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"1c8c81ea-d0ae-4925-ae4b-05482c1b5fa2\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        -380\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 260,\n        \"height\": 440,\n        \"content\": \"## How to export your Google keep notes \\n* Google has a dedicated service for exporting your google data, called [Google Takeout](https://takeout.google.com/), you'll have to login  it. \\n* Click on \\\"Deselect all\\\" then select only Google Keep and click on \\\"Next\\\". \\n- Select the destination (use \\\"Send download link via mail\\\" as you'll have to uncompress a zip file before to send it again to Google Drive)\\n- Upload to Google Drive all json files from your uncompresed file, to specific directory and you are ready to start!\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"31eb6398-cca0-4ed1-910a-470fa49c9727\",\n      \"name\": \"Search in \\\"Keep\\\" folder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        220,\n        -155\n      ],\n      \"parameters\": {\n        \"limit\": 2,\n        \"filter\": {\n          \"folderId\": {\n            \"__rl\": true,\n            \"mode\": \"list\",\n            \"value\": \"1BggjRVCqyDnECK_mB2M-PYareptQv99P\",\n            \"cachedResultUrl\": \"https://drive.google.com/drive/folders/1BggjRVCqyDnECK_mB2M-PYareptQv99P\",\n            \"cachedResultName\": \"Keep\"\n          },\n          \"whatToSearch\": \"files\"\n        },\n        \"options\": {},\n        \"resource\": \"fileFolder\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"veQ5hnnOES56fTcI\",\n          \"name\": \"Google Drive account good\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"653d04b2-4020-4254-a8f5-53e15228adb7\",\n      \"name\": \"Loop every 10 items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        440,\n        -155\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 10\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"c1171bd7-5e2d-49e6-a52b-6e9282cb093d\",\n      \"name\": \"Download the files\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        880,\n        -280\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.id }}\"\n        },\n        \"options\": {},\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"veQ5hnnOES56fTcI\",\n          \"name\": \"Google Drive account good\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"4d9caff3-2ac8-40fc-91a4-1b395e693141\",\n      \"name\": \"Put some AI treatment here if you need it\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"notes\": \"Yu can use this AI Agent to process a number or anything you need from your notes\",\n      \"position\": [\n        1760,\n        -280\n      ],\n      \"parameters\": {\n        \"text\": \"=Extract the amount in euros of the input. output just the amount and nothing else. \\nHere is the input:{{ $json.data.textContent }}\",\n        \"options\": {},\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"d97c4e02-4b1a-479f-8492-e601c553ac57\",\n      \"name\": \"Set the fields for export\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2136,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"d05409ea-b739-47bd-9c07-0dea40b83de1\",\n              \"name\": \"textContent\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('If is archived is false').item.json.data.textContent }}\"\n            },\n            {\n              \"id\": \"acbe202e-de95-4a47-a90b-78556fec4650\",\n              \"name\": \"Edited\",\n              \"type\": \"string\",\n              \"value\": \"={{ new Date($('If is archived is false').item.json.data.userEditedTimestampUsec / 1000).toLocaleString() }}\"\n            },\n            {\n              \"id\": \"13f00e53-75fd-4db5-9a22-b5e329c72b47\",\n              \"name\": \"Created\",\n              \"type\": \"string\",\n              \"value\": \"={{ new Date($('If is archived is false').item.json.data.createdTimestampUsec / 1000).toLocaleString() }}\"\n            },\n            {\n              \"id\": \"7e58e874-5238-4fb6-8b00-ea947c59ec4b\",\n              \"name\": \"isArchived\",\n              \"type\": \"boolean\",\n              \"value\": \"={{ $('If is archived is false').item.json.data.isArchived }}\"\n            },\n            {\n              \"id\": \"721f31d8-4944-4a63-878e-71816eee755c\",\n              \"name\": \"Amount\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.output }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"0f8d9b1f-f5de-477f-ad50-eeb89bcf8dc7\",\n      \"name\": \"Add to google sheet\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        2356,\n        -155\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {},\n          \"schema\": [\n            {\n              \"id\": \"textContent\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"textContent\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Edited\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"Edited\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Created\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"Created\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"isArchived\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"isArchived\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"autoMapInputData\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"appendOrUpdate\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1rjgyHw6XU4NTRCx4eXuQ0AIXhY3mWqxg1NiAhrSnuzE/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1rjgyHw6XU4NTRCx4eXuQ0AIXhY3mWqxg1NiAhrSnuzE\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1rjgyHw6XU4NTRCx4eXuQ0AIXhY3mWqxg1NiAhrSnuzE/edit?usp=drivesdk\",\n          \"cachedResultName\": \"googl keep export (10/05/25)\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"gdLmm513ROUyH6oU\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"31141cf2-94d6-45ad-8632-18001a6d4d36\",\n      \"name\": \"Filter\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1320,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"or\",\n          \"conditions\": [\n            {\n              \"id\": \"11bacf5f-6675-4681-b205-5e5293eaae02\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"contains\"\n              },\n              \"leftValue\": \"={{ $json.data.textContentHtml }}\",\n              \"rightValue\": \"dépensé\"\n            },\n            {\n              \"id\": \"c40da1df-559c-4278-bde1-cdb8e65c8428\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"contains\"\n              },\n              \"leftValue\": \"={{ $json.data.textContentHtml }}\",\n              \"rightValue\": \"depense\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"c4c941f5-6579-4f4f-9916-cdd496498760\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2300,\n        -360\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"height\": 360,\n        \"content\": \"## Create an empty google sheet file\\n\\nThat will get your entries from the notes \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3ab60239-85cf-4c84-94d3-659fdfef4316\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        140,\n        -300\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"height\": 360,\n        \"content\": \"## Set the directory Where you put the files\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"49546099-e072-4183-a14e-fff80928920d\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1240,\n        -480\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"height\": 360,\n        \"content\": \"## Filter the files\\n\\nIf you need the content to contain a word, or after a certain date.\\n\\nIf you don't need to filter it, just remove the node\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"195923a2-faf9-40c3-95c0-08fdc078e291\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1720,\n        -500\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 320,\n        \"height\": 560,\n        \"content\": \"## Process each file with AI\\n\\nIf you need the extract some information from the contextq, you can do it here. If you don't need it, just delete the node\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"07b3570a-72cf-480b-b3b8-fb461b57822d\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        80\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 380,\n        \"height\": 300,\n        \"content\": \"## Setup\\n* Export your Google Keep notes (see \\\"how to export your Google Keep notes\\\")\\n\\n- Connect Google Drive, OpenAI, and Google Sheets in n8n.\\n\\n- Set the correct folder path for your notes in the “Search in ‘Keep’ folder” node.\\n\\n- Point the Google Sheet node to your spreadsheet\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"48e1cff2-2748-4d15-91b4-d5ee2f5d9581\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        -500\n      ],\n      \"parameters\": {\n        \"width\": 720,\n        \"height\": 100,\n        \"content\": \"## Contact me\\n### If you need some help with this workflow: Write to me: [thomas@pollup.net](mailto:thomas@pollup.net)\\n\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Filter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If is archived is false\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Put some AI treatment here if you need it\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download the files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add to google sheet\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop every 10 items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop every 10 items\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"If extension is json\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If extension is json\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download the files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If is archived is false\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Put some AI treatment here if you need it\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search in \\\"Keep\\\" folder\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop every 10 items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set the fields for export\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add to google sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search in \\\"Keep\\\" folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Put some AI treatment here if you need it\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set the fields for export\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.extractFromFile",
      "n8n-nodes-base.if",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.googleDrive",
      "@n8n/n8n-nodes-langchain.agent",
      "n8n-nodes-base.set",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.if",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}