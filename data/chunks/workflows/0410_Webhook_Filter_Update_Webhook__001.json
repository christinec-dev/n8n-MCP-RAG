{
  "source": "0410_Webhook_Filter_Update_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"257476b1ef58bf3cb6a46e65fac7ee34a53a5e1a8492d5c6e4da5f87c9b82833\",\n    \"templateId\": \"2105\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"3abfbefa-0a41-4dd2-a79b-99aa02447a6f\",\n      \"name\": \"When clicking \\\"Test workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        380,\n        240\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5233daa6-9b3f-4048-8187-b78decac0bbd\",\n      \"name\": \"Delete ID\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1900,\n        380\n      ],\n      \"parameters\": {\n        \"operation\": \"delete\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1lj15jPOKrfS0-EAnCmths4-SVXwQJ78eBnq8C4DFRx4/edit#gid=0\",\n          \"cachedResultName\": \"Last Member\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $('Setup: Edit this to get started').first().json['Google Sheets URL'] }}\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"9\",\n          \"name\": \"Nik's Google\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 4.2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"d3be48cd-9652-43ea-9bbf-d9d3a6c972ae\",\n      \"name\": \"SaveID\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        2040,\n        380\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"ID\": \"={{ $('Merge').last().json.user.id }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"ID\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"ID\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"ID\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1lj15jPOKrfS0-EAnCmths4-SVXwQJ78eBnq8C4DFRx4/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $('Setup: Edit this to get started').first().json['Google Sheets URL'] }}\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"9\",\n          \"name\": \"Nik's Google\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"a8cb3b10-1143-4467-936c-36ea29c3489a\",\n      \"name\": \"Get ID\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        920,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1lj15jPOKrfS0-EAnCmths4-SVXwQJ78eBnq8C4DFRx4/edit#gid=0\",\n          \"cachedResultName\": \"Last Member\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $('Setup: Edit this to get started').first().json['Google Sheets URL'] }}\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"9\",\n          \"name\": \"Nik's Google\"\n        }\n      },\n      \"typeVersion\": 4.2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"82bdeec7-5ff5-4ed5-8c57-f3007bd7f81e\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1520,\n        240\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"19247435-e0b0-4eac-8807-cb9e4ac532ab\",\n      \"name\": \"Check if we have more members left\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1740,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"11bd5681-d979-40a8-ba0c-8c697532cf0d\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"lt\"\n              },\n              \"leftValue\": \"={{ $input.all().length }}\",\n              \"rightValue\": 100\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"9845c82b-942e-4265-be8c-c4b1a9199b1e\",\n      \"name\": \"We're done\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        2040,\n        160\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"86bf2fe1-22b3-4563-a4b7-b3603f96cada\",\n      \"name\": \"Check if we have an ID\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1100,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"8cabfe61-be13-462f-a8ce-99ba5304fa10\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.ID }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"96324abb-2464-418a-850f-c6f8d3ce209f\",\n      \"name\": \"Filter to only include members with role\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1740,\n        -80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"cac0aeae-ff45-4717-b11e-4e19995649fe\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"gt\"\n              },\n              \"leftValue\": \"={{ $json.roles.filter(role => role === $('Setup: Edit this to get started').first().json['Role ID']).length }}\",\n              \"rightValue\": 0\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"bc012053-c619-479b-8bcb-9325c209d999\",\n      \"name\": \"Get First 100 Members\",\n      \"type\": \"n8n-nodes-base.discord\",\n      \"position\": [\n        1300,\n        260\n      ],\n      \"parameters\": {\n        \"guildId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Setup: Edit this to get started').first().json['Discord ID'] }}\"\n        },\n        \"options\": {\n          \"simplify\": true\n        },\n        \"resource\": \"member\"\n      },\n      \"credentials\": {\n        \"discordBotApi\": {\n          \"id\": \"M7ApR1tTlF4HFHn4\",\n          \"name\": \"Discord Bot account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"7214e807-5a51-438d-9db8-32821307f4ea\",\n      \"name\": \"Get next 100 Members after last ID\",\n      \"type\": \"n8n-nodes-base.discord\",\n      \"position\": [\n        1300,\n        80\n      ],\n      \"parameters\": {\n        \"after\": \"={{ $('Get ID').first().json.ID }}\",\n        \"guildId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Setup: Edit this to get started').first().json['Discord ID'] }}\"\n        },\n        \"options\": {\n          \"simplify\": true\n        },\n        \"resource\": \"member\"\n      },\n      \"credentials\": {\n        \"discordBotApi\": {\n          \"id\": \"M7ApR1tTlF4HFHn4\",\n          \"name\": \"Discord Bot account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"158d3e7a-cc8c-4ab3-b59f-5a2251c79613\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        517,\n        -60.44028103044491\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 350.3145253526498,\n        \"height\": 491.3512880562059,\n        \"content\": \"## Setup\\n1. Add your Google Sheets and Discord credentials.\\n2. Create a Google Sheets document that contains `ID` as a column. We're using this to remember which member we received last.\\n3. Edit the fields in the setup node `Setup: Edit this to get started`. *You can read up on how to get the Discord IDs via [this link](https://www.pythondiscord.com/pages/guides/pydis-guides/contributing/obtaining-discord-ids/).*\\n4. Link to your Discord server in the Discord nodes\\n5. Activate the workflow\\n6. Call the production webhook URL in your browser\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"11926dbb-a5e0-48f9-8453-7dc21ecf6717\",\n      \"name\": \"Setup: Edit this to get started\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        640,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"7c8cce4f-1330-425a-baff-4c40320f2335\",\n              \"name\": \"Role ID\",\n              \"type\": \"string\",\n              \"value\": \"<Enter your roleID here>\"\n            },\n            {\n              \"id\": \"8533b358-d8e6-4eba-9159-f6bdd2e0df65\",\n              \"name\": \"Google Sheets URL\",\n              \"type\": \"string\",\n              \"value\": \"<Enter your Sheets URL here>\"\n            },\n            {\n              \"id\": \"bb87e6f5-def9-4625-818a-ce6ff7b44ed7\",\n              \"name\": \"Discord ID\",\n              \"type\": \"string\",\n              \"value\": \"<Enter your server/guild ID here>\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"334377fc-ddb8-4c0d-9ddc-f6949b98578c\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"disabled\": true,\n      \"position\": [\n        380,\n        420\n      ],\n      \"webhookId\": \"b40c1140-75a7-481e-b8c7-789eef1f8bac\",\n      \"parameters\": {\n        \"path\": \"discord-template\",\n        \"options\": {},\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"8fac2863-a046-4ce7-8391-72486141ea98\",\n      \"name\": \"Send Response\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        1960,\n        -80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"allIncomingItems\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"10677a2d-9bcb-4b51-8cab-a49c7f16a8d7\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1900,\n        -180\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 265.6674473067916,\n        \"content\": \"You can replace this node according to your use case. In my case, I've send a DM to all users\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check if we have more members left\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Filter to only include members with role\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check if we have an ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"SaveID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Setup: Edit this to get started\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Delete ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"SaveID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get First 100 Members\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Check if we have an ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get next 100 Members after last ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Get First 100 Members\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Test workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Setup: Edit this to get started\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Setup: Edit this to get started\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check if we have more members left\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"We're done\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Delete ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get next 100 Members after last ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter to only include members with role\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.if",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.discord",
      "n8n-nodes-base.discord",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.respondToWebhook",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}