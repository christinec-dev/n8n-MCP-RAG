{
  "source": "0553_Code_Schedule_Send_Scheduled.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"name\": \"SFTP zip file content\",\n      \"type\": \"n8n-nodes-base.ftp\",\n      \"position\": [\n        1520,\n        680\n      ],\n      \"parameters\": {\n        \"path\": \"=zigbee_backups/zigbee_backup_{{ new Date().toISOString().replaceAll(':','_') }}.zip\",\n        \"protocol\": \"sftp\",\n        \"operation\": \"upload\"\n      },\n      \"credentials\": {\n        \"sftp\": {\n          \"name\": \"SFTP Zigbee Backups\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"CRON Monday 2:45 am\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        860,\n        440\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"cronExpression\",\n              \"expression\": \"45 2 * * 1\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"name\": \"Send Zigbee2MQTT backup request\",\n      \"type\": \"n8n-nodes-base.mqtt\",\n      \"position\": [\n        1040,\n        440\n      ],\n      \"parameters\": {\n        \"topic\": \"zigbee2mqtt/bridge/request/backup\",\n        \"message\": \"getbackup\",\n        \"options\": {},\n        \"sendInputData\": false\n      },\n      \"credentials\": {\n        \"mqtt\": {\n          \"name\": \"MQTT account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"MQTT Trigger - Backup Response\",\n      \"type\": \"n8n-nodes-base.mqttTrigger\",\n      \"position\": [\n        860,\n        680\n      ],\n      \"parameters\": {\n        \"topics\": \"zigbee2mqtt/bridge/response/backup\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"mqtt\": {\n          \"name\": \"MQTT account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Parse JSON Object from Message Text\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1080,\n        680\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"\\nlet containerObject = JSON.parse($json.message);\\nlet messageObject = containerObject.data;\\nreturn messageObject;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"name\": \"Convert to File - base64 to binary\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        1300,\n        680\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"toBinary\",\n        \"sourceProperty\": \"zip\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"CRON Monday 2:45 am\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Zigbee2MQTT backup request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"MQTT Trigger - Backup Response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse JSON Object from Message Text\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert to File - base64 to binary\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"SFTP zip file content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse JSON Object from Message Text\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert to File - base64 to binary\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.ftp",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.mqtt",
      "n8n-nodes-base.mqttTrigger",
      "n8n-nodes-base.code",
      "n8n-nodes-base.convertToFile"
    ],
    "trigger": "mqtt trigger - backup response"
  }
}