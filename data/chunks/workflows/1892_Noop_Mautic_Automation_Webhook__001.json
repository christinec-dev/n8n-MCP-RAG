{
  "source": "1892_Noop_Mautic_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"jOI7FRhG1FkeqBLG\",\n  \"meta\": {\n    \"instanceId\": \"2872777e468ba025c28c67ebf483f93425a37d897dfc1056e0c00cc75112d703\"\n  },\n  \"name\": \"Wordpress Form to Mautic\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"fcd19b7b-9104-45a6-b741-9497effbd68e\",\n      \"name\": \"LeadData\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1260,\n        420\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"91215336-3a47-4e86-ac6a-1a1862b31e54\",\n              \"name\": \"name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.Nome.toTitleCase() }}\"\n            },\n            {\n              \"id\": \"703f1da3-3f68-4d97-94c9-c22661813d92\",\n              \"name\": \"email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body['E-mail'].toLowerCase() }}\"\n            },\n            {\n              \"id\": \"c9ba65f1-68e9-46ed-9620-365e000aeb6c\",\n              \"name\": \"mobile\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.WhatsApp }}\"\n            },\n            {\n              \"id\": \"3a7266cf-5ff8-4559-985d-2480d0271cbd\",\n              \"name\": \"form\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.form_id }}\"\n            },\n            {\n              \"id\": \"06825dab-fbed-4d85-b91c-5d1c2cf8e934\",\n              \"name\": \"email_valid\",\n              \"type\": \"boolean\",\n              \"value\": \"={{ $json.body['E-mail'].isEmail() }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"9598d8bf-b7f0-4e5e-804c-154f240704ac\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        520,\n        220\n      ],\n      \"parameters\": {\n        \"width\": 471,\n        \"height\": 370,\n        \"content\": \"## Receive Data from Wordpress Form\\n\\nYou can customize your form fields in the way that best suits your marketing campaigns.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"620d1873-3881-4086-8bd3-e26e07cab88c\",\n      \"name\": \"WordpressForm\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        660,\n        420\n      ],\n      \"webhookId\": \"917366ee-14a8-4fef-9f0b-6638cdc35fad\",\n      \"parameters\": {\n        \"path\": \"917366ee-14a8-4fef-9f0b-6638cdc35fad\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"8f6bed52-1214-46fa-8e8a-c648bbe6e52a\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1040,\n        220\n      ],\n      \"parameters\": {\n        \"width\": 551,\n        \"height\": 376,\n        \"content\": \"## Normalize Data\\n\\nLet's separate the data we are going to use and remove everything that is unnecessary for the workflow. This way we avoid errors and optimize the use of N8N resources.\\n\\nYou can use N8N expression extensions to format and validate your data received by N8N.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"975ec9ae-d64d-42e6-b665-82296825203d\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2240,\n        220\n      ],\n      \"parameters\": {\n        \"width\": 772.5,\n        \"height\": 376.25,\n        \"content\": \"## Checks if the email can be valid\\n\\nChecks if the email can be valid to create the contact in Mautic with the correct registration information\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a2f241c2-6894-4c17-a1bd-88c0c9bc88cb\",\n      \"name\": \"CheckEmailValid\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2420,\n        420\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"bcbdaa12-c4ec-4fba-85f8-ddfe5eed8f42\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('LeadData').item.json.email_valid }}\",\n              \"rightValue\": \"=\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"26a0eab3-2097-4b91-8a79-8fc2934f3ebe\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1640,\n        221.25\n      ],\n      \"parameters\": {\n        \"width\": 555,\n        \"height\": 376.25,\n        \"content\": \"## Create Contact on Mautic\\n\\nCreate a contact in Mautic Let's create the contact in Mautic where you will map the fields you need.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"16a62af3-f9cb-4a12-b168-a2c6c5ff6c78\",\n      \"name\": \"CreateContactMautic\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        1860,\n        420\n      ],\n      \"parameters\": {\n        \"email\": \"={{ $json.email }}\",\n        \"options\": {},\n        \"firstName\": \"={{ $json.name }}\",\n        \"additionalFields\": {\n          \"mobile\": \"={{ $json.mobile }}\"\n        }\n      },\n      \"credentials\": {\n        \"mauticApi\": {\n          \"id\": \"dNmbC6ievGKXw0ww\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"340eb2d8-c2c0-4a31-822e-6fda2c00f4ea\",\n      \"name\": \"LeadMauticDNC\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        2740,\n        380\n      ],\n      \"parameters\": {\n        \"contactId\": \"={{ $json.id }}\",\n        \"operation\": \"editDoNotContactList\",\n        \"additionalFields\": {\n          \"reason\": \"3\",\n          \"comments\": \"Did not pass basic email validation\"\n        }\n      },\n      \"credentials\": {\n        \"mauticApi\": {\n          \"id\": \"dNmbC6ievGKXw0ww\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8b773a35-2b4b-4d50-aeed-bf5fe8e6e7d1\",\n      \"name\": \"End\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        3140,\n        380\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {\n    \"WordpressForm\": [\n      {\n        \"json\": {\n          \"body\": {\n            \"Nome\": \"Luiz Eduardo\",\n            \"E-mail\": \"myemail@gmail.com\",\n            \"form_id\": \"1b46cae\",\n            \"WhatsApp\": \"5512992444000\",\n            \"form_name\": \"Contact Form\"\n          },\n          \"query\": {},\n          \"params\": {},\n          \"headers\": {\n            \"host\": \"data.promovaweb.com\",\n            \"accept\": \"*/*\",\n            \"user-agent\": \"WordPress/6.4.3; https://pages.promovaweb.com\",\n            \"content-type\": \"application/x-www-form-urlencoded\",\n            \"content-length\": \"106\",\n            \"accept-encoding\": \"deflate, gzip, br\",\n            \"x-forwarded-for\": \"35.212.38.239\",\n            \"x-forwarded-host\": \"data.promovaweb.com\",\n            \"x-forwarded-port\": \"443\",\n            \"x-forwarded-proto\": \"https\",\n            \"x-forwarded-server\": \"004c98fc4927\"\n          }\n        }\n      }\n    ]\n  },\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"28d5987d-4623-4275-bb41-1c015ee32b61\",\n  \"connections\": {\n    \"LeadData\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"CreateContactMautic\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"LeadMauticDNC\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"End\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"WordpressForm\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"LeadData\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"CheckEmailValid\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"LeadMauticDNC\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"CreateContactMautic\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"CheckEmailValid\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.if",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.mautic",
      "n8n-nodes-base.mautic",
      "n8n-nodes-base.noOp"
    ],
    "trigger": null
  }
}