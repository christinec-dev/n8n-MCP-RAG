{
  "source": "0729_Schedule_Stickynote_Send_Scheduled.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"ba168090-4727-4b72-a0cf-3f15ef3a9f17\",\n      \"name\": \"Send Email\",\n      \"type\": \"n8n-nodes-base.emailSend\",\n      \"position\": [\n        580,\n        360\n      ],\n      \"parameters\": {\n        \"text\": \"=System resources are above the threshold.\\n\\nCPU: {{ $json.CPU.toNumber().round(2) }}%\\nRAM: {{ $json.RAM.toNumber().round(2) }}%\\nDisk: {{ $json.Disk.toNumber().round(2) }}%\",\n        \"options\": {},\n        \"subject\": \"System Resource Alert\",\n        \"toEmail\": \"change@me.com\",\n        \"fromEmail\": \"change@me.com\"\n      },\n      \"credentials\": {\n        \"smtp\": {\n          \"id\": \"EuaQtRc5t8pWPY9b\",\n          \"name\": \"SMTP account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"79afc30f-c3db-4ba1-8f0d-a1000b5e0abe\",\n      \"name\": \"Check RAM usage\",\n      \"type\": \"n8n-nodes-base.ssh\",\n      \"position\": [\n        160,\n        40\n      ],\n      \"parameters\": {\n        \"command\": \"free | awk '/Mem:/ {printf \\\"%.2f\\\", (1 - $7/$2) * 100}'\"\n      },\n      \"credentials\": {\n        \"sshPassword\": {\n          \"id\": \"VMCCUQkaq46q3CpB\",\n          \"name\": \"SSH Password account\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d09aa314-8d60-42a8-9933-d7e8d73e2c7d\",\n      \"name\": \"Check Disk usage\",\n      \"type\": \"n8n-nodes-base.ssh\",\n      \"position\": [\n        380,\n        40\n      ],\n      \"parameters\": {\n        \"command\": \"df -h | awk '$NF==\\\"/\\\"{printf \\\"%.2f\\\", $5}'\"\n      },\n      \"credentials\": {\n        \"sshPassword\": {\n          \"id\": \"VMCCUQkaq46q3CpB\",\n          \"name\": \"SSH Password account\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bc6a0df2-f4cc-484a-ac39-c92e8795175e\",\n      \"name\": \"Check CPU usage\",\n      \"type\": \"n8n-nodes-base.ssh\",\n      \"position\": [\n        580,\n        40\n      ],\n      \"parameters\": {\n        \"command\": \"top -bn 1 | grep \\\"Cpu(s)\\\" | sed \\\"s/.*, *\\\\([0-9.]*\\\\)%* id.*/\\\\1/\\\" | awk '{print 100 - $1}'\"\n      },\n      \"credentials\": {\n        \"sshPassword\": {\n          \"id\": \"VMCCUQkaq46q3CpB\",\n          \"name\": \"SSH Password account\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"de0df734-1e4a-4bf0-9f7d-d60b52e06f48\",\n      \"name\": \"Merge check results\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -40,\n        380\n      ],\n      \"parameters\": {\n        \"mode\": \"combineBySql\",\n        \"query\": \"SELECT input1.stdout as CPU, input2.stdout as Disk, input3.stdout as RAM FROM input1 LEFT JOIN input2 ON input1.name = input2.id LEFT JOIN input3 ON input1.name = input3.id\",\n        \"numberInputs\": 3\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"7b7d6c0a-3f46-48b3-aa1d-191839540196\",\n      \"name\": \"Check results against thresholds\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        240,\n        380\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{ $json.CPU }}\",\n              \"value2\": 80,\n              \"operation\": \"largerEqual\"\n            },\n            {\n              \"value1\": \"={{ $json.Disk }}\",\n              \"value2\": 80,\n              \"operation\": \"largerEqual\"\n            },\n            {\n              \"value1\": \"={{ $json.RAM }}\",\n              \"value2\": 80,\n              \"operation\": \"largerEqual\"\n            }\n          ]\n        },\n        \"combineOperation\": \"any\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"92331c38-cab8-4719-8746-6fb341954516\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        560,\n        260\n      ],\n      \"parameters\": {\n        \"width\": 320,\n        \"height\": 280,\n        \"content\": \"## Update email addresses\\nUpdate From and To email addresses in this node to receive notifications\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3117fdbc-fde9-469b-bd47-59f45c349162\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -260,\n        -120\n      ],\n      \"parameters\": {\n        \"width\": 320,\n        \"height\": 260,\n        \"content\": \"## Check VPS resource usage every 15 minutes\\nThis workflow checks VPS CPU, RAM and Disk usage every 15 minutes and if any of it exceeds 80% will inform you by email\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"45b4c33a-8f02-4535-b67f-56d9d0aaf2ae\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        180,\n        260\n      ],\n      \"parameters\": {\n        \"width\": 360,\n        \"height\": 280,\n        \"content\": \"## Update threshold\\nIf needed, you can increase/decrease the 80% threshold in this node individually per resource \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0bf83ea8-b1c4-40f7-8a60-39f765e8ec2c\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -40,\n        40\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\",\n              \"minutesInterval\": 15\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Check CPU usage\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge check results\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check RAM usage\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Disk usage\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge check results\",\n            \"type\": \"main\",\n            \"index\": 2\n          }\n        ]\n      ]\n    },\n    \"Check Disk usage\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check CPU usage\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge check results\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check RAM usage\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge check results\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check results against thresholds\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check results against thresholds\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.emailSend",
      "n8n-nodes-base.ssh",
      "n8n-nodes-base.ssh",
      "n8n-nodes-base.ssh",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.if",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.scheduleTrigger"
    ],
    "trigger": "schedule trigger"
  }
}