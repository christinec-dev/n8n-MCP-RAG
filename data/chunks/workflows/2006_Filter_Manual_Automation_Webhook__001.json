{
  "source": "2006_Filter_Manual_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"wwvUsosYUyMfpGbB\",\n  \"meta\": {\n    \"instanceId\": \"5b860a91d7844b5237bb51cc58691ca8c3dc5b576f42d4d6bbedfb8d43d58ece\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"ProspectLens company research\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"fd68acdf-ed1e-4f69-a046-fcdaa626acca\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        720,\n        400\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d4e4875a-e41f-4248-937a-a4658c23eb5e\",\n      \"name\": \"Filter\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"notes\": \"Only process rows which have empty processed_at field\",\n      \"position\": [\n        1160,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"looseTypeValidation\": true\n        },\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"5aca0836-4797-41d3-8094-f3a170e5a3c9\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"empty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.processed_at }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e12c1846-dd38-414c-8e2e-8d0834ad8668\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        880,\n        20\n      ],\n      \"parameters\": {\n        \"width\": 725,\n        \"height\": 316.25,\n        \"content\": \"## Company research via Google Sheets and ProspectLens\\n\\nGet your API key:\\nhttps://apiroad.net/marketplace/apis/prospectlens\\n\\nCopy Google Sheet template:\\nhttps://docs.google.com/spreadsheets/d/1S2S18hvfBoFsUgRYPyizH6uv7WwI218frvOqu2bV3wk/edit?gid=0#gid=0\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b0385041-92c4-41a4-b0e8-9f2a7cc6fd56\",\n      \"name\": \"Save company data into Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        2000,\n        380\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"data\": \"={{ JSON.stringify($json.data).substr(0, 2000) }}\",\n            \"name\": \"={{ $json.data.properties.title }}\",\n            \"funds\": \"={{ $json.data.info.funding_rounds_summary.funding_total.value }}\",\n            \"domain\": \"={{ $('Filter').item.json.domain }}\",\n            \"traffic\": \"={{ $json.data.info.semrush_summary.semrush_visits_latest_month }}\",\n            \"location\": \"={{ $json.data.info.semrush_location_list[0].location_identifiers[0].value }}\",\n            \"description\": \"={{ $json.data.properties.short_description }}\",\n            \"domain_name\": \"={{ $json.data.info.company_about_fields.website.hostname }}\",\n            \"processed_at\": \"={{ (new Date).toISOString()  }}\",\n            \"year_founded\": \"={{ $json.data.info.overview_fields_extended.founded_on.value }}\",\n            \"funding_round\": \"={{ $json.data.info.funding_rounds_summary.last_funding_type }}\",\n            \"last_funding_at\": \"={{ $json.data.info.funding_rounds_summary.last_funding_at }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"domain\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"domain\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"description\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"description\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"processed_at\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"processed_at\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"data\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"data\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"domain_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"domain_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"traffic\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"traffic\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"location\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"location\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"funds\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"funds\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"year_founded\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"year_founded\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"funding_round\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"funding_round\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"last_funding_at\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"last_funding_at\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"row_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"row_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"domain\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1X2hKT8cD6fTQUdALg91EwQDCM58YNY4pHe-7rmESzlk/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1X2hKT8cD6fTQUdALg91EwQDCM58YNY4pHe-7rmESzlk\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1X2hKT8cD6fTQUdALg91EwQDCM58YNY4pHe-7rmESzlk/edit?usp=drivesdk\",\n          \"cachedResultName\": \"n8n_prospectlens\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"vowsrhMIxy2PRDbH\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.4\n    },\n    {\n      \"id\": \"e048f8d0-57c2-43ac-bedf-1a517b203df3\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"notes\": \"Used to keep low concurrency (1 thread)\",\n      \"position\": [\n        1400,\n        380\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"b6898b5e-dba5-425d-8f9b-d996dcb6cff2\",\n      \"name\": \"ProspectLens API call\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"ProspectLens API\",\n      \"onError\": \"continueErrorOutput\",\n      \"maxTries\": 2,\n      \"position\": [\n        1680,\n        380\n      ],\n      \"parameters\": {\n        \"url\": \"=https://prospectlens.apiroad.net/lookup?domain={{ $json.domain }}\",\n        \"options\": {\n          \"response\": {\n            \"response\": {}\n          }\n        },\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"tcCkO83Qn399Hizf\",\n          \"name\": \"APIRoad auth\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"retryOnFail\": true,\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"4c625e34-728c-49ae-8e22-4b4a343354cb\",\n      \"name\": \"Get all rows from Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        940,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1X2hKT8cD6fTQUdALg91EwQDCM58YNY4pHe-7rmESzlk/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1X2hKT8cD6fTQUdALg91EwQDCM58YNY4pHe-7rmESzlk\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1X2hKT8cD6fTQUdALg91EwQDCM58YNY4pHe-7rmESzlk/edit?usp=drivesdk\",\n          \"cachedResultName\": \"n8n_prospectlens\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"vowsrhMIxy2PRDbH\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.4\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"ea844f9f-c06e-4a0c-98db-a670709c2025\",\n  \"connections\": {\n    \"Filter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"ProspectLens API call\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"ProspectLens API call\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save company data into Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all rows from Sheets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save company data into Sheets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all rows from Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.googleSheets"
    ],
    "trigger": null
  }
}