{
  "source": "0427_Stopanderror_Wait_Monitor_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"2edac0e72822bb0462c05ce3b5a939f685ded652d02e9a767d1afa775988460e\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"0788a3db-20c3-43b6-956a-394f688f7763\",\n      \"name\": \"When clicking \\\"Execute Workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        360,\n        440\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"51460fab-a53c-46cd-a484-d2c038cd102d\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        360,\n        600\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"triggerAtHour\": 1\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5326416c-5715-4cc7-acfd-38a32f864bfb\",\n      \"name\": \"loop\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        1360,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 1\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"fb0ca9f7-ff49-4a4b-9575-42b80594737e\",\n      \"name\": \"sitemap_set\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        540,\n        600\n      ],\n      \"parameters\": {\n        \"url\": \"https://bushidogym.fr/sitemap.xml\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"150b47fe-f1c8-4dcb-b187-b459ee50c316\",\n      \"name\": \"sitemap_convert\",\n      \"type\": \"n8n-nodes-base.xml\",\n      \"position\": [\n        700,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"trim\": true,\n          \"normalize\": true,\n          \"mergeAttrs\": true,\n          \"ignoreAttrs\": true,\n          \"normalizeTags\": true\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"83cd19d6-81e7-46af-83a3-090cdd66b420\",\n      \"name\": \"sitemap_parse\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        920,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"destinationFieldName\": \"url\"\n        },\n        \"fieldToSplitOut\": \"urlset.url\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"95c784d1-5756-4bf0-b2e5-e25a84c01b72\",\n      \"name\": \"url_set\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1140,\n        600\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"url\",\n              \"value\": \"={{ $json.url.loc }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"43b62667-a37e-4bd1-bbb9-7a20a0914c97\",\n      \"name\": \"url_index\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1560,\n        580\n      ],\n      \"parameters\": {\n        \"url\": \"https://indexing.googleapis.com/v3/urlNotifications:publish\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"url\",\n              \"value\": \"={{ $json.url }}\"\n            },\n            {\n              \"name\": \"type\",\n              \"value\": \"URL_UPDATED\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"googleApi\"\n      },\n      \"credentials\": {\n        \"googleApi\": {\n          \"id\": \"RywvL8c7V2ZtBvdK\",\n          \"name\": \"850737154850-compute@developer.gserviceaccount.com\"\n        }\n      },\n      \"typeVersion\": 4,\n      \"continueOnFail\": true,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"39ae8c01-64e4-44f5-be43-d5c402b00739\",\n      \"name\": \"index_check\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1780,\n        580\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json.urlNotificationMetadata.latestUpdate.type }}\",\n              \"value2\": \"URL_UPDATED\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c4bf483b-af4b-451e-974b-d4abeb2c70f6\",\n      \"name\": \"wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        2040,\n        560\n      ],\n      \"webhookId\": \"b0df1fe8-e509-4d0c-a486-f523226621e2\",\n      \"parameters\": {\n        \"unit\": \"seconds\",\n        \"amount\": 2\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"455955a8-c767-453b-805c-77c5b7d2e9bc\",\n      \"name\": \"Stop and Error\",\n      \"type\": \"n8n-nodes-base.stopAndError\",\n      \"position\": [\n        2040,\n        840\n      ],\n      \"parameters\": {\n        \"errorMessage\": \"You have reached the Google Indexing API limit (200/day by default)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"275abdd5-be5d-458f-bc75-d9f72824c49f\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        340,\n        180\n      ],\n      \"parameters\": {\n        \"width\": 482.7089688834655,\n        \"height\": 221.39109212934721,\n        \"content\": \"## Simple indexing workflow using the Google Indexing API\\n\\nThis workflow is the simplest indexing workflow. It simply extracts a sitemap, converts it to a JSON, and loops through each URL. It will output an error if your quota is reached.\\n\\n*Joachim*\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"loop\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"url_index\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"loop\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"url_set\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"loop\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"url_index\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"index_check\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"index_check\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Stop and Error\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"sitemap_set\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"sitemap_convert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"sitemap_parse\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"url_set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"sitemap_convert\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"sitemap_parse\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"sitemap_set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Execute Workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"sitemap_set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.xml",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.if",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.stopAndError",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}