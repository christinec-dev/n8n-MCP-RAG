{
  "source": "0444_Datetime_Todoist_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"a39274d0-6709-4e66-95a7-8c0fc4c0e8b1\",\n      \"name\": \"if after unsnooze date\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1840,\n        500\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"dateTime\": [\n            {\n              \"value1\": \"={{ DateTime.now() }}\",\n              \"value2\": \"={{ $json.unsnoozeDate }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a4e2d915-4714-41ea-8995-76b7198df675\",\n      \"name\": \"at 5am\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        780,\n        500\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"triggerAtHour\": 5\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"7ad8e2f6-0499-4537-8325-9dffc2d7ea3c\",\n      \"name\": \"every 5 min\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        780,\n        280\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"370f380a-923b-4e4f-b025-9e7723662083\",\n      \"name\": \"Get snoozed tasks\",\n      \"type\": \"n8n-nodes-base.todoist\",\n      \"position\": [\n        980,\n        500\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"projectId\": \"2325216129\"\n        },\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"todoistApi\": {\n          \"id\": \"1\",\n          \"name\": \"Todoist account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2,\n      \"waitBetweenTries\": 5000\n    },\n    {\n      \"id\": \"f239a87d-0229-4964-bca0-75bbf371626b\",\n      \"name\": \"if task is not a subtask\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1200,\n        500\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{ $json.parent_id }}\",\n              \"operation\": \"isEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b9b29371-254f-45d1-846c-c2db7efae907\",\n      \"name\": \"If task has due date\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1420,\n        500\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{ !$json.due }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1d1fe683-68b5-4a9c-af29-b20a01c2473b\",\n      \"name\": \"Get date to unsnooze\",\n      \"type\": \"n8n-nodes-base.dateTime\",\n      \"position\": [\n        1640,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"includeInputFields\": true\n        },\n        \"duration\": 3,\n        \"magnitude\": \"={{ $json.due.date }}\",\n        \"operation\": \"subtractFromDate\",\n        \"outputFieldName\": \"unsnoozeDate\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"9e0e3241-d2fd-4bc4-9273-aa5237cbeaa4\",\n      \"name\": \"Get inbox tasks to snooze\",\n      \"type\": \"n8n-nodes-base.todoist\",\n      \"position\": [\n        980,\n        280\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"projectId\": \"938017196\"\n        },\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"todoistApi\": {\n          \"id\": \"1\",\n          \"name\": \"Todoist account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2,\n      \"waitBetweenTries\": 5000\n    },\n    {\n      \"id\": \"90e83f5f-dd9f-431d-92b5-cd52a792dee2\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1220,\n        220\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 390.83694011071975,\n        \"height\": 182.09360845495712,\n        \"content\": \"### üë®‚Äçüé§ Setup\\n1. Add your Todoist creds\\n2. Create a Todoist project called `snoozed`\\n3. Set the project ids in the relevant nodes\\n4. Add due dates to your tasks in Inbox. Watch them disappear to `snoozed`. Set their date to tomorrow, watch it return to inbox.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c7a6b401-f518-45ba-a185-c8bf0cd92394\",\n      \"name\": \"Set inbox project id\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2060,\n        420\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"target_project_id\",\n              \"type\": \"numberValue\",\n              \"numberValue\": \"2329427682\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"22982318-5036-490a-ba3c-d40db8c3dc89\",\n      \"name\": \"If not same project\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        2280,\n        500\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{ parseInt($json.target_project_id) }}\",\n              \"value2\": \"={{ parseInt($json.project_id) }}\",\n              \"operation\": \"notEqual\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"62009b22-d0e3-40a0-b7f9-88dc2ec02284\",\n      \"name\": \"Set args to move\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2480,\n        500\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"args\",\n              \"type\": \"objectValue\",\n              \"objectValue\": \"={ id: {{ $json.id }}, project_id: {{ $json.target_project_id }} }\"\n            },\n            {\n              \"name\": \"type\",\n              \"stringValue\": \"item_move\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"4d628334-12a3-451f-b49e-ce749241e411\",\n      \"name\": \"Generate unique uuid for move\",\n      \"type\": \"n8n-nodes-base.crypto\",\n      \"position\": [\n        2680,\n        500\n      ],\n      \"parameters\": {\n        \"action\": \"generate\",\n        \"dataPropertyName\": \"uuid\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8b6bf7ae-6d15-473d-8f00-5aaa4ea7d2f3\",\n      \"name\": \"Merge all items into a list\",\n      \"type\": \"n8n-nodes-base.itemLists\",\n      \"position\": [\n        2880,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\",\n        \"operation\": \"concatenateItems\",\n        \"destinationFieldName\": \"commands\"\n      },\n      \"typeVersion\": 3.1\n    },\n    {\n      \"id\": \"7882c3c6-0d24-4fe2-99b6-3e878e4d0dea\",\n      \"name\": \"Move the tasks\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        3080,\n        500\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.todoist.com/sync/v9/sync\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"form-urlencoded\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"commands\",\n              \"value\": \"={{ JSON.stringify($json.commands) }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"todoistApi\"\n      },\n      \"credentials\": {\n        \"todoistApi\": {\n          \"id\": \"1\",\n          \"name\": \"Todoist account\"\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"259c337b-38f6-4c2a-8e23-9fe5d154a2aa\",\n      \"name\": \"Set snoozed project id\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2060,\n        600\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"target_project_id\",\n              \"type\": \"numberValue\",\n              \"numberValue\": \"2329427688\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"2795502f-cdeb-4b94-a6fe-ef3657bdc091\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2080,\n        780\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 202,\n        \"height\": 100,\n        \"content\": \"üëÜ Set `snoozed` project id here. You can find it in the URL. \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ef6c23d5-386e-48c2-a2ed-eea67fe1f117\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2060,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 202,\n        \"height\": 100,\n        \"content\": \"üëáüèΩ Set `inbox` project id here. You can find it in the URL. \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6727670f-b340-47cd-b86a-632ef29e2135\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1660,\n        660\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 202,\n        \"height\": 100,\n        \"content\": \"üëÜüèΩ Adjust here the timeline to return tasks to Inbox (here set to 3 days before due date)\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"at 5am\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get snoozed tasks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"every 5 min\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get inbox tasks to snooze\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set args to move\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate unique uuid for move\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get snoozed tasks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"if task is not a subtask\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If not same project\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set args to move\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get date to unsnooze\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"if after unsnooze date\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If task has due date\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get date to unsnooze\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set inbox project id\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If not same project\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set snoozed project id\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If not same project\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"if after unsnooze date\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set inbox project id\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Set snoozed project id\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"if task is not a subtask\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If task has due date\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get inbox tasks to snooze\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"if task is not a subtask\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge all items into a list\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Move the tasks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate unique uuid for move\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge all items into a list\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.if",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.todoist",
      "n8n-nodes-base.if",
      "n8n-nodes-base.if",
      "n8n-nodes-base.dateTime",
      "n8n-nodes-base.todoist",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.set",
      "n8n-nodes-base.crypto",
      "n8n-nodes-base.itemLists",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}