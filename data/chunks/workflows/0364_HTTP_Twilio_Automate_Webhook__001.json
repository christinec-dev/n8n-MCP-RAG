{
  "source": "0364_HTTP_Twilio_Automate_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"200\",\n  \"name\": \"BillBot\",\n  \"nodes\": [\n    {\n      \"name\": \"Set relevant data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        780,\n        460\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Category\",\n              \"value\": \"={{$node[\\\"Parse details from receipt\\\"].json[\\\"predictions\\\"][0][\\\"category\\\"][\\\"value\\\"]}}\"\n            },\n            {\n              \"name\": \"Date\",\n              \"value\": \"={{$node[\\\"Parse details from receipt\\\"].json[\\\"predictions\\\"][0][\\\"date\\\"][\\\"iso\\\"]}}\"\n            },\n            {\n              \"name\": \"Merchant\",\n              \"value\": \"={{$node[\\\"Parse details from receipt\\\"].json[\\\"predictions\\\"][0][\\\"merchant\\\"][\\\"name\\\"]}}\"\n            },\n            {\n              \"name\": \"Time\",\n              \"value\": \"={{$node[\\\"Parse details from receipt\\\"].json[\\\"predictions\\\"][0][\\\"time\\\"][\\\"iso\\\"]}}\"\n            },\n            {\n              \"name\": \"Amount\",\n              \"value\": \"={{$node[\\\"Parse details from receipt\\\"].json[\\\"predictions\\\"][0][\\\"total\\\"][\\\"amount\\\"]}}\"\n            },\n            {\n              \"name\": \"Currency\",\n              \"value\": \"={{$node[\\\"Parse details from receipt\\\"].json[\\\"predictions\\\"][0][\\\"locale\\\"][\\\"currency\\\"]}}\"\n            },\n            {\n              \"name\": \"Added by\",\n              \"value\": \"={{$node[\\\"Get receipts from bot\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"first_name\\\"]}} {{$node[\\\"Get receipts from bot\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"last_name\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Send confirmation\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1180,\n        460\n      ],\n      \"parameters\": {\n        \"text\": \"=âœ… Bill of {{$node[\\\"Set relevant data\\\"].json[\\\"Amount\\\"]}} {{$node[\\\"Set relevant data\\\"].json[\\\"Currency\\\"]}} from {{$node[\\\"Set relevant data\\\"].json[\\\"Merchant\\\"]}}, dated {{$node[\\\"Set relevant data\\\"].json[\\\"Date\\\"]}} at {{$node[\\\"Set relevant data\\\"].json[\\\"Time\\\"]}}. Category was {{$node[\\\"Set relevant data\\\"].json[\\\"Category\\\"]}}.\",\n        \"chatId\": \"={{$node[\\\"Get receipts from bot\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"]}}\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Get receipts from bot\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        380,\n        460\n      ],\n      \"webhookId\": \"ef81fe75-10c8-40c3-8bea-d65648556705\",\n      \"parameters\": {\n        \"updates\": [\n          \"*\"\n        ],\n        \"additionalFields\": {\n          \"download\": true\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Parse details from receipt\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        580,\n        460\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.mindee.net/products/expense_receipts/v2/predict\",\n        \"options\": {\n          \"bodyContentType\": \"multipart-form-data\"\n        },\n        \"requestMethod\": \"POST\",\n        \"authentication\": \"headerAuth\",\n        \"jsonParameters\": true,\n        \"sendBinaryData\": true\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Add to expense record\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        980,\n        460\n      ],\n      \"parameters\": {\n        \"range\": \"A:G\",\n        \"options\": {},\n        \"sheetId\": \"\",\n        \"operation\": \"append\",\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Send SMS notification\",\n      \"type\": \"n8n-nodes-base.twilio\",\n      \"position\": [\n        1380,\n        460\n      ],\n      \"parameters\": {\n        \"to\": \"\",\n        \"from\": \"\",\n        \"message\": \"=A receipt worth {{$node[\\\"Set relevant data\\\"].json[\\\"Amount\\\"]}} {{$node[\\\"Set relevant data\\\"].json[\\\"Currency\\\"]}} was submitted by {{$node[\\\"Set relevant data\\\"].json[\\\"Added by\\\"]}} and has been added to the following spreadsheet:\\nhttps://docs.google.com/spreadsheets/d/{{$node[\\\"Add to expense record\\\"].parameter[\\\"sheetId\\\"]}}/\"\n      },\n      \"credentials\": {\n        \"twilioApi\": \"Twilio Programmable SMS\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Send confirmation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send SMS notification\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set relevant data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add to expense record\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add to expense record\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send confirmation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get receipts from bot\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse details from receipt\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse details from receipt\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set relevant data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.set",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegramTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.twilio"
    ],
    "trigger": null
  }
}