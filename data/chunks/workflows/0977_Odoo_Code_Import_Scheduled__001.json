{
  "source": "0977_Odoo_Code_Import_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"4aKofiCShqdDSsIS\",\n  \"meta\": {\n    \"instanceId\": \"05578cf7a897ec6100e0a45f52bd1e8b9130ac799ebd6a9ebe3531f9bd89fc01\",\n    \"templateId\": \"3181\"\n  },\n  \"name\": \"Import Odoo Product Images from Google Drive\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"690beab3-2e3a-4426-9e90-fde834cb2c72\",\n      \"name\": \"Filter Images\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        820,\n        340\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"or\",\n          \"conditions\": [\n            {\n              \"id\": \"bb0df6d8-525b-4054-9340-4400ddd40c81\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"endsWith\"\n              },\n              \"leftValue\": \"={{ $json.name }}\",\n              \"rightValue\": \".png\"\n            },\n            {\n              \"id\": \"8ebcb3fb-dd64-40f6-94c9-5b13021847d9\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"endsWith\"\n              },\n              \"leftValue\": \"={{ $json.name }}\",\n              \"rightValue\": \".jpg\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6fec7062-3f85-4ce0-86cd-6ac4f1169192\",\n      \"name\": \"Find Files\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        600,\n        340\n      ],\n      \"parameters\": {\n        \"filter\": {\n          \"driveId\": {\n            \"__rl\": true,\n            \"mode\": \"list\",\n            \"value\": \"0AGL-iqy2wxM8Uk9PVA\",\n            \"cachedResultUrl\": \"https://drive.google.com/drive/folders/0AGL-iqy2wxM8Uk9PVA\",\n            \"cachedResultName\": \"Middleware\"\n          },\n          \"folderId\": {\n            \"__rl\": true,\n            \"mode\": \"list\",\n            \"value\": \"1VG-7mRW8tsmJelW5FTeoj2jXeObMvan6\",\n            \"cachedResultUrl\": \"https://drive.google.com/drive/folders/1VG-7mRW8tsmJelW5FTeoj2jXeObMvan6\",\n            \"cachedResultName\": \"input\"\n          }\n        },\n        \"options\": {},\n        \"resource\": \"fileFolder\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"HTm4uAxSPW7DoxGv\",\n          \"name\": \"Google Drive Administrator\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"10eb5837-9808-4e71-9bfd-82eb788e036b\",\n      \"name\": \"Decorate Images\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1040,\n        340\n      ],\n      \"parameters\": {\n        \"jsCode\": \"for (const item of $input.all()) {\\n    let parts = item.json.name.split('.').slice(0, -1).join('.').split('_');\\n    item.json.model = parts[0];\\n    item.json.sku = parts.slice(1).join('_');\\n}\\n\\nreturn $input.all();\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"dc2d4e62-2b34-4f07-8ae9-aa2d7b169085\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1260,\n        40\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"e1d26dbe-1855-4d62-8061-43a7d56c2705\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.model }}\",\n                    \"rightValue\": \"template\"\n                  }\n                ]\n              }\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"b7c889f6-d84a-4573-b7ba-35e51405bf94\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.model }}\",\n                    \"rightValue\": \"product\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"1c7d98b0-ea85-4841-8764-e3d3b8369a11\",\n      \"name\": \"Move Images\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1260,\n        540\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.id }}\"\n        },\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"0AAaxIiOTPGeCUk9PVA\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive/folders/0AAaxIiOTPGeCUk9PVA\",\n          \"cachedResultName\": \"Middleware\"\n        },\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1NqxzbwarAZ1BtkoyM-T8NNcO5m_cmO1V\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive/folders/1NqxzbwarAZ1BtkoyM-T8NNcO5m_cmO1V\",\n          \"cachedResultName\": \"done\"\n        },\n        \"operation\": \"move\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"HTm4uAxSPW7DoxGv\",\n          \"name\": \"Google Drive Administrator\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"29444363-00f7-427c-b377-e3c453e80e8f\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        380,\n        440\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\",\n              \"minutesInterval\": 10\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"fc675661-ee5c-47d6-abe5-40c15f92bcda\",\n      \"name\": \"Sum Images\",\n      \"type\": \"n8n-nodes-base.summarize\",\n      \"position\": [\n        1480,\n        540\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToSummarize\": {\n          \"values\": [\n            {\n              \"field\": \"id\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"287704cf-b3bb-4ac7-9e37-5577eb33df8f\",\n      \"name\": \"Announce\",\n      \"type\": \"n8n-nodes-base.googleChat\",\n      \"position\": [\n        1700,\n        540\n      ],\n      \"webhookId\": \"a1b21478-fbd9-49e7-9e0c-cdf86048d038\",\n      \"parameters\": {\n        \"spaceId\": \"spaces/AAAAt6xI1aY\",\n        \"messageUi\": {\n          \"text\": \"=Product images done onto Google Drive (total : {{ $json.count_id }}).\"\n        },\n        \"authentication\": \"oAuth2\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"googleChatOAuth2Api\": {\n          \"id\": \"Gv5dSRXyRjQcwRph\",\n          \"name\": \"Google Chat Administrator\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e41ebdd1-3841-482b-864d-6534db92ba74\",\n      \"name\": \"Find Templates\",\n      \"type\": \"n8n-nodes-base.odoo\",\n      \"position\": [\n        1480,\n        -60\n      ],\n      \"parameters\": {\n        \"limit\": 1,\n        \"options\": {\n          \"fieldsList\": [\n            \"id\"\n          ]\n        },\n        \"resource\": \"custom\",\n        \"operation\": \"getAll\",\n        \"filterRequest\": {\n          \"filter\": [\n            {\n              \"value\": \"={{ $json.sku }}\",\n              \"fieldName\": \"default_code\"\n            }\n          ]\n        },\n        \"customResource\": \"product.template\"\n      },\n      \"credentials\": {\n        \"odooApi\": {\n          \"id\": \"eTbK0f2MmAZsrOtT\",\n          \"name\": \"Odoo AArtIntelligent\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"86e0145e-9701-4af4-a5a6-d9f4f77d6115\",\n      \"name\": \"Download Images Templates\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1700,\n        -60\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Filter Images').item.json.id }}\"\n        },\n        \"options\": {\n          \"binaryPropertyName\": \"data\"\n        },\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"HTm4uAxSPW7DoxGv\",\n          \"name\": \"Google Drive Administrator\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"6132ae9b-d82d-4aa5-9f42-8a0e975b5485\",\n      \"name\": \"Update Images Templates\",\n      \"type\": \"n8n-nodes-base.odoo\",\n      \"position\": [\n        2140,\n        -60\n      ],\n      \"parameters\": {\n        \"resource\": \"custom\",\n        \"operation\": \"update\",\n        \"customResource\": \"product.template\",\n        \"customResourceId\": \"={{ $('Find Templates').item.json.id }}\",\n        \"fieldsToCreateOrUpdate\": {\n          \"fields\": [\n            {\n              \"fieldName\": \"image_1920\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            },\n            {\n              \"fieldName\": \"image_1024\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            },\n            {\n              \"fieldName\": \"image_512\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            },\n            {\n              \"fieldName\": \"image_256\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            },\n            {\n              \"fieldName\": \"image_128\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"odooApi\": {\n          \"id\": \"eTbK0f2MmAZsrOtT\",\n          \"name\": \"Odoo AArtIntelligent\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1dbfc15a-fec4-416f-8286-e16672a78e1f\",\n      \"name\": \"Find Products\",\n      \"type\": \"n8n-nodes-base.odoo\",\n      \"position\": [\n        1480,\n        140\n      ],\n      \"parameters\": {\n        \"limit\": 1,\n        \"options\": {\n          \"fieldsList\": [\n            \"id\"\n          ]\n        },\n        \"resource\": \"custom\",\n        \"operation\": \"getAll\",\n        \"filterRequest\": {\n          \"filter\": [\n            {\n              \"value\": \"={{ $json.sku }}\",\n              \"fieldName\": \"default_code\"\n            }\n          ]\n        },\n        \"customResource\": \"product.product\"\n      },\n      \"credentials\": {\n        \"odooApi\": {\n          \"id\": \"eTbK0f2MmAZsrOtT\",\n          \"name\": \"Odoo AArtIntelligent\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8963a175-6bf7-4101-8748-cd11e1a77e0a\",\n      \"name\": \"Download Images Products\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1700,\n        140\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Filter Images').item.json.id }}\"\n        },\n        \"options\": {\n          \"binaryPropertyName\": \"data\"\n        },\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"HTm4uAxSPW7DoxGv\",\n          \"name\": \"Google Drive Administrator\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"8ee836a9-f962-426e-9fe2-c989b3da8a3b\",\n      \"name\": \"Update Images Products\",\n      \"type\": \"n8n-nodes-base.odoo\",\n      \"position\": [\n        2140,\n        140\n      ],\n      \"parameters\": {\n        \"resource\": \"custom\",\n        \"operation\": \"update\",\n        \"customResource\": \"product.product\",\n        \"customResourceId\": \"={{ $('Find Products').item.json.id }}\",\n        \"fieldsToCreateOrUpdate\": {\n          \"fields\": [\n            {\n              \"fieldName\": \"image_1920\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            },\n            {\n              \"fieldName\": \"image_1024\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            },\n            {\n              \"fieldName\": \"image_512\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            },\n            {\n              \"fieldName\": \"image_256\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            },\n            {\n              \"fieldName\": \"image_128\",\n              \"fieldValue\": \"={{ $json.data }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"odooApi\": {\n          \"id\": \"eTbK0f2MmAZsrOtT\",\n          \"name\": \"Odoo AArtIntelligent\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4c2d03c6-896a-4f5f-ae23-68717aa50697\",\n      \"name\": \"Convert Base64 Images Templates\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        1920,\n        -60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"binaryToPropery\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0a894d9e-8021-46c9-a9c1-399d7a56546d\",\n      \"name\": \"Convert Base64 Images Products\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        1920,\n        140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"binaryToPropery\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a618d02d-fe52-42ab-9d62-1c263992ac24\",\n      \"name\": \"Search Old Images\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1260,\n        340\n      ],\n      \"parameters\": {\n        \"filter\": {\n          \"driveId\": {\n            \"__rl\": true,\n            \"mode\": \"list\",\n            \"value\": \"0AAaxIiOTPGeCUk9PVA\",\n            \"cachedResultUrl\": \"https://drive.google.com/drive/folders/0AAaxIiOTPGeCUk9PVA\",\n            \"cachedResultName\": \"Middleware\"\n          },\n          \"folderId\": {\n            \"__rl\": true,\n            \"mode\": \"list\",\n            \"value\": \"1NqxzbwarAZ1BtkoyM-T8NNcO5m_cmO1V\",\n            \"cachedResultUrl\": \"https://drive.google.com/drive/folders/1NqxzbwarAZ1BtkoyM-T8NNcO5m_cmO1V\",\n            \"cachedResultName\": \"done\"\n          }\n        },\n        \"options\": {},\n        \"resource\": \"fileFolder\",\n        \"queryString\": \"={{ $('Filter Images').item.json.name }}\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"HTm4uAxSPW7DoxGv\",\n          \"name\": \"Google Drive Administrator\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"cd82a937-7129-4baf-9515-41ab5aef497d\",\n      \"name\": \"Drop Old Images\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1480,\n        340\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.id }}\"\n        },\n        \"options\": {},\n        \"operation\": \"deleteFile\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"HTm4uAxSPW7DoxGv\",\n          \"name\": \"Google Drive Administrator\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"b134c298-989c-460e-8caf-497ccbea53cd\",\n      \"name\": \"Click Manual\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        380,\n        240\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {},\n  \"versionId\": \"b98c3b1d-52f1-4dd2-b204-892bb96b1b8a\",\n  \"connections\": {\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find Templates\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Find Products\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find Files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter Images\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Sum Images\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Announce\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Move Images\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Sum Images\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Click Manual\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find Files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter Images\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Decorate Images\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find Products\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Images Products\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find Templates\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Images Templates\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Decorate Images\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Move Images\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Search Old Images\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find Files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search Old Images\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Drop Old Images\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Images Products\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert Base64 Images Products\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Images Templates\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert Base64 Images Templates\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert Base64 Images Products\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Images Products\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert Base64 Images Templates\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Images Templates\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.filter",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.code",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.summarize",
      "n8n-nodes-base.googleChat",
      "n8n-nodes-base.odoo",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.odoo",
      "n8n-nodes-base.odoo",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.odoo",
      "n8n-nodes-base.extractFromFile",
      "n8n-nodes-base.extractFromFile",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.manualTrigger"
    ],
    "trigger": "schedule trigger"
  }
}