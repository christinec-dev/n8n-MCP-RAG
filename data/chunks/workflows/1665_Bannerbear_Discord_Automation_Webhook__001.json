{
  "source": "1665_Bannerbear_Discord_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"26ba763460b97c249b82942b23b6384876dfeb9327513332e743c5f6219c2b8e\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"81ea4c6a-d603-4688-8b72-d9c79faf7adf\",\n      \"name\": \"n8n Form Trigger\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        1272,\n        455\n      ],\n      \"webhookId\": \"d280e773-3bd8-44ce-a147-8b404251fce9\",\n      \"parameters\": {\n        \"path\": \"d280e773-3bd8-44ce-a147-8b404251fce9\",\n        \"options\": {},\n        \"formTitle\": \"BannerBear Clone\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldType\": \"dropdown\",\n              \"fieldLabel\": \"Template\",\n              \"fieldOptions\": {\n                \"values\": [\n                  {\n                    \"option\": \"n8n Meetup Template\"\n                  },\n                  {\n                    \"option\": \"AI Meetup Template\"\n                  }\n                ]\n              }\n            },\n            {\n              \"fieldType\": \"textarea\",\n              \"fieldLabel\": \"Title of Event\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"textarea\",\n              \"fieldLabel\": \"Location of Event\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"textarea\",\n              \"fieldLabel\": \"Date of Event\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"textarea\",\n              \"fieldLabel\": \"Image Prompt\",\n              \"requiredField\": true\n            }\n          ]\n        },\n        \"formDescription\": \"Generate an image and apply text\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"dea26687-4060-488b-a09f-e21900fec2fc\",\n      \"name\": \"Upload to Cloudinary\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1920,\n        480\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.cloudinary.com/v1_1/daglih2g8/image/upload\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"sendQuery\": true,\n        \"contentType\": \"multipart-form-data\",\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"file\",\n              \"parameterType\": \"formBinaryData\",\n              \"inputDataFieldName\": \"data\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpQueryAuth\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"upload_preset\",\n              \"value\": \"n8n-workflows-preset\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpQueryAuth\": {\n          \"id\": \"sT9jeKzZiLJ3bVPz\",\n          \"name\": \"Cloudinary API\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"4b73ba35-eac9-467b-b711-49061da30fbc\",\n      \"name\": \"Send to Bannerbear Template\",\n      \"type\": \"n8n-nodes-base.bannerbear\",\n      \"position\": [\n        2260,\n        440\n      ],\n      \"parameters\": {\n        \"templateId\": \"={{ $('Set Parameters').item.json.template_id }}\",\n        \"modificationsUi\": {\n          \"modificationsValues\": [\n            {\n              \"name\": \"placeholder_image\",\n              \"text\": \"=\",\n              \"imageUrl\": \"={{ $json.secure_url.replace('upload/','upload/f_auto,q_auto/') }}\"\n            },\n            {\n              \"name\": \"placeholder_text\",\n              \"text\": \"={{ $('Set Parameters').item.json.title }}\"\n            },\n            {\n              \"name\": \"placeholder_location\",\n              \"text\": \"={{ $('Set Parameters').item.json.location }}\"\n            },\n            {\n              \"name\": \"placeholder_date\",\n              \"text\": \"={{ $('Set Parameters').item.json.date }}\"\n            }\n          ]\n        },\n        \"additionalFields\": {\n          \"waitForImage\": true,\n          \"waitForImageMaxTries\": 10\n        }\n      },\n      \"credentials\": {\n        \"bannerbearApi\": {\n          \"id\": \"jXg71GVWN3F4PvI8\",\n          \"name\": \"Bannerbear account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d9b8f63b-ee0f-40d6-9b1a-8213c7043b3a\",\n      \"name\": \"Set Parameters\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1452,\n        455\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"8c526649-b8a8-4b9f-a805-41de053bb642\",\n              \"name\": \"template_id\",\n              \"type\": \"string\",\n              \"value\": \"={{ {\\n'AI Meetup Template': 'lzw71BD6VNLgD0eYkn',\\n'n8n Meetup Template': 'n1MJGd52o696D7LaPV'\\n}[$json.Template] ?? '' }}\"\n            },\n            {\n              \"id\": \"f5a3c285-719b-4a12-a669-47a63a880ac4\",\n              \"name\": \"title\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json[\\\"Title of Event\\\"] }}\"\n            },\n            {\n              \"id\": \"6713a88e-815c-416a-b838-b07006a090a3\",\n              \"name\": \"location\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json[\\\"Location of Event\\\"] }}\"\n            },\n            {\n              \"id\": \"3c331756-1f1f-4e27-b769-e3de860bfdf0\",\n              \"name\": \"date\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json[\\\"Date of Event\\\"] }}\"\n            },\n            {\n              \"id\": \"b933df30-8067-4a0a-bff1-64441490478d\",\n              \"name\": \"image_prompt\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json[\\\"Image Prompt\\\"] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"3290571f-e858-4b73-b27d-7077d4efad15\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1220,\n        280\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 392.4891967891814,\n        \"height\": 357.1079372601395,\n        \"content\": \"## 1. Start with n8n Forms\\n[Read more about using forms](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.formtrigger/)\\n\\nFor this demo, we'll use the form trigger for simple data capture but you could use webhooks for better customisation and/or integration into other workflows.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"560a6c43-07bd-4a5c-8af7-0cda78f345d4\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1640,\n        215.68990043281633\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 456.99271465116215,\n        \"height\": 475.77059293291677,\n        \"content\": \"## 2. Use AI to Generate an Image\\n[Read more about using OpenAI](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-langchain.openai)\\n\\nGenerating AI images is just as easy as generating text thanks for n8n's OpenAI node. Once completed, OpenAI will return a binary image file. We'll have to store this image externally however since we can't upload it directly BannerBear. I've chosen to use Cloudinary CDN but S3 is also a good choice.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0ffe2ada-9cb6-4d4c-9d15-df83d5a596ce\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2120,\n        168.04517481270597\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 387.4250119152741,\n        \"height\": 467.21699325771294,\n        \"content\": \"## 3. Create Social Media Banners with BannerBear.com\\n[Read more about the BannerBear Node](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.bannerbear)\\n\\nNow with your generated AI image and template variables, we're ready to send them to BannerBear which will use a predefined template to create our social media banner.\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e8269a57-caab-40c6-bf47-95b64eccde81\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2540,\n        299.6729638445606\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 404.9582850950252,\n        \"height\": 356.8876009810222,\n        \"content\": \"## 4. Post directly to Social Media\\n[Read more about using the Discord Node](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.discord)\\n\\nWe'll share our event banner with our community in Discord. You can also choose to post this on your favourite social media channels.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"457a0744-4c08-4489-af50-5a746fa4b756\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2120,\n        40\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 388.96199194175017,\n        \"height\": 122.12691731521146,\n        \"content\": \"### \\ud83d\\ude4b\\u200d\\u2642\\ufe0f Optimise your images!\\nAI generated images can get quite large (20mb+) which may hit filesize limits for some services. I've used Cloudinary's optimise API to reduce the file size before sending to BannerBear.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c38cc2c6-a595-48c8-a5be-668fd609c76b\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2960,\n        220\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 391.9308945140308,\n        \"height\": 288.0739771936459,\n        \"content\": \"### Result!\\nHere is a screenshot of the generated banner.\\n![Result](https://res.cloudinary.com/daglih2g8/image/upload/f_auto,q_auto,w_360/v1/n8n-workflows/qlzyrjjhxeh3zgerglti)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"29ce299d-3444-4e71-b83c-edbe867e833f\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        800,\n        240\n      ],\n      \"parameters\": {\n        \"width\": 392.9673182916798,\n        \"height\": 404.96428251481916,\n        \"content\": \"## Try It Out!\\n### This workflow does the following:\\n* Uses an n8n form to capture an event to be announced.\\n* Form includes imagery required for the event and this is sent to OpenAI Dalle-3 service to generate.\\n* Event details as well as the ai-generated image is then sent to the BannerBear.com service where a template is used.\\n* The final event poster is created and posted to X (formerly Twitter)\\n\\n### Need Help?\\nJoin the [Discord](https://discord.com/invite/XPKeKXeB7d) or ask in the [Forum](https://community.n8n.io/)!\\n\\nHappy Hacking!\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c01d1ac0-5ebe-4ef1-bece-d6ad8bbff94e\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2200,\n        400\n      ],\n      \"parameters\": {\n        \"width\": 221.3032167915293,\n        \"height\": 368.5789698912447,\n        \"content\": \"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\ud83d\\udea8**Required**\\n* You'll need to create a template in BannerBear.\\n* Once you have, map the template variables to fields in this node!\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c929d9c4-1e18-4806-9fc6-fb3bf0fa75ad\",\n      \"name\": \"Download Banner\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2600,\n        480\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.image_url_jpg }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"79d19004-7d82-42be-89d5-dcb3af5e3fb1\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1857.0197380966872,\n        440\n      ],\n      \"parameters\": {\n        \"width\": 224.2834786948422,\n        \"height\": 368.5789698912447,\n        \"content\": \"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\ud83d\\udea8**Required**\\n* You'll need to change all ids and references to your own Cloudinary instance.\\n* Feel free to change this to another service!\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"18ccd15f-65b6-46eb-8235-7fe19b13649d\",\n      \"name\": \"Discord\",\n      \"type\": \"n8n-nodes-base.discord\",\n      \"position\": [\n        2780,\n        480\n      ],\n      \"parameters\": {\n        \"files\": {\n          \"values\": [\n            {}\n          ]\n        },\n        \"content\": \"=\\ud83d\\udcc5 New Event Alert! {{ $('Set Parameters').item.json.title }} being held at {{ $('Set Parameters').item.json.location }} on the {{ $('Set Parameters').item.json.date }}! Don't miss it!\",\n        \"guildId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1248678443432808509\",\n          \"cachedResultUrl\": \"https://discord.com/channels/1248678443432808509\",\n          \"cachedResultName\": \"Datamoldxyz\"\n        },\n        \"options\": {},\n        \"resource\": \"message\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1248678443432808512\",\n          \"cachedResultUrl\": \"https://discord.com/channels/1248678443432808509/1248678443432808512\",\n          \"cachedResultName\": \"general\"\n        }\n      },\n      \"credentials\": {\n        \"discordBotApi\": {\n          \"id\": \"YUwD52E3oHsSUWdW\",\n          \"name\": \"Discord Bot account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"7122fac9-4b4d-4fcf-a188-21af025a7fa8\",\n      \"name\": \"Generate AI Banner Image\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1700,\n        480\n      ],\n      \"parameters\": {\n        \"prompt\": \"={{ $json.image_prompt }}\",\n        \"options\": {\n          \"size\": \"1024x1024\",\n          \"quality\": \"standard\"\n        },\n        \"resource\": \"image\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.3\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Set Parameters\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate AI Banner Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Banner\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Discord\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"n8n Form Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Parameters\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload to Cloudinary\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send to Bannerbear Template\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate AI Banner Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload to Cloudinary\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send to Bannerbear Template\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Banner\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.formTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.bannerbear",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.discord",
      "@n8n/n8n-nodes-langchain.openAi"
    ],
    "trigger": "n8n form trigger"
  }
}