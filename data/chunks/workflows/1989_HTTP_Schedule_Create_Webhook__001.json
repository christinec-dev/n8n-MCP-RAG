{
  "source": "1989_HTTP_Schedule_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"v9K61fCQhrG6gt6Z\",\n  \"meta\": {\n    \"instanceId\": \"9219ebc7795bea866f70aa3d977d54417fdf06c41944be95e20cfb60f992db19\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Search news using Perplexity AI and post to X (Twitter)\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"9b2fdc0f-8c71-4ea9-a9d0-df470f2778df\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -560,\n        0\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"hours\",\n              \"hoursInterval\": 21,\n              \"triggerAtMinute\": \"={{Math.floor(Math.random() * 60)}}\\n\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"d549c019-1f3e-4758-a5ee-e4ac7e03cc2d\",\n      \"name\": \"searchQuery\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -340,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"4cfbc312-5dcd-444d-ae08-0bab417c084c\",\n              \"name\": \"searchInput\",\n              \"type\": \"string\",\n              \"value\": \"What's the latest news in artificial intelligence?\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"87c28d43-6cd6-4292-a563-a9f22467e162\",\n      \"name\": \"Perplexity\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        100,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.perplexity.ai/chat/completions\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"model\\\": \\\"llama-3.1-sonar-small-128k-online\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"system\\\",\\n      \\\"content\\\": \\\"You are a social media assistant summarizing tech news for Twitter/X. Only return one article. Your output must follow this exact format: a short, engaging headline (max 140 characters), followed by a single space, then the direct article link. Do not use markdown, hashtags, emojis, or line breaks. Keep the total output under 200 characters. Be precise, objective, and newsworthy.Example: Mastercard launches Agent Pay, allowing AI agents to make purchases for users. https://www.perplexity.ai/page/mastercard-unveils-agent-pay-e-qWXnaUEzQZWCqsxF4l43zA\\\"\\n    },\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": \\\"{{ $('searchQuery').item.json.searchInput }}\\\"\\n    }\\n  ],\\n  \\\"temperature\\\": 0.3,\\n  \\\"top_p\\\": 0.9,\\n  \\\"return_citations\\\": true,\\n  \\\"search_domain_filter\\\": [\\n    \\\"perplexity.ai\\\"\\n  ],\\n  \\\"search_recency_filter\\\": \\\"day\\\",\\n  \\\"return_images\\\": true,\\n  \\\"return_related_questions\\\": false,\\n  \\\"max_tokens\\\": 80,\\n  \\\"stream\\\": false,\\n  \\\"presence_penalty\\\": 0,\\n  \\\"frequency_penalty\\\": 1\\n}\\n\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $json.perplexityAPI }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"c1ed633d-d318-403c-9577-c3c63ac2e68e\",\n      \"name\": \"set API key\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -120,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"4f9bd3a0-5587-410f-b145-a287f65f9576\",\n              \"name\": \"perplexityAPI\",\n              \"type\": \"string\",\n              \"value\": \"<yourPerplexityAPI>\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"e228e352-2ddd-4e2c-a434-993910ced7be\",\n      \"name\": \"Post to X\",\n      \"type\": \"n8n-nodes-base.twitter\",\n      \"position\": [\n        320,\n        0\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.choices[0].message.content }}\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"twitterOAuth2Api\": {\n          \"id\": \"NY8wGzcN4f9f1UN4\",\n          \"name\": \"X account 2 for images\"\n        }\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"errorWorkflow\": \"qFOYM3IA9QZ7fMym\",\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"74e316fe-561f-4c80-b446-bba795654cef\",\n  \"connections\": {\n    \"Post to X\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Perplexity\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Post to X\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"searchQuery\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"set API key\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"set API key\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Perplexity\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"searchQuery\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.twitter"
    ],
    "trigger": "schedule trigger"
  }
}