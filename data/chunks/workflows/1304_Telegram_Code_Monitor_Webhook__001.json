{
  "source": "1304_Telegram_Code_Monitor_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"AlEVIPHR3dMJkYWt\",\n  \"meta\": {\n    \"instanceId\": \"58e59e36ad4158b4534237c364ed053a36843e3394fa02af59feb8df38262a79\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Monitor USDT ERC-20 Wallet Balance with Etherscan and Telegram Notifications\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"35b62ca1-3603-4dcb-a3b5-77e1325c78f7\",\n      \"name\": \"Balance Changed?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -40,\n        0\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{$json.balanceChanged}}\",\n              \"value2\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"dfeef0d5-0bb2-40a1-ae75-51d7caeb9c3d\",\n      \"name\": \"Balance Changed.\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        320,\n        -140\n      ],\n      \"webhookId\": \"a8fa72ce-638b-4245-bcbc-d59948ae1144\",\n      \"parameters\": {\n        \"text\": \"=ðŸš¨ *USDT Balance Change!*\\n\\nWallet Address: {{ $json.walletAddress }}\\n\\nðŸ”´ Previous Balance: {{parseFloat($json.previousBalance)/1e6}} USDT\\n\\nðŸŸ¢ New Balance: {{parseFloat($json.currentBalance)/1e6}} USDT\",\n        \"chatId\": \"< Your Telegram Chat ID >\",\n        \"additionalFields\": {\n          \"parse_mode\": \"Markdown\"\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"Ge3vEXak2MymWtcp\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ffebdb46-a6f0-4ed8-88ed-75ab427af969\",\n      \"name\": \"Balance Not Changed.\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        320,\n        20\n      ],\n      \"webhookId\": \"a8fa72ce-638b-4245-bcbc-d59948ae1144\",\n      \"parameters\": {\n        \"text\": \"=Balance Unchanged. USDT balance remained stable.\",\n        \"chatId\": \"< Your Telegram Chat ID >\",\n        \"additionalFields\": {\n          \"parse_mode\": \"Markdown\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"049ff717-ba10-4b7f-9f84-9eaaeee902ec\",\n      \"name\": \"userData\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -780,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"4455d1e7-a489-4ab6-a526-4fc755db99d0\",\n              \"name\": \"Your Wallet Address\",\n              \"type\": \"string\",\n              \"value\": \"< Wallet Address Paste Here >\"\n            },\n            {\n              \"id\": \"3d84deba-8093-42cf-833f-6891db778de7\",\n              \"name\": \"Your Etherscan Api Key\",\n              \"type\": \"string\",\n              \"value\": \"< Etherscan Api Key Paste Here>\"\n            },\n            {\n              \"id\": \"971ea723-e3de-4cff-b4e7-5899f3d8fb00\",\n              \"name\": \"USDT ERC-20 Token Address\",\n              \"type\": \"string\",\n              \"value\": \"0xdAC17F958D2ee523a2206206994597C13D831ec7\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"0488f2dd-6b71-4be5-9ce8-cf0763b82990\",\n      \"name\": \"balanceChecker\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        -280,\n        0\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const staticData = $getWorkflowStaticData('global');\\n\\nconst currentBalance = items[0].json.result;\\n\\nconst walletAddress = $('userData').first().json['Your Wallet Address']\\n\\nlet previousBalance = staticData.previousBalance;\\n\\nif (!previousBalance) {\\n  staticData.previousBalance = currentBalance;\\n  previousBalance = currentBalance;\\n}\\n\\nconst balanceChanged = previousBalance !== currentBalance;\\n\\nstaticData.previousBalance = currentBalance;\\n\\nreturn [{json: {balanceChanged, previousBalance, currentBalance, walletAddress}}];\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"d7b23d5b-b4c5-4d9a-93f9-360ae0d539c7\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1040,\n        -180\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 1540,\n        \"height\": 400,\n        \"content\": \"## USDT ERC-20 Wallet Balance Tracker\\n**This workflow** Is a basic concept of integrating your ERC-20 wallet with n8n nodes.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7c8f0d69-6c37-469c-b466-89a467db9bbd\",\n      \"name\": \"Check Balance Every 5 Minutes\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        -1000,\n        0\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyX\",\n              \"unit\": \"minutes\",\n              \"value\": 5\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ea603f03-25e0-4c80-90f2-eb5f09e71ad1\",\n      \"name\": \"Fetch USDT Balance from Etherscan\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -480,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.etherscan.io/api\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"module\",\n              \"value\": \"account\"\n            },\n            {\n              \"name\": \"action\",\n              \"value\": \"tokenbalance\"\n            },\n            {\n              \"name\": \"address\",\n              \"value\": \"={{ $json['Your Wallet Address'] }}\"\n            },\n            {\n              \"name\": \"tag\",\n              \"value\": \"latest\"\n            },\n            {\n              \"name\": \"apikey\",\n              \"value\": \"={{ $json['Your Etherscan Api Key'] }}\"\n            },\n            {\n              \"name\": \"contractaddress\",\n              \"value\": \"={{ $json['USDT ERC-20 Token Address'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"7ebf18de-7adf-40dd-99b4-ff8dd1e37f08\",\n  \"connections\": {\n    \"userData\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch USDT Balance from Etherscan\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"balanceChecker\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Balance Changed?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Balance Changed.\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Balance Changed?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Balance Changed.\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Balance Not Changed.\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check Balance Every 5 Minutes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"userData\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetch USDT Balance from Etherscan\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"balanceChecker\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.if",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.set",
      "n8n-nodes-base.code",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.cron",
      "n8n-nodes-base.httpRequest"
    ],
    "trigger": null
  }
}