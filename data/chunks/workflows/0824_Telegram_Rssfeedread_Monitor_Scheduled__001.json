{
  "source": "0824_Telegram_Rssfeedread_Monitor_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"33\",\n  \"name\": \"n8n_check\",\n  \"nodes\": [\n    {\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -520,\n        250\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"RSS Feed Read\",\n      \"type\": \"n8n-nodes-base.rssFeedRead\",\n      \"position\": [\n        -320,\n        260\n      ],\n      \"parameters\": {\n        \"url\": \"https://github.com/n8n-io/n8n/releases.atom\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        70,\n        260\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Filter by current day\\\"].json[\\\"data\\\"]}}\",\n              \"value2\": \"/.+/\",\n              \"operation\": \"regex\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Cron\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        -520,\n        421\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"custom\",\n              \"cronExpression\": \"0 0 10,14,18 * * *\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Filter by current day\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        -120,\n        260\n      ],\n      \"parameters\": {\n        \"functionCode\": \"var d = new Date();\\nvar year = d.getFullYear();\\nvar month = d.getMonth() + 1;\\nvar day = d.getDate();\\nvar hour = d.getHours() - 4;//Publication in last 4 hours\\n\\nmonth = month < 10 ? \\\"0\\\" + month : month;\\nday = day < 10 ? \\\"0\\\" + day : day;\\nhour = hour < 10 ? \\\"0\\\" + hour : hour;\\n\\nvar lines = items.filter(function(item) {\\n  //var str = year + \\\"-\\\" + month + \\\"-\\\" + day + \\\"T\\\" + hour;\\n  var str = year + \\\"-\\\" + month + \\\"-\\\" + day + \\\"T\\\" + hour;\\n  //return true;//item.json.pubDate.indexOf(str) !== -1 && item.json.title.indexOf(\\\"n8n@\\\") !== -1;\\n  return item.json.pubDate.indexOf(str) !== -1 && item.json.title.indexOf(\\\"n8n@\\\") !== -1 && item.json.title.indexOf(\\\".0\\\") !== -1;\\n}).map(function(item) {\\n  return item.json.title;\\n}).join(\\\"\\\\n\\\");\\n\\n\\nreturn [\\n  {\\n  json: {\\n    date: year + \\\"-\\\" + month + \\\"-\\\" + day + \\\" \\\" + hour,\\n    data: lines && lines.length ? \\\"New release on n8n:\\\\n\\\" + lines : \\\"\\\"\\n   }\\n  }\\n]\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Telegram\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        300,\n        280\n      ],\n      \"parameters\": {\n        \"text\": \"={{$node[\\\"Filter by current day\\\"].json[\\\"data\\\"]}}\",\n        \"chatId\": \"-1001235337538\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\"\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": \"it-killia-bot\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"AWS SES\",\n      \"type\": \"n8n-nodes-base.awsSes\",\n      \"position\": [\n        300,\n        110\n      ],\n      \"parameters\": {\n        \"body\": \"={{$node[\\\"Filter by current day\\\"].json[\\\"data\\\"]}}\",\n        \"subject\": \"New n8n version\",\n        \"fromEmail\": \"myemail@mydomain.com\",\n        \"isBodyHtml\": true,\n        \"toAddresses\": [\n          \"myemail@mydomain.com\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"aws\": \"ses\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"settings\": {},\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Telegram\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"AWS SES\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Cron\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"RSS Feed Read\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"RSS Feed Read\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter by current day\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter by current day\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"RSS Feed Read\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.rssFeedRead",
      "n8n-nodes-base.if",
      "n8n-nodes-base.cron",
      "n8n-nodes-base.function",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.awsSes"
    ],
    "trigger": null
  }
}