{
  "source": "1400_Wait_Code_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"CvXjXG4SFnN0ioJQ\",\n  \"meta\": {\n    \"instanceId\": \"e2034325698638870d6b764285427bad9d79bf1e08a458be597c06e61ad7e545\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"AutoQoutesV2_template\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"2ff58bb4-7079-44fe-a2ac-b4af9fa5b30e\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        300,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ec44d567-dfc8-4561-87df-903724225247\",\n      \"name\": \"Generate Image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        660,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.piapi.ai/api/v1/task\",\n        \"body\": \"={\\n  \\\"model\\\": \\\"Qubico/flux1-dev\\\",\\n  \\\"task_type\\\": \\\"txt2img\\\",\\n  \\\"input\\\": {\\n    \\\"prompt\\\": \\\"Ultra-realistic vertical nature landscape, {{ $json['Background (EN)'] }}, featuring {{ $json['Prompt (EN)'] }}, high detail, soft atmospheric lighting, cinematic golden hour glow, vertical composition, photorealistic texture, natural depth of field, calm and serene mood, no people, no buildings, HDR, 8k resolution, masterpiece\\\",\\n    \\\"negative_prompt\\\": \\\"taking a photo of a room, recording a video of a room, photos app, video recorder, illegible text, blurry text, low quality text, DSLR, unnatural\\\",\\n    \\\"width\\\": 540,\\n    \\\"height\\\": 960\\n  }\\n}\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"raw\",\n        \"sendHeaders\": true,\n        \"rawContentType\": \"application/json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"X-API-Key\",\n              \"value\": \"=[Your PiAPI Key]\"\n            }\n          ]\n        }\n      },\n      \"retryOnFail\": false,\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"ad260a51-e981-47cc-8600-967c1c748814\",\n      \"name\": \"Get image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1020,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"X-API-Key\",\n              \"value\": \"=[Your PiAPI Key]\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"cddff673-15ce-47ec-a2d3-3d71437bfb1f\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        600,\n        -80\n      ],\n      \"parameters\": {\n        \"width\": 820,\n        \"height\": 240,\n        \"content\": \"## Create Image Background\\nGenerate an image using prompt from Google Sheet via PiAPI Flux (Txt2img).\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"64132a39-ad42-4158-9eec-5b6bfdc7bca2\",\n      \"name\": \"Update image background URL\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1240,\n        0\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Index\": \"={{ $('Get data from Google Sheet').item.json.Index }}\",\n            \"Background Image\": \"={{ $json.data.output.image_url }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Index\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"Index\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Quote (Thai)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Quote (Thai)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Pen Name (Thai)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Pen Name (Thai)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background (EN)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background (EN)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Prompt (EN)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Prompt (EN)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background Image\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Background Image\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background Video\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background Video\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Video Status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Video Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"row_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"row_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"Index\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"Ra2f1dlqOJ13jTtb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"801dd794-4cf8-42f7-8102-a3a4853cae39\",\n      \"name\": \"Image-to-Video\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        260,\n        280\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.piapi.ai/api/v1/task\",\n        \"body\": \"={\\n  \\\"model\\\": \\\"kling\\\",\\n  \\\"task_type\\\": \\\"video_generation\\\",\\n  \\\"input\\\": {\\n    \\\"prompt\\\": \\\"Cinematic vertical video from image of {{ $('Get data from Google Sheet').item.json['Background (EN)'] }}, with {{ $('Get data from Google Sheet').item.json['Prompt (EN)'] }}, animated subtly from image, with soft light, mist, swaying trees, slow zoom effect, no people or buildings\\\",\\n    \\\"negative_prompt\\\": \\\"blurry motion, distorted faces, unnatural lighting, over produced, bad quality\\\",\\n    \\\"cfg_scale\\\": 0.5,\\n    \\\"duration\\\": 5,\\n    \\\"mode\\\": \\\"std\\\",\\n    \\\"image_url\\\": \\\"{{ $('Get image').item.json.data.output.image_url }}\\\",\\n    \\\"version\\\": \\\"1.0\\\",\\n    \\\"camera_control\\\": {\\n      \\\"type\\\": \\\"simple\\\",\\n      \\\"config\\\": {\\n        \\\"horizontal\\\": 0,\\n        \\\"vertical\\\": 0,\\n        \\\"pan\\\": 0,\\n        \\\"tilt\\\": 0,\\n        \\\"roll\\\": 0,\\n        \\\"zoom\\\": 5\\n      }\\n    }\\n  }\\n}\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"raw\",\n        \"sendHeaders\": true,\n        \"rawContentType\": \"application/json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"X-API-Key\",\n              \"value\": \"=[Your PiAPI Key]\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"6f7d755f-73fb-474f-a2c4-4612317c4f5a\",\n      \"name\": \"Wait image 2 min\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        840,\n        0\n      ],\n      \"webhookId\": \"ccf58c3e-f91d-4f58-a4a7-aff58c9be226\",\n      \"parameters\": {\n        \"unit\": \"minutes\",\n        \"amount\": 2\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"d8de3a95-1a5b-4495-9a1f-8178c1be3d44\",\n      \"name\": \"Wait video 5 min\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        440,\n        280\n      ],\n      \"webhookId\": \"6df38e96-d5ec-4588-9569-db9b86539a34\",\n      \"parameters\": {\n        \"unit\": \"minutes\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"c3f97a19-9ea8-4489-8629-767542f0fddb\",\n      \"name\": \"Get Video\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        620,\n        280\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"X-API-Key\",\n              \"value\": \"=[Your PiAPI Key]\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"eefa224d-2e3d-459e-a16d-8e2584b59cf0\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        240,\n        200\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 1180,\n        \"height\": 240,\n        \"content\": \"## Create Video Background\\nCreate a cinematic vertical video from the generated image using PiAPI Kling.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8d2035a8-d4a0-4a33-bae3-c18b530487d4\",\n      \"name\": \"Generate Audio\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        380,\n        560\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.elevenlabs.io/v1/sound-generation\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"text\",\n              \"value\": \"={\\n  \\\"text\\\": \\\"no voice, A peaceful soundscape unfolds as the sun begins to rise over misty {{ $('Get data from Google Sheet').item.json['Background (EN)'] }}, casting warm light across the scene. The crisp morning air is filled with ambient nature sounds like {{ $('Get data from Google Sheet').item.json['Prompt (EN)'] }} along with soft lofi beats, blending into a calm and immersive atmosphere.\\\",\\n  \\\"duration_seconds\\\": 5,\\n  \\\"model_id\\\": \\\"sound-effects-v1\\\",\\n  \\\"output_format\\\": \\\"mp3\\\"\\n}\\n\"\n            },\n            {\n              \"name\": \"duration_seconds\",\n              \"value\": \"20\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"xi-api-key\",\n              \"value\": \"[Your ElevenLab Key]\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"66af781a-2012-426e-a623-e90e21e8b2a1\",\n      \"name\": \"Get data from Google Sheet\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        480,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"returnFirstMatch\": true\n        },\n        \"filtersUI\": {\n          \"values\": [\n            {\n              \"lookupColumn\": \"Video Status\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"Ra2f1dlqOJ13jTtb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"04074118-9f30-4648-8aab-9574156a76ba\",\n      \"name\": \"Update Sound background URL\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1220,\n        480\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Index\": \"={{ $('Get data from Google Sheet').item.json.Index }}\",\n            \"Music Background\": \"={{ $json.webContentLink }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Index\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"Index\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Quote (Thai)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Quote (Thai)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Pen Name (Thai)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Pen Name (Thai)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background (EN)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background (EN)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Prompt (EN)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Prompt (EN)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background Image\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background Image\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background Video\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background Video\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Music Background\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"Music Background\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Video Status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Video Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"row_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"row_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"Index\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"Ra2f1dlqOJ13jTtb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"35ca939b-fb27-48cf-8036-f35618ceaee0\",\n      \"name\": \"Update video background URL\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1240,\n        280\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Index\": \"={{ $('Get data from Google Sheet').item.json.Index }}\",\n            \"Background Video\": \"={{ $json.data.output.video_url }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Index\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"Index\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Quote (Thai)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Quote (Thai)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Pen Name (Thai)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Pen Name (Thai)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background (EN)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background (EN)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Prompt (EN)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Prompt (EN)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background Image\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background Image\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background Video\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Background Video\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Video Status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Video Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"row_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"row_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"Index\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"Ra2f1dlqOJ13jTtb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"54c8badf-a99a-4e5c-ad96-e1d982eb6855\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        240,\n        480\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 1180,\n        \"height\": 240,\n        \"content\": \"## Create Sound Background\\nGenerate ambient sound using ElevenLabs based on the scene prompt.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"15b9e2b1-72d9-42bf-a8a4-0ad0a01c5e5f\",\n      \"name\": \"Upload Sound to Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        780,\n        480\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Get data from Google Sheet').item.json['Background (EN)'] }}.mp3\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"1Sfv2PvIHF0J3-5IOYFdZp2-4LNPOoSX1\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"root\",\n          \"cachedResultName\": \"/ (Root folder)\"\n        }\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"OEWvSsY5xiUhqOnx\",\n          \"name\": \"Google Drive account - PeakWave\"\n        }\n      },\n      \"typeVersion\": 3,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"2a628e8a-077a-4999-9ef7-8d28ac4433ac\",\n      \"name\": \"Save Video Background Locally1\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"position\": [\n        1040,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fileName\": \"=VideoBackground.mp4\",\n        \"operation\": \"write\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fa5cce8d-4b50-4221-9446-050f497b30a9\",\n      \"name\": \"Get Binary Video Background\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        820,\n        280\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.data.output.video_url }}\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"file\"\n            }\n          }\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"ea003577-5467-4acb-a33b-b4b30a03a35f\",\n      \"name\": \"Save Music Background Locally1\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"position\": [\n        980,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"append\": false\n        },\n        \"fileName\": \"=SoundBackground.mp3\",\n        \"operation\": \"write\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b9332740-c4e0-40f9-bc0d-c550c8f0f96d\",\n      \"name\": \"Prepare Overlay Text (Quote & Author)1\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        300,\n        860\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Define separate configuration for the quote and the author\\nconst quoteFont = \\\"Kanit-Italic.ttf\\\";      \\nconst quoteFontSize = 70;\\nconst authorFont = \\\"Kanit-Italic.ttf\\\";     \\nconst authorFontSize = 50;\\nconst fontColor = \\\"white\\\";\\nconst lineHeightMultiplier = 1.1;\\nconst videoWidth = 1080;\\nconst margin = 40;  \\n\\n// Effective width for the quote text\\nconst effectiveVideoWidth = videoWidth - 2 * margin;\\n\\n// Estimate average character width based on quoteFontSize\\nconst avgCharWidth = quoteFontSize * 0.6;\\nconst maxCharsPerLine = Math.floor(effectiveVideoWidth / avgCharWidth);\\n\\n// Retrieve the quote and author from \\\"Select Random Video, Music & Quote\\\"\\nconst transcript = $('Get data from Google Sheet').first().json['Quote (Thai)'];\\nif (!transcript) {\\n  throw new Error(\\\"Quote not found\\\");\\n}\\n\\nconst author = $('Get data from Google Sheet').first().json['Pen Name (Thai)'];\\nif (!author) {\\n  throw new Error(\\\"Author not found\\\");\\n}\\n\\n// Split transcript into words and group them into lines\\nconst words = transcript.split(' ');\\nconst lines = [];\\nlet currentLine = \\\"\\\";\\nlet currentCharCount = 0;\\n\\nwords.forEach(word => {\\n  const wordLength = word.length;\\n  const additionalSpace = currentLine ? 1 : 0;\\n  const potentialLength = currentCharCount + additionalSpace + wordLength;\\n  if (potentialLength <= maxCharsPerLine) {\\n    currentLine += (currentLine ? \\\" \\\" : \\\"\\\") + word;\\n    currentCharCount = potentialLength;\\n  } else {\\n    lines.push(currentLine);\\n    currentLine = word;\\n    currentCharCount = wordLength;\\n  }\\n});\\nif (currentLine) {\\n  lines.push(currentLine);\\n}\\n\\n// Calculate layout for the quote block\\nconst lineHeight = quoteFontSize * lineHeightMultiplier;\\nconst totalHeight = lines.length * lineHeight;\\n\\n// Build drawtext commands for quote lines\\nconst quoteCommands = lines.map((line, index) => {\\n  const escapedLine = line.replace(/'/g, \\\"\\\\\\\\'\\\");\\n  return `drawtext=fontfile=${quoteFont}:text='${escapedLine}':fontsize=${quoteFontSize}:fontcolor=${fontColor}:x=(w-text_w)/2:y=((h-${totalHeight})/2)+(${index}*${lineHeight})`;\\n});\\n\\n// Build the drawtext command for author\\nconst authorY = `((h-${totalHeight})/2)+(${lines.length}*${lineHeight})+20`;\\nconst escapedAuthor = author.replace(/'/g, \\\"\\\\\\\\'\\\");\\nconst authorCommand = `drawtext=fontfile=${authorFont}:text='${escapedAuthor}':fontsize=${authorFontSize}:fontcolor=${fontColor}:x=w-text_w-${margin}:y=${authorY}`;\\n\\n// Combine all commands into one drawtext filter string\\nconst fullDrawTextFilter = quoteCommands.concat(authorCommand).join(\\\", \\\");\\n\\n// Return the prepared filter string\\nreturn {\\n  json: {\\n    drawText: fullDrawTextFilter\\n  }\\n};\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"79764093-f6ca-459b-a73c-3326fe82fafa\",\n      \"name\": \"Generate Final Video Clip1\",\n      \"type\": \"n8n-nodes-base.executeCommand\",\n      \"position\": [\n        480,\n        860\n      ],\n      \"parameters\": {\n        \"command\": \"=ffmpeg -i {{ $('Save Video Background Locally1').item.json.fileName }} -i {{ $('Save Music Background Locally1').item.json.fileName }} -filter_complex \\\"[0:v]scale=1080:1920:force_original_aspect_ratio=increase,crop=1080:1920[vid]; color=black@0.3:size=1080x1920:d=10[bg]; [vid][bg]overlay=shortest=1[bgvid]; [bgvid]{{ $json.drawText }}[outv]; [1:a]volume=0.8[aout]\\\" -map \\\"[outv]\\\" -map \\\"[aout]\\\" -aspect 9:16 -c:v libx264 -c:a aac -shortest output.mp4 -y\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3c301b6b-d6cb-41af-ac52-5722bed8470d\",\n      \"name\": \"Initiate YouTube Resumable Upload\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        700,\n        860\n      ],\n      \"parameters\": {\n        \"url\": \"=https://www.googleapis.com/upload/youtube/v3/videos?part=snippet,status&uploadType=resumable\",\n        \"body\": \"={\\n  \\\"snippet\\\": {\\n    \\\"title\\\": \\\"{{ $('Get data from Google Sheet').item.json['Quote (Thai)'] }}\\\",\\n    \\\"description\\\": \\\"{{ $('Get data from Google Sheet').item.json['Quote (Thai)'] }}\\\\n{{ $('Get data from Google Sheet').item.json['Pen Name (Thai)'] }}\\\",\\n    \\\"defaultLanguage\\\": \\\"en\\\",\\n    \\\"defaultAudioLanguage\\\": \\\"en\\\"\\n  },\\n  \\\"status\\\": {\\n    \\\"privacyStatus\\\": \\\"public\\\",\\n    \\\"license\\\": \\\"youtube\\\",\\n    \\\"embeddable\\\": true,\\n    \\\"publicStatsViewable\\\": true,\\n    \\\"madeForKids\\\": false\\n  }\\n}\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"fullResponse\": true\n            }\n          }\n        },\n        \"sendBody\": true,\n        \"contentType\": \"raw\",\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"rawContentType\": \"RAW/JSON\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Upload-Content-Type\",\n              \"value\": \"video/webm\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"youTubeOAuth2Api\"\n      },\n      \"credentials\": {\n        \"youTubeOAuth2Api\": {\n          \"id\": \"f9uNp5YNQMnXrNw2\",\n          \"name\": \"YouTube account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"dbde06b3-e7ba-4b7e-9d58-0a06f88b5176\",\n      \"name\": \"Read output file\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"position\": [\n        880,\n        860\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fileSelector\": \"=output.mp4\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0b9b92e0-5500-4dca-a622-f63b3cdf0878\",\n      \"name\": \"Upload Video to YouTube\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1080,\n        860\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('Initiate YouTube Resumable Upload').item.json.headers.location }}\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"binaryData\",\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"video/webm\"\n            }\n          ]\n        },\n        \"inputDataFieldName\": \"data\",\n        \"nodeCredentialType\": \"youTubeOAuth2Api\"\n      },\n      \"credentials\": {\n        \"youTubeOAuth2Api\": {\n          \"id\": \"f9uNp5YNQMnXrNw2\",\n          \"name\": \"YouTube account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"721078b6-b1e2-4077-b1ff-696cb3765675\",\n      \"name\": \"Update Quote Upload Status\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1280,\n        860\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Index\": \"={{ $('Get data from Google Sheet').item.json.Index }}\",\n            \"Video Status\": \"=https://www.youtube.com/watch?v={{ $json.id }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Index\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"Index\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Quote (Thai)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Quote (Thai)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Pen Name (Thai)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Pen Name (Thai)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background (EN)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background (EN)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Prompt (EN)\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Prompt (EN)\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background Image\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background Image\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Background Video\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Background Video\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Music Background\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Music Background\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Video Status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Video Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"Index\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"appendOrUpdate\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"1p1iPoiu2uI3qGbHi0diS7QwsMcLuzDIqwo3AeSUVrGQ\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"Ra2f1dlqOJ13jTtb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"8900abd9-9f35-46a3-9b59-883ff16b0764\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        760\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 760,\n        \"height\": 300,\n        \"content\": \"## Video Upload & Post-Processing\\nUpload the final video to YouTube using the YouTube API and update your Google Sheets with upload statuses and YouTube links.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"07cdec2c-9677-46f0-8038-641c4c191059\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        240,\n        -80\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 340,\n        \"height\": 240,\n        \"content\": \"## Get Quote\\nRetrieve quote data from Google Sheets including text, author, and background prompts.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"aeadbc59-13d7-4755-b38d-6d4946ecfa78\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        240,\n        760\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 400,\n        \"height\": 300,\n        \"content\": \"## Combine All\\nMerge video, sound, and quote text into final clip using FFmpeg.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"2c56841d-3045-4d6d-b643-0f3804bf2c3e\",\n  \"connections\": {\n    \"Get Video\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Binary Video Background\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update image background URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Audio\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload Sound to Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Save Music Background Locally1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait image 2 min\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Image-to-Video\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait video 5 min\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Read output file\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload Video to YouTube\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait image 2 min\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait video 5 min\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Video\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload Video to YouTube\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Quote Upload Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Final Video Clip1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Initiate YouTube Resumable Upload\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get data from Google Sheet\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Quote Upload Status\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Get Binary Video Background\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save Video Background Locally1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Sound background URL\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Update image background URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Image-to-Video\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update video background URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate Audio\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload Sound to Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Sound background URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save Music Background Locally1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare Overlay Text (Quote & Author)1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save Video Background Locally1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update video background URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Initiate YouTube Resumable Upload\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Read output file\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get data from Google Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare Overlay Text (Quote & Author)1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate Final Video Clip1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.readWriteFile",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.readWriteFile",
      "n8n-nodes-base.code",
      "n8n-nodes-base.executeCommand",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.readWriteFile",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}