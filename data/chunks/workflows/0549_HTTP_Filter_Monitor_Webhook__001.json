{
  "source": "0549_HTTP_Filter_Monitor_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"84ba6d895254e080ac2b4916d987aa66b000f88d4d919a6b9c76848f9b8a7616\",\n    \"templateId\": \"2359\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"654e210f-08b1-4ba4-b464-9499084092a2\",\n      \"name\": \"split custom_fields\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        980,\n        640\n      ],\n      \"parameters\": {\n        \"include\": \"allOtherFields\",\n        \"options\": {},\n        \"fieldToSplitOut\": \"custom_fields\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9b1a4071-7dd8-4d60-b077-d686fff40d24\",\n      \"name\": \"Stripe | Get latest checkout sessions1\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        460,\n        640\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.stripe.com/v1/checkout/sessions\",\n        \"options\": {\n          \"pagination\": {\n            \"pagination\": {\n              \"parameters\": {\n                \"parameters\": [\n                  {\n                    \"name\": \"starting_after\",\n                    \"value\": \"={{ $response.body.data.last().id }}\"\n                  }\n                ]\n              },\n              \"completeExpression\": \"={{ $response.body.has_more == false }}\",\n              \"paginationCompleteWhen\": \"other\"\n            }\n          }\n        },\n        \"jsonQuery\": \"={\\n  \\\"created\\\": {\\n    \\\"gte\\\":{{ $today.minus(20, 'days').toSeconds() }},\\n    \\\"lte\\\":{{ $today.toSeconds() }}\\n  }\\n}\",\n        \"sendQuery\": true,\n        \"specifyQuery\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"stripeApi\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"17016a73-5338-49c7-af8d-8587c778c2f6\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        240\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 252.741654751449,\n        \"height\": 593.3373455805055,\n        \"content\": \"## Retrieve all checkout sessions from the last 7 days.\\n\\nYou can adjust the period by changing the \\\"created\\\" value.\\n\\n[üîç Learn more about the \\\"created\\\" parameter](https://docs.stripe.com/api/checkout/sessions/list?lang=curl#list_checkout_sessions-created)\\n\\n\\nAnd this node uses pagination to get all results. You want to keep those settings at the bottom.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e46a5332-a008-4617-be57-eb22e713022d\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        700,\n        545\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 451.2991079615292,\n        \"height\": 267.24226082469556,\n        \"content\": \"## Split data for easier visualization\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ebf8a12a-787c-4ab8-9060-2241bbf38489\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1220,\n        237\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 598.2429925878827,\n        \"content\": \"## Select the custom fields you want\\n\\nHere you can choose to filter your contacts to keep only the ones who contain certain custom_fields.\\n\\nLet's say you only want the ones who have filled their nickname and job title.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e9c54905-dadb-4b5e-9ce0-cfe7d436c51e\",\n      \"name\": \"Filter by custom_field\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1280,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"4579d72e-8d48-4146-952d-9b5b400f5bce\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.custom_fields.key }}\",\n              \"rightValue\": \"nickname\"\n            },\n            {\n              \"id\": \"34197f40-9b41-46e4-8796-be3a86e4dcca\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.custom_fields.key }}\",\n              \"rightValue\": \"job_title\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"14915079-68ba-48ab-9a9d-fe627aa2bd33\",\n      \"name\": \"split all data\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        760,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"split all data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"split custom_fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"split custom_fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter by custom_field\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Stripe | Get latest checkout sessions1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"split all data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.splitOut"
    ],
    "trigger": null
  }
}