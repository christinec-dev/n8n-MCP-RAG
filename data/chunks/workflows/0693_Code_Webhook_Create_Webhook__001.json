{
  "source": "0693_Code_Webhook_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"e4f78845dfed9ddcfba1945ae00d12e9a7d76eab052afd19299228ce02349d86\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"23291d25-3e1a-4b0d-9b1d-d066e8c04a1f\",\n      \"name\": \"Customer Lead AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        -640,\n        460\n      ],\n      \"parameters\": {\n        \"text\": \"=**System Prompt:**\\n\\nYou are an AI assistant designed to process new leads and generate appropriate responses. Your role includes analyzing lead notes, categorizing them, and generating an email from the system to inform the relevant contact about the inquiry. Do not send the email as if it is directly from the customer; instead, draft it as a notification from the system summarizing the inquiry.\\n\\n### **Process Flow**\\n\\n1. **Analyzing Lead Notes:**\\n   - Extract key details such as the customer name, organization, contact information, and their specific request.  \\n   - Determine if the inquiry relates to products, services, or solutions offered by the company.\\n\\n2. **Finding the Appropriate Contact(s):**\\n   - Search the contact database to find the responsible person(s) for the relevant product, service, or solution.  \\n   - If one person is responsible, provide their email.  \\n   - If multiple people are responsible, list all emails separated by commas.\\n\\n3. **Generating an Email Notification:**\\n   - Draft a professional email as a notification from the system.\\n   - Summarize the customer’s inquiry.\\n   - Include all relevant details to assist the recipient in addressing the inquiry.\\n\\n4. **Handling Invalid Leads:**\\n   - If the inquiry is unrelated to products, services, or solutions (e.g., job inquiries or general product inquiries), classify it as invalid and return:  \\n     `\\\"Invalid Lead - Not related to products, services, or solutions.\\\"`\\n\\n### **Output Requirements**\\n\\n1. **For Relevant Leads:**\\n   - **Email Address(es):** Provide the appropriate email(s).  \\n   - **Email Message Body:** Generate an email notification from the system summarizing the inquiry.\\n\\n2. **For Invalid Leads:**\\n   - Return: `\\\"Invalid Lead - Not related to products, services, or solutions.\\\"`\\n\\n\\n### **Email Template for Relevant Leads**\\n\\n**Email Address(es):** [Relevant Email IDs]\\n\\n**Email Message Body:**\\n\\n_Subject: New Inquiry from Customer Regarding [Product/Service/Solution]_  \\n\\nDear [Recipient(s)],  \\n\\nWe have received a new inquiry from a customer through our system. Below are the details:  \\n\\n**Customer Name:** [Customer Name]  \\n**Organization:** [Organization Name]  \\n**Contact Information:** [Contact Details]  \\n\\n**Inquiry Summary:**  \\n[Summarized description of the customer's request, e.g., “The customer is seeking to upgrade their restroom facilities with touchless soap dispensers and tissue holders installed behind mirrors. They have requested a site visit to assess the location and provide a proposal.”]  \\n\\n**Action Required:**  \\nPlease prioritize this inquiry and reach out to the customer promptly to address their requirements.  \\n\\nThank you,  \\n[Your System Name]  \\n\\n\\n### **Example Output**\\n\\n**Input Lead Notes:**\\n*\\\"Dear Syncbricks, We are looking to Develop Workflow Automation Soluition for our company, can you let us know the details what do you offer in tems of this.\\\"*\\n\\n**Output:**\\n\\n- **Email Address(es):** employee@syncbricks.com\\n\\n- **Email Message Body:**  \\n\\n_Subject: Workflow Automation Platform Integration_  \\n\\nDear -Emploiyee Name (s) --,  \\n\\nWe have received a new inquiry from a customer through our system. Below are the details:  \\n\\n**Customer Name:** Amjid Ali \\n**Organization:** Syncbricks LLC\\n**Contact Information:** 123456789 \\n\\n**Inquiry Summary:**  \\nThe customer is asking for workflow automation for their company \\n\\n**Action Required:**  \\nPlease prioritize this inquiry and reach out to the customer promptly to address their requirements.  \\n\\nThank you,  \\nSyncbricks LLC\\n\\n---\\nHere are the Lead Details\\nLead Name : {{ $json.data.lead_name }}\\nCompany : {{ $json.data.company_name }}\\nSource : {{ $json.data.source }}\\nNotes : {{ $json.data.notes }}\\nCity : {{ $json.data.city }}\\nCountry : {{ $json.data.country }}\\nMobile : {{ $json.data.mobile_no }}\",\n        \"options\": {},\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"1831dc36-910b-4a72-a90e-b411f105a8c3\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -800,\n        800\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"hTl3a2XqteCwExYY\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"79713c56-2f7c-4872-90e4-331715f54048\",\n      \"name\": \"Abbriviations\",\n      \"type\": \"n8n-nodes-base.googleSheetsTool\",\n      \"position\": [\n        -640,\n        800\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1gtdrAe-jjQH9gQdXA9PJ5y3dSAN4i6k_Rs5sDyALIfU/edit#gid=0\",\n          \"cachedResultName\": \"abbrivaitions\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1gtdrAe-jjQH9gQdXA9PJ5y3dSAN4i6k_Rs5sDyALIfU\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1gtdrAe-jjQH9gQdXA9PJ5y3dSAN4i6k_Rs5sDyALIfU/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Abbriviations List\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"L3lApjbQfMm36LLX\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"73b1e3c9-4703-4f87-8399-e7a9bf368d4c\",\n      \"name\": \"Lead Body\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -1640,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"82a674a2-4d12-45f2-b276-cc95cf7b2e93\",\n              \"name\": \"body\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.body }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"5f25d846-c639-49e5-bea2-160000bfb104\",\n      \"name\": \"Source Website and Status Open\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -1920,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"2b184de2-a64e-44e3-8f25-645539681533\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.body.source }}\",\n              \"rightValue\": \"Website\"\n            },\n            {\n              \"id\": \"9632cf65-11a1-483c-95c8-94bfe84fb243\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.body.status }}\",\n              \"rightValue\": \"Open\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"12ba65c9-0890-4862-9704-98492eb8f637\",\n      \"name\": \"Microsoft Outlook\",\n      \"type\": \"n8n-nodes-base.microsoftOutlook\",\n      \"position\": [\n        1180,\n        580\n      ],\n      \"parameters\": {\n        \"subject\": \"={{ $('Fields for Outlook').item.json.subject }}\",\n        \"bodyContent\": \"={{ $json.html }}\\n<a href=\\\"https://erpnext.syncbricks.com/app/lead/{{ $('Webhook').item.json.body.name }}\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">Here is Lead {{ $('Source Website and Status Open').item.json.body.name }} </a>\\n\",\n        \"toRecipients\": \"= {{ $('Fields for Outlook').item.json.email_addresses }}\",\n        \"additionalFields\": {\n          \"bodyContentType\": \"html\"\n        }\n      },\n      \"credentials\": {\n        \"microsoftOutlookOAuth2Api\": {\n          \"id\": \"9gy3uvf3pmBdpEsq\",\n          \"name\": \"Microsoft Outlook Al Ansari\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"b1410997-3705-4234-918e-a14e4ccc6b70\",\n      \"name\": \"Email Body Text Generated by AI\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        700,\n        580\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"cdce31fb-2ec9-45ce-a4ac-a6ff9c811dc3\",\n              \"name\": \"email_body\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.email_body }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b10684b9-9f72-42b3-a9f9-c54e711ceb59\",\n      \"name\": \"Fields for Outlook\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        360,\n        600\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Input text from the `output` field\\nconst textOutput = $json?.output || '';\\n\\n// Function to extract values from the text\\nfunction extractFields(text) {\\n    const fields = {};\\n\\n    // Regular expressions to extract each field\\n    const emailMatch = text.match(/\\\\*\\\\*Email Address\\\\(es\\\\):\\\\*\\\\*\\\\s*([^\\\\n]+)/);\\n    const subjectMatch = text.match(/_Subject:\\\\s*([^_]+)/);\\n    const emailBodyMatch = text.match(/Dear[\\\\s\\\\S]+/);\\n\\n    // Assign extracted values to the fields\\n    fields.email_addresses = emailMatch ? emailMatch[1].trim() : null;\\n    fields.subject = subjectMatch ? subjectMatch[1].trim() : null;\\n    fields.email_body = emailBodyMatch ? emailBodyMatch[0].trim() : null;\\n\\n    return fields;\\n}\\n\\n// Extract fields from the output\\nconst extractedFields = extractFields(textOutput);\\n\\n// Return the fields as JSON\\nreturn {\\n    json: extractedFields\\n};\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e2c10569-fde2-425c-8b20-fdb32a6e2bd5\",\n      \"name\": \"Email Body for Outlook\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        860,\n        580\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Input email body\\nconst emailBody = $json.email_body || '';\\n\\n// Function to convert plain text email body into HTML\\nfunction formatEmailBodyAsHtml(body) {\\n    // Replace markdown-like sections with corresponding HTML\\n    let htmlBody = body\\n        .replace(/\\\\*\\\\*Customer Name:\\\\*\\\\* (.+)/, '<p><strong>Customer Name:</strong> $1</p>')\\n        .replace(/\\\\*\\\\*Organization:\\\\*\\\\* (.+)/, '<p><strong>Organization:</strong> $1</p>')\\n        .replace(/\\\\*\\\\*Contact Information:\\\\*\\\\* (.+)/, '<p><strong>Contact Information:</strong> $1</p>')\\n        .replace(/\\\\*\\\\*Inquiry Summary:\\\\*\\\\*\\\\s*([\\\\s\\\\S]+?)(?=\\\\n\\\\n\\\\*\\\\*Action Required:)/, '<p><strong>Inquiry Summary:</strong> $1</p>')\\n        .replace(/\\\\*\\\\*Action Required:\\\\*\\\\*\\\\s*([\\\\s\\\\S]+)/, '<p><strong>Action Required:</strong> $1</p>');\\n\\n    // Wrap each paragraph in `<p>` tags for better readability\\n    htmlBody = htmlBody\\n        .replace(/Dear (.+?),/, '<p>Dear <strong>$1</strong>,</p>')\\n        .replace(/Thank you,\\\\s+(.+)/, '<p>Thank you,<br><strong>$1</strong></p>');\\n\\n    return htmlBody;\\n}\\n\\n// Convert the email body into HTML\\nconst formattedHtmlBody = formatEmailBodyAsHtml(emailBody);\\n\\n// Return the formatted HTML\\nreturn {\\n    html: formattedHtmlBody\\n};\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"3297550b-ed78-4528-ad65-facdc879590a\",\n      \"name\": \"Inquiry has Notes\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -1080,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"bc81994a-2ad8-4af7-8c58-2c7e58a0fd2e\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.data.notes }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"e2544a27-8b6d-4bb0-84f1-00c3a5e66978\",\n      \"name\": \"Inquiry is Valid?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        40,\n        620\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"ddd5e8a2-277f-4db6-b38d-28a7b91a2f66\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $json.output }}\",\n              \"rightValue\": \"**Invalid Lead - Not related to products, services, or solutions.**\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"39cc73e7-ceb3-4e8e-a5bc-55648595f784\",\n      \"name\": \"Company Profile\",\n      \"type\": \"n8n-nodes-base.googleDocsTool\",\n      \"position\": [\n        -540,\n        800\n      ],\n      \"parameters\": {\n        \"operation\": \"get\",\n        \"documentURL\": \"you-must-provide-the-doc-id\"\n      },\n      \"credentials\": {\n        \"googleDocsOAuth2Api\": {\n          \"id\": \"RdTuYvYpBqEKhIQ3\",\n          \"name\": \"Google Docs account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"8ee24c59-1acb-4d76-a136-74e69d694a49\",\n      \"name\": \"Company Policies\",\n      \"type\": \"n8n-nodes-base.googleDocsTool\",\n      \"position\": [\n        -420,\n        780\n      ],\n      \"parameters\": {\n        \"operation\": \"get\",\n        \"documentURL\": \"you-must-provide-the-doc-id\"\n      },\n      \"credentials\": {\n        \"googleDocsOAuth2Api\": {\n          \"id\": \"RdTuYvYpBqEKhIQ3\",\n          \"name\": \"Google Docs account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"a5db3aa7-8a77-4553-9c13-a96c51f32745\",\n      \"name\": \"Company Contact Database\",\n      \"type\": \"n8n-nodes-base.googleSheetsTool\",\n      \"position\": [\n        -300,\n        780\n      ],\n      \"parameters\": {\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\",\n          \"cachedResultUrl\": \"\",\n          \"cachedResultName\": \"\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"=Telephone Directory\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"L3lApjbQfMm36LLX\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"f3e73266-faa4-4e6d-8c60-92669d64233b\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2000,\n        257.53836663807056\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 297.84037615575886,\n        \"height\": 643.0692298205195,\n        \"content\": \"### Filter the Lead\\nI have done only for theose which are open and where the source is Website. You can remove this if you want to have all leads.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0056e35c-4901-406d-9a95-f6da26808841\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -60,\n        280\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 302.58963031819115,\n        \"height\": 660,\n        \"content\": \"### Output from AI Agent\\nIf the INquiry is invalid, not related to the products and services offered, it will invalidate that you can optionnally link the invalid output to email or anything. Options are limitless\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5e0e9561-0fb8-4225-aa59-58e25abc8ca1\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -880,\n        280.0000000000002\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 764.2159851725196,\n        \"height\": 648.5051458745236,\n        \"content\": \"### Customer Experience Agent (AI)\\nNow this Node is an AI Agent who is speicalized to understand the Lead Source and the Inquiry sent by Cusomter. The Agent will look at company information, which has detials of producuts and services defined in Google Docs, and the Contacts Sheet where a column must be added mentioning that who is the person dealing in which products, solutions and services. Once the inquiry is about speicifc product solution and service it will look from the sheet and then will decide to whom the email has to be sent. Details is defined in the Agent.\\nMake sure to drag fields from http request node\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5a3ca9c9-07c2-4c74-ba8c-6b14f487fc4d\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2420,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 398,\n        \"height\": 642,\n        \"content\": \"### Once the Lead is generatd in ERP\\n\\nConsider creating creating an inquiry web form in ERPNext and let the Website Visitor fill that Inquiry form, as soon as the iqnuiry form is filled this workflow will start.\\n\\nMake sure to create a webhook in ERPNext. Follow Below steps in ERPNext.\\n\\nGo to Wehbooks \\nDoctype : Lead\\nTrigger : on_insert\\n\\nPaste this webhook there, as test first and finally production\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cf930f52-d06b-40c1-91f5-fa1c3dfee09a\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        618.1625654107004,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 388.6432532629275,\n        \"height\": 662,\n        \"content\": \"### Email Body\\nGet only Email body from Previous Node and then Convert this to HTML Format so that it looks professional. \\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a1023b2b-3e0d-486f-9050-8ff98ff060b5\",\n      \"name\": \"Sticky Note12\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1440,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 248.905549047384,\n        \"height\": 654.6630436071407,\n        \"content\": \"### Get Details of Lead from ERPNext. For us most important is Notes\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"732046b2-967a-4e0c-85e4-ae04e8c0f9cf\",\n      \"name\": \"Sticky Note13\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1680,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 222.5278407657604,\n        \"height\": 651.0941643427163,\n        \"content\": \"### Get Lead ID\\nThis will extract the Lead Name in ERPNext. Ensure to send doc.name from the webhook in ERPnext\\n\\nIt will then send this to next node to get full details of this lead.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b80448ee-5a15-4569-99e4-c3e616a5600d\",\n      \"name\": \"Sticky Note14\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1035.2592266730085,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 399.43186296400074,\n        \"height\": 662,\n        \"content\": \"### Send Email\\n\\nNow drag and drop the fields from Previous Nodes. Email Addresses Subject and Body.\\n\\nRemember all fields are selected by AI Agent, whom to send email, what to send and so on. \\n\\nYou can alternatively inform your employees by whatsapp for quick action.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3d190d34-f6e0-47bc-9216-d312d1d6ee38\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2920,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 475.27306699862953,\n        \"height\": 636.1483291619771,\n        \"content\": \"## Developed by Amjid Ali\\n\\nThank you for using this workflow template. It has taken me countless hours of hard work, research, and dedication to develop, and I sincerely hope it adds value to your work.\\n\\nIf you find this template helpful, I kindly ask you to consider supporting my efforts. Your support will help me continue improving and creating more valuable resources.\\n\\nYou can contribute via PayPal here:\\n\\nhttp://paypal.me/pmptraining\\n\\nFor Full Course about ERPNext or Automation using AI follow below link\\n\\nhttp://lms.syncbricks.com\\n\\nAdditionally, when sharing this template, I would greatly appreciate it if you include my original information to ensure proper credit is given.\\n\\nThank you for your generosity and support!\\nEmail : amjid@amjidali.com\\nhttps://linkedin.com/in/amjidali\\nhttps://syncbricks.com\\nhttps://youtube.com/@syncbricks\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cfd7effc-92aa-43c6-9fc5-054b53de74a2\",\n      \"name\": \"Sticky Note16\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1160,\n        280\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 248.905549047384,\n        \"height\": 654.6630436071407,\n        \"content\": \"### Inquiry with Notes\\nIf inquiry is having notes then only it will forward to next node.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e5b0992c-e360-4323-82cb-c7ddec45deb5\",\n      \"name\": \"Get Lead Data from ERPNext\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -1360,\n        640\n      ],\n      \"parameters\": {\n        \"url\": \"=https://erpnext.syncbricks.com/api/resource/Lead/{{ $('Source Website and Status Open').item.json.body.name }}\",\n        \"options\": {},\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"erpNextApi\"\n      },\n      \"credentials\": {\n        \"erpNextApi\": {\n          \"id\": \"PInpnsxvPkvaiW0z\",\n          \"name\": \"ERPNext account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"87508043-baf5-4fa6-aa38-0f06881dc267\",\n      \"name\": \"Sticky Note10\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        280,\n        280\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 302.58963031819115,\n        \"height\": 660,\n        \"content\": \"### Prepare for Email\\nThis node will get approprate Fields for Email \\nEmail Addresses:\\nSubject : \\nEmail Body : \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2b4c1e91-c64b-43cb-aba2-c6f8f5a17c79\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -2300,\n        640\n      ],\n      \"webhookId\": \"a39ea4e2-99b7-4ae1-baff-9fb370333e2a\",\n      \"parameters\": {\n        \"path\": \"new-lead-generated-in-erpnext\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Source Website and Status Open\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Lead Body\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Lead Data from ERPNext\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Abbriviations\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Customer Lead AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Company Profile\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Customer Lead AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Company Policies\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Customer Lead AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Inquiry has Notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Customer Lead AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Inquiry is Valid?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fields for Outlook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Customer Lead AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fields for Outlook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Email Body Text Generated by AI\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Customer Lead AI Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Inquiry is Valid?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Email Body for Outlook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Microsoft Outlook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Company Contact Database\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Customer Lead AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Lead Data from ERPNext\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Inquiry has Notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Source Website and Status Open\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Lead Body\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Email Body Text Generated by AI\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Email Body for Outlook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "@n8n/n8n-nodes-langchain.agent",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.googleSheetsTool",
      "n8n-nodes-base.set",
      "n8n-nodes-base.if",
      "n8n-nodes-base.microsoftOutlook",
      "n8n-nodes-base.set",
      "n8n-nodes-base.code",
      "n8n-nodes-base.code",
      "n8n-nodes-base.if",
      "n8n-nodes-base.if",
      "n8n-nodes-base.googleDocsTool",
      "n8n-nodes-base.googleDocsTool",
      "n8n-nodes-base.googleSheetsTool",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.webhook"
    ],
    "trigger": null
  }
}