{
  "source": "1526_Mautic_Webhook_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"JiSesGjDIXIPYtbt\",\n  \"meta\": {\n    \"instanceId\": \"e2c978396c9c745cf0aaa9ed3abe4464dbcef93c5fe2df809b9e14440e628df6\"\n  },\n  \"name\": \"Shopify + Mautic\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"592b2608-e77e-4988-8f77-8820645b56ee\",\n      \"name\": \"Shopify Trigger\",\n      \"type\": \"n8n-nodes-base.shopifyTrigger\",\n      \"position\": [\n        540,\n        320\n      ],\n      \"webhookId\": \"252052f3-e844-4500-8c34-c57f583d4432\",\n      \"parameters\": {\n        \"topic\": \"customers/update\",\n        \"authentication\": \"accessToken\"\n      },\n      \"credentials\": {\n        \"shopifyAccessTokenApi\": {\n          \"id\": \"WbxXaLMHozAgY3Rz\",\n          \"name\": \"Shopify Access Token account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f2e6931d-0279-4142-9b9e-1092657d91e2\",\n      \"name\": \"Accepts Marketing?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1240,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"8e207eec-212a-48a9-b64e-2d15094c987f\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Shopify Trigger').item.json.email_marketing_consent.state }}\",\n              \"rightValue\": \"subscribed\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2a31657b-f1b3-4e4a-8f6a-3d3ee15aa052\",\n      \"name\": \"Accepts Marketing?1\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1240,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"8e207eec-212a-48a9-b64e-2d15094c987f\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Shopify Trigger').item.json.email_marketing_consent.state }}\",\n              \"rightValue\": \"subscribed\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"266a07ca-915a-4afd-9a0a-60eb974ee263\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1540,\n        720\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b9aee974-4d75-4b1e-80b7-8aab9d4f403d\",\n      \"name\": \"Add to confirmed segment\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        1840,\n        40\n      ],\n      \"parameters\": {\n        \"resource\": \"contactSegment\",\n        \"contactId\": \"={{ $json.id }}\",\n        \"segmentId\": 1,\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"mauticOAuth2Api\": {\n          \"id\": \"cBmAMa80nofah9QG\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a0fbd9e7-a60d-430b-b5df-4ec063e181c9\",\n      \"name\": \"Remove from confirmed segment\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        1840,\n        300\n      ],\n      \"parameters\": {\n        \"resource\": \"contactSegment\",\n        \"contactId\": \"={{ $json.id }}\",\n        \"operation\": \"remove\",\n        \"segmentId\": 1,\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"mauticOAuth2Api\": {\n          \"id\": \"cBmAMa80nofah9QG\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0bc8fc06-3bf5-4c49-acc2-1ed499a07ea1\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        540,\n        1500\n      ],\n      \"webhookId\": \"6485fca6-c641-4067-b19a-192709b88e45\",\n      \"parameters\": {\n        \"path\": \"6485fca6-c641-4067-b19a-192709b88e45\",\n        \"options\": {\n          \"rawBody\": true\n        },\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"001eff12-6f14-4fb2-afdd-e6b7956437bf\",\n      \"name\": \"Crypto\",\n      \"type\": \"n8n-nodes-base.crypto\",\n      \"position\": [\n        760,\n        1500\n      ],\n      \"parameters\": {\n        \"type\": \"SHA256\",\n        \"action\": \"hmac\",\n        \"secret\": \"a031f434181d2bce0a81694c11fafb5887c78a48c50da98d62b7ab7c6d57080c\",\n        \"encoding\": \"base64\",\n        \"binaryData\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6cde7c3c-e1f9-4584-908c-9b4a82e4f2a4\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        980,\n        1500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"eb322a60-a1e6-46ed-b7b9-539373f9d881\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Webhook').item.json.headers['webhook-signature'] }}\",\n              \"rightValue\": \"={{ $json.data }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e848a1d3-2f9b-4d27-8862-b3284654f818\",\n      \"name\": \"No Operation, do nothing1\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1260,\n        1700\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ff27ee31-c13d-4a52-a260-aef9df8c64a6\",\n      \"name\": \"GraphQL\",\n      \"type\": \"n8n-nodes-base.graphql\",\n      \"position\": [\n        1260,\n        1480\n      ],\n      \"parameters\": {\n        \"query\": \"=query {\\n  customers(first: 1, query: \\\"email:'{{ $json[\\\"body\\\"][\\\"mautic.lead_channel_subscription_changed\\\"][0][\\\"contact\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"email\\\"][\\\"value\\\"] }}'\\\") {\\n    edges {\\n      node {\\n        id\\n        state\\n      }\\n    }\\n  }\\n}\\n\",\n        \"endpoint\": \"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z98cM8akgh1jPtG7\",\n          \"name\": \"Header Auth  Shopify\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"168b255b-f796-426c-80fd-c2fe79ef973f\",\n      \"name\": \"Marketing Consent - subscribed\",\n      \"type\": \"n8n-nodes-base.graphql\",\n      \"position\": [\n        2120,\n        1160\n      ],\n      \"parameters\": {\n        \"query\": \"mutation customerEmailMarketingConsentUpdate($input: CustomerEmailMarketingConsentUpdateInput!) {\\n  customerEmailMarketingConsentUpdate(input: $input) {\\n    customer {\\n      id\\n    }\\n    userErrors {\\n      field\\n      message\\n    }\\n  }\\n}\\n\",\n        \"endpoint\": \"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\n        \"variables\": \"={\\n  \\\"input\\\": {\\n    \\\"customerId\\\": \\\"{{ $json[\\\"data\\\"][\\\"customers\\\"][\\\"edges\\\"][0][\\\"node\\\"][\\\"id\\\"] }}\\\",\\n    \\\"emailMarketingConsent\\\": {\\n      \\\"consentUpdatedAt\\\": \\\"{{ $now }}\\\",\\n      \\\"marketingOptInLevel\\\": \\\"CONFIRMED_OPT_IN\\\",\\n      \\\"marketingState\\\": \\\"SUBSCRIBED\\\"\\n    }\\n  }\\n}\\n\",\n        \"requestFormat\": \"json\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z98cM8akgh1jPtG7\",\n          \"name\": \"Header Auth  Shopify\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f7db8ec3-27d4-41f7-a0c9-6249bf6e805a\",\n      \"name\": \"Marketing Consent - unsubscribed\",\n      \"type\": \"n8n-nodes-base.graphql\",\n      \"position\": [\n        2120,\n        1500\n      ],\n      \"parameters\": {\n        \"query\": \"mutation customerEmailMarketingConsentUpdate($input: CustomerEmailMarketingConsentUpdateInput!) {\\n  customerEmailMarketingConsentUpdate(input: $input) {\\n    customer {\\n      id\\n    }\\n    userErrors {\\n      field\\n      message\\n    }\\n  }\\n}\\n\",\n        \"endpoint\": \"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\n        \"variables\": \"={\\n  \\\"input\\\": {\\n    \\\"customerId\\\": \\\"{{ $json[\\\"data\\\"][\\\"customers\\\"][\\\"edges\\\"][0][\\\"node\\\"][\\\"id\\\"] }}\\\",\\n    \\\"emailMarketingConsent\\\": {\\n      \\\"consentUpdatedAt\\\": \\\"{{ $now }}\\\",\\n      \\\"marketingOptInLevel\\\": \\\"CONFIRMED_OPT_IN\\\",\\n      \\\"marketingState\\\": \\\"UNSUBSCRIBED\\\"\\n    }\\n  }\\n}\\n\",\n        \"requestFormat\": \"json\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z98cM8akgh1jPtG7\",\n          \"name\": \"Header Auth  Shopify\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ff62697d-29d0-4b7e-b695-cd90535e5fa8\",\n      \"name\": \"Mautic - Accepts Marketing?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1820,\n        1180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"960e386c-4198-4b04-88a6-715162729064\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Webhook').item.json.body['mautic.lead_channel_subscription_changed'][0].new_status }}\",\n              \"rightValue\": \"contactable\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"8515256f-c49b-4000-9a1e-be9958720dd6\",\n      \"name\": \"Customer exists?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1540,\n        1480\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"looseTypeValidation\": false\n        },\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"4d2f02ab-f5e3-437d-8a35-f301888a8597\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.data.customers.edges }}\",\n              \"rightValue\": 0\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"616ae364-82a0-456a-abaf-b8855ca56f8f\",\n      \"name\": \"No Operation, do nothing2\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1820,\n        1640\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"afdeb330-06d0-4fdf-9f42-1d8ce74d483d\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        540,\n        1680\n      ],\n      \"parameters\": {\n        \"width\": 580.807881773399,\n        \"content\": \"## Webhook Validation\\nWe use the same key shared with Mautic to hash the incoming request. If the computed hash is identical to the one delivered the request is valid and can be processed\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"38633539-cc9a-4bde-92f7-39e697bd803f\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2040,\n        40\n      ],\n      \"parameters\": {\n        \"width\": 279.1188177339898,\n        \"height\": 383.7477832512317,\n        \"content\": \"## Mautic Segments\\nThe n8n Shopify node cannot Please make sure to select your segment on both nodes\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4107ce14-58bc-4171-87bb-5fc74a506e38\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1080,\n        1300\n      ],\n      \"parameters\": {\n        \"width\": 279.1188177339898,\n        \"content\": \"## Shopify \\nThe n8n Shopify node cannot get customer marketing consent, so we get this from the Shopify GraphQL API\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"33f97be7-a4bf-42ee-96ae-dbbe54f5248f\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        580,\n        1140\n      ],\n      \"parameters\": {\n        \"width\": 279.1188177339898,\n        \"content\": \"## Set your Shopify Subdomain here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7f203946-a365-44a3-8de0-1fe0b1964eab\",\n      \"name\": \"Set Shopify Subdomain\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        760,\n        1320\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"Shopify Subdomain\",\n              \"stringValue\": \"n8n-mautic-demo\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"544a4da2-11a4-465b-a30e-02ed618a77a6\",\n      \"name\": \"Search for Contact by Email\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        760,\n        320\n      ],\n      \"parameters\": {\n        \"limit\": 1,\n        \"options\": {\n          \"search\": \"={{ $json.email }}\"\n        },\n        \"operation\": \"getAll\",\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"mauticOAuth2Api\": {\n          \"id\": \"cBmAMa80nofah9QG\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"1332db6d-99ab-4d38-89b8-7f7ba25d4cf1\",\n      \"name\": \"Contact exists?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        980,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"5872c5d4-655f-4cd6-9b21-622acdcb0814\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.id }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"488494df-6e8c-4f8c-b7ed-5d6d67f083c8\",\n      \"name\": \"Create a new contact\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        1540,\n        480\n      ],\n      \"parameters\": {\n        \"email\": \"={{ $('Shopify Trigger').item.json.email }}\",\n        \"company\": \"=\",\n        \"options\": {},\n        \"lastName\": \"={{ $('Shopify Trigger').item.json.last_name }}\",\n        \"firstName\": \"={{ $('Shopify Trigger').item.json.first_name }}\",\n        \"authentication\": \"oAuth2\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"mauticOAuth2Api\": {\n          \"id\": \"cBmAMa80nofah9QG\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"586c736b-cd46-4c5c-ac2f-c4380cf465bb\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        1420\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 360.408084305475,\n        \"height\": 315.5897364788551,\n        \"content\": \"## Mautic to Shopify\\n\\nThis part uses GraphQL calls to the Shopify Admin API. In order to get a better understanding for the queries and mutations please check the API Docs.\\n\\nExamples from the Shopify Docs used in this workflow:\\n\\n[Get the first ten customers with an enabled customer account](https://shopify.dev/docs/api/admin-graphql/2024-01/queries/customers#examples-Get_the_first_ten_customers_with_an_enabled_customer_account)\\n\\n\\n[Mutation to update the Email Marketing consent](https://shopify.dev/docs/api/admin-graphql/2024-01/mutations/customerEmailMarketingConsentUpdate)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"47e8a011-b2ba-4839-ac85-24dd45e18020\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        20,\n        220\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 360.408084305475,\n        \"height\": 315.5897364788551,\n        \"content\": \"## Shopify to Mautic\\n\\nThis part uses the Shopify Trigger to watch for changes on customer data.\\n\\nTo use the Mautic nodes please make sure you have the API enabled in your Mautic Instance.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"71208adf-ebfb-4961-b23b-fb46c86ca09f\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GraphQL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Crypto\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GraphQL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Customer exists?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Crypto\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Set Shopify Subdomain\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Contact exists?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Accepts Marketing?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Accepts Marketing?1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Shopify Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search for Contact by Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Customer exists?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Mautic - Accepts Marketing?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Accepts Marketing?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add to confirmed segment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Remove from confirmed segment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Accepts Marketing?1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create a new contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create a new contact\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add to confirmed segment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Mautic - Accepts Marketing?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Marketing Consent - subscribed\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Marketing Consent - unsubscribed\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search for Contact by Email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Contact exists?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.shopifyTrigger",
      "n8n-nodes-base.if",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.mautic",
      "n8n-nodes-base.mautic",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.crypto",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.graphql",
      "n8n-nodes-base.graphql",
      "n8n-nodes-base.graphql",
      "n8n-nodes-base.if",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.mautic",
      "n8n-nodes-base.if",
      "n8n-nodes-base.mautic",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "shopify trigger"
  }
}