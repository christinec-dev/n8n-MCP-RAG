{
  "source": "1770_Webhook_Extractfromfile_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"YKZBEx4DTf0KGEBR\",\n  \"meta\": {\n    \"instanceId\": \"f5267db717c7383a3924a6083f6b9950be64cf36e2b4e9421d42eb2121922a14\"\n  },\n  \"name\": \"Image-Based Data Extraction API using Gemini AI\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"e3448003-5c62-4da6-8fcc-6817915dcbb8\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        40,\n        40\n      ],\n      \"webhookId\": \"18118afb-7fd2-47a5-a474-50813c5b20c8\",\n      \"parameters\": {\n        \"path\": \"data-extractor\",\n        \"options\": {},\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"3682c6bf-3442-4fba-ab6c-ae29e361ef93\",\n      \"name\": \"Respond to Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        1180,\n        40\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"bfa352d0-68a9-4f33-be54-254a5df22664\",\n      \"name\": \"Get image from URL\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        280,\n        40\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.body.image_url }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"c6c8de12-08dc-42e8-9c0e-86e04c7cacc0\",\n      \"name\": \"Call Gemini API (Flash Lite) with Image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        760,\n        40\n      ],\n      \"parameters\": {\n        \"url\": \"=https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"contents\\\": [\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"parts\\\": [\\n        {\\n          \\\"inlineData\\\": {\\n            \\\"data\\\": \\\"{{$json.data1}}\\\",\\n            \\\"mimeType\\\": \\\"image/jpeg\\\"\\n          }\\n        }\\n      ]\\n    },\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"parts\\\": [\\n        {\\n          \\\"text\\\": \\\"check this\\\"\\n        }\\n      ]\\n    }\\n  ],\\n  \\\"systemInstruction\\\": {\\n    \\\"role\\\": \\\"user\\\",\\n    \\\"parts\\\": [\\n      {\\n        \\\"text\\\": \\\"{{ $('Webhook').first().json.body.Requirement}}\\\"\\n      }\\n    ]\\n  },\\n  \\\"generationConfig\\\": {\\n    \\\"temperature\\\": 1,\\n    \\\"topK\\\": 40,\\n    \\\"topP\\\": 0.95,\\n    \\\"maxOutputTokens\\\": 8192,\\n    \\\"responseMimeType\\\": \\\"application/json\\\",\\n    \\\"responseSchema\\\": {\\n      \\\"type\\\": \\\"object\\\",\\n      \\\"properties\\\": {{ $('Webhook').first().json.body.properties.toJsonString()}}\\n    }\\n  }\\n}\\n\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"googlePalmApi\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"MhMVz0OkKPSPX2Wn\",\n          \"name\": \"Gemini API Srinivasan Online\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"06b0f807-aeba-44d6-bb1d-dfa1d50e1082\",\n      \"name\": \"Edit fields to output required data alone\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        980,\n        40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"4a2f1343-4b5d-4de8-b04b-5640e0a38d27\",\n              \"name\": \"result\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.candidates[0].content.parts[0].text.parseJson()}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"8c69dba2-f67c-4f8b-be18-02a414fd2ead\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        20,\n        280\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 820,\n        \"height\": 420,\n        \"content\": \"## Sample API Call (cURL) \\n```\\ncurl --request GET \\\\\\n  --url https://your_domain.com/webhook/data-extractor \\\\\\n  --data '{\\n  \\\"image_url\\\":\\\"https://www.immihelp.com/nri/images/sample-pan-card-front.jpg\\\",\\n  \\\"Requirement\\\":\\\"extract the details from the image\\\",\\n  \\\"properties\\\": {\\n        \\\"PAN Number\\\": {\\n          \\\"type\\\": \\\"string\\\"\\n        },\\n        \\\"Name\\\": {\\n          \\\"type\\\": \\\"string\\\"\\n        },\\n        \\\"Date of Birth\\\": {\\n          \\\"type\\\": \\\"string\\\"\\n        },\\n        \\\"Valid\\\": {\\n          \\\"type\\\": \\\"boolean\\\"\\n        }\\n      }\\n}'\\n```\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8839f0d7-306f-4dc2-aca5-6ca529e1a2ff\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        20,\n        740\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1240,\n        \"height\": 140,\n        \"content\": \"## Sample Output\\n```\\n{\\n  \\\"result\\\": \\\"{\\\\\\\"Date of Birth\\\\\\\":\\\\\\\"23/11/1974\\\\\\\",\\\\\\\"Name\\\\\\\":\\\\\\\"RAHUL GUPTA\\\\\\\",\\\\\\\"PAN Number\\\\\\\":\\\\\\\"ABCDE1234F\\\\\\\",\\\\\\\"Valid\\\\\\\":true}\\\"\\n}\\n```\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"df733e11-f194-4878-a514-47ddc9811281\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        40,\n        -520\n      ],\n      \"parameters\": {\n        \"width\": 940,\n        \"height\": 440,\n        \"content\": \"## Convert the workflow into an Endpoint\\n\\nThis n8n workflow provides a ready-to-use API endpoint for extracting structured data from images. The API takes an image URL as input, processes it using an AI-powered OCR model, and returns relevant extracted details in a structured JSON format.\\n\\n- The workflow converts the image to base64 before processing.\\n- It utilizes an AI-powered model (Gemini API) for text extraction.\\n- The output is formatted to include only the required fields.\\n- You can customize the extraction criteria by modifying the request parameters.\\n- Supports integration with various applications for automated data entry and processing.\\n\\nIt can be used for various use cases, such as:\\n\\n- Document OCR (ID cards, invoices, receipts)\\n- Text Extraction from Images\\n- Automated Form Processing\\n- Business Card Data Extraction\\n\\nSimply send a GET request with an image URL, define the extraction requirements, and receive structured JSON data in response.\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"aecf7331-6341-411e-8906-e42fc0ef264a\",\n      \"name\": \"Transform image to base64\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        520,\n        40\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"encoding\": \"ascii\"\n        },\n        \"operation\": \"binaryToPropery\",\n        \"destinationKey\": \"data1\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"b1fad586-998c-47ce-9921-e59527da029a\",\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get image from URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get image from URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Transform image to base64\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Transform image to base64\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call Gemini API (Flash Lite) with Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Call Gemini API (Flash Lite) with Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit fields to output required data alone\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit fields to output required data alone\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.respondToWebhook",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.extractFromFile"
    ],
    "trigger": null
  }
}