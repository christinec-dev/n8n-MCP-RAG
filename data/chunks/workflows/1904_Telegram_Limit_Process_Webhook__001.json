{
  "source": "1904_Telegram_Limit_Process_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"kjyWJWfDlyXkKL3m\",\n  \"meta\": {\n    \"instanceId\": \"31e69f7f4a77bf465b805824e303232f0227212ae922d12133a0f96ffeab4fef\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"‚ú®üî™ Advanced AI Powered Document Parsing & Text Extraction with Llama Parse\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"ea7670da-896e-4b9c-b0c2-b3a3dbb6f88f\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -2320,\n        80\n      ],\n      \"webhookId\": \"a9668054-5bd3-427d-8f18-932436441e42\",\n      \"parameters\": {\n        \"path\": \"parse\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2c445d40-5d8b-469e-811e-7423f57ba054\",\n      \"name\": \"Gmail\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        -2040,\n        -1260\n      ],\n      \"webhookId\": \"344de9dc-4062-4552-ae29-1e9150322cdb\",\n      \"parameters\": {\n        \"limit\": 28,\n        \"filters\": {\n          \"q\": \"has:attachment\",\n          \"sender\": \" joe@example.com\"\n        },\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"1xpVDEQ1yx8gV022\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"f321e1d3-24ba-4623-bb31-93c7f6389aa9\",\n      \"name\": \"Gmail Trigger\",\n      \"type\": \"n8n-nodes-base.gmailTrigger\",\n      \"position\": [\n        -2360,\n        -1260\n      ],\n      \"parameters\": {\n        \"filters\": {},\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            },\n            {}\n          ]\n        }\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"1xpVDEQ1yx8gV022\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"ad2701f8-be77-465e-bd58-0e964ba412c0\",\n      \"name\": \"Limit\",\n      \"type\": \"n8n-nodes-base.limit\",\n      \"position\": [\n        -1840,\n        -1260\n      ],\n      \"parameters\": {\n        \"keep\": \"lastItems\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c305dbce-714a-420e-8dd0-f5c6e80afa01\",\n      \"name\": \"Get Message\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        -1640,\n        -1260\n      ],\n      \"webhookId\": \"13036143-6e5b-47c1-84a4-a92cbc33b37f\",\n      \"parameters\": {\n        \"simple\": false,\n        \"options\": {\n          \"downloadAttachments\": true,\n          \"dataPropertyAttachmentsPrefixName\": \"=file\"\n        },\n        \"messageId\": \"={{ $('Gmail').item.json.id }}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"1xpVDEQ1yx8gV022\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"0e67527b-c886-41a1-b66b-c965fd6b44f3\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -920,\n        -1500\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 320,\n        \"height\": 340,\n        \"content\": \"## Send to LlamaParse\\nhttps://docs.cloud.llamaindex.ai/API/upload-file-api-v-1-parsing-upload-post\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"85e72267-7be0-49ac-b305-4c07356ce244\",\n      \"name\": \"Parse Document with LlamaParse\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -800,\n        -1360\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.cloud.llamaindex.ai/api/parsing/upload\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"json\"\n            }\n          }\n        },\n        \"sendBody\": true,\n        \"contentType\": \"multipart-form-data\",\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"=file\",\n              \"parameterType\": \"formBinaryData\",\n              \"inputDataFieldName\": \"file0\"\n            },\n            {\n              \"name\": \"webhook_url\",\n              \"value\": \"=https://[YOUR-N8N-URL]/webhook/parse\"\n            },\n            {\n              \"name\": \"accurate_mode\",\n              \"value\": \"true\"\n            },\n            {\n              \"name\": \"premium_mode\",\n              \"value\": \"false\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"9trkgqZBCEmSt6ng\",\n          \"name\": \"GET Webhook\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 4.2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"2664705a-31d5-439b-b1e4-fc6b708a7baa\",\n      \"name\": \"Summarize Email\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        -820,\n        -680\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $('Is there an Email Attachement').item.json.text }}\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"You are an expert at summarizing email messages.  Provide a summary of the provided email.\"\n            }\n          ]\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.5\n    },\n    {\n      \"id\": \"1405f933-b281-469f-a5b7-0de2f820dd09\",\n      \"name\": \"gpt-4o-mini\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -720,\n        -540\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"ea299469-7889-45c9-a8f1-679be09e5aaf\",\n      \"name\": \"Save LlamaParse ID and Summary to Google Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -140,\n        -1020\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"jobid\": \"={{ $json.id }}\",\n            \"summary\": \"={{ $json.text }}\",\n            \"image_url\": \"={{ $json.webViewLink }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"jobid\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"jobid\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"statement_date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"statement_date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"org_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"org_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"member_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"member_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"subtotal\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"subtotal\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"service_fees_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"service_fees_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"tips_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"tips_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"current_excl_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"current_excl_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"container_deposit_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"container_deposit_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"outstanding_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"outstanding_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"paid_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"paid_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"total_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_bc_pst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"total_bc_pst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_bc_pst_liquor\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"total_bc_pst_liquor\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_savings\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"total_savings\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"final_amount_due\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"final_amount_due\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"payment_reference\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"payment_reference\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"payment_amount\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"payment_amount\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"transaction_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"transaction_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"image_url\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"image_url\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"summary\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"summary\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"jobid\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"appendOrUpdate\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit#gid=0\",\n          \"cachedResultName\": \"Expenses\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit?usp=drivesdk\",\n          \"cachedResultName\": \"2024.Year.End.Expenses\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"SOLbth24hZWisXAv\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"d8454cf2-5bef-4bfa-9471-c358ff067765\",\n      \"name\": \"Save Document to Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -820,\n        -1020\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Is there an Email Attachement').item.json.id }}_{{ $('Is there an Email Attachement').item.binary.file0.fileName }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"root\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive\",\n          \"cachedResultName\": \"/ (Root folder)\"\n        },\n        \"inputDataFieldName\": \"=file0\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"UhdXGYLTAJbsa0xX\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"03f46b72-9e18-44a4-85ef-0eea058c3c6d\",\n      \"name\": \"Extract Invoice Details as JSON\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        -1180,\n        500\n      ],\n      \"parameters\": {\n        \"text\": \"=Analyze this markdown content and convert it to JSON following this exact schema:\\n{\\n    \\\"invoice_details\\\": {\\n        \\\"statement_date\\\": \\\"\\\",\\n        \\\"organization\\\": {\\n            \\\"name\\\": \\\"\\\",\\n            \\\"address\\\": \\\"\\\",\\n            \\\"gst_number\\\": \\\"\\\"\\n        },\\n        \\\"member\\\": {\\n            \\\"name\\\": \\\"\\\",\\n            \\\"company\\\": \\\"\\\",\\n            \\\"address\\\": \\\"\\\",\\n            \\\"contact_number\\\": \\\"\\\",\\n            \\\"organization_number\\\": \\\"\\\"\\n        }\\n    },\\n    \\\"transactions\\\": [\\n        {\\n            \\\"date\\\": \\\"\\\",\\n            \\\"document_number\\\": \\\"\\\",\\n            \\\"description\\\": \\\"\\\",\\n            \\\"base_amount\\\": 0.00,\\n            \\\"gst\\\": 0.00,\\n            \\\"bc_pst\\\": 0.00,\\n            \\\"bc_pst_liquor\\\": 0.00,  # Added for liquor PST\\n            \\\"container_deposit\\\": 0.00,  # Added for bottle deposits\\n            \\\"service_fee\\\": 0.00,\\n            \\\"tip_amount\\\": 0.00,\\n            \\\"regular_price\\\": 0.00,  # Added for regular price tracking\\n            \\\"savings_amount\\\": 0.00,  # Added for savings tracking\\n            \\\"total_charge\\\": 0.00,\\n            \\\"transaction_type\\\": \\\"\\\"\\n        }\\n    ],\\n    \\\"payment_details\\\": {\\n        \\\"previous_balance\\\": 0.00,\\n        \\\"payment_amount\\\": 0.00,\\n        \\\"payment_reference\\\": \\\"\\\",\\n        \\\"payment_date\\\": \\\"\\\",\\n        \\\"payment_method\\\": \\\"\\\",\\n        \\\"payment_status\\\": \\\"\\\",\\n        \\\"card_number\\\": \\\"\\\",  # Added for card details\\n        \\\"auth_number\\\": \\\"\\\",  # Added for authorization\\n        \\\"transaction_number\\\": \\\"\\\"\\n    },\\n    \\\"invoice_summary\\\": {\\n        \\\"subtotal\\\": 0.00,\\n        \\\"service_fees_total\\\": 0.00,\\n        \\\"tips_total\\\": 0.00,\\n        \\\"current_excl_gst\\\": 0.00,\\n        \\\"container_deposit_total\\\": 0.00,  # Added for deposits\\n        \\\"outstanding_gst\\\": 0.00,\\n        \\\"paid_gst\\\": 0.00,\\n        \\\"total_gst\\\": 0.00,\\n        \\\"total_bc_pst\\\": 0.00,\\n        \\\"total_bc_pst_liquor\\\": 0.00,  # Added for liquor PST if shown in markdown content\\n        \\\"total_savings\\\": 0.00,  # Added for savings\\n        \\\"final_amount_due\\\": 0.00\\n    },\\n    \\\"payment_terms\\\": {\\n        \\\"due_date\\\": \\\"\\\",\\n        \\\"processing_date\\\": \\\"\\\",\\n        \\\"special_notices\\\": [],\\n        \\\"cancellation_policy\\\": \\\"\\\",\\n        \\\"refund_policy\\\": \\\"\\\",\\n        \\\"return_policy\\\": \\\"\\\"  # Added for return policy\\n    },\\n    \\\"additional_info\\\": {\\n        \\\"booking_number\\\": \\\"\\\",\\n        \\\"transaction_time\\\": \\\"\\\",  # Added for transaction time\\n        \\\"register_info\\\": \\\"\\\",     # Added for register details\\n        \\\"event_details\\\": {\\n            \\\"date\\\": \\\"\\\",\\n            \\\"time\\\": \\\"\\\",\\n            \\\"location\\\": \\\"\\\"\\n        },\\n        \\\"special_instructions\\\": []\\n    },\\n    \\\"summary\\\": \\\"\\\" # The natural language summary of the invoice\\n}\\n\\nMarkdown Content:\\n{{ $json.data }}\\n\\nImportant:\\n- Extract exact values from the markdown\\n- Return only valid JSON\\n- Include all fields even if empty\\n- Format numbers as floats with 2 decimal places\\n- Track container deposits separately\\n- Show liquor PST (10%) separately from regular PST if provided in markdown content\\n- Include regular prices and savings amounts\\n- Track transaction details including card info and authorization\\n- Parse return policy information\\n- Include register and transaction time details\\n- Ensure final_amount_due equals the sum of all applicable charges and taxes\\n- Summarize the markdown contents\\n- Only output valid JSON without any preamble or further explanation.  Remove any ```json and ``` from response.\",\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.5,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"3c371677-76e8-45d7-8c05-a4ca1cc0b1fe\",\n      \"name\": \"gpt-4o-mini1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -1600,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9ff3f86f-9ffc-42fa-b428-a6bfabf2426a\",\n      \"name\": \"gpt-4o-mini2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -1080,\n        640\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"69a0505f-1fe4-4581-ad2d-5bc7d68874e9\",\n      \"name\": \"Update Google Sheet by LlamaParse ID\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -540,\n        600\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"jobid\": \"={{ $('Webhook').item.json.body.jobId }}\",\n            \"summary\": \"={{ $json.output.summary }}\",\n            \"org_name\": \"={{ $json.output.invoice_details.organization.name }}\",\n            \"paid_gst\": \"={{ $json.output.invoice_summary.paid_gst }}\",\n            \"subtotal\": \"={{ $json.output.invoice_summary.subtotal }}\",\n            \"total_gst\": \"={{ $json.output.invoice_summary.total_gst }}\",\n            \"tips_total\": \"={{ $json.output.invoice_summary.tips_total }}\",\n            \"member_name\": \"={{ $json.output.invoice_details.member.name }}\",\n            \"total_bc_pst\": \"={{ $json.output.invoice_summary.total_bc_pst }}\",\n            \"total_savings\": \"={{ $json.output.invoice_summary.total_savings }}\",\n            \"payment_amount\": \"={{ $json.output.payment_details.payment_amount }}\",\n            \"statement_date\": \"={{ $json.output.invoice_details.statement_date }}\",\n            \"outstanding_gst\": \"={{ $json.output.invoice_summary.outstanding_gst }}\",\n            \"current_excl_gst\": \"={{ $json.output.invoice_summary.current_excl_gst }}\",\n            \"final_amount_due\": \"={{ $json.output.invoice_summary.final_amount_due }}\",\n            \"payment_reference\": \"={{ $json.output.payment_details.payment_reference }}\",\n            \"service_fees_total\": \"={{ $json.output.invoice_summary.service_fees_total }}\",\n            \"transaction_number\": \"={{ $json.output.payment_details.transaction_number }}\",\n            \"total_bc_pst_liquor\": \"={{ $json.output.invoice_summary.total_bc_pst_liquor }}\",\n            \"container_deposit_total\": \"={{ $json.output.invoice_summary.container_deposit_total }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"jobid\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"jobid\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"statement_date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"statement_date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"org_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"org_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"member_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"member_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"subtotal\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"subtotal\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"service_fees_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"service_fees_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"tips_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"tips_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"current_excl_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"current_excl_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"container_deposit_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"container_deposit_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"outstanding_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"outstanding_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"paid_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"paid_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"total_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_bc_pst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"total_bc_pst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_bc_pst_liquor\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"total_bc_pst_liquor\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_savings\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"total_savings\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"final_amount_due\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"final_amount_due\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"payment_reference\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"payment_reference\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"payment_amount\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"payment_amount\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"transaction_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"transaction_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"summary\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"summary\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"jobid\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit#gid=0\",\n          \"cachedResultName\": \"Expenses\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit?usp=drivesdk\",\n          \"cachedResultName\": \"2024.Year.End.Expenses\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"SOLbth24hZWisXAv\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"19907cba-4530-4f25-8a6f-435b1f8d23ad\",\n      \"name\": \"Invoice Details\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -780,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"e145ed8c-cdea-4e5a-ba11-d8ce595dfb8d\",\n              \"name\": \"output\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"af95c024-8e36-499b-af32-4c661da49a61\",\n      \"name\": \"Prepare Message\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -540,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"3e566101-2ad9-444b-8459-451ba6a91575\",\n              \"name\": \"invoice_details.statement_date\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.output.invoice_details.statement_date }}\"\n            },\n            {\n              \"id\": \"57a466f6-d354-4864-98d3-ba4673afde98\",\n              \"name\": \"invoice_details.organization\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.output.invoice_details.organization }}\"\n            },\n            {\n              \"id\": \"e1b22978-8114-4956-a5fc-3efbc43335a3\",\n              \"name\": \"invoice_details.member\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.output.invoice_details.member }}\"\n            },\n            {\n              \"id\": \"e45a744c-0874-48b7-b59a-9d83aad27ff3\",\n              \"name\": \"payment_details\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.output.payment_details }}\"\n            },\n            {\n              \"id\": \"c0335dc7-1b5c-41fc-b60a-bf45248c9f7f\",\n              \"name\": \"invoice_summary\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.output.invoice_summary }}\"\n            },\n            {\n              \"id\": \"6c9ba3bf-37a6-4a8f-b97d-991f3ce6950f\",\n              \"name\": \"summary\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.output.summary }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"333f42a7-2665-4613-89c9-c184d764af37\",\n      \"name\": \"Send Invoice Details as Telegram Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -340,\n        400\n      ],\n      \"webhookId\": \"04464e72-2be3-4df9-8a08-18d23cb75d72\",\n      \"parameters\": {\n        \"text\": \"={{ $json.summary }}\\n--------\\n{{ $json.invoice_summary.toJsonString() }}\",\n        \"chatId\": \"={{ $env.TELEGRAM_CHAT_ID }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"faa0768f-1d4c-42c4-902c-b2d0d40f0eb4\",\n      \"name\": \"gpt-4o-mini3\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -1080,\n        60\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d1a54284-60d1-4fac-b81b-4ed1610ddf2e\",\n      \"name\": \"Send Error Message 2\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -780,\n        600\n      ],\n      \"webhookId\": \"3ba1ee6d-1648-4421-823b-e68ae14d769b\",\n      \"parameters\": {\n        \"text\": \"=Error in workflow\",\n        \"chatId\": \"={{ $env.TELEGRAM_CHAT_ID }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"b1b50042-8270-4e13-b7b1-6d017e9be8d9\",\n      \"name\": \"Send Error Message 1\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -780,\n        60\n      ],\n      \"webhookId\": \"3ba1ee6d-1648-4421-823b-e68ae14d769b\",\n      \"parameters\": {\n        \"text\": \"=Error in workflow\",\n        \"chatId\": \"={{ $env.TELEGRAM_CHAT_ID }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a365c8a1-c0fb-43f7-84fa-b68a0e9c087e\",\n      \"name\": \"Send Document Summary as Telegram Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -540,\n        -200\n      ],\n      \"webhookId\": \"04464e72-2be3-4df9-8a08-18d23cb75d72\",\n      \"parameters\": {\n        \"text\": \"={{ $json.text }}\",\n        \"chatId\": \"={{ $env.TELEGRAM_CHAT_ID }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"6abd00a0-2971-49f9-812f-f65a0004136b\",\n      \"name\": \"Summarize Document\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        -1180,\n        -80\n      ],\n      \"parameters\": {\n        \"text\": \"=Please analyze this document and provide:\\n\\n## Document Analysis\\n- A concise executive summary (2-3 sentences)\\n- Key themes and main points\\n- Notable findings or insights\\n- Data highlights and important statistics (if applicable)\\n\\n## Recommendations\\n- Action items or next steps\\n- Areas requiring further investigation\\n- Potential implications\\n\\n## Format Requirements\\n- Structure the analysis using clear headers and sections\\n- Include relevant quotes to support key points\\n- Present any numerical data in tables or bullet points\\n- Highlight critical information using bold text\\n\\nPlease maintain the original document's context while making the content more accessible and actionable.\\n\\nHere is the document: {{ $json.data }}\\n\",\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.5,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"e672bcf3-0d5f-4410-ac5b-660c3ba0c456\",\n      \"name\": \"Classify Parsed Document\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textClassifier\",\n      \"position\": [\n        -1680,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"inputText\": \"={{ $json.data }}\",\n        \"categories\": {\n          \"categories\": [\n            {\n              \"category\": \"not invoice\",\n              \"description\": \"The document is not an invoice\"\n            },\n            {\n              \"category\": \"invoice\",\n              \"description\": \"The document is an invoice\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cc522966-3e6a-4830-bde9-d4e251752ec0\",\n      \"name\": \"Get Parsed Markdown\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -1980,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"55b5a755-eeaf-4ce7-b600-e6c864dc7e10\",\n              \"name\": \"data\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.md }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"683fa521-dfd0-4b1c-905f-d5a4f56ab65a\",\n      \"name\": \"Prepare Data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -640,\n        -1020\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"cee9e2d3-b311-4903-9867-e7d3d7ed2456\",\n              \"name\": \"google_drive_fileid\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.id }}\"\n            },\n            {\n              \"id\": \"5c6eddf6-5a5e-4c51-87ed-8e3aabc2f65d\",\n              \"name\": \"webViewLink\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.webViewLink }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b64a21ab-0e1f-4d6c-b718-a9aaaa27ae19\",\n      \"name\": \"HTTP Request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -2040,\n        -860\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.cloud.llamaindex.ai/api/parsing/supported_file_extensions\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"cd0699cf-3a95-4dc8-806a-6a01339c598d\",\n      \"name\": \"Is there an Email Attachement\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -1420,\n        -1260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"460b82e5-30f5-4cb3-a937-a275fd256fcc\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $input.item.binary }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"269ba37f-fa18-4333-be3c-eee6ef5c0f56\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        -1840,\n        -860\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\",\n        \"destinationFieldName\": \"extensions\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"dffd2e83-58ff-49a0-b547-3b6f4b92dfa9\",\n      \"name\": \"Edit Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -1620,\n        -860\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c9c59aae-b507-4493-a047-495bed344a5e\",\n              \"name\": \"extension\",\n              \"type\": \"string\",\n              \"value\": \"=.{{ $('Is there an Email Attachement').item.binary.file0.fileExtension }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"02a121a4-edea-45c4-b325-2f61b3d0b02e\",\n      \"name\": \"Merge Email Processing\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -380,\n        -1020\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combineBy\": \"combineByPosition\",\n        \"numberInputs\": 3\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"c1310be3-6448-48d1-a954-caa3d4651075\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -1120,\n        -1020\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combineBy\": \"combineAll\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"dbe3a235-0bae-4743-b53e-154b75911482\",\n      \"name\": \"If Supported File Extensions\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -1420,\n        -860\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"f76cc5a7-6882-4e1f-86d5-99d5d9e90a34\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('Aggregate').item.json.extensions.includes($json.extension)}}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"1413f84b-d1a9-4b0c-ae43-7f303a54527e\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        -1120,\n        -1260\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9f3ae287-cb8b-466c-8dbe-678be30c2c04\",\n      \"name\": \"No Operation, do nothing1\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        -1120,\n        -780\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6f9b5ae2-22e8-4dc8-ba0b-06fbc585f209\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2140,\n        -980\n      ],\n      \"parameters\": {\n        \"width\": 920,\n        \"height\": 320,\n        \"content\": \"## Check for Supported File Extension\\nhttps://docs.cloud.llamaindex.ai/API/get-supported-file-extensions-api-v-1-parsing-supported-file-extensions-get\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"28c5c09a-9a15-4af9-8253-59ae36dfe390\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2140,\n        -1420\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 920,\n        \"height\": 400,\n        \"content\": \"## Get Emails with Attachments\\n### ‚òÄÔ∏èDisclaimer\\nThis workflow only processes the the first attachment of the email.\\nAdjust search and limit settings to suit your use case.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3174a934-3b64-47b2-b81b-bfe717a034e2\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -920,\n        -1120\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 460,\n        \"height\": 300,\n        \"content\": \"## Save Document to Google Drive\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"92f079d1-c5bd-45fe-9372-7ff521eda15b\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -920,\n        -780\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 460,\n        \"height\": 380,\n        \"content\": \"## Summarize the Email Message\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fd7d7e7a-005a-4a43-a3de-e9bb036bb615\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        -1120\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 300,\n        \"height\": 300,\n        \"content\": \"## Save To Google Sheets\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c6469054-0345-4371-8928-21a04c21b131\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -3060,\n        -1540\n      ],\n      \"parameters\": {\n        \"width\": 540,\n        \"height\": 1340,\n        \"content\": \"# Description\\n\\nThis workflow automates document processing using LlamaParse to extract and analyze text from various file formats. It intelligently processes documents, extracts structured data, and delivers actionable insights through multiple channels.\\n\\n## How It Works\\n\\n### Document Ingestion & Processing üìÑ\\n- Monitors Gmail for incoming attachments or accepts documents via webhook\\n- Validates file formats against supported LlamaParse extensions\\n- Uploads documents to LlamaParse for advanced text extraction\\n- Stores original documents in Google Drive for reference\\n\\n### Intelligent Document Analysis üß†\\n- Automatically classifies document types (invoices, reports, etc.)\\n- Extracts structured data using customized AI prompts\\n- Generates comprehensive document summaries with key insights\\n- Converts unstructured text into organized JSON data\\n\\n### Invoice Processing Automation üíº\\n- Extracts critical invoice details (dates, amounts, line items)\\n- Organizes financial data into structured formats\\n- Calculates tax breakdowns, subtotals, and payment information\\n- Maintains detailed records for accounting purposes\\n\\n### Multi-Channel Delivery üì±\\n- Saves extracted data to Google Sheets for tracking and analysis\\n- Sends concise summaries via Telegram for immediate review\\n- Creates searchable document archives in Google Drive\\n- Updates spreadsheets with structured financial information\\n\\n## Setup Steps\\n\\n### Configure API Credentials üîë\\n- Set up LlamaParse API connection\\n- Configure Gmail OAuth for email monitoring\\n- Set up Google Drive and Sheets integrations\\n- Add Telegram bot credentials for notifications\\n\\n### Customize AI Processing ‚öôÔ∏è\\n- Adjust document classification parameters\\n- Modify extraction templates for specific document types\\n- Fine-tune summary generation prompts\\n- Customize invoice data extraction schema\\n\\n### Test and Deploy üöÄ\\n- Test with sample documents of various formats\\n- Verify data extraction accuracy\\n- Confirm notification delivery\\n- Monitor processing pipeline performance\\n\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b2024905-5c3b-49d5-89b9-ef41c4a4283c\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2440,\n        -1340\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 260,\n        \"height\": 280,\n        \"content\": \"## üëçTry Me!\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"22284854-4005-4678-94f8-d914e031e6fc\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2480,\n        -1540\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 2600,\n        \"height\": 1180,\n        \"content\": \"# ‚ú®üî™ Advanced AI Powered Document Parsing & Text Extraction with Llama Parse\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4f0c910e-7ae6-40ac-a659-c14a6704aaba\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1280,\n        280\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 1160,\n        \"height\": 540,\n        \"content\": \"## Example Invoice Processing\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e63bbfe8-8be7-4e3f-a8f5-a85b2ee82959\",\n      \"name\": \"Sticky Note10\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1220,\n        360\n      ],\n      \"parameters\": {\n        \"width\": 360,\n        \"height\": 420,\n        \"content\": \"## Extract Invoice as JSON\\n‚òÄÔ∏èUpdate User & System Prompt for Your Specific Use Case\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d321e139-0828-4932-b5a9-ef11f6ae9baa\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1280,\n        -280\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 980,\n        \"height\": 520,\n        \"content\": \"## Example Document Summarizing\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ab9081bd-c1c5-4db1-8dcd-ff243a7ab9be\",\n      \"name\": \"Sticky Note12\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1220,\n        -200\n      ],\n      \"parameters\": {\n        \"width\": 360,\n        \"height\": 400,\n        \"content\": \"## Summarize Document\\n‚òÄÔ∏èUpdate User & System Prompt for Your Specific Use Case\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c08bbfa8-abe1-47e2-babe-b62581bcd011\",\n      \"name\": \"Sticky Note13\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1760,\n        -40\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 440,\n        \"height\": 420,\n        \"content\": \"## Classify Parsed Document\\nAdd More Classifications as Required\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5ffb907f-9701-401e-85e8-3b91a706ab10\",\n      \"name\": \"Sticky Note14\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2060,\n        -40\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 260,\n        \"height\": 320,\n        \"content\": \"## Parsed Markdown from LlamaParse\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a53034d2-34df-421a-aa14-d9d1bbc00fc5\",\n      \"name\": \"Sticky Note15\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2440,\n        -40\n      ],\n      \"parameters\": {\n        \"width\": 340,\n        \"height\": 320,\n        \"content\": \"## Receive Parsed Document from LlamaParse\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"933f03f2-c231-4dcd-8aeb-ce716b8cc00e\",\n      \"name\": \"Sticky Note16\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2480,\n        -320\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 2400,\n        \"height\": 1180,\n        \"content\": \"# ü™ùWebhook to Receive LlamaParse Response\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"505a51e4-dea1-4876-964e-f59af728c65b\",\n      \"name\": \"Sticky Note17\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1760,\n        420\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 440,\n        \"height\": 400,\n        \"content\": \"## Save Parsed Document to Google Drive\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"33ca5eaf-30da-4360-a12b-a7dd8614743f\",\n      \"name\": \"Save Summarized Document to Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -540,\n        0\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Webhook').item.json.body.jobId }}-summary.md\",\n        \"content\": \"={{ $json.text }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"root\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive\",\n          \"cachedResultName\": \"/ (Root folder)\"\n        },\n        \"operation\": \"createFromText\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"UhdXGYLTAJbsa0xX\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"a1e8264f-fa99-49a5-a837-6aaf3a2dc39a\",\n      \"name\": \"Save Parsed Document to Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -1600,\n        560\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Webhook').item.json.body.jobId }}-parsed.md\",\n        \"content\": \"={{ $json.data }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"root\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive\",\n          \"cachedResultName\": \"/ (Root folder)\"\n        },\n        \"operation\": \"createFromText\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"UhdXGYLTAJbsa0xX\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"timezone\": \"America/Vancouver\",\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"c11e3a8a-499b-4b1e-b919-ffbed36ba898\",\n  \"connections\": {\n    \"Gmail\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Limit\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Limit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse Document with LlamaParse\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Save Document to Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Summarize Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Parsed Markdown\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If Supported File Extensions\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is there an Email Attachement\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Summarize Email\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Email Processing\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Classify Parsed Document\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini2\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Extract Invoice Details as JSON\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini3\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Summarize Document\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Gmail Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gmail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Invoice Details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Update Google Sheet by LlamaParse ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Invoice Details as Telegram Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Summarize Email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Email Processing\",\n            \"type\": \"main\",\n            \"index\": 2\n          }\n        ]\n      ]\n    },\n    \"Summarize Document\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Document Summary as Telegram Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Save Summarized Document to Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Error Message 1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Parsed Markdown\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Classify Parsed Document\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Save Parsed Document to Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge Email Processing\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save LlamaParse ID and Summary to Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Classify Parsed Document\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Summarize Document\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Extract Invoice Details as JSON\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If Supported File Extensions\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is there an Email Attachement\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save Document to Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse Document with LlamaParse\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Email Processing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Invoice Details as JSON\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Invoice Details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Error Message 2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save LlamaParse ID and Summary to Google Sheets\": {\n      \"main\": [\n        []\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.gmailTrigger",
      "n8n-nodes-base.limit",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "@n8n/n8n-nodes-langchain.chainLlm",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.googleDrive",
      "@n8n/n8n-nodes-langchain.chainLlm",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.telegram",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "@n8n/n8n-nodes-langchain.chainLlm",
      "@n8n/n8n-nodes-langchain.textClassifier",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.if",
      "n8n-nodes-base.aggregate",
      "n8n-nodes-base.set",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.googleDrive"
    ],
    "trigger": "gmail trigger"
  }
}