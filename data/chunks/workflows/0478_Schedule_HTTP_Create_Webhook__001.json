{
  "source": "0478_Schedule_HTTP_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"db39e47c-df1f-4fec-86e5-fc391cce68da\",\n      \"name\": \"Add Log in History\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1360,\n        540\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {},\n          \"schema\": [\n            {\n              \"id\": \"price\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"price\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"link\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"link\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"update\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"update\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"autoMapInputData\",\n          \"matchingColumns\": [\n            \"update\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"appendOrUpdate\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 440562612,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg/edit#gid=440562612\",\n          \"cachedResultName\": \"Pricing History\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Zalando Links\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"1nTQmlgxR0AJJDGA\",\n          \"name\": \"n8ninja - Sheet\"\n        }\n      },\n      \"typeVersion\": 4.3\n    },\n    {\n      \"id\": \"56733bdb-8dc7-4c78-9df2-5ee147afe061\",\n      \"name\": \"Update Products Infos\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1360,\n        360\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {},\n          \"schema\": [\n            {\n              \"id\": \"link\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"link\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"price\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"price\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"row_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"row_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"autoMapInputData\",\n          \"matchingColumns\": [\n            \"link\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg/edit#gid=0\",\n          \"cachedResultName\": \"Links\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Zalando Links\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"1nTQmlgxR0AJJDGA\",\n          \"name\": \"n8ninja - Sheet\"\n        }\n      },\n      \"typeVersion\": 4.3\n    },\n    {\n      \"id\": \"f87196d7-26ec-41d6-af04-c4b57f3ea899\",\n      \"name\": \"If price below price alert\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1360,\n        740\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"0466f2d9-de7a-4017-933a-acda8fb84191\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"lte\"\n              },\n              \"leftValue\": \"={{ parseFloat($json.price) }}\",\n              \"rightValue\": \"={{ parseFloat($('List Products').item.json.price_alert) }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2663fb7a-08ab-45b7-b6d3-4eea495185c4\",\n      \"name\": \"List Products\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        600,\n        540\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg/edit#gid=0\",\n          \"cachedResultName\": \"Links\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Zalando Links\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"1nTQmlgxR0AJJDGA\",\n          \"name\": \"n8ninja - Sheet\"\n        }\n      },\n      \"typeVersion\": 4.3\n    },\n    {\n      \"id\": \"5ae11ccd-ed5e-4e08-8f42-b3a1c45323df\",\n      \"name\": \"Format Product\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1060,\n        540\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"77ef948b-e4a4-4695-a5e6-bbb21b99f177\",\n              \"name\": \"price\",\n              \"type\": \"string\",\n              \"value\": \"={{ parseFloat($json.data.split('\\\"twitter:data1\\\" content=\\\"')[1].split('\\\"')[0].split('&nbsp;')[1]) }}\"\n            },\n            {\n              \"id\": \"cf241232-d85d-40d7-bf5c-6d49336d6ce1\",\n              \"name\": \"name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.data.split('<title>')[1].split('</title>')[0].split('-')[0] }} {{ $json.data.split('<title>')[1].split('</title>')[0].split('-')[1] }} {{ $json.data.split('<title>')[1].split('</title>')[0].split('-')[2] }}\"\n            },\n            {\n              \"id\": \"ca07eca0-8bad-4997-a124-e8636eb07bd5\",\n              \"name\": \"link\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('List Products').item.json.link }}\"\n            },\n            {\n              \"id\": \"c2d92a0f-56cc-4b74-bbd3-d8a1bb0d6cd7\",\n              \"name\": \"update\",\n              \"type\": \"string\",\n              \"value\": \"={{ $now.format('D') }}\"\n            },\n            {\n              \"id\": \"af33b7f1-8367-4f05-bc7e-03d119c3ac76\",\n              \"name\": \"\",\n              \"type\": \"string\",\n              \"value\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"ae11877a-e83e-44c9-b6f2-b5cd0c8a3c1e\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        380,\n        540\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"8361e609-0185-4939-92c4-07ec7826bdab\",\n      \"name\": \"Scrap Product\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        820,\n        540\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.link }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"6a98aad8-9475-4243-948a-b904cde4687a\",\n      \"name\": \"Notify Price Reduction\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        1600,\n        720\n      ],\n      \"parameters\": {\n        \"sendTo\": \"n8n.ninja@gmail.com\",\n        \"message\": \"=<h3>Price reduction alert for {{ $('Format Product').item.json[\\\"name\\\"] }}</h3>\\n\\n<p>New price {{ $('Format Product').item.json[\\\"price\\\"] }} CHF is bellow {{ $('List Products').item.json[\\\"price_alert\\\"] }} CHF</p>\\n\\nView product: {{ $('List Products').item.json[\\\"link\\\"] }}\\n\\n\\n\",\n        \"options\": {},\n        \"subject\": \"=⚠️ Price Reduction: {{ $('Format Product').item.json.name }}\\n\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"DMcPDN0IHPwGmI7f\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"427f51a9-7ebf-42df-bb97-e0a17a37d2cb\",\n      \"name\": \"Monitor Zalando Product\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        380,\n        280\n      ],\n      \"webhookId\": \"6da9a655-b46b-454d-bb96-32e203627a20\",\n      \"parameters\": {\n        \"path\": \"6da9a655-b46b-454d-bb96-32e203627a20\",\n        \"options\": {},\n        \"formTitle\": \"Add Product\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldLabel\": \"link\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"number\",\n              \"fieldLabel\": \"price_alert\",\n              \"requiredField\": true\n            }\n          ]\n        },\n        \"formDescription\": \"Past in a Zalando URL and the price bellow you would like to be notified\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"39711d6f-d699-415b-9a1b-3971839e7e8a\",\n      \"name\": \"Add Product\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        580,\n        280\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"link\": \"={{ $json.link }}\",\n            \"price_alert\": \"={{ $json.price_alert }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"link\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"link\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"price_alert\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"price_alert\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"price\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"price\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"update\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"update\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"link\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"appendOrUpdate\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg/edit#gid=0\",\n          \"cachedResultName\": \"Links\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Zalando Links\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"1nTQmlgxR0AJJDGA\",\n          \"name\": \"n8ninja - Sheet\"\n        }\n      },\n      \"typeVersion\": 4.3,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"881acff3-1736-4d53-8c3b-3354ec2da07b\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        400,\n        -191\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 275.01592825011585,\n        \"height\": 439.37809705210145,\n        \"content\": \"# Setup\\n### 1/ Add Your credentials\\n[Google SHeet](https://docs.n8n.io/integrations/builtin/credentials/google/)\\n\\n### 2/ Create a Google Spreadsheet that will be your database.\\nCopy this template: \\nhttps://docs.google.com/spreadsheets/d/1sM66Rk10ZOhQKbawVB-xZ2WYhBeSr6wnJqvX6Aspbkg/edit?usp=sharing\\n\\n### 3/ Add products to monitor from this form \\n# 👇\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"92ae590a-bf1d-4c17-a654-f281379fcee6\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1620,\n        600\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 275.01592825011585,\n        \"height\": 93.37809705210145,\n        \"content\": \"### Fill with your email\\n# 👇\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8834da7f-7ca1-4cad-98b9-2335bfc81b8f\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        40,\n        580\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 275.01592825011585,\n        \"height\": 136.37809705210145,\n        \"content\": \"### Change frequency 👉🏻\\n\\n(don't put less than once a day, or you will need to also add the hour in the format product node)\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b1838412-6c3e-4519-8946-f6aeff0c9e8d\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        900,\n        340\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 202.64787116404852,\n        \"height\": 85.79488430601403,\n        \"content\": \"### Crafted by the\\n## [🥷 n8n.ninja](n8n.ninja)\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Add Product\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List Products\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"List Products\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Scrap Product\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Scrap Product\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format Product\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format Product\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add Log in History\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Update Products Infos\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"If price below price alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List Products\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Monitor Zalando Product\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add Product\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If price below price alert\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Notify Price Reduction\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.if",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.set",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.formTrigger",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}