{
  "source": "1739_Manual_GoogleSheets_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": \"VwU1zMhcgzgPS9ak\",\n  \"meta\": {\n    \"instanceId\": \"660cf2c29eb19fa42319afac3bd2a4a74c6354b7c006403f6cba388968b63f5d\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"List Builder\",\n  \"tags\": [\n    {\n      \"id\": \"a8B9vqj0vNLXcKVQ\",\n      \"name\": \"template\",\n      \"createdAt\": \"2025-04-04T15:38:37.785Z\",\n      \"updatedAt\": \"2025-04-04T15:38:37.785Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"1a6aa574-467d-40b0-a9a5-a5537bede3de\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"62db9366-7e6f-4346-9de8-9fa730d059ed\",\n      \"name\": \"Format results\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        660,\n        0\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Get first input item\\nconst input = $input.first().json.data.modelResponse\\n// Parse list of links\\nconst listOfLinks = JSON.parse(input).results\\n// Format node's output\\nconst output = listOfLinks.map((item) => ({\\n  json: { url: item.url }\\n}))\\n\\nreturn output;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"fa960de3-8dd6-40a3-aa59-634ad250f5d1\",\n      \"name\": \"Get urls\",\n      \"type\": \"n8n-nodes-base.airtop\",\n      \"position\": [\n        440,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"=https://www.google.com/search?q={{ encodeURI($json.who+' on ' + $json.where) }}\",\n        \"prompt\": \"=Those are search results, return up to 10 non-sponsored results that lead to a web page with a list of {{$json.who}} on {{$json.where}}. For each return the title and URL.\",\n        \"resource\": \"extraction\",\n        \"operation\": \"query\",\n        \"sessionMode\": \"new\",\n        \"additionalFields\": {\n          \"outputSchema\": \"{  \\\"type\\\": \\\"object\\\",  \\\"properties\\\": {    \\\"results\\\": {      \\\"type\\\": \\\"array\\\",      \\\"items\\\": {        \\\"type\\\": \\\"object\\\",        \\\"properties\\\": {          \\\"title\\\": {            \\\"type\\\": \\\"string\\\",            \\\"description\\\": \\\"The title of the search result.\\\"          },          \\\"url\\\": {            \\\"type\\\": \\\"string\\\",            \\\"description\\\": \\\"The URL of the webpage.\\\"          }        },        \\\"required\\\": [          \\\"title\\\",          \\\"url\\\"        ],        \\\"additionalProperties\\\": false      },      \\\"description\\\": \\\"A list of up to 10 non-sponsored search results.\\\"    }  },  \\\"required\\\": [    \\\"results\\\"  ],  \\\"additionalProperties\\\": false,  \\\"$schema\\\": \\\"http://json-schema.org/draft-07/schema#\\\"}\"\n        }\n      },\n      \"credentials\": {\n        \"airtopApi\": {\n          \"id\": \"byhouJF8RLH5DkmY\",\n          \"name\": \"Airtop\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d75dbdce-7a7e-4a30-81b0-6e8fa5221f55\",\n      \"name\": \"Get people\",\n      \"type\": \"n8n-nodes-base.airtop\",\n      \"position\": [\n        880,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.url }}\",\n        \"prompt\": \"=This is a list of {{ $('Parameters').item.json.who }} on {{ $('Parameters').item.json.where }}.\\nExtract up to 20 items. For each person extract: \\n- name \\n- handle or ID \\n- URL\",\n        \"resource\": \"extraction\",\n        \"operation\": \"query\",\n        \"sessionMode\": \"new\",\n        \"additionalFields\": {\n          \"outputSchema\": \"{\\n  \\\"$schema\\\": \\\"http://json-schema.org/draft-07/schema#\\\",\\n  \\\"type\\\": \\\"object\\\",\\n  \\\"properties\\\": {\\n    \\\"items\\\": {\\n      \\\"type\\\": \\\"array\\\",\\n      \\\"items\\\": {\\n        \\\"type\\\": \\\"object\\\",\\n        \\\"properties\\\": {\\n          \\\"name\\\": {\\n            \\\"type\\\": \\\"string\\\",\\n            \\\"description\\\": \\\"The name of the item.\\\"\\n          },\\n          \\\"identifier\\\": {\\n            \\\"type\\\": \\\"string\\\",\\n            \\\"description\\\": \\\"The unique identifier or handle for the item.\\\"\\n          },\\n          \\\"url\\\": {\\n            \\\"type\\\": \\\"string\\\",\\n            \\\"description\\\": \\\"The URL to access the item or its related resource.\\\"\\n          }\\n        },\\n        \\\"required\\\": [\\n          \\\"name\\\",\\n          \\\"identifier\\\",\\n          \\\"url\\\"\\n        ],\\n        \\\"additionalProperties\\\": false\\n      }\\n    }\\n  },\\n  \\\"required\\\": [\\n    \\\"items\\\"\\n  ],\\n  \\\"additionalProperties\\\": false\\n}\"\n        }\n      },\n      \"credentials\": {\n        \"airtopApi\": {\n          \"id\": \"byhouJF8RLH5DkmY\",\n          \"name\": \"Airtop\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"285ce6af-bda8-4025-872e-f5f8c4a56b3c\",\n      \"name\": \"Dedupe results\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1100,\n        0\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const allResults = []\\n\\nfor (const inputItem of $input.all()) {\\n  // Parse input to JSON\\n  const input = inputItem.json.data.modelResponse\\n  const results = JSON.parse(input).items\\n  // clean results\\n  const cleanedResults = results\\n    .filter((res) => res.name) // only those with name\\n    .map((res) => ({\\n      ...res,\\n      url: res.url.split('?')[0] // clean url\\n    }))\\n  // add results to list\\n  allResults.push(...cleanedResults)\\n}\\n\\n// Dedupe urls\\nconst uniqueList = allResults.filter((item, index, self) =>\\n  index === self.findIndex((t) => (t.url === item.url))\\n);\\n\\nreturn uniqueList.map((item) => ({\\n  json: {...item}\\n}));\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"fdc86d5c-4df3-48b9-9cf6-a5ddc3b45c90\",\n      \"name\": \"Add to spreadsheet\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1320,\n        0\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"URL\": \"={{ $json.url }}\",\n            \"Name\": \"={{ $json.name }}\",\n            \"Who?\": \"={{ $('Parameters').first().json.who }}\",\n            \"Where?\": \"={{ $('Parameters').first().json.where }}\",\n            \"Added on\": \"={{ $now }}\",\n            \"ID or Handle\": \"={{ $json.identifier }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Who?\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Who?\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Where?\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Where?\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"ID or Handle\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"ID or Handle\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"URL\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"URL\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Added on\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Added on\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/150eh4t5GyEBN_TcO5TDeNWpE2GzHR4hQWoNRbUpw7A0/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"150eh4t5GyEBN_TcO5TDeNWpE2GzHR4hQWoNRbUpw7A0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/150eh4t5GyEBN_TcO5TDeNWpE2GzHR4hQWoNRbUpw7A0/edit?usp=drivesdk\",\n          \"cachedResultName\": \"List Builder\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"CwpCAR1HwgHZpRtJ\",\n          \"name\": \"Google Drive\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"44c54497-741c-4c48-b4f9-0c5c836d10ad\",\n      \"name\": \"Parameters\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        220,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"bc2d3cb9-b7d0-4c3f-b392-53262d60441e\",\n              \"name\": \"who\",\n              \"type\": \"string\",\n              \"value\": \"Top \\\"Build in Public\\\" influencers\"\n            },\n            {\n              \"id\": \"b2cfa361-c80a-4945-bc0e-23eac5edebd6\",\n              \"name\": \"where\",\n              \"type\": \"string\",\n              \"value\": \"X\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"a2572aec-54cb-4bbb-b503-09d1d0beb64f\",\n  \"connections\": {\n    \"Get urls\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format results\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get people\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Dedupe results\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parameters\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get urls\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Dedupe results\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add to spreadsheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format results\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get people\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parameters\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.code",
      "n8n-nodes-base.airtop",
      "n8n-nodes-base.airtop",
      "n8n-nodes-base.code",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.set"
    ],
    "trigger": null
  }
}