{
  "source": "1559_Splitout_Code_Automate_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"NDCN2arRu5tLuP61\",\n  \"meta\": {\n    \"instanceId\": \"36147281c0732d54779505fe69cf0516d4b8760fdbbc308b1950e452edcf85e8\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Automate PDF Image Extraction & Analysis with GPT-4o and Google Drive\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"78bb478a-721d-433f-a615-8f131ef1d87f\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -1180,\n        140\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b1c2e97b-3539-4e16-89df-434a34c6a243\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -740,\n        -440\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 360,\n        \"height\": 480,\n        \"content\": \"###  Setup\\n1.Set up your credentials when you first open the workflow. You’ll need accounts for OpenAI, Convert API, and Google Drive.\\n2.Convert API does not rate-limit your API, sometimes you may receive 503 service unavailable error.\\nNevertheless, it doesn’t mean that you cannot convert your file. It simply means that you should retry the conversion in a few seconds.\\n3.Upload a PDF with images to Google Drive.\\n4.Remove unnecessary parts and retrieve image-related information.\\n5.Integrate image and image analysis information together.\\n6.Analyze each image using the OPENAI GPT-4o model.\\n7.Retrieve all image analysis content and image URL\\n8.Integrate multiple image URLs and analysis content\\n9.Output content to a .txt file.\\n\\nTemplate was created in n8n v1.83.2\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3b2a81eb-19b4-4685-90a3-1b4096b2d3b7\",\n      \"name\": \"Get pdf file\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -1000,\n        40\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1WoqaMgaCD-gChGWUqPRJ7-pxbTozEuXN\",\n          \"cachedResultUrl\": \"https://drive.google.com/file/d/1WoqaMgaCD-gChGWUqPRJ7-pxbTozEuXN/view?usp=drivesdk\",\n          \"cachedResultName\": \"Building Effective AI Agents _ Anthropic.pdf\"\n        },\n        \"options\": {},\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"nxqV58j7kOaLFzhj\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"89208aa8-37d8-424c-a936-52539a9bc7ee\",\n      \"name\": \"Get all img_url\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -520,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"7715e33a-c5cc-4a22-aa28-ac19a24bbd7c\",\n              \"name\": \"url\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Url }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"5c1ece53-1910-42d6-a1e4-bfa6d5a83fe9\",\n      \"name\": \"Analyze image\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        -360,\n        40\n      ],\n      \"parameters\": {\n        \"text\": \"Please analyze the video in detail and provide a thorough explanation\",\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o\",\n          \"cachedResultName\": \"GPT-4O\"\n        },\n        \"options\": {},\n        \"resource\": \"image\",\n        \"simplify\": false,\n        \"imageUrls\": \"={{ $json.url }}\",\n        \"operation\": \"analyze\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"4wadssyBOfOAfo2P\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"9e09364d-fb82-4524-b6aa-b8a6040893ba\",\n      \"name\": \"Extract pdf image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -840,\n        140\n      ],\n      \"parameters\": {\n        \"url\": \"https://v2.convertapi.com/convert/pdf/to/extract-images\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"multipart-form-data\",\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"StoreFile\",\n              \"value\": \"true\"\n            },\n            {\n              \"name\": \"ImageOutputFormat\",\n              \"value\": \"jpg\"\n            },\n            {\n              \"name\": \"File\",\n              \"parameterType\": \"formBinaryData\",\n              \"inputDataFieldName\": \"data\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {}\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"5hUN8DpheywQE5v6\",\n          \"name\": \"convertapi extract image\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 4.2,\n      \"waitBetweenTries\": 5000\n    },\n    {\n      \"id\": \"8fd6e8ae-bea1-4d7f-8599-7bf6f4eee9e5\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1080,\n        280\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 202,\n        \"height\": 99,\n        \"content\": \"### You can exchange this with any trigger you like (*e.g. google drive trigger*)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b0ce7fdd-7328-49b2-8ec6-797205aa7ab5\",\n      \"name\": \"Get image data\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        -680,\n        40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"Files\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c5855876-41d9-46a4-bdec-e60effa116e8\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1060,\n        -220\n      ],\n      \"parameters\": {\n        \"width\": 300,\n        \"content\": \"### PDF Image Extraction and Analysis  with GPT-4o\\nThis n8n workflow automates the process of extracting images from PDF files and analyzing them with AI, then compiling the results into a document.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7cea9e1b-0094-4220-bdf6-f13ab795e394\",\n      \"name\": \"Get image analyze content\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -200,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"2868a5bd-86a8-4962-a867-b4a354276181\",\n              \"name\": \"content\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Get all img_url').item.json.url }}\\n{{ $json.choices[0].message.content }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"de4b6fab-d086-4bf3-81fc-a6f7b7eac24b\",\n      \"name\": \"Integrate all content to a a content\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        -40,\n        40\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const mergedContent = items.map(item => item.json.content).join('\\\\n');\\n\\nreturn [\\n  {\\n    json: {\\n      content: mergedContent\\n    }\\n  }\\n];\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e66f7c66-9096-4bf5-b1dc-02dafeaa62ee\",\n      \"name\": \"Output content to a .txt file\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        140,\n        140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"toText\",\n        \"sourceProperty\": \"content\"\n      },\n      \"typeVersion\": 1.1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"timezone\": \"Asia/Taipei\",\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"4c2771a6-f532-4bfd-bb98-3eae8b0ee85a\",\n  \"connections\": {\n    \"Get pdf file\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract pdf image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Analyze image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get image analyze content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get image data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all img_url\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all img_url\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Analyze image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract pdf image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get image data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get image analyze content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Integrate all content to a a content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Output content to a .txt file\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get pdf file\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Integrate all content to a a content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Output content to a .txt file\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.set",
      "@n8n/n8n-nodes-langchain.openAi",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.code",
      "n8n-nodes-base.convertToFile"
    ],
    "trigger": null
  }
}