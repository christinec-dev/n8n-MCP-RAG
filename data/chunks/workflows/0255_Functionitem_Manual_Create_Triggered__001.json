{
  "source": "0255_Functionitem_Manual_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"14c5980141526fbb38db85208103f515afa76de9c8760a23a1771b4ed940dc7b\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"4704e44a-80c6-41b4-a0b9-ece060d53836\",\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -220,\n        300\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"74a78b35-b453-4345-8cd9-9d8a62961c29\",\n      \"name\": \"Customer Datastore\",\n      \"type\": \"n8n-nodes-base.n8nTrainingCustomerDatastore\",\n      \"position\": [\n        20,\n        300\n      ],\n      \"parameters\": {\n        \"operation\": \"getAllPeople\",\n        \"returnAll\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"10b633de-e5e5-4fd2-bb4b-7a16bac5f69c\",\n      \"name\": \"Item Lists\",\n      \"type\": \"n8n-nodes-base.itemLists\",\n      \"position\": [\n        220,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"sort\",\n        \"sortFieldsUi\": {\n          \"sortField\": [\n            {\n              \"fieldName\": \"name\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"aa90be4e-f548-459f-822b-a3dc1d20d58e\",\n      \"name\": \"One item per template\",\n      \"type\": \"n8n-nodes-document-generator.DocumentGenerator\",\n      \"position\": [\n        660,\n        160\n      ],\n      \"parameters\": {\n        \"template\": \"Date: {{created}}\\nTo: {{name}} <{{email}}>\\nAddress: {{country}}\\nDetails:\\n{{#each lines}}\\n- \\\"{{description}}\\\" x {{quantity}} = {{amount}}€ + {{vat}}€ = {{total}}€\\n{{/each}}\\nTotal invoice: {{total}}€\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"914c4c67-81df-45ec-9eea-3efb96383dfc\",\n      \"name\": \"All items, one template\",\n      \"type\": \"n8n-nodes-document-generator.DocumentGenerator\",\n      \"position\": [\n        660,\n        400\n      ],\n      \"parameters\": {\n        \"template\": \"<html>\\n<head>\\n</head>\\n<body>\\nNew customers in last 24h:\\n<ul id=\\\"customer_list\\\">\\n  {{#each items}}\\n  <li>{{name}}: {{email}}</li>\\n  {{/each}}\\n</ul>\\n</body>\\n</html>\",\n        \"oneTemplate\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bc1821d1-7d08-4208-aa5e-7290f5604e91\",\n      \"name\": \"Add lines\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        440,\n        160\n      ],\n      \"parameters\": {\n        \"functionCode\": \"item.lines = [\\n  {\\n    concept: \\\"Service\\\",\\n    description: \\\"Design of HTML banners\\\",\\n    quantity: 1,\\n    amount: 22,\\n    vat: 22 * 0.21,\\n    total: 22 * 1.21\\n  },\\n  {\\n    concept: \\\"Service\\\",\\n    description: \\\"Design of PNG banners\\\",\\n    quantity: 1,\\n    amount: 33,\\n    vat: 33 * 0.21,\\n    total: 33 * 1.21\\n  }\\n]\\n\\nitem.date = \\\"2022-01-12\\\";\\nitem.total = 133.10;\\n\\nreturn item;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"99ccf5f0-6d82-4a9c-a314-711249fbdfc9\",\n      \"name\": \"Send one TEXT email per item\",\n      \"type\": \"n8n-nodes-base.emailSend\",\n      \"position\": [\n        880,\n        160\n      ],\n      \"parameters\": {\n        \"html\": \"={{ $json[\\\"text\\\"] }}\",\n        \"options\": {},\n        \"subject\": \"=Invoice for {{ $node[\\\"Add lines\\\"].json[\\\"name\\\"] }}\",\n        \"toEmail\": \"mcolomer@n8nhackers.com\",\n        \"fromEmail\": \"mcolomer@n8nhackers.com\"\n      },\n      \"credentials\": {\n        \"smtp\": {\n          \"id\": \"54\",\n          \"name\": \"SMTP account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3bc12345-da46-4c1f-8fe3-5bb0683cbcda\",\n      \"name\": \"Send one HTML Email per list\",\n      \"type\": \"n8n-nodes-base.emailSend\",\n      \"position\": [\n        880,\n        400\n      ],\n      \"parameters\": {\n        \"html\": \"={{ $json[\\\"text\\\"] }}\",\n        \"options\": {},\n        \"subject\": \"New customers\",\n        \"toEmail\": \"mcolomer@n8nhackers.com\",\n        \"fromEmail\": \"mcolomer@n8nhackers.com\"\n      },\n      \"credentials\": {\n        \"smtp\": {\n          \"id\": \"54\",\n          \"name\": \"SMTP account\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Add lines\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"One item per template\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Item Lists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"All items, one template\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Add lines\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Customer Datastore\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Item Lists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Customer Datastore\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"One item per template\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send one TEXT email per item\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"All items, one template\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send one HTML Email per list\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.n8nTrainingCustomerDatastore",
      "n8n-nodes-base.itemLists",
      "n8n-nodes-document-generator.DocumentGenerator",
      "n8n-nodes-document-generator.DocumentGenerator",
      "n8n-nodes-base.functionItem",
      "n8n-nodes-base.emailSend",
      "n8n-nodes-base.emailSend"
    ],
    "trigger": null
  }
}