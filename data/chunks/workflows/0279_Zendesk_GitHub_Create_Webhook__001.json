{
  "source": "0279_Zendesk_GitHub_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"f0913aa6-4e78-4808-b828-7e9953e71764\",\n      \"name\": \"Get ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        380,\n        480\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f8774217-bc05-4b02-8632-154654f79d5f\",\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        780,\n        480\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Determine\\\"].json[\\\"GitHub Issue Number\\\"]}}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6ae7e40b-b75c-41e2-9ba7-bb299f12911a\",\n      \"name\": \"Update ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"notes\": \"Update the Zendesk ticket by adding the Jira issue key to the \\\"Jira Issue Key\\\" field.\",\n      \"position\": [\n        1180,\n        580\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"update\",\n        \"updateFields\": {\n          \"customFieldsUi\": {\n            \"customFieldsValues\": [\n              {\n                \"id\": 6721726848029,\n                \"value\": \"={{$node[\\\"Create issue\\\"].json[\\\"number\\\"]}}\"\n              }\n            ]\n          }\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7959986c-cfbf-4ba2-a968-95b62d2aa819\",\n      \"name\": \"Determine\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"notes\": \"if issue was created already in Jira\",\n      \"position\": [\n        580,\n        480\n      ],\n      \"parameters\": {\n        \"functionCode\": \"/* configure here =========================================================== */\\n/*  Zendesk field ID which represents the \\\"GitHub Issue Number\\\" field.\\n*/\\nconst ISSUE_KEY_FIELD_ID = 6721726848029;\\n\\n/* ========================================================================== */\\nnew_items = [];\\n\\nfor (item of $items(\\\"Get ticket\\\")) {\\n    \\n    // instantiate a new variable for status\\n    var custom_fields = item.json[\\\"custom_fields\\\"];\\n    var github_issue_number = \\\"\\\";\\n    for (var i = 0; i < custom_fields.length; i++) {\\n        if (custom_fields[i].id == ISSUE_KEY_FIELD_ID) {\\n            github_issue_number = custom_fields[i].value;\\n            break;\\n        }\\n    }\\n\\n    // push the new item to the new_items array\\n    new_items.push({\\n        \\\"GitHub Issue Number\\\": github_issue_number\\n    });\\n}\\n\\nreturn new_items;\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a1ca21d3-958f-498c-a896-05d4ecbc286d\",\n      \"name\": \"Create issue\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        980,\n        580\n      ],\n      \"parameters\": {\n        \"owner\": \"John-n8n\",\n        \"title\": \"={{$node[\\\"Get ticket\\\"].json[\\\"subject\\\"]}}\",\n        \"labels\": [],\n        \"assignees\": [],\n        \"repository\": \"DemoRepo\"\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"20\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1ad6f536-2cdb-4ecc-85b4-2e960fb84498\",\n      \"name\": \"Create comment on existing issue\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        980,\n        380\n      ],\n      \"parameters\": {\n        \"body\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"comment\\\"]}}\",\n        \"owner\": \"John-n8n\",\n        \"operation\": \"createComment\",\n        \"repository\": \"DemoRepo\",\n        \"issueNumber\": \"={{$node[\\\"Determine\\\"].json[\\\"GitHub Issue Number\\\"]}}\"\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"20\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"73e8c380-63de-4e5a-8e57-a17956174869\",\n      \"name\": \"On new Zendesk ticket\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        180,\n        480\n      ],\n      \"webhookId\": \"b4253880-b5e2-4d61-bb2a-b0ea335bee14\",\n      \"parameters\": {\n        \"path\": \"b4253880-b5e2-4d61-bb2a-b0ea335bee14\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create comment on existing issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Determine\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Determine\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create issue\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On new Zendesk ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.if",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.function",
      "n8n-nodes-base.github",
      "n8n-nodes-base.github",
      "n8n-nodes-base.webhook"
    ],
    "trigger": null
  }
}