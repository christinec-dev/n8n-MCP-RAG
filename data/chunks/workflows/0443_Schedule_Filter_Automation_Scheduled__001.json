{
  "source": "0443_Schedule_Filter_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"b1afd02d-6edf-4540-bf32-09d87cb8a27b\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        320,\n        220\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 379,\n        \"height\": 80,\n        \"content\": \"### üë®‚Äçüé§ Setup\\n1. Add your Gmail creds\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3481e6c3-7706-4c7f-8ca6-c96f76d82021\",\n      \"name\": \"At midnight every work day\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        400,\n        340\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"cronExpression\",\n              \"expression\": \"0 0 * * 1-5\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3c74e4fd-e919-4acb-8092-658f2e71513b\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        520\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 202,\n        \"height\": 100,\n        \"content\": \"üëÜ Set your schedule. I use this for work emails. For personal emails, I run this daily.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"de421702-d012-4ea1-826e-1a4756ff4856\",\n      \"name\": \"Get all emails in the last day\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        620,\n        340\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"q\": \"label:inbox\",\n          \"receivedBefore\": \"={{ $now.minus({days: 1}) }}\"\n        },\n        \"resource\": \"thread\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"8\",\n          \"name\": \"Work Gmail account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"ef43b756-5f9c-4c8d-830a-8ccb71562618\",\n      \"name\": \"Get the thread of each email\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        840,\n        340\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"thread\",\n        \"threadId\": \"={{ $json.id }}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"8\",\n          \"name\": \"Work Gmail account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"bfc3b7e1-651a-4eb5-8882-b21d120d982b\",\n      \"name\": \"Keep only starred emails in inbox\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1060,\n        340\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{ JSON.stringify($json.messages).includes('STARRED') }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3d8145dc-577d-4e9b-83a7-fdf06afa1b96\",\n      \"name\": \"for each message in the thread\",\n      \"type\": \"n8n-nodes-base.itemLists\",\n      \"position\": [\n        1480,\n        520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"messages\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"1a9083a8-ffd2-403e-bf53-9b9eee87ff5b\",\n      \"name\": \"Archive message (remove from inbox)\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        1700,\n        520\n      ],\n      \"parameters\": {\n        \"labelIds\": \"=INBOX\",\n        \"messageId\": \"={{ $json.id }}\",\n        \"operation\": \"removeLabels\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"8\",\n          \"name\": \"Work Gmail account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"c51240d0-88cb-461b-82ba-929a2d8a9dde\",\n      \"name\": \"Archive thread  (remove from inbox)\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        1340,\n        300\n      ],\n      \"parameters\": {\n        \"labelIds\": \"=INBOX\",\n        \"resource\": \"thread\",\n        \"threadId\": \"={{ $json.id }}\",\n        \"operation\": \"removeLabels\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"8\",\n          \"name\": \"Work Gmail account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"3ca7074f-c912-456c-92e4-08cac8833471\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1060,\n        520\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 202,\n        \"height\": 100,\n        \"content\": \"‚≠ê Keep starred emails in inbox.. Archive everything else!\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"At midnight every work day\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all emails in the last day\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get the thread of each email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Keep only starred emails in inbox\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all emails in the last day\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get the thread of each email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"for each message in the thread\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Archive message (remove from inbox)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Keep only starred emails in inbox\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Archive thread  (remove from inbox)\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"for each message in the thread\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.itemLists",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}