{
  "source": "1246_Extractfromfile_HTTP_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"6a2a7715680b8313f7cb4676321c5baa46680adfb913072f089f2766f42e43bd\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"f577f6bd-b1a4-48ec-9329-7bccc3fc1463\",\n      \"name\": \"Get All files\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        400,\n        -100\n      ],\n      \"parameters\": {\n        \"url\": \"=https://yqtvdcvjboenlblgcivl.supabase.co/storage/v1/object/list/private\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n \\\"prefix\\\": \\\"\\\",\\n \\\"limit\\\": 100,\\n \\\"offset\\\": 0,\\n \\\"sortBy\\\": {\\n \\\"column\\\": \\\"name\\\",\\n \\\"order\\\": \\\"asc\\\"\\n }\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"supabaseApi\"\n      },\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"t8AQJzvZvrOMDLec\",\n          \"name\": \"Supabase account My Airtable Gen\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"10693bc8-560d-4cf6-8bd0-2fe3f4d863d1\",\n      \"name\": \"Default Data Loader\",\n      \"type\": \"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\n      \"position\": [\n        1780,\n        100\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"metadata\": {\n            \"metadataValues\": [\n              {\n                \"name\": \"=file_id\",\n                \"value\": \"={{ $json.id }}\"\n              }\n            ]\n          }\n        },\n        \"jsonData\": \"={{ $('Merge').item.json.data ?? $('Merge').item.json.text }}\",\n        \"jsonMode\": \"expressionData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"49428060-e707-4269-8344-77b301f56f7c\",\n      \"name\": \"Recursive Character Text Splitter\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter\",\n      \"position\": [\n        1780,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"chunkSize\": 500,\n        \"chunkOverlap\": 200\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"08742063-e235-4874-a128-b352786b19ce\",\n      \"name\": \"Extract Document PDF\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        1240,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"pdf\"\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"21f19360-d7ce-4106-ae5a-aa0f15b7c4aa\",\n      \"name\": \"Embeddings OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\n      \"position\": [\n        1600,\n        80\n      ],\n      \"parameters\": {\n        \"model\": \"text-embedding-3-small\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"fLfRtaXbR0EVD0pl\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4147409f-8686-418f-b979-04f8c8e7fe42\",\n      \"name\": \"Create File record2\",\n      \"type\": \"n8n-nodes-base.supabase\",\n      \"position\": [\n        1540,\n        -100\n      ],\n      \"parameters\": {\n        \"tableId\": \"files\",\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldId\": \"name\",\n              \"fieldValue\": \"={{ $('Loop Over Items').item.json.name }}\"\n            },\n            {\n              \"fieldId\": \"storage_id\",\n              \"fieldValue\": \"={{ $('Loop Over Items').item.json.id }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"t8AQJzvZvrOMDLec\",\n          \"name\": \"Supabase account My Airtable Gen\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"016f1afe-172b-4609-b451-8d67609214d3\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        720,\n        -100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"9b14e306-a04d-40f7-bc5b-b8eda8d8f7f2\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ \\n !$('Aggregate').item.json.data || \\n !Array.isArray($('Aggregate').item.json.data) || \\n !$('Aggregate').item.json.data.some(item => \\n item.storage_id === $('Loop Over Items').item.json.id \\n ) \\n}}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"c3c0af88-9aea-4539-8948-1b69e601c27c\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $json.name }}\",\n              \"rightValue\": \".emptyFolderPlaceholder\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"75e8a7db-8c4a-4ad8-b902-062cbc93e1eb\",\n      \"name\": \"Get All Files\",\n      \"type\": \"n8n-nodes-base.supabase\",\n      \"position\": [\n        20,\n        -100\n      ],\n      \"parameters\": {\n        \"tableId\": \"files\",\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"t8AQJzvZvrOMDLec\",\n          \"name\": \"Supabase account My Airtable Gen\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"b22a3bab-f615-4d8a-8832-ce25b1a385fe\",\n      \"name\": \"Download\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        900,\n        -100\n      ],\n      \"parameters\": {\n        \"url\": \"=https://yqtvdcvjboenlblgcivl.supabase.co/storage/v1/object/private/{{ $json.name }}\",\n        \"options\": {},\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"supabaseApi\"\n      },\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"t8AQJzvZvrOMDLec\",\n          \"name\": \"Supabase account My Airtable Gen\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"50d1fede-4bd0-4cd4-b74a-7d689fe211cc\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        560,\n        -100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": \"=1\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"f9c23b5e-0b40-4886-b54f-59fb46132d3f\",\n      \"name\": \"When clicking \\u2018Test workflow\\u2019\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -160,\n        -100\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0a0ec290-2c3d-40ba-8d03-6abf75202e73\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        220,\n        -100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"32b3e2e1-2d25-4dd1-93e8-3f693beb7b6f\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        800,\n        -1020\n      ],\n      \"webhookId\": \"3c40d311-7996-4ed4-b2fa-c73bea5f4cf5\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"79073b5c-a4ad-45a6-bbfa-e900a05bfde3\",\n      \"name\": \"OpenAI Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        940,\n        -820\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"zJhr5piyEwVnWtaI\",\n          \"name\": \"OpenAi club\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f8663483-76d5-4fc8-ad07-7eec815ff7a6\",\n      \"name\": \"Embeddings OpenAI2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\n      \"position\": [\n        1020,\n        -540\n      ],\n      \"parameters\": {\n        \"model\": \"text-embedding-3-small\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"SphXAX7rlwRLkiox\",\n          \"name\": \"Test club key\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a1458799-d379-46de-93e6-a5ba0c665163\",\n      \"name\": \"OpenAI Chat Model2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1300,\n        -680\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"SphXAX7rlwRLkiox\",\n          \"name\": \"Test club key\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d6eeda2f-c984-406d-a625-726840308413\",\n      \"name\": \"Vector Store Tool1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolVectorStore\",\n      \"position\": [\n        1100,\n        -820\n      ],\n      \"parameters\": {\n        \"name\": \"knowledge_base\",\n        \"topK\": 8,\n        \"description\": \"Retrieve data about user request\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e1d9a348-7d44-4ad1-adbd-2c9a31e06876\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1060,\n        -100\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"txt\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{$binary.data?.fileExtension == undefined }}\",\n                    \"rightValue\": \"txt\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"pdf\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"bf04cbec-dd86-4607-988f-4c96b6fd4b58\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{$binary.data.fileExtension }}\",\n                    \"rightValue\": \"pdf\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.1\n    },\n    {\n      \"id\": \"d38afb92-87ae-4e2a-a712-ec24b1efd105\",\n      \"name\": \"Insert into Supabase Vectorstore\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreSupabase\",\n      \"position\": [\n        1700,\n        -100\n      ],\n      \"parameters\": {\n        \"mode\": \"insert\",\n        \"options\": {\n          \"queryName\": \"match_documents\"\n        },\n        \"tableName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"documents\",\n          \"cachedResultName\": \"documents\"\n        }\n      },\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"t8AQJzvZvrOMDLec\",\n          \"name\": \"Supabase account My Airtable Gen\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1a903b2e-cab0-4798-b820-ec08d6a71ddd\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1380,\n        -100\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"3afd552e-4995-493e-9cd5-ef496dfe359f\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1020,\n        -1020\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"d9688acc-311b-42fd-afa8-2c0e493be34b\",\n      \"name\": \"Supabase Vector Store\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreSupabase\",\n      \"position\": [\n        1020,\n        -660\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"metadata\": {\n            \"metadataValues\": [\n              {\n                \"name\": \"file_id\",\n                \"value\": \"300b0128-0955-4058-b0d3-a9aefe728432\"\n              }\n            ]\n          }\n        },\n        \"tableName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"documents\",\n          \"cachedResultName\": \"documents\"\n        }\n      },\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"t8AQJzvZvrOMDLec\",\n          \"name\": \"Supabase account My Airtable Gen\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"66df007c-0418-4551-950e-32e7d79840bd\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        340,\n        -220\n      ],\n      \"parameters\": {\n        \"height\": 89.3775420487804,\n        \"content\": \"### Replace Storage name, database ID and credentials.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b164b520-20dd-44a4-aa3b-647391786b20\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -20,\n        -220\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"### Replace credentials.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8688c219-5af4-4e54-9fd1-91851829445b\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1540,\n        -220\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"### Replace credentials.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"45c6ece4-f849-4496-8149-31385f5e36a4\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        840,\n        -220\n      ],\n      \"parameters\": {\n        \"height\": 89.3775420487804,\n        \"content\": \"### Replace Storage name, database ID and credentials.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2ca07cb0-b5f4-4761-b954-faf2131872d9\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1500,\n        220\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"### Replace credentials.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8d682dae-6f88-42f0-a717-affffd37d882\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1140,\n        -520\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"### Replace credentials.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"796b5dca-d60e-43a9-afe8-194244643557\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -520,\n        -940\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 330.5152611046425,\n        \"height\": 239.5888196628349,\n        \"content\": \"### ... or watch set up video [10 min]\\n[![Youtube Thumbnail](https://res.cloudinary.com/de9jgixzm/image/upload/v1739773273/Youtube%20Thumbs/Chat%20With%20FIles.png)](https://www.youtube.com/watch?v=glWUkdZe_3w)\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"eba121de-a3f7-4ba5-8396-f7d64e648322\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -820,\n        -1460\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 636.2128494576581,\n        \"height\": 497.1532689930921,\n        \"content\": \"![5min Logo](https://res.cloudinary.com/de9jgixzm/image/upload/v1739773200/Skool%20Assets/ejm3hqnvhgwpnu2fv92s.png)\\n## AI Agent To Chat With Files In Supabase Storage\\n**Made by [Mark Shcherbakov](https://www.linkedin.com/in/marklowcoding/) from community [5minAI](https://www.skool.com/5minai-2861)**\\n\\nManually retrieving and analyzing specific information from large document repositories is time-consuming and inefficient. This workflow automates the process by vectorizing documents and enabling AI-powered interactions, making it easy to query and retrieve context-based information from uploaded files.\\n\\nThe workflow integrates Supabase with an AI-powered chatbot to process, store, and query text and PDF files. The steps include:\\n- Fetching and comparing files to avoid duplicate processing.\\n- Handling file downloads and extracting content based on the file type.\\n- Converting documents into vectorized data for contextual information retrieval.\\n- Storing and querying vectorized data from a Supabase vector store.\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"df054036-d6b9-4f53-86cb-85ad96f07d0e\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -820,\n        -940\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 280.2462120317618,\n        \"height\": 545.9087885077763,\n        \"content\": \"### Set up steps\\n\\n1. **Fetch File List from Supabase**:\\n - Use Supabase to retrieve the stored file list from a specified bucket.\\n - Add logic to manage empty folder placeholders returned by Supabase, avoiding incorrect processing.\\n\\n2. **Compare and Filter Files**:\\n - Aggregate the files retrieved from storage and compare them to the existing list in the Supabase `files` table.\\n - Exclude duplicates and skip placeholder files to ensure only unprocessed files are handled.\\n\\n3. **Handle File Downloads**:\\n - Download new files using detailed storage configurations for public/private access.\\n - Adjust the storage settings and GET requests to match your Supabase setup.\\n\\n4. **File Type Processing**:\\n - Use a Switch node to target specific file types (e.g., PDFs or text files).\\n - Employ relevant tools to process the content:\\n - For PDFs, extract embedded content.\\n - For text files, directly process the text data.\\n\\n5. **Content Chunking**:\\n - Break large text data into smaller chunks using the Text Splitter node.\\n - Define chunk size (default: 500 tokens) and overlap to retain necessary context across chunks.\\n\\n6. **Vector Embedding Creation**:\\n - Generate vectorized embeddings for the processed content using OpenAI's embedding tools.\\n - Ensure metadata, such as file ID, is included for easy data retrieval.\\n\\n7. **Store Vectorized Data**:\\n - Save the vectorized information into a dedicated Supabase vector store.\\n - Use the default schema and table provided by Supabase for seamless setup.\\n\\n8. **AI Chatbot Integration**:\\n - Add a chatbot node to handle user input and retrieve relevant document chunks.\\n - Use metadata like file ID for targeted queries, especially when multiple documents are involved.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"450a1e49-4be9-451a-9d05-2860e29c3695\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        540,\n        -1160\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 951.7421645394404,\n        \"height\": 809.7437181509877,\n        \"content\": \"## Scenario 2 - AI agent\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c3814c5d-8881-4598-897e-268019bee1bc\",\n      \"name\": \"Sticky Note10\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -260,\n        -280\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 2304.723519246249,\n        \"height\": 739.2522526116408,\n        \"content\": \"## Scenario 1 - Flow for adding new files from Supabase storage\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create File record2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Extract Document PDF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get All files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get All Files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get All files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        null,\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings OpenAI\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Insert into Supabase Vectorstore\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings OpenAI2\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Supabase Vector Store\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model2\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Vector Store Tool1\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Vector Store Tool1\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create File record2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Insert into Supabase Vectorstore\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Default Data Loader\": {\n      \"ai_document\": [\n        [\n          {\n            \"node\": \"Insert into Supabase Vectorstore\",\n            \"type\": \"ai_document\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Document PDF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Supabase Vector Store\": {\n      \"ai_vectorStore\": [\n        [\n          {\n            \"node\": \"Vector Store Tool1\",\n            \"type\": \"ai_vectorStore\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Insert into Supabase Vectorstore\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Recursive Character Text Splitter\": {\n      \"ai_textSplitter\": [\n        [\n          {\n            \"node\": \"Default Data Loader\",\n            \"type\": \"ai_textSplitter\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\u2018Test workflow\\u2019\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get All Files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.httpRequest",
      "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "n8n-nodes-base.extractFromFile",
      "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "n8n-nodes-base.supabase",
      "n8n-nodes-base.if",
      "n8n-nodes-base.supabase",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.aggregate",
      "@n8n/n8n-nodes-langchain.chatTrigger",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.toolVectorStore",
      "n8n-nodes-base.switch",
      "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "n8n-nodes-base.merge",
      "@n8n/n8n-nodes-langchain.agent",
      "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}