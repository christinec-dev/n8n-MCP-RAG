{
  "source": "0274_Zendesk_Asana_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"1c041974-2a1f-4464-be3e-70b8a700f40d\",\n      \"name\": \"Get ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        460,\n        480\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a4a05b2a-2382-44af-8226-a2c60bee1ce3\",\n      \"name\": \"Create task\",\n      \"type\": \"n8n-nodes-base.asana\",\n      \"position\": [\n        1000,\n        580\n      ],\n      \"parameters\": {\n        \"name\": \"={{$node[\\\"Get ticket\\\"].json[\\\"subject\\\"]}}\",\n        \"workspace\": \"1177253494675264\",\n        \"otherProperties\": {\n          \"assignee\": \"1202718619090236\",\n          \"assignee_status\": \"inbox\"\n        }\n      },\n      \"credentials\": {\n        \"asanaApi\": {\n          \"id\": \"8\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"55128ee9-9210-4341-bf9a-2e4ea415b668\",\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        820,\n        480\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Determine\\\"].json[\\\"Asana GID\\\"]}}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6319045c-7df8-4031-b738-835f8fe12d06\",\n      \"name\": \"Update ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"notes\": \"Update the Zendesk ticket by adding the Jira issue key to the \\\"Jira Issue Key\\\" field.\",\n      \"position\": [\n        1180,\n        580\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"update\",\n        \"updateFields\": {\n          \"customFieldsUi\": {\n            \"customFieldsValues\": [\n              {\n                \"id\": 6707064637597,\n                \"value\": \"={{$node[\\\"Create task\\\"].json[\\\"gid\\\"]}}\"\n              }\n            ]\n          }\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"39172e43-def7-4e05-9ce3-6d0bb1c3ff59\",\n      \"name\": \"Determine\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"notes\": \"if issue was created already in Jira\",\n      \"position\": [\n        640,\n        480\n      ],\n      \"parameters\": {\n        \"functionCode\": \"/* configure here =========================================================== */\\n/*  Zendesk field ID which represents the \\\"Jira Issue Key\\\" field.\\n*/\\nconst ISSUE_KEY_FIELD_ID = 6707064637597;\\n\\n/* ========================================================================== */\\nnew_items = [];\\n\\nfor (item of $items(\\\"Get ticket\\\")) {\\n    \\n    // instantiate a new variable for status\\n    var custom_fields = item.json[\\\"custom_fields\\\"];\\n    var asana_gid = \\\"\\\";\\n    for (var i = 0; i < custom_fields.length; i++) {\\n        if (custom_fields[i].id == ISSUE_KEY_FIELD_ID) {\\n            asana_gid = custom_fields[i].value;\\n            break;\\n        }\\n    }\\n\\n    // push the new item to the new_items array\\n    new_items.push({\\n        \\\"Asana GID\\\": asana_gid\\n    });\\n}\\n\\nreturn new_items;\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"26f2aaf3-8b21-429f-bfec-c5876792d4b9\",\n      \"name\": \"Create comment on existing task\",\n      \"type\": \"n8n-nodes-base.asana\",\n      \"position\": [\n        1000,\n        380\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"Determine\\\"].json[\\\"Asana GID\\\"]}}\",\n        \"text\": \"=<body>{{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"comment\\\"]}}</body>\",\n        \"resource\": \"taskComment\",\n        \"isTextHtml\": true,\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"asanaApi\": {\n          \"id\": \"8\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bbbf0fc1-3fa7-4a15-a949-c8d9d5e32031\",\n      \"name\": \"On new Zendesk ticket\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        280,\n        480\n      ],\n      \"webhookId\": \"4637a853-0b3a-43d4-9d76-92e1ce87889d\",\n      \"parameters\": {\n        \"path\": \"4637a853-0b3a-43d4-9d76-92e1ce87889d\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create comment on existing task\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create task\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Determine\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Determine\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create task\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On new Zendesk ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.asana",
      "n8n-nodes-base.if",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.function",
      "n8n-nodes-base.asana",
      "n8n-nodes-base.webhook"
    ],
    "trigger": null
  }
}