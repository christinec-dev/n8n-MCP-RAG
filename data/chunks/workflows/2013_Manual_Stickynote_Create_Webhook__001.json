{
  "source": "2013_Manual_Stickynote_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"xQ0xqhNzFeEdBpFK\",\n  \"meta\": {\n    \"instanceId\": \"1e003a7ea4715b6b35e9947791386a7d07edf3b5bf8d4c9b7ee4fdcbec0447d7\"\n  },\n  \"name\": \"Generate 360° Virtual Try-on Videos for Clothing with Kling API\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"978b4ac4-0357-4d2b-8a02-7da04e6f3f1f\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        160,\n        140\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"54d1c23f-3a13-4ec0-9b3b-3806e5faae18\",\n      \"name\": \"Kling Virtual Try-On Task\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        620,\n        140\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.piapi.ai/api/v1/task\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"model\\\": \\\"kling\\\",\\n  \\\"task_type\\\": \\\"ai_try_on\\\",\\n  \\\"input\\\": {\\n    \\\"model_input\\\": \\\"{{ $json.model_input }}\\\",\\n    \\\"dress_input\\\": \\\"{{ $json.dress_input }}\\\",\\n    \\\"upper_input\\\": \\\"{{ $json.upper_input }}\\\",\\n    \\\"lower_input\\\": \\\"{{ $json.lower_input }}\\\",\\n    \\\"batch_size\\\": 1\\n  }\\n} \",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\",\n              \"value\": \"={{ $json['x-api-key'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"5be9d932-c102-4a7e-b995-09c6bf17026c\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        960,\n        200\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"5f61ee56-4ebe-411f-95e6-b47d9741e7a2\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.data.status }}\",\n                    \"rightValue\": \"completed\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"cdda4f40-1580-4a5a-a7f4-f1e4fbf7ceb4\",\n      \"name\": \"Get Kling Video Task\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1180,\n        440\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\",\n              \"value\": \"={{ $('Preset Parameters').item.json['x-api-key'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"3e794d14-b55f-4936-90af-8237977d6635\",\n      \"name\": \"Generate kling video\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1140,\n        200\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.piapi.ai/api/v1/task\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n    \\\"model\\\": \\\"kling\\\",\\n    \\\"task_type\\\": \\\"video_generation\\\",\\n    \\\"input\\\": {\\n        \\\"version\\\": \\\"1.6\\\",\\n        \\\"image_url\\\": \\\"{{ $json.data.output.works[0].image.resource }}\\\",\\n        \\\"prompt\\\": \\\"{{ $('Preset Parameters').item.json.generate_video_prompt }}\\\"\\n    }\\n} \",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\",\n              \"value\": \"={{ $('Preset Parameters').item.json['x-api-key'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"3ae849b2-4bd4-454f-a759-e44a9736100d\",\n      \"name\": \"Preset Parameters\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        380,\n        140\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"{\\n  \\\"x-api-key\\\":\\\"\\\",\\n  \\\"model_input\\\": \\\"\\\",\\n  \\\"dress_input\\\": \\\"\\\",\\n  \\\"upper_input\\\":\\\"\\\",\\n  \\\"lower_input\\\":\\\"\\\",\\n  \\\"generate_video_prompt\\\": \\\"Walk on the catwalk, turn around, and finally stand still and pose\\\"\\n}\\n\"\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"18c606e3-82e2-4c09-a87e-6bbc71363c1c\",\n      \"name\": \"Get Kling Virtual Try-On Task\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        420,\n        460\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\",\n              \"value\": \"={{ $('Preset Parameters').item.json['x-api-key'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"becf3d7b-d468-4b4a-b22f-d6d747e52664\",\n      \"name\": \"Check Data Status\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        640,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"or\",\n          \"conditions\": [\n            {\n              \"id\": \"e97a02cc-8d1d-4500-bce5-0a296c792b76\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.data.status }}\",\n              \"rightValue\": \"completed\"\n            },\n            {\n              \"id\": \"50b63a7a-52b5-4766-a859-96ac1ff949ec\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.data.status }}\",\n              \"rightValue\": \"failed\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"d8ec251d-d47c-4341-909d-abdea385c1f9\",\n      \"name\": \"Wait for Image Generation\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        160,\n        460\n      ],\n      \"webhookId\": \"af79053d-1291-4dd2-889e-4593dbbb2512\",\n      \"parameters\": {},\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"88e3067f-0b1f-472a-937b-926c6d208453\",\n      \"name\": \"Wait for Video Generation\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        920,\n        440\n      ],\n      \"webhookId\": \"af79053d-1291-4dd2-889e-4593dbbb2512\",\n      \"parameters\": {},\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"36d75678-918f-42c5-97a7-7a13d1eacbd4\",\n      \"name\": \"Check Video Data Status\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1560,\n        180\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"5f61ee56-4ebe-411f-95e6-b47d9741e7a2\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.data.status }}\",\n                    \"rightValue\": \"completed\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"7356d963-83c0-47a1-a728-9191f66d2f57\",\n      \"name\": \"Get Video Data Status\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1400,\n        440\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"or\",\n          \"conditions\": [\n            {\n              \"id\": \"e97a02cc-8d1d-4500-bce5-0a296c792b76\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.data.status }}\",\n              \"rightValue\": \"completed\"\n            },\n            {\n              \"id\": \"50b63a7a-52b5-4766-a859-96ac1ff949ec\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.data.status }}\",\n              \"rightValue\": \"failed\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"9ef52637-ccc9-4817-8c14-5c54fa0af178\",\n      \"name\": \"Get Final Video URL\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1760,\n        180\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"={\\n  \\\"video_url\\\": \\\"{{ $json.data.output.video_url }}\\\"\\n}\\n \"\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"9a0194bd-59a5-45b1-a6e2-db0605eb4d7a\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        140,\n        -120\n      ],\n      \"parameters\": {\n        \"width\": 460,\n        \"height\": 220,\n        \"content\": \"## Generate 360° Virtual Try-on Videos for Clothing with Kling API (unofficial)\\nThis tool is designed for e-commerce platforms, fashion brands, content creators, and content influencers. By uploading model and clothing images and linking your PiAPI account, you can swiftly generate a realistic video of the model sporting the outfit with a 360° turn, offering an immersive viewing experience.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"629697ae-cd49-4e8e-953d-a2f091ed9202\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        700\n      ],\n      \"parameters\": {\n        \"width\": 340,\n        \"height\": 200,\n        \"content\": \"## Generate Virtual Try-on Image\\nUpload model url, users have two solutions to upload clothing url: \\n1. Upload `dress_input`\\n2. Upload 'upper_input` and 'lower_input`\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"710bd0f0-8b5a-469a-8b31-b6f738dc7f79\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1640,\n        460\n      ],\n      \"parameters\": {\n        \"width\": 340,\n        \"content\": \"## Generate Final Video \\nWait for generation and get the output url in the final node.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"97ee31dd-b8be-4b37-bbed-363ac35d5268\",\n  \"connections\": {\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate kling video\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check Data Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait for Image Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Preset Parameters\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Kling Virtual Try-On Task\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate kling video\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait for Video Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Kling Video Task\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Video Data Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Video Data Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Video Data Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait for Video Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check Video Data Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Final Video URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Kling Virtual Try-On Task\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait for Image Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait for Image Generation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Kling Virtual Try-On Task\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait for Video Generation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Kling Video Task\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Kling Virtual Try-On Task\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Data Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Preset Parameters\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.if",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}