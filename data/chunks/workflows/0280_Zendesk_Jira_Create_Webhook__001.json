{
  "source": "0280_Zendesk_Jira_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"b374f136-0050-40ea-b889-03c1e20a161e\",\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1000,\n        300\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Determine\\\"].json[\\\"Jira issue key\\\"]}}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"52e85300-9a2f-45e9-973e-0fda49a50bf1\",\n      \"name\": \"Create issue\",\n      \"type\": \"n8n-nodes-base.jira\",\n      \"position\": [\n        1180,\n        400\n      ],\n      \"parameters\": {\n        \"project\": \"10000\",\n        \"summary\": \"={{$node[\\\"Get ticket\\\"].json[\\\"subject\\\"]}}\",\n        \"issueType\": \"10003\",\n        \"additionalFields\": {\n          \"description\": \"=See Zendesk issue at: https://n8n.zendesk.com/agent/tickets/{{$node[\\\"Get ticket\\\"].json[\\\"id\\\"]}}\"\n        }\n      },\n      \"credentials\": {\n        \"jiraSoftwareCloudApi\": {\n          \"id\": \"23\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"85c93002-95d3-434d-b9e9-10ef714432b1\",\n      \"name\": \"Update ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"notes\": \"Update the Zendesk ticket by adding the Jira issue key to the \\\"Jira Issue Key\\\" field.\",\n      \"position\": [\n        1360,\n        400\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"update\",\n        \"updateFields\": {\n          \"customFieldsUi\": {\n            \"customFieldsValues\": [\n              {\n                \"id\": 6689934837021,\n                \"value\": \"={{$node[\\\"Create issue\\\"].json[\\\"key\\\"]}}\"\n              }\n            ]\n          }\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3aa0dff6-f4a5-47c1-9843-271b78bfbf36\",\n      \"name\": \"Get ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        640,\n        300\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"efd1f838-226f-4869-83f8-086d31f8a9bc\",\n      \"name\": \"Determine\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"notes\": \"if issue was created already in Jira\",\n      \"position\": [\n        820,\n        300\n      ],\n      \"parameters\": {\n        \"functionCode\": \"/* configure here =========================================================== */\\n/*  Zendesk field ID which represents the \\\"Jira Issue Key\\\" field.\\n*/\\nconst ISSUE_KEY_FIELD_ID = 6689934837021;\\n\\n/* ========================================================================== */\\nnew_items = [];\\n\\nfor (item of $items(\\\"Get ticket\\\")) {\\n    \\n    // instantiate a new variable for status\\n    var custom_fields = item.json[\\\"custom_fields\\\"];\\n    var jira_issue_key = \\\"\\\";\\n    for (var i = 0; i < custom_fields.length; i++) {\\n        if (custom_fields[i].id == ISSUE_KEY_FIELD_ID) {\\n            jira_issue_key = custom_fields[i].value;\\n            break;\\n        }\\n    }\\n\\n    // push the new item to the new_items array\\n    new_items.push({\\n        \\\"Jira issue key\\\": jira_issue_key\\n    });\\n}\\n\\nreturn new_items;\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"41a1c04b-561b-41e3-be6e-fc953319abc1\",\n      \"name\": \"Create comment to existing issue\",\n      \"type\": \"n8n-nodes-base.jira\",\n      \"position\": [\n        1180,\n        200\n      ],\n      \"parameters\": {\n        \"comment\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"comment\\\"]}}\",\n        \"options\": {},\n        \"issueKey\": \"={{$node[\\\"Determine\\\"].json[\\\"Jira issue key\\\"]}}\",\n        \"resource\": \"issueComment\"\n      },\n      \"credentials\": {\n        \"jiraSoftwareCloudApi\": {\n          \"id\": \"23\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"33e0121e-703d-4c60-b257-a89a99db771a\",\n      \"name\": \"On new Zendesk ticket\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        460,\n        300\n      ],\n      \"webhookId\": \"d596c0c6-7377-4a17-9ed5-6ee953f072b9\",\n      \"parameters\": {\n        \"path\": \"d596c0c6-7377-4a17-9ed5-6ee953f072b9\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create comment to existing issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Determine\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Determine\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create issue\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On new Zendesk ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.if",
      "n8n-nodes-base.jira",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.function",
      "n8n-nodes-base.jira",
      "n8n-nodes-base.webhook"
    ],
    "trigger": null
  }
}