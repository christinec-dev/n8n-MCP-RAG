{
  "source": "0197_Youtube_Telegram_Send_Scheduled.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"name\": \"Set\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        500,\n        510\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"id\",\n              \"value\": \"={{$node[\\\"GetVideosYT\\\"].json[\\\"id\\\"][\\\"videoId\\\"]}}\"\n            },\n            {\n              \"name\": \"url\",\n              \"value\": \"=https://youtu.be/{{$node[\\\"GetVideosYT\\\"].json[\\\"id\\\"][\\\"videoId\\\"]}}\"\n            },\n            {\n              \"name\": \"title\",\n              \"value\": \"={{$node[\\\"GetVideosYT\\\"].json[\\\"snippet\\\"][\\\"title\\\"]}}\"\n            }\n          ],\n          \"boolean\": []\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Function\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        640,\n        510\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const new_items = [];\\nconst data = this.getWorkflowStaticData('node');\\n\\ndata.ids = data.ids || [];\\n\\nfor (var i=0; i<items.length; i++) {\\n  if (data.ids.includes(items[i].json.id)) {\\n    break;\\n  } else {\\n    new_items.push({json: {id: items[i].json.id, url: items[i].json.url, title: items[i].json.title}});\\n  }\\n}\\n\\ndata.ids = items.map(item => item.json.id)\\nreturn new_items;\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"CheckTime\",\n      \"type\": \"n8n-nodes-base.interval\",\n      \"position\": [\n        210,\n        510\n      ],\n      \"parameters\": {\n        \"unit\": \"minutes\",\n        \"interval\": 30\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"GetVideosYT\",\n      \"type\": \"n8n-nodes-base.youTube\",\n      \"position\": [\n        370,\n        510\n      ],\n      \"parameters\": {\n        \"limit\": 4,\n        \"filters\": {\n          \"channelId\": \"UCTe5YtigJdZZ3i-za6IkbGQ\"\n        },\n        \"options\": {\n          \"order\": \"date\"\n        },\n        \"resource\": \"video\"\n      },\n      \"credentials\": {\n        \"youTubeOAuth2Api\": \"tubo\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"SendVideo\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        790,\n        510\n      ],\n      \"parameters\": {\n        \"text\": \"=Nuovo video di almi su YouTube!\\n<b>{{$node[\\\"Function\\\"].json[\\\"title\\\"]}}</b>\\n\\n{{$node[\\\"Function\\\"].json[\\\"url\\\"]}}\",\n        \"chatId\": \"-1001178002763\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\"\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": \"bot raspino\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Set\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Function\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Function\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"SendVideo\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"CheckTime\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GetVideosYT\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GetVideosYT\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.set",
      "n8n-nodes-base.function",
      "n8n-nodes-base.interval",
      "n8n-nodes-base.youTube",
      "n8n-nodes-base.telegram"
    ],
    "trigger": null
  }
}