{
  "source": "1738_Schedule_Comparedatasets_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"VtiRiIGkdeUhyh0N\",\n  \"meta\": {\n    \"instanceId\": \"fb924c73af8f703905bc09c9ee8076f48c17b596ed05b18c0ff86915ef8a7c4a\"\n  },\n  \"name\": \"GoogleSheets MySQL Integration\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"ec43f0df-338b-462f-9195-b20024e83ba1\",\n      \"name\": \"When clicking \\\"Execute Workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        720,\n        500\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e9fd1af3-dcf8-4442-958d-cb8390c85263\",\n      \"name\": \"Compare Datasets\",\n      \"type\": \"n8n-nodes-base.compareDatasets\",\n      \"position\": [\n        1380,\n        380\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"skipFields\": \"record_created,record_updated,id\"\n        },\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"timestamp\",\n              \"field2\": \"timestamp\"\n            },\n            {\n              \"field1\": \"source_name\",\n              \"field2\": \"source_name\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"5b14d739-9037-48a8-9990-5b8ac3318b1c\",\n      \"name\": \"Send Notifications\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1840,\n        260\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"10ff3339-9091-4ea2-be4e-12a91208e27d\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        720,\n        200\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"cronExpression\",\n              \"expression\": \"*/30 6-22 * * 1-5\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"dcf6838f-0d58-4438-875b-94caac45cb65\",\n      \"name\": \"Google Sheet Data\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        940,\n        200\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"returnAllMatches\": \"returnAllMatches\"\n        },\n        \"filtersUI\": {\n          \"values\": [\n            {\n              \"lookupColumn\": \"DB Status\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 263642066,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1KCSKt9bKrFSWGRTTfj-JIVl-u7gcLMbFTCSvZbUMiuo/edit#gid=263642066\",\n          \"cachedResultName\": \"Form Responses 1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/1KCSKt9bKrFSWGRTTfj-JIVl-u7gcLMbFTCSvZbUMiuo\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"RtRiRezoxiWkzZQt\",\n          \"name\": \"Google Sheets account 3\"\n        }\n      },\n      \"typeVersion\": 4\n    },\n    {\n      \"id\": \"6044469f-9000-4e47-a2d9-920371677a82\",\n      \"name\": \"SQL Get inquiries from Google\",\n      \"type\": \"n8n-nodes-base.mySql\",\n      \"position\": [\n        940,\n        500\n      ],\n      \"parameters\": {\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"ConcertInquiries\",\n          \"cachedResultName\": \"ConcertInquiries\"\n        },\n        \"where\": {\n          \"values\": [\n            {\n              \"value\": \"GoogleForm\",\n              \"column\": \"source_name\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"select\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"mySql\": {\n          \"id\": \"ICakJ1LRuVl4dRTs\",\n          \"name\": \"db4free TTT account\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"f65aad46-93ce-44e6-b7b9-8c177516cf18\",\n      \"name\": \"Add MySQL records\",\n      \"type\": \"n8n-nodes-base.mySql\",\n      \"position\": [\n        1620,\n        80\n      ],\n      \"parameters\": {\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"ConcertInquiries\",\n          \"cachedResultName\": \"ConcertInquiries\"\n        },\n        \"options\": {},\n        \"operation\": \"upsert\",\n        \"columnToMatchOn\": \"timestamp\"\n      },\n      \"credentials\": {\n        \"mySql\": {\n          \"id\": \"ICakJ1LRuVl4dRTs\",\n          \"name\": \"db4free TTT account\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6b3d9971-f37c-4721-8134-f60bdf1a03da\",\n      \"name\": \"Rename GSheet variables\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1160,\n        200\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"timestamp\",\n              \"value\": \"={{ $json.Timestamp }}\"\n            },\n            {\n              \"name\": \"occasion\",\n              \"value\": \"={{ $json[\\\"What event are you organizing? \\\"] }}\"\n            },\n            {\n              \"name\": \"email_address\",\n              \"value\": \"={{ $json[\\\"Email Address\\\"] }}\"\n            },\n            {\n              \"name\": \"event_date\",\n              \"value\": \"={{ DateTime.fromFormat($json[\\\"When does the event take place? \\\"], 'M/d/yyyy').toFormat('yyyy-MM-dd') }}\"\n            },\n            {\n              \"name\": \"location\",\n              \"value\": \"={{ $json[\\\"Where does the event take place? \\\"] }}\"\n            },\n            {\n              \"name\": \"event_description\",\n              \"value\": \"={{ $json[\\\"Please tell us more about the event. \\\"] }}\"\n            },\n            {\n              \"name\": \"source_name\",\n              \"value\": \"GoogleForm\"\n            },\n            {\n              \"name\": \"db_status\",\n              \"value\": \"={{ $json[\\\"DB Status\\\"] }}\"\n            },\n            {\n              \"name\": \"name\",\n              \"value\": \"={{ $json[\\\"Your name \\\"] }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"04f067be-8d7d-48bd-9a3d-d881d6dd3464\",\n      \"name\": \"No reply too long?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1620,\n        280\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"dateTime\": [\n            {\n              \"value1\": \"={{ DateTime.fromFormat($json.timestamp, 'MM/d/yyyy HH:mm:ss'); }}\",\n              \"value2\": \"={{ DateTime.now().minus({ hours: 4 }) }}\",\n              \"operation\": \"before\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2f287a7b-eda2-4d05-9864-ba66bddaf14d\",\n      \"name\": \"DB Status assigned?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1620,\n        480\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json.different.db_status.inputB }}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cb10201c-5fcc-41f2-94ac-a52cdbe96e58\",\n      \"name\": \"Update GSheet status\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1840,\n        460\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"DB Status\": \"={{ $json.different.db_status.inputB }}\",\n            \"Timestamp\": \"={{ $json.keys.timestamp }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Timestamp\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"Timestamp\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Email Address\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Email Address\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Your name \",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Your name \",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"What event are you organizing? \",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"What event are you organizing? \",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"When does the event take place? \",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"When does the event take place? \",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Where does the event take place? \",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Where does the event take place? \",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Please tell us more about the event. \",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Please tell us more about the event. \",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"DB Status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"DB Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"Timestamp\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 263642066,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1KCSKt9bKrFSWGRTTfj-JIVl-u7gcLMbFTCSvZbUMiuo/edit#gid=263642066\",\n          \"cachedResultName\": \"Form Responses 1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/1KCSKt9bKrFSWGRTTfj-JIVl-u7gcLMbFTCSvZbUMiuo\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"RtRiRezoxiWkzZQt\",\n          \"name\": \"Google Sheets account 3\"\n        }\n      },\n      \"typeVersion\": 4\n    },\n    {\n      \"id\": \"178fe745-b026-4c7f-9104-6756ba2d7d7d\",\n      \"name\": \"DB Status in sync?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1620,\n        680\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json.source_name }}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6b92bfaf-65f1-441d-a0fc-51e448380520\",\n      \"name\": \"Sync MySQL data\",\n      \"type\": \"n8n-nodes-base.mySql\",\n      \"position\": [\n        1840,\n        660\n      ],\n      \"parameters\": {\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"ConcertInquiries\",\n          \"cachedResultName\": \"ConcertInquiries\"\n        },\n        \"options\": {},\n        \"dataMode\": \"defineBelow\",\n        \"operation\": \"update\",\n        \"valuesToSend\": {\n          \"values\": [\n            {\n              \"value\": \"={{ $json.source_name }}Sync\",\n              \"column\": \"source_name\"\n            }\n          ]\n        },\n        \"valueToMatchOn\": \"={{ $json.id }}\",\n        \"columnToMatchOn\": \"id\"\n      },\n      \"credentials\": {\n        \"mySql\": {\n          \"id\": \"ICakJ1LRuVl4dRTs\",\n          \"name\": \"db4free TTT account\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"3c95f764-e91c-4418-98c9-c18939486b01\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        903,\n        -115.08597285067867\n      ],\n      \"parameters\": {\n        \"width\": 376.8778280542988,\n        \"height\": 474.81900452488685,\n        \"content\": \"## Create a new Google Form with several variables:\\n\\n-Email Address\\n-Your name \\n-What event are you organizing? \\n-When does the event take place? \\n-Where does the event take place? \\n-Please tell us more about the event. \\n\\n- Timestamp variable is added automatically\\n- Add \\\"DB Status\\\" manually in the Google Sheet\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0a5aa6c9-5312-4716-bd63-71534cdccbf1\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        900,\n        394\n      ],\n      \"parameters\": {\n        \"width\": 375.6334841628956,\n        \"height\": 273.23529411764684,\n        \"content\": \"### Import this SQL file to create a new table\\nhttps://gist.github.com/teds-tech-talks/cf25c60363cba082b9c5a1feca10180f\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"69bdc2a6-346a-4c2e-82fd-9b7fd54b6f36\",\n  \"connections\": {\n    \"Compare Datasets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add MySQL records\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No reply too long?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"DB Status assigned?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"DB Status in sync?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheet Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"SQL Get inquiries from Google\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Sheet Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Rename GSheet variables\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"DB Status in sync?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Sync MySQL data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"No reply too long?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Notifications\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"DB Status assigned?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update GSheet status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Rename GSheet variables\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Compare Datasets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"SQL Get inquiries from Google\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Compare Datasets\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Execute Workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheet Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"SQL Get inquiries from Google\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.compareDatasets",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.mySql",
      "n8n-nodes-base.mySql",
      "n8n-nodes-base.set",
      "n8n-nodes-base.if",
      "n8n-nodes-base.if",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.if",
      "n8n-nodes-base.mySql",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}