{
  "source": "1799_HTTP_Manual_Send_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"a5tCsfMzJPd8WDUj\",\n  \"meta\": {\n    \"instanceId\": \"fddb3e91967f1012c95dd02bf5ad21f279fc44715f47a7a96a33433621caa253\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"line message api demo\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"2bc1cc31-136c-46a4-a789-476e33c76f3d\",\n      \"name\": \"Line : Reply with token\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -540,\n        -460\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.line.me/v2/bot/message/reply\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"replyToken\\\": \\\"{{ $('Webhook from Line Message').item.json.body.events[0].replyToken }}\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"text\\\": \\\"收到您的訊息 : {{ $('Webhook from Line Message').item.json.body.events[0].message.text }}\\\"\\n    }\\n  ]\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"xB2Ip7YKSIDq7BoI\",\n          \"name\": \"Line n8n demo auth\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"a1d9c986-4712-4d40-955d-40d1b19d74db\",\n      \"name\": \"Webhook from Line Message\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -1020,\n        -440\n      ],\n      \"webhookId\": \"638c118e-1c98-4491-b6ff-14e2e75380b6\",\n      \"parameters\": {\n        \"path\": \"638c118e-1c98-4491-b6ff-14e2e75380b6\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"a0c94852-290f-48b9-8e11-b498ada90c8f\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1100,\n        -620\n      ],\n      \"parameters\": {\n        \"width\": 720,\n        \"height\": 340,\n        \"content\": \"## Line Message API Reply\\n\\nReceived Message from user and reply with same text by using reply token  \\n\\nThere are many event types. So we need to determine if the type is message.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"278aff13-c081-47f0-a1f6-67920642e991\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -800,\n        -440\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"b63773bb-f010-4018-8142-240c9aaa4570\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.body.events[0].type }}\",\n              \"rightValue\": \"message\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"cff2f1d3-b7a4-4940-a1d1-1e5a80d6ea28\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1100,\n        -200\n      ],\n      \"parameters\": {\n        \"width\": 720,\n        \"height\": 340,\n        \"content\": \"## Line Message API Send Message\\n\\nYou need to get the Line UID first.\\nEvery user is differnt.\\n\\nIf you have the Line UID. Then you can push the message to the User.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9348fc83-0aeb-4591-85b6-48f556512478\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -1020,\n        -20\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"74db3e1b-9a22-4033-bf04-a8ff485a5d3b\",\n      \"name\": \"Edit Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -800,\n        -20\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"6278f340-6287-4e89-b774-f6c584954d5b\",\n              \"name\": \"line_uid\",\n              \"type\": \"string\",\n              \"value\": \"Uxxxxxxxxxxxx\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"c593bd58-8f6a-4689-bb12-e71256ccf6e6\",\n      \"name\": \"Line : Push Message\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -560,\n        -20\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.line.me/v2/bot/message/push\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"to\\\": \\\"{{ $json.line_uid }}\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"text\\\": \\\"推播測試\\\"\\n    }\\n  ]\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"xB2Ip7YKSIDq7BoI\",\n          \"name\": \"Line n8n demo auth\"\n        }\n      },\n      \"typeVersion\": 4.2\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"240dc848-8803-4776-b01d-5f10c765f72b\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Line : Reply with token\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Line : Push Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook from Line Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.if",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest"
    ],
    "trigger": null
  }
}