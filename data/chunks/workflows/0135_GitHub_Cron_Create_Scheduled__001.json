{
  "source": "0135_GitHub_Cron_Create_Scheduled.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"name\": \"Get latest release\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        540,\n        340\n      ],\n      \"parameters\": {\n        \"limit\": 1,\n        \"resource\": \"release\",\n        \"operation\": \"getAll\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Cron\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        240,\n        500\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyWeek\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        740,\n        420\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"No issue for release?\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        920,\n        420\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const _ = require('lodash')\\n\\n// differentiate merged inputs (didnt find a way to get both inputs into one function invocation)\\nconst releases = _.filter(items, i => _.has(i, 'json.assets'))\\nif (releases.length != 1) throw new Error(`Invalid release count: ${releases.length}`)\\nconst release = releases[0]\\nconst issues = _.without(items, release)\\n//console.log({release,issues})\\n\\n// check if there's an issue for the release\\nconst matchingIssue = _.find(issues, i => i.json.title.includes(release.json.tag_name))\\n//console.log({release,issues,matchingIssue})\\n\\nif (matchingIssue)\\n  return []\\nelse\\n  return [release]\"\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Create issue\",\n      \"type\": \"n8n-nodes-base.gitlab\",\n      \"position\": [\n        1100,\n        420\n      ],\n      \"parameters\": {\n        \"body\": \"={{$json[\\\"url\\\"]}}\\n\\n{{$json[\\\"body\\\"]}}\",\n        \"owner\": \"txlab\",\n        \"title\": \"=Upstream release: {{$json[\\\"tag_name\\\"]}}\",\n        \"labels\": [],\n        \"repository\": \"docker-linkcheck\",\n        \"assignee_ids\": []\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"List issues\",\n      \"type\": \"n8n-nodes-base.gitlab\",\n      \"position\": [\n        540,\n        500\n      ],\n      \"parameters\": {\n        \"owner\": \"txlab\",\n        \"resource\": \"repository\",\n        \"repository\": \"docker-linkcheck\",\n        \"getRepositoryIssuesFilters\": {}\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Cron\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get latest release\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"List issues\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"No release for issue?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Start\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get latest release\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"List issues\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"List issues\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Get latest release\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"No release for issue?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.github",
      "n8n-nodes-base.cron",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.function",
      "n8n-nodes-base.gitlab",
      "n8n-nodes-base.gitlab"
    ],
    "trigger": null
  }
}