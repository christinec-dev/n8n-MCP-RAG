{
  "source": "0077_HTTP_Noop_Sync_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": 117,\n  \"name\": \"Syncro Alert to OpsGenie\",\n  \"nodes\": [\n    {\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        460,\n        380\n      ],\n      \"webhookId\": \"fromsyncro\",\n      \"parameters\": {\n        \"path\": \"fromsyncro\",\n        \"options\": {},\n        \"httpMethod\": \"POST\",\n        \"responseData\": \"allEntries\",\n        \"responseMode\": \"lastNode\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Set\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        780,\n        380\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"AlertID\",\n              \"value\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"id\\\"]}}\"\n            },\n            {\n              \"name\": \"Description\",\n              \"value\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"computer_name\\\"]}} ({{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"customer\\\"][\\\"business_then_name\\\"]}}): {{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"formatted_output\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Create Alert\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1180,\n        260\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.opsgenie.com/v2/alerts\",\n        \"options\": {},\n        \"requestMethod\": \"POST\",\n        \"authentication\": \"headerAuth\",\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"message\",\n              \"value\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"computer_name\\\"]}} ({{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"customer\\\"][\\\"business_then_name\\\"]}}): {{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"formatted_output\\\"]}}\"\n            },\n            {\n              \"name\": \"alias\",\n              \"value\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"id\\\"]}}\"\n            },\n            {\n              \"name\": \"description\",\n              \"value\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"text\\\"]}}\\n{{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"link\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": null,\n          \"name\": \"OpsGenie\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Close Alert\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1180,\n        460\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.opsgenie.com/v2/alerts/{{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"id\\\"]}}/close?identifierType=alias\",\n        \"options\": {},\n        \"requestMethod\": \"POST\",\n        \"authentication\": \"headerAuth\",\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"note\",\n              \"value\": \"Issue resolved automatically according to Syncro.\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": null,\n          \"name\": \"OpsGenie\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"NoOp\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        780,\n        560\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        940,\n        380\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"resolved\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        620,\n        380\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"rules\": [\n            {\n              \"value2\": \"agent_offline_trigger\"\n            }\n          ]\n        },\n        \"value1\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"attributes\\\"][\\\"properties\\\"][\\\"trigger\\\"]}}\",\n        \"dataType\": \"string\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Close Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"NoOp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.if",
      "n8n-nodes-base.switch"
    ],
    "trigger": null
  }
}