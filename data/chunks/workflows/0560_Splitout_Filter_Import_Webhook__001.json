{
  "source": "0560_Splitout_Filter_Import_Webhook.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"169e3a8c-82f5-4527-a187-27b8e5d903c1\",\n      \"name\": \"Spotify Next\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1300,\n        -40\n      ],\n      \"parameters\": {\n        \"operation\": \"nextSong\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7840d6b8-7eb4-4ac2-8bd0-946561f7de38\",\n      \"name\": \"Spotify Resume\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1300,\n        660\n      ],\n      \"parameters\": {\n        \"operation\": \"resume\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"35e768a3-b648-4d5e-a6a4-fa5f5be3d922\",\n      \"name\": \"Spotify Pause\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1300,\n        480\n      ],\n      \"parameters\": {\n        \"operation\": \"pause\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0a391400-a8f0-4c1e-ac79-bbdea4aa21b4\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -361,\n        55\n      ],\n      \"parameters\": {\n        \"width\": 611.1911357340722,\n        \"height\": 291.1542012927053,\n        \"content\": \"### Receive MQTT message from IKEA 5-button Switch, and route actions.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"164e904f-278d-4e48-81de-e1fc050e683a\",\n      \"name\": \"Spotify API - Volume up 5pct\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1300,\n        120\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.spotify.com/v1/me/player/volume\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"=device_id\",\n              \"value\": \"={{ $json.device.id }}\"\n            },\n            {\n              \"name\": \"volume_percent\",\n              \"value\": \"={{ Math.min($json.device.volume_percent + 5, 100) }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"spotifyOAuth2Api\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"a75cfc9b-ba21-4771-a2ff-f7aee843f344\",\n      \"name\": \"Spotify API - Volume down 5pct\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1300,\n        300\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.spotify.com/v1/me/player/volume\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"device_id\",\n              \"value\": \"={{ $json.device.id }}\"\n            },\n            {\n              \"name\": \"volume_percent\",\n              \"value\": \"={{ Math.max($json.device.volume_percent - 5, 20) }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"spotifyOAuth2Api\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"deae216d-aaaa-406c-b978-45b790c5d837\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -360,\n        608.2274931489221\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 906.3175117167951,\n        \"height\": 278.70214810442735,\n        \"content\": \"### Find the target player device (or spotify device group) by name, and activate it.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2733fd1e-4c58-4f3e-bf7d-f4111fea6efc\",\n      \"name\": \"Spotify API - Get Available Devices\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -260,\n        680\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.spotify.com/v1/me/player/devices\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {}\n          ]\n        },\n        \"nodeCredentialType\": \"spotifyOAuth2Api\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"1d7fcab5-e49d-4d03-8e7d-aa339afa45ec\",\n      \"name\": \"Extract Individual Devices\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        -60,\n        680\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"devices\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7ae0af1c-2fbb-47e4-b2ab-670be441d86f\",\n      \"name\": \"Select Device by Name to get device_id\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        140,\n        680\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"069d11c8-75a2-4a5c-81c4-e6f771ee4829\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.name }}\",\n              \"rightValue\": \"={{ $('Globals').first().json.target_spotify_playback_device_name }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"738d57fd-9dcb-4d3d-b070-73867c926d3f\",\n      \"name\": \"Custom Function 1 - P1\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        880,\n        840\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.spotify.com/v1/me/player/volume\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"volume_percent\",\n              \"value\": \"80\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"spotifyOAuth2Api\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"e3fc6784-1612-427d-9b78-a3f4050ed176\",\n      \"name\": \"Custom Function 2 - P2\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1080,\n        840\n      ],\n      \"parameters\": {\n        \"id\": \"spotify:track:4PTG3Z6ehGkBFwjybzWkR8\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"340f23ff-ae8a-4032-a641-30bc32af09c7\",\n      \"name\": \"Custom Function 1 - P3\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1300,\n        840\n      ],\n      \"parameters\": {\n        \"operation\": \"nextSong\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"30a413da-5ce3-44a9-a43e-c6679b712087\",\n      \"name\": \"Spotify API - Activate Target Playback Device\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        360,\n        680\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.spotify.com/v1/me/player\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"device_ids\\\": [\\n    \\\"{{ $('Select Device by Name to get device_id').first().json.id }}\\\"\\n  ],\\n  \\\"play\\\": true\\n}\",\n        \"sendBody\": true,\n        \"sendQuery\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {}\n          ]\n        },\n        \"nodeCredentialType\": \"spotifyOAuth2Api\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"91dd48fe-6c3c-4170-8392-3d9885e61047\",\n      \"name\": \"Route to Requested Function\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        900,\n        420\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"=volume_up\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('MQTT Trigger - Ikea Remote Switch').first().json.message }}\",\n                    \"rightValue\": \"brightness_up_click\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"volume_down\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"c0726ee0-31b2-48fd-a860-0b923d8c18e7\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('MQTT Trigger - Ikea Remote Switch').first().json.message }}\",\n                    \"rightValue\": \"brightness_down_click\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"play/pause\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"569014d8-0db4-4126-a0dd-7264a3b6db51\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('MQTT Trigger - Ikea Remote Switch').first().json.message }}\",\n                    \"rightValue\": \"toggle\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"custom_function_1\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"af6d07f3-0ac2-4c05-8535-26d618892b8b\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('MQTT Trigger - Ikea Remote Switch').first().json.message }}\",\n                    \"rightValue\": \"brightness_up_hold\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"custom_function_2\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"a5e8ce30-4b18-450a-8b15-342a698fec61\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('MQTT Trigger - Ikea Remote Switch').first().json.message }}\",\n                    \"rightValue\": \"brightness_down_hold\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"extra\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"4a9ddd4d-ae2d-43c8-b3fd-70a2b15c5743\",\n      \"name\": \"Custom Function 2 - P1\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        840,\n        1020\n      ],\n      \"parameters\": {\n        \"resource\": \"playlist\",\n        \"operation\": \"getUserPlaylists\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"29f842ad-f7cb-47b5-81fe-349f193e54bb\",\n      \"name\": \"Filter\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1040,\n        1020\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"f7b6844a-ad78-4f29-801b-cef817a42e94\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.name }}\",\n              \"rightValue\": \"={{ $('Globals').first().json.favorite_playlist_name }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"cb038583-e930-4fee-9166-fa182d20868e\",\n      \"name\": \"Globals\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -100,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"2124b4d2-f929-459d-b285-3ac18df3ab60\",\n              \"name\": \"target_spotify_playback_device_name\",\n              \"type\": \"string\",\n              \"value\": \"My Smart-Speaker Playback Device\"\n            },\n            {\n              \"id\": \"b7f0468d-c5c3-4424-8db8-af823a10c7f0\",\n              \"name\": \"favorite_playlist_name\",\n              \"type\": \"string\",\n              \"value\": \"Discover Weekly\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"f4505b9a-6f04-4ff7-9384-05bae95b2fc8\",\n      \"name\": \"Custom Function 2 - P3\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1260,\n        1020\n      ],\n      \"parameters\": {\n        \"id\": \"=spotify:playlist:{{ $json.id }}\",\n        \"operation\": \"startMusic\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2b2a81f9-69b6-42ca-accc-d4d987d6823c\",\n      \"name\": \"Oops. How was this reached?\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1080,\n        680\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e45f04d6-bb3c-4580-9ef4-307d3692ad29\",\n      \"name\": \"Spotify API - Get Device Status\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        440,\n        260\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.spotify.com/v1/me/player\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"device_id\",\n              \"value\": \"={{ $('Globals').first().json.target_spotify_playback_device_id }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"spotifyOAuth2Api\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"ffa38f10-f9b4-4a52-954e-39adcd924633\",\n      \"name\": \"Already playing on Target Device?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        640,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"92d0f5fc-0743-4ea7-aad3-c8b72481bb97\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Spotify API - Get Device Status').first().json.device.name }}\",\n              \"rightValue\": \"={{ $('Globals').first().json.target_spotify_playback_device_name }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"f92ed1ea-c9a7-4818-9a8e-a5fa460177ea\",\n      \"name\": \"Is Playing?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1140,\n        520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"caa4edf5-6436-4416-92f7-febd63cd47c5\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('Spotify API - Get Device Status').first().json.is_playing && !$('Spotify API - Activate Target Playback Device').isExecuted }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"5580215d-0f20-4349-a7c2-b74f0e01080e\",\n      \"name\": \"Spotify Prev\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1300,\n        -200\n      ],\n      \"parameters\": {\n        \"operation\": \"previousSong\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"4AquI6TQMHILfmvx\",\n          \"name\": \"Spotify App Credentials\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f3babdeb-86d4-4dc6-85a4-95c48f4f07ef\",\n      \"name\": \"MQTT Trigger - Remote Switch\",\n      \"type\": \"n8n-nodes-base.mqttTrigger\",\n      \"position\": [\n        -280,\n        160\n      ],\n      \"parameters\": {\n        \"topics\": \"zigbee2mqtt/MyIOTButton1234/action\",\n        \"options\": {\n          \"jsonParseBody\": true\n        }\n      },\n      \"credentials\": {\n        \"mqtt\": {\n          \"id\": \"65ppR4lt7hVNzfVG\",\n          \"name\": \"MQTT account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0c1bd86f-49f7-4505-9c8a-047dcb10a1bd\",\n      \"name\": \"Remote Action -> Function Router\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        100,\n        140\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"rules\": [\n            {\n              \"value2\": \"arrow_left_click\",\n              \"outputKey\": \"left\"\n            },\n            {\n              \"value2\": \"arrow_right_click\",\n              \"outputKey\": \"right\"\n            },\n            {\n              \"value2\": \"brightness_up_click\",\n              \"outputKey\": \"up\"\n            },\n            {\n              \"value2\": \"brightness_down_click\",\n              \"outputKey\": \"down\"\n            },\n            {\n              \"value2\": \"toggle\",\n              \"outputKey\": \"on_off\"\n            },\n            {\n              \"value2\": \"brightness_up_hold\",\n              \"outputKey\": \"custom_function_1\"\n            },\n            {\n              \"value2\": \"brightness_down_hold\",\n              \"outputKey\": \"custom_function_2\"\n            }\n          ]\n        },\n        \"value1\": \"={{ $('MQTT Trigger - Ikea Remote Switch').first().json.message }}\",\n        \"dataType\": \"string\"\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Filter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Custom Function 2 - P3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Globals\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Remote Action -> Function Router\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is Playing?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Spotify Pause\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Spotify Resume\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Custom Function 1 - P1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Custom Function 2 - P2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Custom Function 2 - P1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Custom Function 2 - P2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Custom Function 1 - P3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Individual Devices\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Select Device by Name to get device_id\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Route to Requested Function\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Spotify API - Volume up 5pct\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Spotify API - Volume down 5pct\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Is Playing?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Custom Function 1 - P1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Custom Function 2 - P1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Oops. How was this reached?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Spotify API - Get Device Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Already playing on Target Device?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Remote Action -> Function Router\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Spotify Prev\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Spotify Next\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Spotify API - Get Device Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Spotify API - Get Device Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Spotify API - Get Device Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Spotify API - Get Device Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Spotify API - Get Device Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Already playing on Target Device?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Route to Requested Function\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Spotify API - Get Available Devices\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"MQTT Trigger - Ikea Remote Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Globals\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Spotify API - Get Available Devices\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract Individual Devices\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Select Device by Name to get device_id\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Spotify API - Activate Target Playback Device\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Spotify API - Activate Target Playback Device\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Route to Requested Function\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.spotify",
      "n8n-nodes-base.spotify",
      "n8n-nodes-base.spotify",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.spotify",
      "n8n-nodes-base.spotify",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.spotify",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.set",
      "n8n-nodes-base.spotify",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.if",
      "n8n-nodes-base.if",
      "n8n-nodes-base.spotify",
      "n8n-nodes-base.mqttTrigger",
      "n8n-nodes-base.switch"
    ],
    "trigger": "mqtt trigger - remote switch"
  }
}