{
  "source": "0888_Wait_Code_Send_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"4359279a248a64f23ddf72d3bc2de4dead8a687e643e9296f8a007dd65120396\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"74a81d54-6cc9-4c17-88fe-aca27d491b73\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        640,\n        40\n      ],\n      \"webhookId\": \"1d3d0c06-f979-4573-b644-1a5b13153471\",\n      \"parameters\": {\n        \"path\": \"paypal-NVP-SOAP-Webhook\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"59caade5-a67d-4d22-822c-bec8bf9baf69\",\n      \"name\": \"Event Capture Type\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1160,\n        0\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Payment\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"68917137-6042-4e47-9432-d006dca17872\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.body.event_type }}\",\n                    \"rightValue\": \"=PAYMENT.CAPTURE.COMPLETED\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"cba1ef91-2e34-4bd5-9972-565296137851\",\n      \"name\": \"Get Order Details\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1360,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.paypal.com/v2/checkout/orders/{{ $json.body.resource.supplementary_data.related_ids.order_id }}\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"oAuth2Api\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"ecab1f76-8c53-459c-8c5f-26356ec9e675\",\n      \"name\": \"Email Data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1540,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"8d56c774-9adb-4981-9295-6f6f2ec59749\",\n              \"name\": \"First Name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.payment_source.paypal.name.given_name }}\"\n            },\n            {\n              \"id\": \"0f6136eb-f5e1-47b9-a829-f42dff2b7c9e\",\n              \"name\": \"Last Name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.payment_source.paypal.name.surname }}\"\n            },\n            {\n              \"id\": \"f4da90dc-b4d5-4951-91b8-2ef4b2bf870d\",\n              \"name\": \"EmaiID\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.payment_source.paypal.email_address }}\"\n            },\n            {\n              \"id\": \"f7a31ec1-4305-4df0-8791-0f59a04f0c7e\",\n              \"name\": \"Product Purchased\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.purchase_units[0].items[0].name }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"211fbba0-67b1-4ece-b6a7-79b7c5cd0f7a\",\n      \"name\": \"Wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        920,\n        40\n      ],\n      \"webhookId\": \"16debf49-5196-473a-8b55-b2450b9b575a\",\n      \"parameters\": {},\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"c4b9bcab-42ab-4fca-b064-ab262cdcf05e\",\n      \"name\": \"getJSON\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2060,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"https://your-json-template-in-ase-you-are-sellig.json\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"b92f72a4-25c2-4c6d-9cc1-366cd1dc2dd1\",\n      \"name\": \"Event Capture Type1\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1760,\n        0\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"SocialMedia\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"68917137-6042-4e47-9432-d006dca17872\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json[\\\"Product Purchased\\\"] }}\",\n                    \"rightValue\": \"=AI-Powered Social Media Content Generator & Publisher\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"10f88f6c-1062-48c5-8a90-116c18954d95\",\n      \"name\": \"Conver to File\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        2280,\n        0\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const content = JSON.stringify($json, null, 2); // Pretty-print JSON\\n\\nreturn [\\n  {\\n    binary: {\\n      data: {\\n        data: Buffer.from(content).toString('base64'),\\n        mimeType: 'application/json',\\n        fileName: 'data.json'\\n      }\\n    }\\n  }\\n];\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"4c95905c-0c77-488a-8fb3-e8f4f4b83e54\",\n      \"name\": \"Send Email\",\n      \"type\": \"n8n-nodes-base.emailSend\",\n      \"position\": [\n        2600,\n        0\n      ],\n      \"webhookId\": \"e2895df8-6c42-44ff-ba08-fbf7a9df93c6\",\n      \"parameters\": {\n        \"html\": \"=<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <title>{{ $('Event Capture Type1').item.json['Product Purchased'] }}</title>\\n</head>\\n<body style=\\\"margin:0; padding:0; font-family: Arial, sans-serif; background-color: #f9f9f9;\\\">\\n  <table align=\\\"center\\\" width=\\\"100%\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" style=\\\"max-width:600px; background-color:#ffffff; margin:20px auto; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.05);\\\">\\n    <tr>\\n      <td style=\\\"padding:30px; text-align:center;\\\">\\n        <h2 style=\\\"color:#333;\\\">Hi {{ $('Event Capture Type1').item.json['First Name'] }} {{ $('Event Capture Type1').item.json['Last Name'] }} ,</h2>\\n        <p style=\\\"font-size:16px; color:#555;\\\">Thank you for purchasing <strong> {{ $('Event Capture Type1').item.json['Product Purchased'] }}  - n8n workflow template</strong> from <strong>SyncBricks</strong>! üöÄ</p>\\n        <p style=\\\"font-size:16px; color:#555;\\\">Your template is attached with this email. We hope it helps you build powerful automations with ease.</p>\\n        <hr style=\\\"margin:30px 0; border:none; border-top:1px solid #eee;\\\">\\n        <p style=\\\"font-size:16px; color:#555;\\\">Here are some helpful resources to take things further:</p>\\n        <ul style=\\\"list-style:none; padding:0; font-size:16px; color:#333;\\\">\\n          <li style=\\\"margin-bottom:10px;\\\"><a href=\\\"https://www.udemy.com/course/mastering-n8n-ai-agents-api-automation-webhooks-no-code/?referralCode=0309FD70BE2D72630C09\\\" style=\\\"color:#0066cc; text-decoration:none;\\\">üìò Enroll for the n8n Mastery Course</a></li>\\n          <li style=\\\"margin-bottom:10px;\\\"><a href=\\\"https://lms.syncbricks.com/books/n8n/\\\" style=\\\"color:#0066cc; text-decoration:none;\\\">üìñ Get the Book: Mastering n8n</a></li>\\n          <li style=\\\"margin-bottom:10px;\\\"><a href=\\\"https://n8n.syncbricks.com\\\" style=\\\"color:#0066cc; text-decoration:none;\\\">‚òÅÔ∏è Try n8n Cloud ‚Äì Use Code <strong>AMJID10</strong> for Discount</a></li>\\n        </ul>\\n\\n<p style=\\\"font-size:16px; color:#555;\\\">üé• Watch a quick guide on how to use your template:</p>\\n<a href=\\\"https://www.youtube.com/watch?v=-Oc_HfreJJE\\\" target=\\\"_blank\\\" style=\\\"display:inline-block; text-decoration:none;\\\">\\n  <img src=\\\"https://img.youtube.com/vi/-Oc_HfreJJE/hqdefault.jpg\\\" alt=\\\"Watch on YouTube\\\" style=\\\"width:100%; max-width:500px; border-radius:6px; box-shadow:0 0 10px rgba(0,0,0,0.1); margin:10px 0;\\\">\\n</a>\\n\\n\\n        <p style=\\\"font-size:14px; color:#999; margin-top:40px;\\\">Need help or have questions? Just reply to this email .</p>\\n      </td>\\n    </tr>\\n  </table>\\n</body>\\n</html>\\n\",\n        \"options\": {\n          \"attachments\": \"data\",\n          \"appendAttribution\": false\n        },\n        \"subject\": \"=Your Order : {{ $('Get Order Details').item.json.purchase_units[0].items[0].name }}\",\n        \"toEmail\": \"={{ $('Email Data').item.json.EmaiID }}\",\n        \"fromEmail\": \"Syncbricks <info@syncbricks.com>\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"d859f5b9-db4f-4df8-a806-a806349092ee\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        580,\n        -160\n      ],\n      \"parameters\": {\n        \"width\": 520,\n        \"height\": 500,\n        \"content\": \"## Paypal  Webhook\\n**Go to Paypal Developer\\nClick on Apps and Credentails\\nGo to NVP SOAP Webhooks\\nAdd this Webhook in Paypal\\n\\n- Wait node is to ensure that Transaction is completed\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f4c545d8-f978-4b49-8cdb-3b6b427544f8\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -400,\n        -180\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 955,\n        \"height\": 516,\n        \"content\": \"## Developed by Amjid Ali\\n\\nThank you for using this workflow template. It has taken me countless hours of hard work, research, and dedication to develop, and I sincerely hope it adds value to your work.\\n\\nIf you find this template helpful, I kindly ask you to consider supporting my efforts. Your support will help me continue improving and creating more valuable resources.\\n\\nYou can contribute via PayPal here:\\n\\nhttp://paypal.me/pmptraining\\n\\nFor Full Course about ERPNext or Automation using AI follow below link\\n\\nhttp://lms.syncbricks.com\\n\\nAdditionally, when sharing this template, I would greatly appreciate it if you include my original information to ensure proper credit is given.\\n\\nThank you for your generosity and support!\\nEmail : amjid@amjidali.com\\nhttps://linkedin.com/in/amjidali\\nhttps://syncbricks.com\\nhttps://youtube.com/@syncbricks\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"769fc3b3-0cbe-4334-a990-83c86a0e5fc2\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1120,\n        -160\n      ],\n      \"parameters\": {\n        \"width\": 580,\n        \"height\": 500,\n        \"content\": \"## Payment Detials are Selected\\n**The webhook gets all the Events but here we are filtering only the payments that we got agains the order.\\n** It will get the customer name, Email Address and the Product customer has bought\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"835a6eb1-0b73-4d52-92b1-253fb1f150ac\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1720,\n        -160\n      ],\n      \"parameters\": {\n        \"width\": 280,\n        \"height\": 500,\n        \"content\": \"## Filter the Product \\n** Each Product can have multiple Product Links on successful Purchase\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"54a284f2-566b-4dea-9e5f-6e55f5faefa4\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2020,\n        -160\n      ],\n      \"parameters\": {\n        \"width\": 420,\n        \"height\": 500,\n        \"content\": \"## n8n Template Sale\\n** as I am selling n8n template, it will download json file and will convert that into binay file\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"20645f67-af3d-4ebf-bab1-488937182205\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2460,\n        -160\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 420,\n        \"height\": 500,\n        \"content\": \"## Send Email to Custoer\\n** The download file will be attafched and my Custom Email will be sent to Customer\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Event Capture Type\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"getJSON\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Conver to File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Email Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Event Capture Type1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Conver to File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Order Details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Email Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Event Capture Type\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Order Details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Event Capture Type1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"getJSON\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.code",
      "n8n-nodes-base.emailSend",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}