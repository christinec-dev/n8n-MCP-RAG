{
  "source": "0183_Strapi_Webhook_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"name\": \"Simplify Result\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        680,\n        100\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Content\",\n              \"value\": \"={{$json[\\\"full_text\\\"].replace(/(?:https?|ftp):\\\\/\\\\/[\\\\n\\\\S]+/g, '')}}\"\n            },\n            {\n              \"name\": \"Author\",\n              \"value\": \"={{$json[\\\"user\\\"][\\\"name\\\"]}} (@{{$json[\\\"user\\\"][\\\"screen_name\\\"]}})\"\n            },\n            {\n              \"name\": \"Created\",\n              \"value\": \"={{new Date($json[\\\"created_at\\\"]).toISOString()}}\"\n            },\n            {\n              \"name\": \"URL\",\n              \"value\": \"=https://twitter.com/{{$json[\\\"user\\\"][\\\"screen_name\\\"]}}/status/{{$json[\\\"id_str\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Store in Strapi\",\n      \"type\": \"n8n-nodes-base.strapi\",\n      \"position\": [\n        1780,\n        100\n      ],\n      \"parameters\": {\n        \"columns\": \"Content,Author,Created,URL\",\n        \"operation\": \"create\",\n        \"contentType\": \"posts\"\n      },\n      \"credentials\": {\n        \"strapiApi\": {\n          \"id\": \"136\",\n          \"name\": \"Strapi Demo\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Every 30 Minutes\",\n      \"type\": \"n8n-nodes-base.interval\",\n      \"position\": [\n        240,\n        100\n      ],\n      \"parameters\": {\n        \"unit\": \"minutes\",\n        \"interval\": 30\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Is Retweet or Old?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        900,\n        100\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json[\\\"Content\\\"]}}\",\n              \"value2\": \"RT @\",\n              \"operation\": \"startsWith\"\n            }\n          ],\n          \"dateTime\": [\n            {\n              \"value1\": \"={{$json[\\\"Created\\\"]}}\",\n              \"value2\": \"={{new Date(new Date().getTime() - 30 * 60 * 1000)}}\",\n              \"operation\": \"before\"\n            }\n          ]\n        },\n        \"combineOperation\": \"any\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Search Tweets\",\n      \"type\": \"n8n-nodes-base.twitter\",\n      \"position\": [\n        460,\n        100\n      ],\n      \"parameters\": {\n        \"operation\": \"search\",\n        \"searchText\": \"(strapi OR n8n.io) AND lang:en\",\n        \"additionalFields\": {\n          \"tweetMode\": \"extended\",\n          \"resultType\": \"recent\"\n        }\n      },\n      \"credentials\": {\n        \"twitterOAuth1Api\": {\n          \"id\": \"15\",\n          \"name\": \"@MutedJam\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        240,\n        -120\n      ],\n      \"webhookId\": \"6f833370-9068-44ef-8e56-4ceb563a851e\",\n      \"parameters\": {\n        \"path\": \"6f833370-9068-44ef-8e56-4ceb563a851e\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Simplify Webhook Result\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        460,\n        -120\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Content\",\n              \"value\": \"={{$json[\\\"body\\\"][\\\"data\\\"][\\\"fields\\\"][1][\\\"value\\\"]}}\"\n            },\n            {\n              \"name\": \"Author\",\n              \"value\": \"={{$json[\\\"body\\\"][\\\"data\\\"][\\\"fields\\\"][0][\\\"value\\\"]}}\"\n            },\n            {\n              \"name\": \"Created\",\n              \"value\": \"={{new Date().toISOString()}}\"\n            },\n            {\n              \"name\": \"URL\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Analyze Form Submission\",\n      \"type\": \"n8n-nodes-base.googleCloudNaturalLanguage\",\n      \"position\": [\n        680,\n        -220\n      ],\n      \"parameters\": {\n        \"content\": \"={{$json[\\\"Content\\\"]}}\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"googleCloudNaturalLanguageOAuth2Api\": {\n          \"id\": \"138\",\n          \"name\": \"Google Cloud Natural Language account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Analyze Tweet\",\n      \"type\": \"n8n-nodes-base.googleCloudNaturalLanguage\",\n      \"position\": [\n        1120,\n        200\n      ],\n      \"parameters\": {\n        \"content\": \"={{$json[\\\"Content\\\"]}}\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"googleCloudNaturalLanguageOAuth2Api\": {\n          \"id\": \"138\",\n          \"name\": \"Google Cloud Natural Language account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Merge Form Sentiment with Source\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        900,\n        -120\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByIndex\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Merge Tweet Sentiment with Source\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1340,\n        100\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByIndex\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Positive Form Sentiment?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1120,\n        -120\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{$json[\\\"documentSentiment\\\"][\\\"score\\\"]}}\",\n              \"value2\": 0.4,\n              \"operation\": \"larger\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Store Form Submission in Strapi\",\n      \"type\": \"n8n-nodes-base.strapi\",\n      \"position\": [\n        1340,\n        -120\n      ],\n      \"parameters\": {\n        \"columns\": \"Content,Author,Created,URL\",\n        \"operation\": \"create\",\n        \"contentType\": \"posts\"\n      },\n      \"credentials\": {\n        \"strapiApi\": {\n          \"id\": \"136\",\n          \"name\": \"Strapi Demo\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Positive Tweet Sentiment?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1560,\n        100\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{$json[\\\"documentSentiment\\\"][\\\"score\\\"]}}\",\n              \"value2\": 0.3,\n              \"operation\": \"larger\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Simplify Webhook Result\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Analyze Tweet\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Tweet Sentiment with Source\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Search Tweets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Simplify Result\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simplify Result\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is Retweet or Old?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Every 30 Minutes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search Tweets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is Retweet or Old?\": {\n      \"main\": [\n        null,\n        [\n          {\n            \"node\": \"Analyze Tweet\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge Tweet Sentiment with Source\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Analyze Form Submission\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Form Sentiment with Source\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simplify Webhook Result\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Analyze Form Submission\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge Form Sentiment with Source\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Positive Form Sentiment?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Store Form Submission in Strapi\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Positive Tweet Sentiment?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Store in Strapi\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge Form Sentiment with Source\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Positive Form Sentiment?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge Tweet Sentiment with Source\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Positive Tweet Sentiment?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.set",
      "n8n-nodes-base.strapi",
      "n8n-nodes-base.interval",
      "n8n-nodes-base.if",
      "n8n-nodes-base.twitter",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.set",
      "n8n-nodes-base.googleCloudNaturalLanguage",
      "n8n-nodes-base.googleCloudNaturalLanguage",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.if",
      "n8n-nodes-base.strapi",
      "n8n-nodes-base.if"
    ],
    "trigger": null
  }
}