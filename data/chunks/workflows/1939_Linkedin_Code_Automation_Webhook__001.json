{
  "source": "1939_Linkedin_Code_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"0pVPSW4PzJZLLqSf\",\n  \"meta\": {\n    \"instanceId\": \"8e47d02981c11ba904b56e6bd77877c35ef5c9aa1cdc4076bcb72bbb235efa38\"\n  },\n  \"name\": \"Notion to Linkedin\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"d922cf0c-f1c2-40ff-927c-d0d3e2fb7f27\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        2140,\n        460\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combinationMode\": \"mergeByPosition\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"8c5f68d8-f11d-4b37-b0d8-3abd1b681b56\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        780,\n        440\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"height\": 141.4092845296238,\n        \"content\": \"## Start the flow every day at the same time\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d10de4f3-6e90-474f-bd68-25aae2037b7b\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1240,\n        312.5835468325357\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 367.12018536439575,\n        \"height\": 382.294335406698,\n        \"content\": \"## Fetch the day's post from my Notion database\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a63bcc85-ec8b-424f-a53c-e4c07db3c7c8\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1642.6949426092506,\n        313.81962236044654\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 627.4768047417825,\n        \"height\": 380.3367219655605,\n        \"content\": \"## Process and format the post\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d7c0f13c-ebbe-4000-bd8f-d1180d65d02a\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        1060,\n        460\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"triggerAtHour\": 15\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"7bebcb2d-1642-48ce-a511-bb0f561ca5cf\",\n      \"name\": \"Filter the table for the day's post\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1280,\n        460\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"conditions\": [\n            {\n              \"key\": \"Date|date\",\n              \"date\": \"={{ $today.format(\\\"yyyy/mM/dd\\\") }}\",\n              \"condition\": \"equals\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"resource\": \"databasePage\",\n        \"operation\": \"getAll\",\n        \"databaseId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"f09dc21b-1070-4d5a-bf7f-a9ab3dbb69fb\",\n          \"cachedResultUrl\": \"https://www.notion.so/f09dc21b10704d5abf7fa9ab3dbb69fb\",\n          \"cachedResultName\": \"Postagens\"\n        },\n        \"filterType\": \"manual\"\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"faERNMuBrkAfVaJR\",\n          \"name\": \"Notion Weck\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"ee61bc59-164b-45b4-8b49-57cdba7d298b\",\n      \"name\": \"Fetch the content on the page\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1480,\n        460\n      ],\n      \"parameters\": {\n        \"blockId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $json.url }}\"\n        },\n        \"resource\": \"block\",\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"faERNMuBrkAfVaJR\",\n          \"name\": \"Notion Weck\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"52d1ffef-11e8-4635-bbb8-05e915034379\",\n      \"name\": \"Aggregate the Notion blocks\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1680,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToAggregate\": {\n          \"fieldToAggregate\": [\n            {\n              \"fieldToAggregate\": \"content\"\n            },\n            {\n              \"fieldToAggregate\": \"image.file.url\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8617c530-382b-402b-9c0b-aeb4df2bb920\",\n      \"name\": \"Format the post\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1900,\n        360\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const notionData = items[0].json.content;\\n\\nlet formattedText = notionData[0] \\n\\nfor (let i = 1; i < notionData.length; i++) {\\n    if (notionData[i].startsWith('-')) {\\n        formattedText += '\\\\n\\\\n' + notionData[i];\\n    } else {\\n        formattedText += '\\\\n' + notionData[i];\\n    }\\n}\\n\\nreturn [{ formattedText: formattedText }];\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"0f226cfe-eb31-469a-8e7c-a21192adbd4c\",\n      \"name\": \"Download image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1900,\n        560\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.url[0] }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"81a1e39c-c7ea-4635-84fc-a8ae05cfd8f3\",\n      \"name\": \"Publish on LinkedIn\",\n      \"type\": \"n8n-nodes-base.linkedIn\",\n      \"position\": [\n        2360,\n        460\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.formattedText }}\",\n        \"person\": \"CcS-_lLyzG\",\n        \"additionalFields\": {},\n        \"shareMediaCategory\": \"IMAGE\"\n      },\n      \"credentials\": {\n        \"linkedInOAuth2Api\": {\n          \"id\": \"HZbihVPNwXzWRzgU\",\n          \"name\": \"LinkedIn account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"61b92eb8-1bf8-4e57-9e07-1a39e457ecfb\",\n      \"name\": \"Update post status in notion database\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        2620,\n        460\n      ],\n      \"parameters\": {\n        \"pageId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $('Filter the table for the day\\\\'s post').item.json.url }}\"\n        },\n        \"options\": {},\n        \"resource\": \"databasePage\",\n        \"operation\": \"update\",\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"Status|select\",\n              \"selectValue\": \"Published\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"faERNMuBrkAfVaJR\",\n          \"name\": \"Notion Weck\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"397f3772-bb2b-4e58-99f8-2b62cc514b7a\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        760,\n        120\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 567.6073693795047,\n        \"height\": 137.6834217043934,\n        \"content\": \"## 1. Setup\\nSet up your Notion and LinkedIn credentials.\\nAttention to the LinkedIn credential: to post on your personal or company profile, you need to have a company page assigned to your profile. After that, you can choose where you want to post.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"executionOrder\": \"v1\",\n    \"executionTimeout\": 30,\n    \"saveManualExecutions\": true\n  },\n  \"versionId\": \"d6f51bb9-7320-4984-a009-b0f49073349a\",\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Publish on LinkedIn\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Format the post\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter the table for the day's post\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Publish on LinkedIn\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update post status in notion database\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate the Notion blocks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format the post\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Download image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetch the content on the page\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate the Notion blocks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter the table for the day's post\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch the content on the page\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.merge",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.aggregate",
      "n8n-nodes-base.code",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.linkedIn",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}