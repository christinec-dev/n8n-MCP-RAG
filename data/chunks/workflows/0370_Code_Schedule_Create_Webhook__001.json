{
  "source": "0370_Code_Schedule_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"cb484ba7b742928a2048bf8829668bed5b5ad9787579adea888f05980292a4a7\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"bd34c2fb-9892-408e-be1f-a25f6f9970ad\",\n      \"name\": \"Add your competitors here\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1260,\n        800\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return [\\n  {\\\"competitor\\\":\\\"zendesk\\\"},\\n  {\\\"competitor\\\":\\\"intercom\\\"},\\n  {\\\"competitor\\\":\\\"dixa\\\"}\\n]\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"ec726fe0-e85f-47b3-8cd9-05b94fc5f8ab\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1400,\n        600\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 235.65210573476693,\n        \"height\": 396.04301075268825,\n        \"content\": \"Add your API key here\\n\\n1. Sign up here\\nhttps://app.scrapingbee.com/\\n\\n2. Get your API key\\n\\n3. Paste it the node\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fd7b88e5-ef30-488e-803e-aec43334c41b\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        460,\n        460\n      ],\n      \"parameters\": {\n        \"width\": 465,\n        \"height\": 342.8125,\n        \"content\": \"# Read me\\nThis workflow monitor G2 reviews URLS. \\n\\nWhen a new review is published, it will: \\n- trigger a Slack notification \\n- record the review in Google Sheets\\n\\n\\nTo install it, you'll need access to Slack, Google Sheets and ScrapingBee\\n\\n### Full guide here: https://lempire.notion.site/Scrape-G2-reviews-with-n8n-3f46e280e8f24a68b3797f98d2fba433?pvs=4\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"925c9ce9-1691-47bd-b184-5532cfa85da5\",\n      \"name\": \"Execute workflow every day\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        980,\n        560\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"triggerAtHour\": 8\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"2dc9997d-fd94-4beb-b5be-8ec16b70f060\",\n      \"name\": \"Get G2 data with ScrapingBee\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1460,\n        800\n      ],\n      \"parameters\": {\n        \"url\": \"https://app.scrapingbee.com/api/v1\",\n        \"options\": {\n          \"batching\": {\n            \"batch\": {\n              \"batchSize\": 3\n            }\n          }\n        },\n        \"sendQuery\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"api_key\",\n              \"value\": \"YOUR_API_KEY\"\n            },\n            {\n              \"name\": \"url\",\n              \"value\": \"=https://www.g2.com/products/{{ $json.competitor }}/reviews?utf8=%E2%9C%93&order=most_recent \"\n            },\n            {\n              \"name\": \"premium_proxy\",\n              \"value\": \"true\"\n            },\n            {\n              \"name\": \"country_code\",\n              \"value\": \"us\"\n            },\n            {\n              \"name\": \"stealth_proxy\",\n              \"value\": \"true\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"b7472e8d-5abb-489b-bf32-5d36e7bce5cc\",\n      \"name\": \"Get review section HTML\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        1680,\n        800\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"extractHtmlContent\",\n        \"extractionValues\": {\n          \"values\": [\n            {\n              \"key\": \"divs\",\n              \"cssSelector\": \"div.paper.paper--white.paper--box.mb-2.position-relative.border-bottom\",\n              \"returnArray\": true,\n              \"returnValue\": \"html\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9ad1fb30-c388-4ad9-a299-9fb508b01a57\",\n      \"name\": \"Iterate on reviews\",\n      \"type\": \"n8n-nodes-base.itemLists\",\n      \"position\": [\n        1840,\n        800\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"divs\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"cb25b05d-2543-4d42-9c7e-2db5f534db2a\",\n      \"name\": \"Extract structured data\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        2020,\n        800\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"extractHtmlContent\",\n        \"dataPropertyName\": \"divs\",\n        \"extractionValues\": {\n          \"values\": [\n            {\n              \"key\": \"date\",\n              \"cssSelector\": \"div.d-f.mb-1\"\n            },\n            {\n              \"key\": \"reviewHtml\",\n              \"cssSelector\": \"div[itemprop=reviewBody]\",\n              \"returnValue\": \"html\"\n            },\n            {\n              \"key\": \"user_profile\",\n              \"attribute\": \"href\",\n              \"cssSelector\": \"a.td-n\",\n              \"returnValue\": \"attribute\"\n            },\n            {\n              \"key\": \"rating\",\n              \"attribute\": \"content\",\n              \"cssSelector\": \"meta[itemprop=ratingValue]\",\n              \"returnValue\": \"attribute\"\n            },\n            {\n              \"key\": \"reviewUrl\",\n              \"attribute\": \"href\",\n              \"cssSelector\": \"a.pjax\",\n              \"returnValue\": \"attribute\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4b2d088c-afc8-4bd9-80e1-0ef78fe94597\",\n      \"name\": \"Convert Review HTML to Markdown\",\n      \"type\": \"n8n-nodes-base.markdown\",\n      \"position\": [\n        2200,\n        800\n      ],\n      \"parameters\": {\n        \"html\": \"={{ $json.reviewHtml }}\",\n        \"options\": {},\n        \"destinationKey\": \"review\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0c03c9a2-0ee8-4700-bf9d-f07b01fd9590\",\n      \"name\": \"Get all past reviews\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1260,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1Khbjjt_Dw0LdggwEE6sj300McXelmSR1ttoG8UNojyY/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/1Khbjjt_Dw0LdggwEE6sj300McXelmSR1ttoG8UNojyY/edit#gid=0\"\n        }\n      },\n      \"typeVersion\": 4\n    },\n    {\n      \"id\": \"27d41c8f-694b-49bf-9ea7-24964e00b9b4\",\n      \"name\": \"Continue only if review is new\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        2420,\n        480\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"joinMode\": \"keepNonMatches\",\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"reviewUrl\",\n              \"field2\": \"reviewUrl\"\n            }\n          ]\n        },\n        \"outputDataFrom\": \"input2\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"f4574136-c4ab-44ce-bf06-17b3c487867c\",\n      \"name\": \"Send new review to Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        2760,\n        480\n      ],\n      \"parameters\": {\n        \"text\": \"=ðŸš¨ New review in G2\\n\\nRating: {{ $json[\\\"rating\\\"] }}\\n<{{ $json[\\\"user_profile\\\"]}}|See user in G2>\\n<{{$json[\\\"reviewUrl\\\"]}}|See review in G2>\\n\\nReview Content:\\n{{ $json.review }}\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"g2_reviews\"\n        },\n        \"otherOptions\": {\n          \"botProfile\": {\n            \"imageValues\": {\n              \"icon_url\": \"https://upload.wikimedia.org/wikipedia/en/thumb/3/38/G2_Crowd_logo.svg/640px-G2_Crowd_logo.svg.png\",\n              \"profilePhotoType\": \"image\"\n            }\n          },\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"09076f69-32a4-4ddf-a662-10c0c0e35e7f\",\n      \"name\": \"Add new review to Google Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        2760,\n        700\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"date\": \"={{ $json.date }}\",\n            \"rating\": \"={{ $json.rating }}\",\n            \"review\": \"={{ $json.review }}\",\n            \"reviewUrl\": \"={{ $json.reviewUrl }}\",\n            \"user_profile\": \"={{ $json.user_profile }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"rating\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"rating\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"review\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"review\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"user_profile\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"user_profile\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"reviewUrl\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"reviewUrl\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"reviewUrl\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1Khbjjt_Dw0LdggwEE6sj300McXelmSR1ttoG8UNojyY/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/1Khbjjt_Dw0LdggwEE6sj300McXelmSR1ttoG8UNojyY/edit#gid=0\"\n        }\n      },\n      \"typeVersion\": 4\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Iterate on reviews\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract structured data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all past reviews\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Continue only if review is new\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract structured data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert Review HTML to Markdown\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get review section HTML\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Iterate on reviews\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add your competitors here\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get G2 data with ScrapingBee\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Execute workflow every day\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all past reviews\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Add your competitors here\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get G2 data with ScrapingBee\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get review section HTML\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Continue only if review is new\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add new review to Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Send new review to Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert Review HTML to Markdown\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Continue only if review is new\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.code",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.html",
      "n8n-nodes-base.itemLists",
      "n8n-nodes-base.html",
      "n8n-nodes-base.markdown",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.slack",
      "n8n-nodes-base.googleSheets"
    ],
    "trigger": null
  }
}