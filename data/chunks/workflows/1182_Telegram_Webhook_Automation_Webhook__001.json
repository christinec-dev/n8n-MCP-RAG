{
  "source": "1182_Telegram_Webhook_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"8jDt77Y4FaV6ARYG\",\n  \"meta\": {\n    \"instanceId\": \"31e69f7f4a77bf465b805824e303232f0227212ae922d12133a0f96ffeab4fef\"\n  },\n  \"name\": \"ðŸ¤– Telegram Messaging Agent for Text/Audio/Images\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"1656be7a-7a27-47f3-b511-3634a65a97a2\",\n      \"name\": \"Check User & Chat ID\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        100,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"5fe3c0d8-bd61-4943-b152-9e6315134520\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Listen for Telegram Events').item.json.body.message.from.first_name }}\",\n              \"rightValue\": \"={{ $json.first_name }}\"\n            },\n            {\n              \"id\": \"98a0ea91-0567-459c-bbce-06abc14a49ce\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Listen for Telegram Events').item.json.body.message.from.last_name }}\",\n              \"rightValue\": \"={{ $json.last_name }}\"\n            },\n            {\n              \"id\": \"18a96c1f-f2a0-4a2a-b789-606763df4423\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Listen for Telegram Events').item.json.body.message.from.id }}\",\n              \"rightValue\": \"={{ $json.id }}\"\n            }\n          ]\n        },\n        \"looseTypeValidation\": \"=\"\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"73b0fedb-eb82-4464-a08f-397a3fe69480\",\n      \"name\": \"Error message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        320,\n        440\n      ],\n      \"parameters\": {\n        \"text\": \"=Unable to process your message.\",\n        \"chatId\": \"={{ $json.body.message.chat.id }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a3dc143b-cf3c-4416-bf43-0ca75cbde6c9\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -380,\n        -20\n      ],\n      \"parameters\": {\n        \"width\": 929,\n        \"height\": 652,\n        \"content\": \"# Receive Telegram Message with Webhook\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c80dae1e-dd20-4632-a00c-9c6290540f22\",\n      \"name\": \"Listen for Telegram Events\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -320,\n        160\n      ],\n      \"webhookId\": \"b4ed4c80-a655-4ff2-87d6-febd5280d343\",\n      \"parameters\": {\n        \"path\": \"your-endpoint\",\n        \"options\": {\n          \"binaryPropertyName\": \"data\"\n        },\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"6010dacf-1ed6-413c-adf9-146397e16b09\",\n      \"name\": \"Set Webhook Test URL\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        260,\n        -260\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.telegram.org/{{ $json.token }}/setWebhook\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"url\",\n              \"value\": \"={{ $json.test_url }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"65f8d945-12bb-4ae3-bd83-3b892a36afb9\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -380,\n        -580\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 1638,\n        \"height\": 532,\n        \"content\": \"# Telegram Webhook Tools\\n\\n## Setting your Telegram Bot WebHook the Easy Way\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8e3268e9-dc7c-4edd-b5e8-716de5d2ffb3\",\n      \"name\": \"Get Telegram Webhook Info\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -240,\n        -260\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.telegram.org/{{ $json.token }}/getWebhookInfo\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"e31e176f-2ebd-4cd1-a160-2cc5f254ca6d\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        580,\n        -20\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 1113,\n        \"height\": 429,\n        \"content\": \"# Process Audio\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b8b10cd9-7a41-4b21-853c-b2123918ab8d\",\n      \"name\": \"Image Schema\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        660,\n        1060\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"17989eb0-feca-4631-b5c8-34b1d4a6c72b\",\n              \"name\": \"image_file_id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.message.photo.last().file_id }}\"\n            },\n            {\n              \"id\": \"9317d7ae-dffd-4b1f-9a9c-b3cc4f1e0dd3\",\n              \"name\": \"caption\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.message.caption }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"9a7b9e4c-7a81-451a-887a-b7b3f658ae6e\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        580,\n        900\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 1289,\n        \"height\": 432,\n        \"content\": \"# Process Image\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"800da6c7-8d03-4932-a081-f35ce01c8dd7\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1200,\n        -580\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 800,\n        \"height\": 860,\n        \"content\": \"# How to set up a Telegram Bot WebHook\\n\\n## WebHook Setup Process\\n\\n**Basic Concept**\\nA WebHook allows your Telegram bot to automatically receive updates instead of manually polling the Bot API.\\n\\n**Setup Method**\\nTo set a WebHook, make a GET request using this URL format:\\n```\\nhttps://api.telegram.org/bot{my_bot_token}/setWebhook?url={url_to_send_updates_to}\\n```\\nWhere:\\n- `my_bot_token`: Your bot token from BotFather\\n- `url_to_send_updates_to`: Your HTTPS endpoint that handles bot updates\\n\\n\\n**Verification**\\nTo verify the WebHook setup, use:\\n```\\nhttps://api.telegram.org/bot{my_bot_token}/getWebhookInfo\\n```\\n\\nA successful response looks like:\\n```json\\n{\\n \\\"ok\\\": true,\\n \\\"result\\\": {\\n   \\\"url\\\": \\\"https://www.example.com/my-telegram-bot/\\\",\\n   \\\"has_custom_certificate\\\": false,\\n   \\\"pending_update_count\\\": 0,\\n   \\\"max_connections\\\": 40\\n }\\n}\\n```\\n\\n\\nThis method provides a simple and efficient way to handle Telegram bot updates automatically through webhooks rather than manual polling.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cd09daf9-ac74-4e86-9d74-875d78f466f0\",\n      \"name\": \"gpt-4o-mini\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1080,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4c69533c-e4e7-4667-baf8-7ca1ed36b150\",\n      \"name\": \"Get Audio File\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        660,\n        100\n      ],\n      \"parameters\": {\n        \"fileId\": \"={{ $json.body.message.voice.file_id }}\",\n        \"resource\": \"file\"\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"0b15b158-88ec-45ba-ae70-fd55a9a72ea3\",\n      \"name\": \"Get Image\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        860,\n        1060\n      ],\n      \"parameters\": {\n        \"fileId\": \"={{ $json.image_file_id }}\",\n        \"resource\": \"file\"\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"081ec871-6cac-4945-9c1b-97bb87489688\",\n      \"name\": \"Analyze Image\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1460,\n        1060\n      ],\n      \"parameters\": {\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {},\n        \"resource\": \"image\",\n        \"inputType\": \"base64\",\n        \"operation\": \"analyze\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.6\n    },\n    {\n      \"id\": \"072c21fc-d125-4078-b151-9c2fd5a4802c\",\n      \"name\": \"Transcribe Recording\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        860,\n        100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"audio\",\n        \"operation\": \"transcribe\",\n        \"binaryPropertyName\": \"=data\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.6\n    },\n    {\n      \"id\": \"b74e2181-8bf2-43a5-b4d4-d24112989b81\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        580,\n        440\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1113,\n        \"height\": 429,\n        \"content\": \"# Process Text\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8f44b159-07ff-4805-82ad-d8aeed1f9f68\",\n      \"name\": \"gpt-4o-mini1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1080,\n        720\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"666ed1b9-475e-44bf-a884-1ddf58c6c6af\",\n      \"name\": \"Test Webhook Status\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        460,\n        -260\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.description }} for Testing\",\n        \"chatId\": \"=1234567891\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"2a1174a2-2eae-4cf5-ba48-a58a479956bf\",\n      \"name\": \"Production Webhook Status\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        980,\n        -260\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.description }} for Production\",\n        \"chatId\": \"=1234567891\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"210b6df9-e799-409f-b78f-953bffbb37db\",\n      \"name\": \"Set Webhook Production URL\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        780,\n        -260\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.telegram.org/{{ $json.token }}/setWebhook\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"url\",\n              \"value\": \"={{ $json.production_url }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"5dc6642c-3557-47bb-b012-b353a0d10ca0\",\n      \"name\": \"Edit Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        860,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b37b48ba-8fef-4e6c-bbca-73e6c2e1e0a8\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.message.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"cd715b79-765e-4605-84d6-963d9889c922\",\n      \"name\": \"Audio Task Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1460,\n        40\n      ],\n      \"parameters\": {\n        \"text\": \"=Task message: <i>{{ $json.text }}</i>\",\n        \"chatId\": \"={{ $('Listen for Telegram Events').item.json.body.message.chat.id }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"9845b3e6-8c0f-4194-8442-5648147f905e\",\n      \"name\": \"Audio Other Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1460,\n        220\n      ],\n      \"parameters\": {\n        \"text\": \"=Other message: <i>{{ $json.text }}</i>\",\n        \"chatId\": \"={{ $('Listen for Telegram Events').item.json.body.message.chat.id }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"0184b872-27a1-48dd-8e37-4fdaae7241cd\",\n      \"name\": \"Text Task Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1460,\n        500\n      ],\n      \"parameters\": {\n        \"text\": \"=Task message: <i>{{ $json.text }}</i>\",\n        \"chatId\": \"={{ $('Listen for Telegram Events').item.json.body.message.chat.id }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"7d90fb9b-b2b5-48eb-a6f2-7f953fe6ee52\",\n      \"name\": \"Text Other Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1460,\n        680\n      ],\n      \"parameters\": {\n        \"text\": \"=Other message: <i>{{ $json.text }}</i>\",\n        \"chatId\": \"={{ $('Listen for Telegram Events').item.json.body.message.chat.id }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"c9b9f6d2-c4c4-44b9-a929-9bc0552e8e45\",\n      \"name\": \"Image Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1660,\n        1060\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.content }}\",\n        \"chatId\": \"={{ $('Listen for Telegram Events').item.json.body.message.chat.id }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"bfc69b30-4bab-459d-bbe1-42e540275582\",\n      \"name\": \"Convert to Image File\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        1260,\n        1060\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"fileName\": \"={{ $json.result.file_path }}\"\n        },\n        \"operation\": \"toBinary\",\n        \"sourceProperty\": \"data\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"f78d54c3-aa00-4e82-bfb1-f3131182940c\",\n      \"name\": \"Extract from File to Base64\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        1060,\n        1060\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"binaryToPropery\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"735bb735-6b24-4bbd-8d3f-aec6cd383383\",\n      \"name\": \"Text Classifier Audio\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textClassifier\",\n      \"position\": [\n        1060,\n        100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"inputText\": \"={{ $json.text }}\",\n        \"categories\": {\n          \"categories\": [\n            {\n              \"category\": \"task\",\n              \"description\": \"If the message is about about creating a task/todo\"\n            },\n            {\n              \"category\": \"other\",\n              \"description\": \"If the message is not about creating a task/todo \"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"be7f49da-f88e-4803-95ef-fb7e2ff2d2ed\",\n      \"name\": \"Text Classifier\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textClassifier\",\n      \"position\": [\n        1060,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"inputText\": \"={{ $json.text }}\",\n        \"categories\": {\n          \"categories\": [\n            {\n              \"category\": \"task\",\n              \"description\": \"If the message is about about creating a task/todo\"\n            },\n            {\n              \"category\": \"other\",\n              \"description\": \"If the message is not about creating a task/todo \"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"33eab7d8-5b90-4533-8799-fb4ae32fc6c5\",\n      \"name\": \"Telegram Token & Webhooks\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        380,\n        -540\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"87811892-85f5-4578-a149-3edd94d3815a\",\n              \"name\": \"token\",\n              \"type\": \"string\",\n              \"value\": \"bot[your-telegram-bot-token]\"\n            },\n            {\n              \"id\": \"d2b9ab83-44ad-4741-aac9-1feed974c015\",\n              \"name\": \"test_url\",\n              \"type\": \"string\",\n              \"value\": \"https://[your-url]/webhook-test/[your-endpoint]\"\n            },\n            {\n              \"id\": \"0c671fbf-aa2c-42ef-9e8b-398ac38358d0\",\n              \"name\": \"production_url\",\n              \"type\": \"string\",\n              \"value\": \"https://[your-url]/webhook/[your-endpoint]\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"65d9568e-0504-4c7d-ac05-0b7b4c52a6b2\",\n      \"name\": \"Get Webhook Status\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -40,\n        -260\n      ],\n      \"parameters\": {\n        \"text\": \"={{ JSON.stringify($json.result, null, 2)  }}\",\n        \"chatId\": \"=1234567891\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"04669db1-3a74-4404-9b5f-9b8554b1059e\",\n      \"name\": \"Validation\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -100,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"0cea6da1-652a-4c1e-94c3-30608ced90f8\",\n              \"name\": \"first_name\",\n              \"type\": \"string\",\n              \"value\": \"First Name\"\n            },\n            {\n              \"id\": \"b90280c6-3e36-49ca-9e7e-e15c42d256cc\",\n              \"name\": \"last_name\",\n              \"type\": \"string\",\n              \"value\": \"Last Name\"\n            },\n            {\n              \"id\": \"f6d86283-16ca-447e-8427-7d3d190babc0\",\n              \"name\": \"id\",\n              \"type\": \"number\",\n              \"value\": 12345678999\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"7f9935cb-4ca6-40cf-99c5-96c5a1f4ca91\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -160,\n        100\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 420,\n        \"height\": 260,\n        \"content\": \"## Validate Telegram User\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fa6c87eb-5f96-4e26-a1bb-60dae902186c\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -320,\n        -320\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 460,\n        \"height\": 240,\n        \"content\": \"## Webhook Status\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"96536ad2-e607-448e-a368-e4e8c7578b57\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        200,\n        -320\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 460,\n        \"height\": 240,\n        \"content\": \"## Set Webhook for Testing\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a58c16d5-0c08-4ee6-a3fe-b9fdbd62eb8b\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        720,\n        -320\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 480,\n        \"height\": 240,\n        \"content\": \"## Set Webhook for Production\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"158bf4d2-aac9-4a1a-b319-1a4766cdeaca\",\n      \"name\": \"Message Router\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        320,\n        160\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"audio\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"object\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.body.message.voice }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"text\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"342f0883-d959-44a2-b80d-379e39c76218\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.body.message.text }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"image\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"ded3a600-f861-413a-8892-3fc5ea935ecb\",\n                    \"operator\": {\n                      \"type\": \"array\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.body.message.photo }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"extra\"\n        }\n      },\n      \"typeVersion\": 3.2\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"91b5de12-0ada-4125-b5ce-3ffb4dc9fa9b\",\n  \"connections\": {\n    \"Get Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File to Base64\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Validation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check User & Chat ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Text Classifier\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Text Classifier Audio\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Image Schema\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Text Classifier\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Analyze Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Image Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Image Message\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Get Audio File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Transcribe Recording\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Message Router\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Audio File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Image Schema\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Error message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Text Classifier\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Text Task Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Text Other Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check User & Chat ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Message Router\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Error message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Webhook Test URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Test Webhook Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Transcribe Recording\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Text Classifier Audio\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert to Image File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Analyze Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Text Classifier Audio\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Audio Task Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Audio Other Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Telegram Webhook Info\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Webhook Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Telegram Token & Webhooks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Webhook Production URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Set Webhook Test URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Get Telegram Webhook Info\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Listen for Telegram Events\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Validation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Webhook Production URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Production Webhook Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File to Base64\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert to Image File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.if",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "@n8n/n8n-nodes-langchain.openAi",
      "@n8n/n8n-nodes-langchain.openAi",
      "n8n-nodes-base.stickyNote",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.convertToFile",
      "n8n-nodes-base.extractFromFile",
      "@n8n/n8n-nodes-langchain.textClassifier",
      "@n8n/n8n-nodes-langchain.textClassifier",
      "n8n-nodes-base.set",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.switch"
    ],
    "trigger": null
  }
}