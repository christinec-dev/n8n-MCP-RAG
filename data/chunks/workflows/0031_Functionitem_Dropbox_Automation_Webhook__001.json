{
  "source": "0031_Functionitem_Dropbox_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"105\",\n  \"name\": \"screenshot\",\n  \"nodes\": [\n    {\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        440,\n        580\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Create Web + Email Item\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        630,\n        580\n      ],\n      \"parameters\": {\n        \"functionCode\": \"item.website = \\\"https://uproc.io\\\";\\nitem.email = \\\"miquel@uproc.io\\\";\\n\\nreturn item;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Send Email\",\n      \"type\": \"n8n-nodes-base.awsSes\",\n      \"position\": [\n        1660,\n        600\n      ],\n      \"parameters\": {\n        \"body\": \"=Hi,\\n<br><br>\\nThese are your screenshots:<br>\\n<table border=\\\"0\\\">\\n<tr>\\n<th>Simple screenshot</th><th>Fullpage screenshot</th>\\n<tr>\\n<td style=\\\"vertical-align: top; text-align: center\\\"><img src=\\\"{{$node[\\\"Generate Screenshot\\\"].json[\\\"message\\\"][\\\"result\\\"]}}\\\" width=\\\"320\\\"></td>\\n<td style=\\\"vertical-align: top; text-align: center\\\"><img src=\\\"{{$node[\\\"Generate FullPage\\\"].json[\\\"message\\\"][\\\"result\\\"]}}\\\" width=\\\"320\\\"></td>\\n</tr>\\n</table>\\n<br><br>\\nThank you!\",\n        \"subject\": \"Your screenshots!\",\n        \"fromEmail\": \"miquel@uproc.io\",\n        \"isBodyHtml\": true,\n        \"toAddresses\": [\n          \"={{$node[\\\"Create Web + Email Item\\\"].json[\\\"email\\\"]}}\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"aws\": \"ses\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Generate FullPage\",\n      \"type\": \"n8n-nodes-base.uproc\",\n      \"position\": [\n        850,\n        510\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"Create Web + Email Item\\\"].json[\\\"website\\\"]}}\",\n        \"tool\": \"getUrlScreenshot\",\n        \"group\": \"image\",\n        \"width\": \"640\",\n        \"fullpage\": \"yes\",\n        \"additionalOptions\": {}\n      },\n      \"credentials\": {\n        \"uprocApi\": \"miquel-uproc\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Generate Screenshot\",\n      \"type\": \"n8n-nodes-base.uproc\",\n      \"position\": [\n        840,\n        680\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"Create Web + Email Item\\\"].json[\\\"website\\\"]}}\",\n        \"tool\": \"getUrlScreenshot\",\n        \"group\": \"image\",\n        \"width\": \"640\",\n        \"fullpage\": \"no\",\n        \"additionalOptions\": {}\n      },\n      \"credentials\": {\n        \"uprocApi\": \"miquel-uproc\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Get File\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1050,\n        510\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"Generate FullPage\\\"].json[\\\"message\\\"][\\\"result\\\"]}}\",\n        \"options\": {},\n        \"responseFormat\": \"file\",\n        \"allowUnauthorizedCerts\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Get File1\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1050,\n        680\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"Generate Screenshot\\\"].json[\\\"message\\\"][\\\"result\\\"]}}\",\n        \"options\": {},\n        \"responseFormat\": \"file\",\n        \"allowUnauthorizedCerts\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1460,\n        600\n      ],\n      \"parameters\": {\n        \"mode\": \"passThrough\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Upload Screenshot\",\n      \"type\": \"n8n-nodes-base.dropbox\",\n      \"position\": [\n        1270,\n        680\n      ],\n      \"parameters\": {\n        \"path\": \"/screenshots/sample.png\",\n        \"binaryData\": true\n      },\n      \"credentials\": {\n        \"dropboxApi\": \"dropbox-miquel\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Upload fullpage\",\n      \"type\": \"n8n-nodes-base.dropbox\",\n      \"position\": [\n        1270,\n        510\n      ],\n      \"parameters\": {\n        \"path\": \"/screenshots/sample_fullpage.png\",\n        \"binaryData\": true\n      },\n      \"credentials\": {\n        \"dropboxApi\": \"dropbox-miquel\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload fullpage\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get File1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload Screenshot\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload fullpage\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate FullPage\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload Screenshot\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Generate Screenshot\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get File1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Web + Email Item\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Web + Email Item\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate FullPage\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Generate Screenshot\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.functionItem",
      "n8n-nodes-base.awsSes",
      "n8n-nodes-base.uproc",
      "n8n-nodes-base.uproc",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.dropbox",
      "n8n-nodes-base.dropbox"
    ],
    "trigger": null
  }
}