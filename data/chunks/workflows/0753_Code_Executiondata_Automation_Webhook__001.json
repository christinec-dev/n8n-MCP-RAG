{
  "source": "0753_Code_Executiondata_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"2pMoIW58KP6ZeGir\",\n  \"meta\": {\n    \"instanceId\": \"ecc960f484e18b0e09045fd93acf0d47f4cfff25cc212ea348a08ac3aae81850\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Luma AI Dream Machine - Simple v1 - AK\",\n  \"tags\": [\n    {\n      \"id\": \"tUlWC9t8VhwpFaci\",\n      \"name\": \"Alex - WIP\",\n      \"createdAt\": \"2025-02-20T17:17:53.411Z\",\n      \"updatedAt\": \"2025-02-20T17:17:53.411Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"dbe1dbcc-05a0-4439-869c-157e51a99dd1\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -440,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"603f7fdd-e590-4a51-b606-a9bb9396a0c0\",\n      \"name\": \"Text 2 Video\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        220,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.lumalabs.ai/dream-machine/v1/generations\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"model\\\": \\\"ray-2\\\",\\n  \\\"prompt\\\": {{ JSON.stringify($('Global SETTINGS').first().json.video_prompt + \\\"; camera motion: \\\" + $json.action) }},\\n  \\\"aspect_ratio\\\": \\\"{{ $('Global SETTINGS').first().json.aspect_ratio }}\\\",\\n  \\\"duration\\\": \\\"{{ $('Global SETTINGS').item.json.duration }}\\\",\\n  \\\"loop\\\": {{ $('Global SETTINGS').first().json.loop }},\\n  \\\"callback_url\\\": \\\"{{ $('Global SETTINGS').first().json.callback_url }}\\\"\\n  \\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"zzIlODir90EUTwHh\",\n          \"name\": \"Luma Header Auth account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"494ac05e-e0c5-465e-b805-2749683ab789\",\n      \"name\": \"RANDOM Camera Motion\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const items = [\\n  \\\"Static\\\",\\n  \\\"Move Left\\\",\\n  \\\"Move Right\\\",\\n  \\\"Move Up\\\",\\n  \\\"Move Down\\\",\\n  \\\"Push In\\\",\\n  \\\"Pull Out\\\",\\n  \\\"Zoom In\\\",\\n  \\\"Zoom Out\\\",\\n  \\\"Pan Left\\\",\\n  \\\"Pan Right\\\",\\n  \\\"Orbit Left\\\",\\n  \\\"Orbit Right\\\",\\n  \\\"Crane Up\\\",\\n  \\\"Crane Down\\\"\\n];\\n\\nconst randomItem = items[Math.floor(Math.random() * items.length)];\\n\\nreturn [{ json: { action: randomItem } }];\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"30ba7cfc-d2c3-478f-ae01-0a3397ceb439\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -260,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 180,\n        \"content\": \"## Define your SETTINGS here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"12924397-b2a4-43a0-8ec5-1b13c0357e40\",\n      \"name\": \"Global SETTINGS\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -220,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"7064f685-d91f-4049-9fcb-dd7018c1bc8d\",\n              \"name\": \"aspect_ratio\",\n              \"type\": \"string\",\n              \"value\": \"9:16\"\n            },\n            {\n              \"id\": \"3d6d3fe0-4e4a-4d1b-9f6a-08037a4e2785\",\n              \"name\": \"video_prompt\",\n              \"type\": \"string\",\n              \"value\": \"a superhero flying through a volcano\"\n            },\n            {\n              \"id\": \"7ae48bee-0be5-487f-8d6d-ea7fe98fdd36\",\n              \"name\": \"loop\",\n              \"type\": \"string\",\n              \"value\": \"true\"\n            },\n            {\n              \"id\": \"82930db0-971e-4de4-911d-ff5a7fab5d67\",\n              \"name\": \"duration\",\n              \"type\": \"string\",\n              \"value\": \"5s\"\n            },\n            {\n              \"id\": \"b51d9834-87c8-4358-a257-6a02ebe2576d\",\n              \"name\": \"cluster_id\",\n              \"type\": \"string\",\n              \"value\": \"={{ Date.now() + '_' + Math.random().toString(36).slice(2, 10) }}\"\n            },\n            {\n              \"id\": \"8756fe2d-df04-48d4-9cd4-d29b8d9a3ab1\",\n              \"name\": \"airtable_base\",\n              \"type\": \"string\",\n              \"value\": \"appvk87mtcwRve5p5\"\n            },\n            {\n              \"id\": \"a83707ef-3a1c-4b3c-939c-1376bc43cc76\",\n              \"name\": \"airtable_table_generated_videos\",\n              \"type\": \"string\",\n              \"value\": \"tblOzRFWgcsfttRWK\"\n            },\n            {\n              \"id\": \"694528cd-c51e-45ac-8dbe-1b33b347f590\",\n              \"name\": \"callback_url\",\n              \"type\": \"string\",\n              \"value\": \"https://YOURURL.com/luma-ai\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"9f4732b5-8e3e-4fb6-942f-32c72b3eb041\",\n      \"name\": \"ADD Video Info\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        660,\n        0\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Global SETTINGS').first().json.airtable_base }}\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Global SETTINGS').first().json.airtable_table_generated_videos }}\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"Model\": \"={{ $json.model }}\",\n            \"Aspect\": \"={{ $json.request.aspect_ratio }}\",\n            \"Length\": \"={{ $json.request.duration }}\",\n            \"Prompt\": \"={{ $('Global SETTINGS').first().json.video_prompt }}\",\n            \"Status\": \"Done\",\n            \"Cluster ID\": \"={{ $('Global SETTINGS').first().json.cluster_id }}\",\n            \"Resolution\": \"={{ $json.request.resolution }}\",\n            \"Generation ID\": \"={{ $json.id }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Generation ID\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Generation ID\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Status\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"Todo\",\n                  \"value\": \"Todo\"\n                },\n                {\n                  \"name\": \"In progress\",\n                  \"value\": \"In progress\"\n                },\n                {\n                  \"name\": \"Done\",\n                  \"value\": \"Done\"\n                }\n              ],\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Content Title\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Content Title\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Video URL\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Video URL\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Thumb URL\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Thumb URL\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Prompt\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Prompt\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"VO\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"VO\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Aspect\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Aspect\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Model\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Model\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Resolution\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Resolution\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Length\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Length\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Created\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Created\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Cluster ID\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Cluster ID\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"create\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"yqBrLbgHXLcwqH0p\",\n          \"name\": \"AlexK Airtable Personal Access Token account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"9923373d-d4ce-42bb-9f2d-34350f64ac5b\",\n      \"name\": \"Execution Data\",\n      \"type\": \"n8n-nodes-base.executionData\",\n      \"position\": [\n        440,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5044e1f2-c985-4c3a-9386-f4fe4f85f37b\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -40,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 840,\n        \"content\": \"## This is where the magic happens... \"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"e756199d-31fc-4e2f-8937-3625295a147c\",\n  \"connections\": {\n    \"Text 2 Video\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Execution Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"ADD Video Info\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Execution Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"ADD Video Info\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Global SETTINGS\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"RANDOM Camera Motion\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"RANDOM Camera Motion\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Text 2 Video\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Global SETTINGS\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.code",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.airtable",
      "n8n-nodes-base.executionData",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}