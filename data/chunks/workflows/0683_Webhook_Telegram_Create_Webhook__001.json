{
  "source": "0683_Webhook_Telegram_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"e10615ff-41dc-4ea6-981a-d8e949e2e386\",\n      \"name\": \"telegram account\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        -220,\n        0\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const accountId = $('jira-webhook').first().json.body.fields.assignee?.accountId\\n\\nconst telegramAccounts = {\\n  \\\"[jira account id]\\\": 00000000, // telegram chat id\\n}\\n\\nconst telegramChatId = telegramAccounts[accountId]\\n\\nreturn [{telegramChatId}]\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"a0effbdb-8f99-4248-9a98-aba34ff67690\",\n      \"name\": \"check tg account exists\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        40,\n        120\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"149c600c-7030-4480-a4ef-18f02fd9ade9\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('telegram account').item.json.telegramChatId }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        },\n        \"looseTypeValidation\": true\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"71d58c37-9934-4b10-8aed-d66175a1bc3a\",\n      \"name\": \"check type\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        300,\n        0\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('jira-webhook').item.json.headers.type }}\",\n                    \"rightValue\": \"created\"\n                  }\n                ]\n              }\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"1ec37373-db94-401d-8913-9f18d2bb8b08\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('jira-webhook').item.json.headers.type }}\",\n                    \"rightValue\": \"updated\"\n                  }\n                ]\n              }\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"12b237f5-d9ef-46be-98f9-60fe74a54298\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('jira-webhook').item.json.headers.type }}\",\n                    \"rightValue\": \"change-assignee\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"251f6e9b-439a-46f6-bb7d-be04e722a494\",\n      \"name\": \"Send Update\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        580,\n        0\n      ],\n      \"parameters\": {\n        \"text\": \"=‚ö†Ô∏è Update {{ $('jira-webhook').item.json.body.fields.issuetype.name }}\\n\\nüî∞ Project: `{{ $('jira-webhook').item.json.body.fields.project.name }}`\\n\\nüÜî Key: `{{ $('jira-webhook').item.json.body.key }}`\\n\\nüî∞ Title: `{{ $('jira-webhook').item.json.body.fields.summary }}`\\n\\nüî∞ Description: `{{ $('jira-webhook').item.json.body.fields.description }}`\\n\\nCreate Time: `{{ DateTime.fromMillis($('jira-webhook').item.json.body.fields.created).format(\\\"yyyy-MM-dd HH:mm\\\") }}`\",\n        \"chatId\": \"={{ $(\\\"telegram account\\\").item.json.telegramChatId }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"Sg6YvV1Qx1JnVVWu\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"8efbed55-8642-440c-9ec7-8b93256a27f5\",\n      \"name\": \"Send Create\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        580,\n        -180\n      ],\n      \"parameters\": {\n        \"text\": \"=üÜï New {{ $('jira-webhook').item.json.body.fields.issuetype.name }}\\n\\nüî∞ Project: `{{ $('jira-webhook').item.json.body.fields.project.name }}`\\n\\nüÜî Key: `{{ $('jira-webhook').item.json.body.key }}`\\n\\nüî∞ Title: `{{ $('jira-webhook').item.json.body.fields.summary }}`\\n\\nüî∞ Description: `{{ $('jira-webhook').item.json.body.fields.description }}`\\n\\nCreate Time: `{{ DateTime.fromMillis($('jira-webhook').item.json.body.fields.created).format(\\\"yyyy-MM-dd HH:mm\\\") }}`\",\n        \"chatId\": \"={{ $(\\\"telegram account\\\").item.json.telegramChatId }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"Sg6YvV1Qx1JnVVWu\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"9c2889e7-7c9c-490c-8293-fed3c255f086\",\n      \"name\": \"Send Assign Alert\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        580,\n        180\n      ],\n      \"parameters\": {\n        \"text\": \"=üë©‚Äçüíªüë®‚Äçüíª Assigned to you {{ $('jira-webhook').item.json.body.fields.issuetype.name }}\\n\\nüî∞ Project: `{{ $('jira-webhook').item.json.body.fields.project.name }}`\\n\\nüÜî Key: `{{ $('jira-webhook').item.json.body.key }}`\\n\\nüî∞ Title: `{{ $('jira-webhook').item.json.body.fields.summary }}`\\n\\nüî∞ Description: `{{ $('jira-webhook').item.json.body.fields.description }}`\\n\\nCreate Time: `{{ DateTime.fromMillis($('jira-webhook').item.json.body.fields.created).format(\\\"yyyy-MM-dd HH:mm\\\") }}`\",\n        \"chatId\": \"={{ $(\\\"telegram account\\\").item.json.telegramChatId }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"Sg6YvV1Qx1JnVVWu\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"f660857d-ff24-4c08-bb13-e2461da950d6\",\n      \"name\": \"check issue body, assignee and hook type\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -480,\n        120\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"6862ba4b-7f46-44d2-9f82-da33b3ed0166\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('jira-webhook').item.json.body }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"67527de5-e12c-4917-b1f6-791c79b08637\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('jira-webhook').item.json.headers.type }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"26a19a6a-a072-4035-a1cd-113277476899\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('jira-webhook').item.json.body.fields.assignee }}\",\n              \"rightValue\": \"=\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6ed72f04-7b15-4fb4-8699-0691beac69c0\",\n      \"name\": \"jira-webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -740,\n        0\n      ],\n      \"webhookId\": \"1e4989bf-6a23-4415-bd17-72d08130c5c4\",\n      \"parameters\": {\n        \"path\": \"1e4989bf-6a23-4415-bd17-72d08130c5c4\",\n        \"options\": {},\n        \"httpMethod\": \"POST\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"9EPLvRDcYuohsyim\",\n          \"name\": \"Header Auth account\"\n        }\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"check type\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Create\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Update\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Assign Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"jira-webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"check issue body, assignee and hook type\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"telegram account\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"check tg account exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"check tg account exists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"check type\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"check issue body, assignee and hook type\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"telegram account\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.code",
      "n8n-nodes-base.if",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.if",
      "n8n-nodes-base.webhook"
    ],
    "trigger": null
  }
}