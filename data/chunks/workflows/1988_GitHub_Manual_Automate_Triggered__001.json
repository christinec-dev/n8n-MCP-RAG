{
  "source": "1988_GitHub_Manual_Automate_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": \"uoBZx3eMvLMxlHCS\",\n  \"meta\": {\n    \"instanceId\": \"f4f5d195bb2162a0972f737368404b18be694648d365d6c6771d7b4909d28167\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"[OPS] Restore workflows from GitHub to n8n\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"540d147a-8185-4f3e-b2f4-522a19eb6b10\",\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -700,\n        780\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7040674c-57b4-453d-acd4-69cbeff64180\",\n      \"name\": \"Globals\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -500,\n        680\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"repo.owner\",\n              \"value\": \"n8n-io\"\n            },\n            {\n              \"name\": \"repo.name\",\n              \"value\": \"n8n-backups\"\n            },\n            {\n              \"name\": \"repo.path\",\n              \"value\": \"workflows/\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2b3a2856-4024-4fb0-b068-6bace0e6592c\",\n      \"name\": \"Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1140,\n        600\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 389.78906250000017,\n        \"height\": 464.79920462713443,\n        \"content\": \"## Workflow - Restore Backups\\nThis workflow will restore backed-up workflows from Github. \\nIt is launch by testing the workflow\\n\\n### Setup\\nOpen Globals and update the values below\\n**repo.owner:** This is your Github username\\n**repo.name:** This is the name of your repository\\n**repo.path:** This is the folder where your workflows are saved, within the repository.\\n\\nIf your username was `n8n-io` and your repository was called `n8n-backups` and you wanted the workflows to go into a `workflows` folder you would set:\\n\\nrepo.owner - n8n-io\\nrepo.name - n8n-backups\\nrepo.path - workflows\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ba2d3355-df53-43e2-a4b2-2e031b71d687\",\n      \"name\": \"Workflow name already exists\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1180,\n        880\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f012be7a-fb56-4a92-b2e5-e5ec316624e8\",\n      \"name\": \"If workflow already exists\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        860,\n        760\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"063d51c7-0b7a-48a4-82b3-76b370fc4265\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('Merge Github and n8n workflows - Keep only non existing workflows based on the name').item.json.name }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"d1d698f2-0ccf-4865-9ecd-9e10e725d12d\",\n      \"name\": \"Set n8n existing workflows names\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        320,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"6be8c184-8fb7-47a9-ad42-d0dc3db1eea4\",\n              \"name\": \"name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.name }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"d9c58650-ca2d-47c8-a887-59407fa70e1d\",\n      \"name\": \"GitHub - get all files\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        -280,\n        540\n      ],\n      \"parameters\": {\n        \"owner\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"owner\\\"]}}\"\n        },\n        \"filePath\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"path\\\"]}}\",\n        \"resource\": \"file\",\n        \"operation\": \"list\",\n        \"repository\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"name\\\"]}}\"\n        }\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"vL0n4BqAk6e4zDd7\",\n          \"name\": \"GitHub account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7bff36b1-d526-402b-bff8-7ce2af050e2d\",\n      \"name\": \"n8n - get all workflows\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        -500,\n        880\n      ],\n      \"parameters\": {\n        \"filters\": {}\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"RzT15uIVuSWu3ioX\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"277f6400-409a-4ba0-8ad7-1241768b669a\",\n      \"name\": \"GitHub - get each file\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        140,\n        660\n      ],\n      \"parameters\": {\n        \"owner\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"={{ $json.repo.owner }}\"\n        },\n        \"filePath\": \"={{ $json.path }}\",\n        \"resource\": \"file\",\n        \"operation\": \"get\",\n        \"repository\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"={{ $json.repo.name }}\"\n        },\n        \"asBinaryProperty\": false,\n        \"additionalParameters\": {}\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"vL0n4BqAk6e4zDd7\",\n          \"name\": \"GitHub account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b59f5e23-729a-41fb-be4b-1aebc573393b\",\n      \"name\": \"Set name and content\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        340,\n        660\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"714b0cfd-9f06-4e2f-b73d-30ef39dc40e3\",\n              \"name\": \"content\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.content.base64Decode() }}\"\n            },\n            {\n              \"id\": \"6f48ed58-d55a-4ee4-8cf2-373941aaa341\",\n              \"name\": \"name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.name.replace(\\\".json\\\", \\\"\\\") }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"6f642a8c-9997-42b2-b9d7-3c1f02e0e26a\",\n      \"name\": \"n8n - create workflow\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        1180,\n        660\n      ],\n      \"parameters\": {\n        \"operation\": \"create\",\n        \"workflowObject\": \"={{ $('Set name and content').item.json.content }}\"\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"RzT15uIVuSWu3ioX\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b4ce8bdb-8c76-4c10-bf48-3664ec2f924b\",\n      \"name\": \"Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -360,\n        340\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 861.4145066375679,\n        \"height\": 478.9952882299376,\n        \"content\": \"## Get all Github files\\n1. List all the files from your repository\\n2. Get each file as a JSON. \\n3. The content, retrieved as base64, is converted in the \\\"Set Name and Content\\\" node\\n\\n\\nThe \\\"Set Name and Content\\\" node creates a list of workflows with name and content, in order to compare it with the existing n8n workflows in the workspace.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5ff560b9-8c43-401c-869f-2b4a2e13cacc\",\n      \"name\": \"Merge globals and files\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -60,\n        660\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combinationMode\": \"multiplex\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"008d21d9-007b-44da-8d1a-bd334ba54d61\",\n      \"name\": \"Merge Github and n8n workflows - Keep only non existing workflows based on the name\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        640,\n        760\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"joinMode\": \"keepNonMatches\",\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"name\",\n              \"field2\": \"name\"\n            }\n          ]\n        },\n        \"outputDataFrom\": \"input1\"\n      },\n      \"typeVersion\": 2.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"c7ffe214-1d7b-4f4f-87c1-36d9cb8e43a9\",\n      \"name\": \"Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        560,\n        940\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 260.44696745223945,\n        \"height\": 196.65095879641083,\n        \"content\": \"## Merge Github and n8n workflows\\n\\nHere, we only keep the workflows from Github that doesn't already exist in n8n workspace, based on the name\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3d84fd1c-c49b-4db0-951a-e38d50dae47b\",\n      \"name\": \"Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1360,\n        720\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 344.0461264465236,\n        \"height\": 237.66186698228626,\n        \"content\": \"## Create n8n workflow\\n\\nCreate the n8n workflow using:\\n- Content saved in Github\\n- Name of the file in Github\\n\\n\\nIf the workflow name already exist in n8n, then the workflow is not created - to avoid duplicates.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"144a0b2e-d7b2-443d-91a5-96c09ef16b8e\",\n      \"name\": \"Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        980\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 378.7476641422645,\n        \"height\": 182.45487519360773,\n        \"content\": \"## Get existing n8n workflows\\n\\n1. Get all workflows\\n2. Prepare a list of workflows in order to compare it with the workflows saved in the Github repo.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"b7a0e558-1c40-4ff8-aaed-b6e3a8ab6b8c\",\n  \"connections\": {\n    \"Globals\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GitHub - get all files\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge globals and files\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Set name and content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Github and n8n workflows - Keep only non existing workflows based on the name\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Globals\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"n8n - get all workflows\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GitHub - get all files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge globals and files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GitHub - get each file\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set name and content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge globals and files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GitHub - get each file\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"n8n - get all workflows\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set n8n existing workflows names\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If workflow already exists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"n8n - create workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Workflow name already exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set n8n existing workflows names\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Github and n8n workflows - Keep only non existing workflows based on the name\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Merge Github and n8n workflows - Keep only non existing workflows based on the name\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If workflow already exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.github",
      "n8n-nodes-base.n8n",
      "n8n-nodes-base.github",
      "n8n-nodes-base.set",
      "n8n-nodes-base.n8n",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}