{
  "source": "1477_Webhook_Slack_Update_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"1dnr1k4MAVbDiBmO\",\n  \"meta\": {\n    \"instanceId\": \"6b614b231db1d70977d02e50f578fcb50ce3b81e1fa79a97b9351e948fbbd610\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Get event triggered notifications / updates on preferred messaging channels with TwentyCRM\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"5e823dd0-f50a-49ad-9e9a-7d0aee656b9c\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        620,\n        580\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 239.36440675415446,\n        \"height\": 80,\n        \"content\": \"**1. ‚òùÔ∏è Set up `On new TwentyCRM event` Trigger's url at webhook in TwentyCRM**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0eb98b9a-2f47-4199-a7e5-fe1f9c112721\",\n      \"name\": \"filter required data #eventType mandatory\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        860,\n        380\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"dotNotation\": true,\n          \"ignoreConversionErrors\": true\n        },\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"9e24e3f4-e750-4b50-b467-24612717f6a0\",\n              \"name\": \"eventName\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.eventName }}\"\n            },\n            {\n              \"id\": \"b6aa9813-39bf-4b3d-9df0-aa93fbf4dc73\",\n              \"name\": \"objectMetadata.id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.objectMetadata.id }}\"\n            },\n            {\n              \"id\": \"8bdff15a-a98a-41ad-89d0-e793c3edb14c\",\n              \"name\": \"objectMetadata.nameSingular\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.objectMetadata.nameSingular }}\"\n            },\n            {\n              \"id\": \"0b81e0e6-e9c6-4c03-9b08-f27d1e36b56e\",\n              \"name\": \"record.id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.record.id }}\"\n            },\n            {\n              \"id\": \"71e164f5-d8a2-4ac2-b898-71221b26d92d\",\n              \"name\": \"record.__typename\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.record.__typename }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"2cf5a0df-17ff-43c8-a885-7e4657c8b912\",\n      \"name\": \"events log\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1160,\n        540\n      ],\n      \"parameters\": {\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\",\n          \"cachedResultUrl\": \"\",\n          \"cachedResultName\": \"\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"ade9d73e-109b-47a2-9d57-2c8a3c031a4c\",\n      \"name\": \"message channel evaluation\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1440,\n        380\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"effea083-18d0-4b56-8b77-8ca461a371b6\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.eventName.split(\\\".\\\")[1] }}\",\n              \"rightValue\": \"delete\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"37ab5d83-9112-470a-894f-bf508e4612b7\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        780,\n        220\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 242.34738303232248,\n        \"height\": 131.4798719116814,\n        \"content\": \"**Filter Data üëá**\\nChange filter criteria here to determine what values are required for you but don't forget to include eventType as it is a functional requirement\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"be669d56-0323-48cf-a474-8d22b04148e0\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1340,\n        580\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 200.3243983123301,\n        \"height\": 95.26139957883888,\n        \"content\": \"**üëà event loggin**\\nAll events are logged in the sheet with one entry per row\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7db1418e-5eb1-4bdb-afa0-e9cb268af187\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1340,\n        240\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 194,\n        \"height\": 100.99999999999997,\n        \"content\": \"**Evaluation üëá**\\nBased on the conditions proper channel for messaging is selected\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"77a06749-e901-44d0-8b45-06bf90715ed2\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        520,\n        220\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 226.64074289386136,\n        \"height\": 128.58912785838194,\n        \"content\": \"### Get event triggered notifications / updates on preferred messaging channels with TwentyCRM ### \\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1a1854bb-84c3-48a7-99ac-cc2245b2fafa\",\n      \"name\": \"on new twentycrm event\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        600,\n        380\n      ],\n      \"webhookId\": \"8118bda9-0e4f-44cd-bf64-31020b6d5ab5\",\n      \"parameters\": {\n        \"path\": \"8118bda9-0e4f-44cd-bf64-31020b6d5ab5\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"09e33fe9-e9cf-4370-9141-a74868447eff\",\n      \"name\": \"email channel for delete eventType\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        1740,\n        200\n      ],\n      \"webhookId\": \"45e4872f-0723-416c-854d-769901010bf4\",\n      \"parameters\": {\n        \"message\": \"=<h2>Please find below the attached record details</h2><br/><br/> \\n<ul>\\n<li>\\nobjectMetadata_id: {{ $json.objectMetadata.id }}\\n</li>\\n<li>\\nrecord_id: {{ $json.record.id }}\\n</li>\\n</ul>\",\n        \"options\": {},\n        \"subject\": \"Record Deleted in TwentyCRM\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"f732e7e9-8378-44e9-a4ba-ec509ae210f6\",\n      \"name\": \"message channel for all other eventTypes\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1740,\n        540\n      ],\n      \"webhookId\": \"4ff4d697-aaeb-4092-8e4e-d7c1c3a9b3ff\",\n      \"parameters\": {\n        \"text\": \"=event: {{ $json.eventName }}\\nevent_id: {{ $json.objectMetadata.id }}\\nrecord_id: {{ $json.record.id }}\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"\"\n        },\n        \"otherOptions\": {}\n      },\n      \"typeVersion\": 2.2\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"b37892dc-b121-4a42-a305-7d197c087266\",\n  \"connections\": {\n    \"events log\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"message channel evaluation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"on new twentycrm event\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"filter required data #eventType mandatory\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"message channel evaluation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"email channel for delete eventType\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"message channel for all other eventTypes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"filter required data #eventType mandatory\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"events log\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"message channel evaluation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.if",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.slack"
    ],
    "trigger": null
  }
}