{
  "source": "0589_Manual_Filter_Update_Webhook.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"03301645-75e3-480f-bf06-d015fa252d7b\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -360,\n        260\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"88ac5990-1e33-404f-93c1-42355f3366e7\",\n      \"name\": \"Set Loop\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        380,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"51ce4f05-471b-4948-8bb7-da8baad394af\",\n              \"name\": \"loop_max\",\n              \"type\": \"number\",\n              \"value\": \"={{ $json.meta.numItems/100 }}\"\n            },\n            {\n              \"id\": \"b8338050-c49f-4e9c-b7fc-b2074acd475a\",\n              \"name\": \"loop_count\",\n              \"type\": \"number\",\n              \"value\": \"=0\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"aff9eb6b-7d66-4eff-be8d-565ab6076a79\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        600,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"f129d508-c97f-428e-83ee-1a47e1d10574\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"lt\"\n              },\n              \"leftValue\": \"={{ $json.loop_count }}\",\n              \"rightValue\": \"={{ $json.loop_max }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"4ac0a39d-f6bf-487f-9dab-1898b18bd7a8\",\n      \"name\": \"User ID\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"notes\": \"Get from Zotero Web > Settings > Security:\\n\\nhttps://www.zotero.org/settings/security\",\n      \"position\": [\n        -180,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"2917cc56-2714-4f41-a394-0bb7a1cb788e\",\n              \"name\": \"userid\",\n              \"type\": \"string\",\n              \"value\": \"FILL WITH USER ID\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"30840c66-4efb-425f-b9ba-dbd053b594c1\",\n      \"name\": \"Collections\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        0,\n        260\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.zotero.org/users/{{ $json.userid }}/collections?v=3\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"20ad21b1-d506-42ac-b14c-8b6b47ca60e9\",\n      \"name\": \"Loop Discount\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        780,\n        420\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"51ce4f05-471b-4948-8bb7-da8baad394af\",\n              \"name\": \"={{ $json.loop_count++ }}\",\n              \"type\": \"number\",\n              \"value\": \"=\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"bb56455d-eeb7-4a46-8589-efa052ed3e0c\",\n      \"name\": \"Edit Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1660,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"0131ab75-e0f9-4a8d-9380-315f45c3590d\",\n              \"name\": \"key\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.key }}\"\n            },\n            {\n              \"id\": \"13dc0799-fce8-4764-b50f-811fb0e64405\",\n              \"name\": \"data.title\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.data.title }}\"\n            },\n            {\n              \"id\": \"f11fcb34-ec1b-4ac7-8939-481e5ffc4fe4\",\n              \"name\": \"meta.creatorSummary\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.meta.creatorSummary }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"30fc5d25-9500-416f-b1e9-9f0c879eb1bd\",\n      \"name\": \"Select Collection\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"notes\": \"Select Collection\",\n      \"position\": [\n        200,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"9231d49f-03a0-40da-8daf-12d931284214\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.key }}\",\n              \"rightValue\": \"FILL WITH COLLECTION KEY\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"aebbfdcf-58ad-4b69-add9-aac2d98393cb\",\n      \"name\": \"Filter\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1440,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"5f9095f1-4ec9-4e94-bd95-b18d0b9543b0\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('Get Articles').item.json.key }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"f4fb234c-c711-493f-ab84-7d5a66b123c9\",\n      \"name\": \"Get Articles\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        920,\n        240\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.zotero.org/users/{{ $('User ID').item.json.userid }}/collections/{{ $json.key }}/items?start={{ $json.loop_count*100 }}&limit={{ $json.meta.numItems-100*$json.loop_count }}\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"1c65de0f-6f7c-435e-af18-1c06a1d60cb2\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -180,\n        20\n      ],\n      \"parameters\": {\n        \"width\": 150,\n        \"height\": 209.09090909090907,\n        \"content\": \"Get from Zotero Web > Settings > Security:\\n\\nhttps://www.zotero.org/settings/security\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"893af76c-c6b0-492e-aaba-277c952d3c0d\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        -20\n      ],\n      \"parameters\": {\n        \"width\": 150,\n        \"height\": 233,\n        \"content\": \"On the same page, create an Application Key to setup the Header Auth inside the Collections Node:\\nhttps://www.zotero.org/settings/security\\n\\nUse `Zotero-API-Key` as Header name\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b2068109-a36e-48e7-919d-1782a61a17f0\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        180,\n        20\n      ],\n      \"parameters\": {\n        \"width\": 150,\n        \"height\": 189.99999999999994,\n        \"content\": \"See the \\\"Table\\\" results, of previous nodes and replace the second value of \\\"IS EQUAL TO\\\" with your Collection KEY\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"418328ed-4b37-426c-b018-756636c2fd29\",\n      \"name\": \"Merge 100+\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1220,\n        260\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"690d9498-c01e-4cfd-8be1-fce239d0c37c\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1440,\n        140\n      ],\n      \"parameters\": {\n        \"width\": 150,\n        \"height\": 80,\n        \"content\": \"Optional Filter for Results\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"35efb061-d480-40f6-8118-8d48d0dbe67c\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1660,\n        140\n      ],\n      \"parameters\": {\n        \"width\": 150,\n        \"height\": 80,\n        \"content\": \"Optional Edit Fields for Results\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Articles\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Loop Discount\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"User ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Collections\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Loop\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge 100+\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Collections\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Select Collection\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Articles\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge 100+\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Discount\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Select Collection\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Loop\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"User ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}