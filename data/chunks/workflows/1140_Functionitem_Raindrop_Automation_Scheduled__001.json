{
  "source": "1140_Functionitem_Raindrop_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": 7,\n  \"name\": \"YouTube to Raindrop\",\n  \"nodes\": [\n    {\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -610,\n        160\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"YouTube\",\n      \"type\": \"n8n-nodes-base.youTube\",\n      \"position\": [\n        -440,\n        240\n      ],\n      \"parameters\": {\n        \"part\": [\n          \"snippet\"\n        ],\n        \"options\": {},\n        \"resource\": \"playlistItem\",\n        \"operation\": \"getAll\",\n        \"playlistId\": \"CHANGE_ME\"\n      },\n      \"credentials\": {\n        \"youTubeOAuth2Api\": \"Google n8n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Filter new items\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        -120,\n        240\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const staticData = getWorkflowStaticData('global');\\nconst newIds = items.map(item => item.json[\\\"resourceId\\\"][\\\"videoId\\\"]);\\nconst oldIds = staticData.oldIds; \\n\\nif (!oldIds) {\\n  staticData.oldIds = newIds;\\n  return items;\\n}\\n\\n\\nconst actualNewIds = newIds.filter((id) => !oldIds.includes(id));\\nconst actualNew = items.filter((data) => actualNewIds.includes(data.json[\\\"resourceId\\\"][\\\"videoId\\\"]));\\nstaticData.oldIds = [...actualNewIds, ...oldIds];\\n\\nreturn actualNew;\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Flatten JSON\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        -280,\n        240\n      ],\n      \"parameters\": {\n        \"functionCode\": \"item = item[\\\"snippet\\\"]\\n\\nreturn item;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Raindrop Bookmark\",\n      \"type\": \"n8n-nodes-base.raindrop\",\n      \"position\": [\n        40,\n        240\n      ],\n      \"parameters\": {\n        \"link\": \"=https://www.youtube.com/watch?v={{$json[\\\"resourceId\\\"][\\\"videoId\\\"]}}\",\n        \"resource\": \"bookmark\",\n        \"operation\": \"create\",\n        \"collectionId\": 0,\n        \"additionalFields\": {\n          \"tags\": \"youtube\",\n          \"title\": \"={{$json[\\\"videoOwnerChannelTitle\\\"]}} | {{$json[\\\"title\\\"]}}\"\n        }\n      },\n      \"credentials\": {\n        \"raindropOAuth2Api\": \"Raindrop\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Every 30 mins\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        -610,\n        320\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyX\",\n              \"unit\": \"minutes\",\n              \"value\": 30\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"settings\": {},\n  \"connections\": {\n    \"YouTube\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Flatten JSON\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Flatten JSON\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter new items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Every 30 mins\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"YouTube\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter new items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Raindrop Bookmark\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"YouTube\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.youTube",
      "n8n-nodes-base.function",
      "n8n-nodes-base.functionItem",
      "n8n-nodes-base.raindrop",
      "n8n-nodes-base.cron"
    ],
    "trigger": null
  }
}