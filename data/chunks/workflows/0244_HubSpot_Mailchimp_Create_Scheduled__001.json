{
  "source": "0244_HubSpot_Mailchimp_Create_Scheduled.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"35451a0c-1ad5-4c02-804b-d19afd282b09\",\n      \"name\": \"Get last execution timestamp\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        540,\n        100\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Code here will run once per input item.\\n// More info and help: https://docs.n8n.io/nodes/n8n-nodes-base.functionItem\\n// Tip: You can use luxon for dates and $jmespath for querying JSON structures\\n\\n// Add a new field called 'myNewField' to the JSON of the item\\nconst staticData = getWorkflowStaticData('global');\\n\\nif(!staticData.lastExecution){\\n  staticData.lastExecution = new Date();\\n}\\n\\nitem.executionTimeStamp = new Date();\\nitem.lastExecution = staticData.lastExecution;\\n\\n\\nreturn item;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"18ff2308-216e-4c1e-afb9-bd41ae7b5e4d\",\n      \"name\": \"Every day at 07:00\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        320,\n        100\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"hour\": 7\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"53d3203b-2518-471f-9c72-2ab41303cdf2\",\n      \"name\": \"Set new last execution timestamp\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        1240,\n        100\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Code here will run once per input item.\\n// More info and help: https://docs.n8n.io/nodes/n8n-nodes-base.functionItem\\n// Tip: You can use luxon for dates and $jmespath for querying JSON structures\\n\\n// Add a new field called 'myNewField' to the JSON of the item\\nconst staticData = getWorkflowStaticData('global');\\n\\nstaticData.lastExecution = $item(0).$node[\\\"Get last execution timestamp\\\"].executionTimeStamp;\\n\\nreturn item;\"\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bf6f8843-53e8-4096-8614-da0b43f5f193\",\n      \"name\": \"Create/Update contact\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        1020,\n        100\n      ],\n      \"parameters\": {\n        \"email\": \"={{ $json[\\\"email_address\\\"] }}\",\n        \"resource\": \"contact\",\n        \"authentication\": \"appToken\",\n        \"additionalFields\": {\n          \"lastName\": \"={{ $json[\\\"merge_fields\\\"].LNAME }}\",\n          \"firstName\": \"={{ $json[\\\"merge_fields\\\"].FNAME }}\"\n        }\n      },\n      \"credentials\": {\n        \"hubspotAppToken\": {\n          \"id\": \"13\",\n          \"name\": \"HubSpot App Token account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6bce7f89-e22e-4372-a1cc-1723756bb617\",\n      \"name\": \"Get changed members\",\n      \"type\": \"n8n-nodes-base.mailchimp\",\n      \"position\": [\n        780,\n        100\n      ],\n      \"parameters\": {\n        \"list\": \"bcfb6ff8f1\",\n        \"options\": {\n          \"sinceLastChanged\": \"={{ $json[\\\"lastExecution\\\"] }}\"\n        },\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"mailchimpApi\": {\n          \"id\": \"19\",\n          \"name\": \"Mailchimp account\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Every day at 07:00\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get last execution timestamp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get changed members\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create/Update contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create/Update contact\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set new last execution timestamp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get last execution timestamp\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get changed members\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.functionItem",
      "n8n-nodes-base.cron",
      "n8n-nodes-base.functionItem",
      "n8n-nodes-base.hubspot",
      "n8n-nodes-base.mailchimp"
    ],
    "trigger": null
  }
}