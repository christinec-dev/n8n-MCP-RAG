{
  "source": "2008_Code_Webhook_Automate_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"x2kgOnBLtqAjqUVS\",\n  \"meta\": {\n    \"instanceId\": \"558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a\"\n  },\n  \"name\": \"Automated Work Attendance with Location Triggers\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"b2cba308-6d47-432b-9296-58f233f15565\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"webhookId\": \"801c8367-af7b-4371-8684-cc699090b97f\",\n      \"parameters\": {\n        \"path\": \"time-track\",\n        \"options\": {}\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"67354f1c-9dac-4edd-b07d-f1b0dbd80159\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        -260\n      ],\n      \"parameters\": {\n        \"width\": 1120,\n        \"height\": 180,\n        \"content\": \"## Check if the Worksheet Exists\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5fc5a1a6-f18d-4ee0-a70b-30de48a45dc7\",\n      \"name\": \"Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        220,\n        -220\n      ],\n      \"parameters\": {\n        \"filter\": {},\n        \"options\": {},\n        \"resource\": \"fileFolder\",\n        \"returnAll\": true,\n        \"queryString\": \"WorkTimeTracking\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"U6W5tWhDvO7rQ73t\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 3,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"a0b63be4-fa46-413f-82fe-42e6edc24f29\",\n      \"name\": \"Create Worksheet\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        800,\n        -240\n      ],\n      \"parameters\": {\n        \"title\": \"WorkTimeTracking\",\n        \"options\": {\n          \"locale\": \"\"\n        },\n        \"resource\": \"spreadsheet\",\n        \"sheetsUi\": {\n          \"sheetValues\": [\n            {\n              \"title\": \"Worklog\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"TvzWrF2qPL7RjlJK\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"796e3ef6-3002-493e-8d89-10cba2d8026d\",\n      \"name\": \"Return if Null\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        400,\n        -220\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return [{json: {empty: items.length == 1 && Object.keys(items[0].json).length == 0}}];\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"7af7ce4b-93e0-4058-8a45-9fd8269ddc77\",\n      \"name\": \"Doesn't exist?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        580,\n        -220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"215b8ced-c6f5-4cf2-8755-9bba928dbe84\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{$json[\\\"empty\\\"]}}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"f2bc21c6-805b-49e7-b026-a4de56dce1fa\",\n      \"name\": \"Set Logging Details\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        780,\n        20\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"={\\n  \\\"Date\\\": \\\"{{ $now.format('yyyy-MM-dd') }}\\\",\\n  \\\"Time\\\": \\\"{{ $now.format('hh:mm') }}\\\",\\n  \\\"Direction\\\":\\\"Check-In\\\"\\n}\\n\"\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"64bc8b93-a925-49d6-9e52-3f30f0c9e5a8\",\n      \"name\": \"Create Log\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1000,\n        20\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Date\": \"={{ $json.Date }}\",\n            \"Time\": \"={{ $json.Time }}\",\n            \"Direction\": \"={{ $('Webhook').item.json.headers.direction ? $('Webhook').item.json.headers.direction : \\\"\\\"}}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Time\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Time\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Direction\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Direction\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": []\n        },\n        \"options\": {},\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 308318361,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1P7-Uqa4SPA6keujkkOTru1wdS2qDryJVkz0Nz_sFp7A/edit#gid=308318361\",\n          \"cachedResultName\": \"Worklog\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Google Drive').item.json.id }}\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"TvzWrF2qPL7RjlJK\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"cabca7d5-b4ae-45db-904d-f8efb37c4ab2\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        -40\n      ],\n      \"parameters\": {\n        \"width\": 600,\n        \"height\": 280,\n        \"content\": \"## Log Check-In or Check-Out\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5b9505fc-71a4-42c1-805f-c363384b4c8a\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -440,\n        -320\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 380,\n        \"height\": 640,\n        \"content\": \"## Location-Based Time Tracking\\n\\nThis automation streamlines your time tracking by using location triggers. Here's how it works:\\n\\nCreate two shortcuts in the iPhone Shortcuts app:\\n\\nName one \\\"Check-In\\\" and the other \\\"Check-Out.\\\"\\nWithin each shortcut, use the \\\"Get Content from URL\\\" action to call the Webhook. Set the Header Direction for \\\"Check-In\\\" or \\\"Check-Out\\\"\\n\\n\\nNow, whenever you enter or exit the specified location, your iPhone will automatically record the time in your Google Sheet. This creates a seamless and accurate log of your work hours or time spent at a particular place.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"timezone\": \"Europe/Lisbon\",\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"executionOrder\": \"v1\",\n    \"executionTimeout\": -1,\n    \"saveManualExecutions\": true\n  },\n  \"versionId\": \"2de5264f-eb68-4919-a3f3-133a8ceb45bb\",\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Return if Null\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Doesn't exist?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Worksheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Set Logging Details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Return if Null\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Doesn't exist?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Worksheet\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Logging Details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Logging Details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Log\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.code",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}