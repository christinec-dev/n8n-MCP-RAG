{
  "source": "0493_HTTP_Keap_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"041bccf206a3546a759ec4c0a3bf1256e62051945bb270c48f91f3acb13dc080\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"82d5281b-a4a3-4407-859e-49cb16567b28\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        340,\n        -260\n      ],\n      \"parameters\": {\n        \"width\": 747,\n        \"height\": 428,\n        \"content\": \"## Purpose \\nTo verify the mailing address for new contacts in Keap. \\n\\nWhenever I add a new contact to Keap, I run this automation to ensure I have a valid mailing address. It also helps me check for misspellings if the contact address was manually entered.\\n\\nQuick Video Overview:\\n\\nhttps://www.youtube.com/watch?v=YyIpQw5gyhk\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"78fbe4ae-e72b-4bf9-8387-0d126316b148\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1480,\n        -180\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 515,\n        \"height\": 763,\n        \"content\": \"Update Keap to indicate if the address is deliverable.\\n\\nPossible Options: \\n- Add Tag\\n- Add Note\\n- Start Automation\\n- Update a Field\\n\\nFor Deliverable Addresses - I apply a tag that the address was verified.\\n\\nFor Non Deliverable Addresses - I apply a tag, which triggers an automation for my team to manually verify the address. You could also trigger an automation to reach out to the contact to verify their address.\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b6313993-fa07-463d-a77a-a3c273ebc2c5\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        520,\n        200\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"height\": 339,\n        \"content\": \"Receive a webhook from your CRM with the contact address fields\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f79e9d7a-7ce9-49f3-bd0f-b827ce04b5e2\",\n      \"name\": \"Set Address Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        840,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"8216105e-23ad-4c5c-8f4a-4f97658e0947\",\n              \"name\": \"address\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.address }}\"\n            },\n            {\n              \"id\": \"111da971-2473-4c5e-a106-22589cf47daf\",\n              \"name\": \"address2\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.address2 }}\"\n            },\n            {\n              \"id\": \"ed62cf39-10f1-42f6-b18f-bfa58b4fe646\",\n              \"name\": \"city\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.city }}\"\n            },\n            {\n              \"id\": \"d9550200-04ac-4cf4-b7e6-cd40b793ce97\",\n              \"name\": \"state\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.state }}\"\n            },\n            {\n              \"id\": \"62269d11-c98c-4016-83ef-291176f2fc12\",\n              \"name\": \"zip\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.zip_code }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"61d0ba59-dff6-4357-b085-a6d129171060\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1000,\n        480\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 430,\n        \"height\": 216,\n        \"content\": \"1. Create an Account a https://www.lob.com/pricing\\n2. Create API Key (https://help.lob.com/account-management/api-keys)\\n3. Update Node with your Credentials (Basic Auth)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4275e2a4-60a9-447e-8d64-f0073b9abe6b\",\n      \"name\": \"Address Verification\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1060,\n        280\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.lob.com/v1/us_verifications\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"primary_line\",\n              \"value\": \"={{ $json.address }}\"\n            },\n            {\n              \"name\": \"secondary_line\",\n              \"value\": \"={{ $json.address2 }}\"\n            },\n            {\n              \"name\": \"city\",\n              \"value\": \"={{ $json.city }}\"\n            },\n            {\n              \"name\": \"state\",\n              \"value\": \"={{ $json.state }}\"\n            },\n            {\n              \"name\": \"zip_code\",\n              \"value\": \"={{ $json.zip_code }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"89da689e-1f96-4aa6-9236-150dc087caf0\",\n      \"name\": \"Update Keap - Deliverable\",\n      \"type\": \"n8n-nodes-base.keap\",\n      \"position\": [\n        1580,\n        140\n      ],\n      \"parameters\": {\n        \"tagIds\": \"=Mailing Address Deliverable\",\n        \"resource\": \"contactTag\",\n        \"contactId\": \"={{ $('CRM Webhook Trigger').item.json.id }}\"\n      },\n      \"credentials\": {\n        \"keapOAuth2Api\": {\n          \"id\": \"5gXMihvp2f0IT5i1\",\n          \"name\": \"Blank\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"67ca486b-fc17-43e0-a2ae-757ab65422f7\",\n      \"name\": \"Update Keap - NOT Deliverable\",\n      \"type\": \"n8n-nodes-base.keap\",\n      \"position\": [\n        1580,\n        360\n      ],\n      \"parameters\": {\n        \"tagIds\": \"=Mailing Address NOT Deliverable\",\n        \"resource\": \"contactTag\",\n        \"contactId\": \"={{ $('CRM Webhook Trigger').item.json.id }}\"\n      },\n      \"credentials\": {\n        \"keapOAuth2Api\": {\n          \"id\": \"5gXMihvp2f0IT5i1\",\n          \"name\": \"Blank\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bd2a2468-80d5-4a76-81b5-ea9cb181eb7a\",\n      \"name\": \"CRM Webhook Trigger\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        600,\n        280\n      ],\n      \"webhookId\": \"fd51bba5-929d-4610-bd3f-a3032bcf16c3\",\n      \"parameters\": {\n        \"path\": \"727deb6f-9d10-4492-92e6-38f3292510b0\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"15221022-7eb3-40db-85b3-cf310e8bc2d2\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1280,\n        280\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"rules\": [\n            {\n              \"value2\": \"=deliverable\",\n              \"outputKey\": \"deliverable\"\n            },\n            {\n              \"value2\": \"deliverable\",\n              \"operation\": \"notEqual\",\n              \"outputKey\": \"NOT deliverable\"\n            }\n          ]\n        },\n        \"value1\": \"={{ $json.deliverability }}\",\n        \"dataType\": \"string\"\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {\n    \"CRM Webhook Trigger\": [\n      {\n        \"id\": \"5551212\",\n        \"city\": \"Washington\",\n        \"email\": \"mr.president@gmail.com\",\n        \"phone\": \"877-555-1212\",\n        \"state\": \"DC\",\n        \"address\": \"1600 Pennsylvania Avenue NW\",\n        \"zip_code\": \"20500\"\n      }\n    ]\n  },\n  \"connections\": {\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Keap - Deliverable\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Update Keap - NOT Deliverable\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Address Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Address Verification\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"CRM Webhook Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Address Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Address Verification\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.keap",
      "n8n-nodes-base.keap",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.switch"
    ],
    "trigger": "crm webhook trigger"
  }
}