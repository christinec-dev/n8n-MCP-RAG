{
  "source": "1570_Filter_Summarize_Automation_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": \"vOSQYz747gtzj1zF\",\n  \"meta\": {\n    \"instanceId\": \"d16fb7d4b3eb9b9d4ad2ee6a7fbae593d73e9715e51f583c2a0e9acd1781c08e\",\n    \"templateId\": \"2290\"\n  },\n  \"name\": \"Prod: Notion to Vector Store - Dimension 768\",\n  \"tags\": [\n    {\n      \"id\": \"Vs70y1mj5s2XzUap\",\n      \"name\": \"Production\",\n      \"createdAt\": \"2024-12-24T14:42:00.549Z\",\n      \"updatedAt\": \"2024-12-24T14:42:00.549Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"6d2579b8-376f-44c3-82e8-9dc608efd98b\",\n      \"name\": \"Token Splitter\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textSplitterTokenSplitter\",\n      \"position\": [\n        2200,\n        800\n      ],\n      \"parameters\": {\n        \"chunkSize\": 256,\n        \"chunkOverlap\": 30\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"79b3c147-08ca-4db4-9116-958a868cbfd9\",\n      \"name\": \"Notion - Page Added Trigger\",\n      \"type\": \"n8n-nodes-base.notionTrigger\",\n      \"position\": [\n        1080,\n        360\n      ],\n      \"parameters\": {\n        \"simple\": false,\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            }\n          ]\n        },\n        \"databaseId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"17b11930-c10f-8000-a545-ece7cade03f9\",\n          \"cachedResultUrl\": \"https://www.notion.so/17b11930c10f8000a545ece7cade03f9\",\n          \"cachedResultName\": \"Embeddings\"\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"oktwaKqpFztx5hYX\",\n          \"name\": \"Auto: Notion\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e4a6f524-e3f5-4d02-949a-8523f2d21965\",\n      \"name\": \"Notion - Retrieve Page Content\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1300,\n        360\n      ],\n      \"parameters\": {\n        \"blockId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $json.url }}\"\n        },\n        \"resource\": \"block\",\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"oktwaKqpFztx5hYX\",\n          \"name\": \"Auto: Notion\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"bfebc173-8d4b-4f8f-a625-4622949dd545\",\n      \"name\": \"Filter Non-Text Content\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1520,\n        360\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 1,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"e5b605e5-6d05-4bca-8f19-a859e474620f\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $json.type }}\",\n              \"rightValue\": \"image\"\n            },\n            {\n              \"id\": \"c7415859-5ffd-4c78-b497-91a3d6303b6f\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $json.type }}\",\n              \"rightValue\": \"video\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"b04939f9-355a-430b-a069-b11800066313\",\n      \"name\": \"Summarize - Concatenate Notion's blocks content\",\n      \"type\": \"n8n-nodes-base.summarize\",\n      \"position\": [\n        1780,\n        360\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"outputFormat\": \"separateItems\"\n        },\n        \"fieldsToSummarize\": {\n          \"values\": [\n            {\n              \"field\": \"content\",\n              \"separateBy\": \"\\n\",\n              \"aggregation\": \"concatenate\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0e64dbb5-20c1-4b90-b818-a1726aaf5112\",\n      \"name\": \"Create metadata and load content\",\n      \"type\": \"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\n      \"position\": [\n        2180,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"metadata\": {\n            \"metadataValues\": [\n              {\n                \"name\": \"pageId\",\n                \"value\": \"={{ $('Notion - Page Added Trigger').item.json.id }}\"\n              },\n              {\n                \"name\": \"createdTime\",\n                \"value\": \"={{ $('Notion - Page Added Trigger').item.json.created_time }}\"\n              },\n              {\n                \"name\": \"pageTitle\",\n                \"value\": \"={{ $('Notion - Page Added Trigger').item.json.properties.Name.title[0].text.content }}\"\n              }\n            ]\n          }\n        },\n        \"jsonData\": \"={{ $json.concatenated_content }}\",\n        \"jsonMode\": \"expressionData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1f93c3e6-2d53-46b4-9ce9-1350e660ba82\",\n      \"name\": \"Embeddings Google Gemini\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsGoogleGemini\",\n      \"position\": [\n        1940,\n        580\n      ],\n      \"parameters\": {\n        \"modelName\": \"models/text-embedding-004\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"9idxGZRZ3BAKDoxq\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b804b3fc-161c-40c1-ad9c-3022a09c4a0a\",\n      \"name\": \"Pinecone Vector Store\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStorePinecone\",\n      \"position\": [\n        2060,\n        360\n      ],\n      \"parameters\": {\n        \"mode\": \"insert\",\n        \"options\": {},\n        \"pineconeIndex\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"notion-pages\",\n          \"cachedResultName\": \"notion-pages\"\n        }\n      },\n      \"credentials\": {\n        \"pineconeApi\": {\n          \"id\": \"R3QGXSEIRTEAZttK\",\n          \"name\": \"Auto: PineconeApi\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"245f016a-7538-4f45-94f0-d8b7e5c9c891\",\n  \"connections\": {\n    \"Token Splitter\": {\n      \"ai_textSplitter\": [\n        [\n          {\n            \"node\": \"Create metadata and load content\",\n            \"type\": \"ai_textSplitter\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter Non-Text Content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Summarize - Concatenate Notion's blocks content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings Google Gemini\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Pinecone Vector Store\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Notion - Page Added Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Notion - Retrieve Page Content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Notion - Retrieve Page Content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter Non-Text Content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create metadata and load content\": {\n      \"ai_document\": [\n        [\n          {\n            \"node\": \"Pinecone Vector Store\",\n            \"type\": \"ai_document\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Summarize - Concatenate Notion's blocks content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Pinecone Vector Store\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "@n8n/n8n-nodes-langchain.textSplitterTokenSplitter",
      "n8n-nodes-base.notionTrigger",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.summarize",
      "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "@n8n/n8n-nodes-langchain.embeddingsGoogleGemini",
      "@n8n/n8n-nodes-langchain.vectorStorePinecone"
    ],
    "trigger": "notion - page added trigger"
  }
}