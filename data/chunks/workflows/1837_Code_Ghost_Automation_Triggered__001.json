{
  "source": "1837_Code_Ghost_Automation_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": \"dMiUunCiaMsCr1Wu\",\n  \"meta\": {\n    \"instanceId\": \"03907a25f048377a8789a4332f28148522ba31ee907fababf704f1d88130b1b6\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"üìÑüõ†Ô∏èPDF2Blog\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"58a4923b-3e8f-4abd-bebc-6488f8b04101\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        580,\n        1340\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 461,\n        \"height\": 359.27075107113785,\n        \"content\": \"## Upload PDF and Extract Text\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"eb0ec98a-9c9d-4203-9586-9e81e23e7232\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1087.027580347215,\n        1340\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 508.8267597424673,\n        \"height\": 532.0416571599118,\n        \"content\": \"## Create Blog Post\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b2d3cb70-4335-43a2-80db-889559ebf020\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2020,\n        1340\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 370.4721755771028,\n        \"height\": 352.3823858238478,\n        \"content\": \"## Publish Draft Blog Post to Ghost\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"766daeb8-23e8-4ee9-acee-ea2a787bbfda\",\n      \"name\": \"Upload PDF\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        660,\n        1480\n      ],\n      \"webhookId\": \"6c4a4180-7206-469f-a645-f41824ccbf42\",\n      \"parameters\": {\n        \"path\": \"pdf\",\n        \"options\": {},\n        \"formTitle\": \"PDF2Blog\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldType\": \"file\",\n              \"fieldLabel\": \"Upload PDF File\",\n              \"multipleFiles\": false,\n              \"requiredField\": true,\n              \"acceptFileTypes\": \".pdf\"\n            }\n          ]\n        },\n        \"formDescription\": \"Transform PDFs into captivating blog posts\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"055a734e-7128-487a-b109-a64214010bb2\",\n      \"name\": \"Extract Text\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        860,\n        1480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"pdf\",\n        \"binaryPropertyName\": \"Upload_PDF_File\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"44256745-276a-4c88-80b6-d12a568d07e9\",\n      \"name\": \"Post to Ghost\",\n      \"type\": \"n8n-nodes-base.ghost\",\n      \"position\": [\n        2140,\n        1480\n      ],\n      \"parameters\": {\n        \"title\": \"={{ $json.title }}\",\n        \"source\": \"adminApi\",\n        \"content\": \"={{ $json.content }}\",\n        \"operation\": \"create\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"ghostAdminApi\": {\n          \"id\": \"yiqmX1MjG1FU3wyR\",\n          \"name\": \"Ghost Admin account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9796d4eb-e9d6-43bb-80c0-c527f3dc8843\",\n      \"name\": \"gpt-4o-mini\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1180,\n        1680\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o-mini-2024-07-18\",\n        \"options\": {\n          \"responseFormat\": \"json_object\"\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"h597GY4ZJQD47RQd\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"719e7578-df85-441c-8d2f-cb7d3f7bb92f\",\n      \"name\": \"Structured Output - JSON\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        1400,\n        1680\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\n    \\\"title\\\": \\\"title\\\",\\n    \\\"content\\\": \\\"content\\\"\\n}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"5f16e695-3585-468f-8fcb-794f5e3b56d4\",\n      \"name\": \"Separate Title & Content\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1660,\n        1480\n      ],\n      \"parameters\": {\n        \"jsCode\": \"try {\\n  // Check if input exists and has the expected structure\\n  const input = $input.all();\\n  if (!input || !input.length) {\\n    throw new Error('No input data received');\\n  }\\n\\n  const firstItem = input[0];\\n  if (!firstItem || !firstItem.json || !firstItem.json.output || !firstItem.json.output.output) {\\n    throw new Error('Invalid input structure: missing required properties');\\n  }\\n\\n  const output = firstItem.json.output.output;\\n  \\n  // Validate title exists\\n  if (!output.title) {\\n    throw new Error('Missing title in output');\\n  }\\n\\n  // Validate content exists\\n  if (!output.content) {\\n    throw new Error('Missing content in output');\\n  }\\n\\n  const title = output.title;\\n  const content = output.content.replace(/<h1>.*?<\\\\/h1>/s, '').trim();\\n\\n  // Validate final content is not empty after processing\\n  if (!content) {\\n    throw new Error('Content is empty after processing');\\n  }\\n\\n  console.log('Successfully processed content');\\n\\n  console.log(title)\\n  console.log(content)\\n  \\n  return { title, content };\\n\\n} catch (error) {\\n  // Log the error for debugging\\n  console.error('Error processing content:', error.message);\\n  \\n  // Return a graceful failure object\\n  return {\\n    error: true,\\n    message: error.message,\\n    title: '',\\n    content: '',\\n    timestamp: new Date().toISOString()\\n  };\\n}\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e4d41cf6-575d-469a-a7c5-fba0fc1cc568\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1840,\n        1480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"aaf83c73-65f3-4a88-87f3-25b1acaf93ef\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.title }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"d9af5bce-f0fb-4c20-8b6a-b01a3bf3e1d1\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.content }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"b6b64f53-b689-440c-bc2e-478bccbfa5f5\",\n      \"name\": \"Do Nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        2020,\n        1740\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"20b12b54-d329-4c70-9fa2-0dc598477a66\",\n      \"name\": \"Create Structured Blog Post\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1200,\n        1480\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.text }}\",\n        \"agent\": \"conversationalAgent\",\n        \"options\": {\n          \"systemMessage\": \"=Analyze the provided PDF article and create a compelling blog post that will be returned in JSON format with two fields: \\\"title\\\" and \\\"content\\\". Follow these specifications:\\n\\n## Title Requirements\\n- Create an engaging, SEO-friendly title under 10 words\\n- Must not contain a colon\\n- Should capture the article's essence\\n- Will be formatted as an H1 in the content\\n\\n## Content Structure\\n- Introduction (150-200 words)\\n  * Compelling hook\\n  * Topic context and importance\\n  * Preview of main points\\n\\n- Main Content (6-8 chapters)\\n  * Each chapter requires:\\n    - Relevant H2 heading\\n    - 300-400 words of unique content\\n    - Specific topic focus\\n    - Source material quotes/data\\n    - Smooth transitions\\n\\n- Conclusion (200-250 words)\\n  * Key takeaways\\n  * Final thoughts/implications\\n\\n## Formatting Guidelines\\n- Use proper HTML tags throughout\\n- Structure with <p> tags for paragraphs\\n- Include appropriate spacing\\n- Use <blockquote> for direct quotes\\n- Maintain consistent formatting\\n- Write in clear, professional tone\\n- Break up long paragraphs\\n- Use engaging subheadings\\n- Include transitional phrases\\n\\nThe content should be original, avoid direct copying, and maintain a consistent voice throughout. The final JSON response should contain only the title and content fields, with the content including all HTML formatting.\"\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 1.6\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"ae25fae9-8ae8-4a49-ae90-dd2a89599f08\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Post to Ghost\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Do Nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload PDF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract Text\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Create Structured Blog Post\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Text\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Structured Blog Post\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Separate Title & Content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Structured Output - JSON\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Create Structured Blog Post\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Structured Blog Post\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Separate Title & Content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.formTrigger",
      "n8n-nodes-base.extractFromFile",
      "n8n-nodes-base.ghost",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.outputParserStructured",
      "n8n-nodes-base.code",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "@n8n/n8n-nodes-langchain.agent"
    ],
    "trigger": null
  }
}