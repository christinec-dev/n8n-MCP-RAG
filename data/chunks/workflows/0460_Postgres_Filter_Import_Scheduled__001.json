{
  "source": "0460_Postgres_Filter_Import_Scheduled.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"f4b99447bb6b56ad425b30ab755dc982ee1c258e7ce783958190eabedd1bcbb0\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"d496660c-88be-4130-ad6c-32e55f820af0\",\n      \"name\": \"Set Default Error Workflow\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"position\": [\n        1700,\n        500\n      ],\n      \"parameters\": {\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"workflow_entity\",\n          \"cachedResultName\": \"workflow_entity\"\n        },\n        \"schema\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"public\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"id\": \"={{ $json.id }}\",\n            \"settings\": \"={{ JSON.stringify({ ...$json.settings, errorWorkflow: $('Set Vars').item.json.default_error_workflow_id }, null, null) }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": true,\n              \"displayName\": \"name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"active\",\n              \"type\": \"boolean\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": true,\n              \"displayName\": \"active\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"nodes\",\n              \"type\": \"object\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": true,\n              \"displayName\": \"nodes\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"connections\",\n              \"type\": \"object\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": true,\n              \"displayName\": \"connections\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"createdAt\",\n              \"type\": \"dateTime\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"createdAt\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"updatedAt\",\n              \"type\": \"dateTime\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"updatedAt\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"settings\",\n              \"type\": \"object\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"settings\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"staticData\",\n              \"type\": \"object\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"staticData\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"pinData\",\n              \"type\": \"object\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"pinData\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"versionId\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"versionId\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"triggerCount\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"triggerCount\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"id\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": true,\n              \"displayName\": \"id\",\n              \"defaultMatch\": true,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"meta\",\n              \"type\": \"object\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"meta\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"id\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"rFLN9F42378ayUmI\",\n          \"name\": \"GCS:threat-intel-context/dev-n8n-conf\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"334c557c-bc6c-44f8-85ac-3cacc145cf2f\",\n      \"name\": \"Set Vars\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1040,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b2302801-f93e-4134-a785-47454dfe31d4\",\n              \"name\": \"default_error_workflow_id\",\n              \"type\": \"string\",\n              \"value\": \"2fgSBCqYJyEZWtTO\"\n            },\n            {\n              \"id\": \"efe2c80d-2b98-4a6b-8f76-7e2d5866c4ea\",\n              \"name\": \"default_error_exclusion_tag\",\n              \"type\": \"string\",\n              \"value\": \"default_error:false\"\n            }\n          ]\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"858d36f2-1024-43dd-89e9-00402fb1bae2\",\n      \"name\": \"Exclude default_error:false Tagged Workflows\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1480,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"911501c7-18cc-4292-a4e8-fe8f8c3cb8aa\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"false\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.tags.some(item => item.name === $('Set Vars').item.json.default_error_exclusion_tag) }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"e22db4f5-ec03-4000-a996-d3150db17a73\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $json.settings.errorWorkflow ? $json.settings.errorWorkflow : \\\"\\\" }}\",\n              \"rightValue\": \"={{ $('Set Vars').item.json.default_error_workflow_id }}\"\n            }\n          ]\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"f0ac7515-8175-458c-9357-b5246019a22c\",\n      \"name\": \"When clicking \\\"Test workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        780,\n        580\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2545b766-a0a0-4e31-9941-d51d5594aff6\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        780,\n        400\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"hours\",\n              \"hoursInterval\": 4\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": false,\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"901e4df3-4dd3-4b92-ac09-555d51d2d7e9\",\n      \"name\": \"Get All Workflows\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        1260,\n        500\n      ],\n      \"parameters\": {\n        \"filters\": {}\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"r2RZq6ObikiqFu1y\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Set Vars\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get All Workflows\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Vars\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get All Workflows\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Exclude default_error:false Tagged Workflows\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Test workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Vars\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Exclude default_error:false Tagged Workflows\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Default Error Workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.postgres",
      "n8n-nodes-base.set",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.n8n"
    ],
    "trigger": "schedule trigger"
  }
}