{
  "source": "0594_HTTP_Telegram_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"9cc26a42-eb43-40c4-b507-cbaf187a5e15\",\n      \"name\": \"Get New Message\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        1120,\n        500\n      ],\n      \"webhookId\": \"464f0a75-56d1-402f-8b12-b358452e9736\",\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"rI0zyfIYVIyXt2fL\",\n          \"name\": \"Telegram Club\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"098b6fcf-7cb6-4730-8892-949fedc946b3\",\n      \"name\": \"OPENAI - Create thread\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1740,\n        640\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.openai.com/v1/threads\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"OpenAI-Beta\",\n              \"value\": \"assistants=v2\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"openAiApi\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"zJhr5piyEwVnWtaI\",\n          \"name\": \"OpenAi club\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"fa157f8c-b776-4b20-bfaf-c17460383505\",\n      \"name\": \"Create User\",\n      \"type\": \"n8n-nodes-base.supabase\",\n      \"position\": [\n        1900,\n        640\n      ],\n      \"parameters\": {\n        \"tableId\": \"telegram_users\",\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldId\": \"telegram_id\",\n              \"fieldValue\": \"={{ $('Get New Message').item.json.message.chat.id }}\"\n            },\n            {\n              \"fieldId\": \"openai_thread_id\",\n              \"fieldValue\": \"={{ $('OPENAI - Create thread').item.json.id }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"QBhcokohbJHfQZ9A\",\n          \"name\": \"Supabase club\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"115e417f-5962-409b-8adf-ff236eb9ce2e\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        2080,\n        500\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"ba5c7385-8c80-43c8-9de2-430175bda70b\",\n      \"name\": \"OPENAI - Send message\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2240,\n        500\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.openai.com/v1/threads/{{ $('Merge').item.json.openai_thread_id }}/messages \",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"role\",\n              \"value\": \"user\"\n            },\n            {\n              \"name\": \"content\",\n              \"value\": \"={{ $('Get New Message').item.json.message.text }}\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"OpenAI-Beta\",\n              \"value\": \"assistants=v2\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"openAiApi\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"fLfRtaXbR0EVD0pl\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"024832bc-3d42-4879-a57f-b23e962b4c69\",\n      \"name\": \"OPENAI - Run assistant\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2440,\n        500\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.openai.com/v1/threads/{{ $('Merge').item.json.openai_thread_id }}/runs\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"assistant_id\",\n              \"value\": \"asst_b0QhuzySG6jofHFdzPZD7WEz\"\n            },\n            {\n              \"name\": \"stream\",\n              \"value\": \"={{true}}\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"OpenAI-Beta\",\n              \"value\": \"assistants=v2\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"openAiApi\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"fLfRtaXbR0EVD0pl\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"bc191e2b-15f4-45b7-af2e-19ed1639b7f5\",\n      \"name\": \"OPENAI - Get messages\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2640,\n        500\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.openai.com/v1/threads/{{ $('Merge').item.json.openai_thread_id }}/messages\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"OpenAI-Beta\",\n              \"value\": \"assistants=v2\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"openAiApi\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"zJhr5piyEwVnWtaI\",\n          \"name\": \"OpenAi club\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"c22e05e5-f0a7-4a09-a864-acfc58469b30\",\n      \"name\": \"Send Message to User\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        2840,\n        500\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $('OPENAI - Get messages').item.json.data[0].content[0].text.value }}\",\n        \"chatId\": \"={{ $('Get New Message').item.json.message.chat.id }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"rI0zyfIYVIyXt2fL\",\n          \"name\": \"Telegram Club\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"0673be1f-3cae-42a0-9c62-1ed570859043\",\n      \"name\": \"If User exists\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1560,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"b6e69a1f-eb42-4ef6-b80c-3167f1b8c830\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.id }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"a4916f54-ae6b-495d-979b-92dca965e3bb\",\n      \"name\": \"Find User\",\n      \"type\": \"n8n-nodes-base.supabase\",\n      \"position\": [\n        1360,\n        500\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"conditions\": [\n            {\n              \"keyName\": \"telegram_id\",\n              \"keyValue\": \"={{ $json.message.chat.id }}\",\n              \"condition\": \"eq\"\n            }\n          ]\n        },\n        \"tableId\": \"telegram_users\",\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"supabaseApi\": {\n          \"id\": \"QBhcokohbJHfQZ9A\",\n          \"name\": \"Supabase club\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"6d01d7ed-e96b-47cf-9a5f-46608031baa2\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1300,\n        800\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 600.723278204605,\n        \"height\": 213.15921994594194,\n        \"content\": \"SQL query to create table in Supabase:\\n\\n```\\ncreate table\\n  public.telegram_users (\\n    id uuid not null default gen_random_uuid (),\\n    date_created timestamp with time zone not null default (now() at time zone 'utc'::text),\\n    telegram_id bigint null,\\n    openai_thread_id text null,\\n    constraint telegram_users_pkey primary key (id)\\n  ) tablespace pg_default;\\n```\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1a996da0-6022-48d7-ba40-1d137547a3d7\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2340,\n        360\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 282.075050779723,\n        \"height\": 80,\n        \"content\": \"Create assistant in [OpenAI](https://platform.openai.com/assistants).\\n\\n**Specify own assistant id here**\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b24d2008-7950-41f0-a7fa-50360c0c6854\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1040,\n        380\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 235.09282368774151,\n        \"height\": 80,\n        \"content\": \"Create own Telegram bot in [Botfather bot](https://t.me/botfather)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9eb2491e-5ad9-4015-8ed9-611e72924503\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1300,\n        680\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"height\": 80,\n        \"content\": \"Create table in [Supabase](https://supabase.com) with SQL query\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"884b5a1b-007c-4752-becc-46c8fc58db92\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        200,\n        120\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 280.2462120317618,\n        \"height\": 438.5821431288714,\n        \"content\": \"### Set up steps\\n1. **Create a Telegram Bot** using the [Botfather](https://t.me/botfather) and obtain the bot token.\\n2. **Set up Supabase:**\\n\\t1. Create a new project and generate a ```SUPABASE_URL``` and ```SUPABASE_KEY```.\\n\\t2. Create a new table named ```telegram_users``` with the following SQL query:\\n```\\ncreate table\\n  public.telegram_users (\\n    id uuid not null default gen_random_uuid (),\\n    date_created timestamp with time zone not null default (now() at time zone 'utc'::text),\\n    telegram_id bigint null,\\n    openai_thread_id text null,\\n    constraint telegram_users_pkey primary key (id)\\n  ) tablespace pg_default;\\n```\\n3. **OpenAI Setup:**\\n\\t1. Create an OpenAI assistant and obtain the ```OPENAI_API_KEY```.\\n\\t2. Customize your assistant’s personality or use cases according to your requirements.\\n4. **Environment Configuration in n8n:**\\n\\t1. Configure the Telegram, Supabase, and OpenAI nodes with the appropriate credentials.\\n\\t2. Set up triggers for receiving messages and handling conversation logic.\\n\\t3. Set up OpenAI assistant ID in \\\"++OPENAI - Run assistant++\\\" node.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"02db77ac-4909-4a56-a558-03c86d8b8552\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        200,\n        -400\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 636.2128494576581,\n        \"height\": 494.9629292914819,\n        \"content\": \"![5min Logo](https://cflobdhpqwnoisuctsoc.supabase.co/storage/v1/object/public/my_storage/Untitled%20(1500%20x%20300%20px).png)\\n## AI Telegram Bot with Supabase memory\\n**Made by [Mark Shcherbakov](https://www.linkedin.com/in/marklowcoding/) from community [5minAI](https://www.skool.com/5minai-2861)**\\n\\nMany simple chatbots lack context awareness and user memory. This workflow solves that by integrating Supabase to keep track of user sessions (via ```telegram_id``` and ```openai_thread_id```), allowing the bot to maintain continuity and context in conversations, leading to a more human-like and engaging experience.\\n\\nThis Telegram bot template connects with OpenAI to answer user queries while storing and retrieving user information from a Supabase database. The memory component ensures that the bot can reference past interactions, making it suitable for use cases such as customer support, virtual assistants, or any application where context retention is crucial.\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a991a7c9-ea5f-4a25-aa92-6dc2fce11b05\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        500,\n        120\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 330.5152611046425,\n        \"height\": 240.6839895136402,\n        \"content\": \"### ... or watch set up video [5 min]\\n[![Youtube Thumbnail](https://cflobdhpqwnoisuctsoc.supabase.co/storage/v1/object/public/my_storage/Youtube%20thumb%20(3).png)](https://www.youtube.com/watch?v=kS41gut8l0g)\\n\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {\n    \"Merge\": [\n      {\n        \"id\": \"4a5d71a4-a2f7-43e2-936f-37ee5bf5cc9e\",\n        \"telegram_id\": 1468754364,\n        \"date_created\": \"2024-10-04T08:29:07.458869+00:00\",\n        \"openai_thread_id\": null\n      }\n    ],\n    \"Find User\": [\n      {\n        \"id\": \"4a5d71a4-a2f7-43e2-936f-37ee5bf5cc9e\",\n        \"telegram_id\": 1468754364,\n        \"date_created\": \"2024-10-04T08:29:07.458869+00:00\",\n        \"openai_thread_id\": null\n      }\n    ],\n    \"Get New Message\": [\n      {\n        \"message\": {\n          \"chat\": {\n            \"id\": 1468754364,\n            \"type\": \"private\",\n            \"username\": \"low_code\",\n            \"first_name\": \"Mark\"\n          },\n          \"date\": 1727961249,\n          \"from\": {\n            \"id\": 1468754364,\n            \"is_bot\": false,\n            \"username\": \"low_code\",\n            \"first_name\": \"Mark\",\n            \"language_code\": \"en\"\n          },\n          \"text\": \"Hello, how are you?\",\n          \"entities\": [\n            {\n              \"type\": \"bot_command\",\n              \"length\": 6,\n              \"offset\": 0\n            }\n          ],\n          \"message_id\": 3\n        },\n        \"update_id\": 412281353\n      }\n    ],\n    \"Send Message to User\": [\n      {\n        \"ok\": true,\n        \"result\": {\n          \"chat\": {\n            \"id\": 1468754364,\n            \"type\": \"private\",\n            \"username\": \"low_code\",\n            \"first_name\": \"Mark\"\n          },\n          \"date\": 1727971919,\n          \"from\": {\n            \"id\": 7999029315,\n            \"is_bot\": true,\n            \"username\": \"test241234_bot\",\n            \"first_name\": \"Test bot\"\n          },\n          \"text\": \"Hello! I'm just a program, but I'm here and ready to help you. How can I assist you today?\",\n          \"message_id\": 7\n        }\n      }\n    ],\n    \"OPENAI - Get messages\": [\n      {\n        \"data\": [\n          {\n            \"id\": \"msg_C7aXbSotAl6xCxjR9avi4wUz\",\n            \"role\": \"assistant\",\n            \"object\": \"thread.message\",\n            \"run_id\": \"run_9avgP4lZ1FRSsL3y9UO8HPa1\",\n            \"content\": [\n              {\n                \"text\": {\n                  \"value\": \"Hello! I'm just a program, but I'm here and ready to help you. How can I assist you today?\",\n                  \"annotations\": []\n                },\n                \"type\": \"text\"\n              }\n            ],\n            \"metadata\": {},\n            \"thread_id\": \"thread_laO8JLPW6L1upYHW6fSRj8Bt\",\n            \"created_at\": 1727971739,\n            \"attachments\": [],\n            \"assistant_id\": \"asst_b0QhuzySG6jofHFdzPZD7WEz\"\n          },\n          {\n            \"id\": \"msg_fVGPVHR03QKheHXh54SFpmpm\",\n            \"role\": \"user\",\n            \"object\": \"thread.message\",\n            \"run_id\": null,\n            \"content\": [\n              {\n                \"text\": {\n                  \"value\": \"Hello, how are you?\",\n                  \"annotations\": []\n                },\n                \"type\": \"text\"\n              }\n            ],\n            \"metadata\": {},\n            \"thread_id\": \"thread_laO8JLPW6L1upYHW6fSRj8Bt\",\n            \"created_at\": 1727971467,\n            \"attachments\": [],\n            \"assistant_id\": null\n          }\n        ],\n        \"object\": \"list\",\n        \"last_id\": \"msg_fVGPVHR03QKheHXh54SFpmpm\",\n        \"first_id\": \"msg_C7aXbSotAl6xCxjR9avi4wUz\",\n        \"has_more\": false\n      }\n    ],\n    \"OPENAI - Send message\": [\n      {\n        \"id\": \"msg_fVGPVHR03QKheHXh54SFpmpm\",\n        \"role\": \"user\",\n        \"object\": \"thread.message\",\n        \"run_id\": null,\n        \"content\": [\n          {\n            \"text\": {\n              \"value\": \"Hello, how are you?\",\n              \"annotations\": []\n            },\n            \"type\": \"text\"\n          }\n        ],\n        \"metadata\": {},\n        \"thread_id\": \"thread_laO8JLPW6L1upYHW6fSRj8Bt\",\n        \"created_at\": 1727971467,\n        \"attachments\": [],\n        \"assistant_id\": null\n      }\n    ],\n    \"OPENAI - Create thread\": [\n      {\n        \"id\": \"thread_laO8JLPW6L1upYHW6fSRj8Bt\",\n        \"object\": \"thread\",\n        \"metadata\": {},\n        \"created_at\": 1727971362,\n        \"tool_resources\": {}\n      }\n    ],\n    \"OPENAI - Run assistant\": [\n      {\n        \"data\": \"event: thread.run.created\\ndata: {\\\"id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"object\\\":\\\"thread.run\\\",\\\"created_at\\\":1727971737,\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"status\\\":\\\"queued\\\",\\\"started_at\\\":null,\\\"expires_at\\\":1727972337,\\\"cancelled_at\\\":null,\\\"failed_at\\\":null,\\\"completed_at\\\":null,\\\"required_action\\\":null,\\\"last_error\\\":null,\\\"model\\\":\\\"gpt-4o-mini\\\",\\\"instructions\\\":\\\"You are ChatGPT\\\",\\\"tools\\\":[],\\\"tool_resources\\\":{\\\"code_interpreter\\\":{\\\"file_ids\\\":[]}},\\\"metadata\\\":{},\\\"temperature\\\":1.0,\\\"top_p\\\":1.0,\\\"max_completion_tokens\\\":null,\\\"max_prompt_tokens\\\":null,\\\"truncation_strategy\\\":{\\\"type\\\":\\\"auto\\\",\\\"last_messages\\\":null},\\\"incomplete_details\\\":null,\\\"usage\\\":null,\\\"response_format\\\":\\\"auto\\\",\\\"tool_choice\\\":\\\"auto\\\",\\\"parallel_tool_calls\\\":true}\\n\\nevent: thread.run.queued\\ndata: {\\\"id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"object\\\":\\\"thread.run\\\",\\\"created_at\\\":1727971737,\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"status\\\":\\\"queued\\\",\\\"started_at\\\":null,\\\"expires_at\\\":1727972337,\\\"cancelled_at\\\":null,\\\"failed_at\\\":null,\\\"completed_at\\\":null,\\\"required_action\\\":null,\\\"last_error\\\":null,\\\"model\\\":\\\"gpt-4o-mini\\\",\\\"instructions\\\":\\\"You are ChatGPT\\\",\\\"tools\\\":[],\\\"tool_resources\\\":{\\\"code_interpreter\\\":{\\\"file_ids\\\":[]}},\\\"metadata\\\":{},\\\"temperature\\\":1.0,\\\"top_p\\\":1.0,\\\"max_completion_tokens\\\":null,\\\"max_prompt_tokens\\\":null,\\\"truncation_strategy\\\":{\\\"type\\\":\\\"auto\\\",\\\"last_messages\\\":null},\\\"incomplete_details\\\":null,\\\"usage\\\":null,\\\"response_format\\\":\\\"auto\\\",\\\"tool_choice\\\":\\\"auto\\\",\\\"parallel_tool_calls\\\":true}\\n\\nevent: thread.run.in_progress\\ndata: {\\\"id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"object\\\":\\\"thread.run\\\",\\\"created_at\\\":1727971737,\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"status\\\":\\\"in_progress\\\",\\\"started_at\\\":1727971738,\\\"expires_at\\\":1727972337,\\\"cancelled_at\\\":null,\\\"failed_at\\\":null,\\\"completed_at\\\":null,\\\"required_action\\\":null,\\\"last_error\\\":null,\\\"model\\\":\\\"gpt-4o-mini\\\",\\\"instructions\\\":\\\"You are ChatGPT\\\",\\\"tools\\\":[],\\\"tool_resources\\\":{\\\"code_interpreter\\\":{\\\"file_ids\\\":[]}},\\\"metadata\\\":{},\\\"temperature\\\":1.0,\\\"top_p\\\":1.0,\\\"max_completion_tokens\\\":null,\\\"max_prompt_tokens\\\":null,\\\"truncation_strategy\\\":{\\\"type\\\":\\\"auto\\\",\\\"last_messages\\\":null},\\\"incomplete_details\\\":null,\\\"usage\\\":null,\\\"response_format\\\":\\\"auto\\\",\\\"tool_choice\\\":\\\"auto\\\",\\\"parallel_tool_calls\\\":true}\\n\\nevent: thread.run.step.created\\ndata: {\\\"id\\\":\\\"step_b0iFvL1q1UEZDfBRbbNTiulO\\\",\\\"object\\\":\\\"thread.run.step\\\",\\\"created_at\\\":1727971739,\\\"run_id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"type\\\":\\\"message_creation\\\",\\\"status\\\":\\\"in_progress\\\",\\\"cancelled_at\\\":null,\\\"completed_at\\\":null,\\\"expires_at\\\":1727972337,\\\"failed_at\\\":null,\\\"last_error\\\":null,\\\"step_details\\\":{\\\"type\\\":\\\"message_creation\\\",\\\"message_creation\\\":{\\\"message_id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\"}},\\\"usage\\\":null}\\n\\nevent: thread.run.step.in_progress\\ndata: {\\\"id\\\":\\\"step_b0iFvL1q1UEZDfBRbbNTiulO\\\",\\\"object\\\":\\\"thread.run.step\\\",\\\"created_at\\\":1727971739,\\\"run_id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"type\\\":\\\"message_creation\\\",\\\"status\\\":\\\"in_progress\\\",\\\"cancelled_at\\\":null,\\\"completed_at\\\":null,\\\"expires_at\\\":1727972337,\\\"failed_at\\\":null,\\\"last_error\\\":null,\\\"step_details\\\":{\\\"type\\\":\\\"message_creation\\\",\\\"message_creation\\\":{\\\"message_id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\"}},\\\"usage\\\":null}\\n\\nevent: thread.message.created\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message\\\",\\\"created_at\\\":1727971739,\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"run_id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"status\\\":\\\"in_progress\\\",\\\"incomplete_details\\\":null,\\\"incomplete_at\\\":null,\\\"completed_at\\\":null,\\\"role\\\":\\\"assistant\\\",\\\"content\\\":[],\\\"attachments\\\":[],\\\"metadata\\\":{}}\\n\\nevent: thread.message.in_progress\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message\\\",\\\"created_at\\\":1727971739,\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"run_id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"status\\\":\\\"in_progress\\\",\\\"incomplete_details\\\":null,\\\"incomplete_at\\\":null,\\\"completed_at\\\":null,\\\"role\\\":\\\"assistant\\\",\\\"content\\\":[],\\\"attachments\\\":[],\\\"metadata\\\":{}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\"Hello\\\",\\\"annotations\\\":[]}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\"!\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" I'm\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" just\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" a\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" program\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\",\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" but\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" I'm\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" here\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" and\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" ready\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" to\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" help\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" you\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\".\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" How\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" can\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" I\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" assist\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" you\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\" today\\\"}}]}}\\n\\nevent: thread.message.delta\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message.delta\\\",\\\"delta\\\":{\\\"content\\\":[{\\\"index\\\":0,\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\"?\\\"}}]}}\\n\\nevent: thread.message.completed\\ndata: {\\\"id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\",\\\"object\\\":\\\"thread.message\\\",\\\"created_at\\\":1727971739,\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"run_id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"status\\\":\\\"completed\\\",\\\"incomplete_details\\\":null,\\\"incomplete_at\\\":null,\\\"completed_at\\\":1727971740,\\\"role\\\":\\\"assistant\\\",\\\"content\\\":[{\\\"type\\\":\\\"text\\\",\\\"text\\\":{\\\"value\\\":\\\"Hello! I'm just a program, but I'm here and ready to help you. How can I assist you today?\\\",\\\"annotations\\\":[]}}],\\\"attachments\\\":[],\\\"metadata\\\":{}}\\n\\nevent: thread.run.step.completed\\ndata: {\\\"id\\\":\\\"step_b0iFvL1q1UEZDfBRbbNTiulO\\\",\\\"object\\\":\\\"thread.run.step\\\",\\\"created_at\\\":1727971739,\\\"run_id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"type\\\":\\\"message_creation\\\",\\\"status\\\":\\\"completed\\\",\\\"cancelled_at\\\":null,\\\"completed_at\\\":1727971740,\\\"expires_at\\\":1727972337,\\\"failed_at\\\":null,\\\"last_error\\\":null,\\\"step_details\\\":{\\\"type\\\":\\\"message_creation\\\",\\\"message_creation\\\":{\\\"message_id\\\":\\\"msg_C7aXbSotAl6xCxjR9avi4wUz\\\"}},\\\"usage\\\":{\\\"prompt_tokens\\\":39,\\\"completion_tokens\\\":25,\\\"total_tokens\\\":64}}\\n\\nevent: thread.run.completed\\ndata: {\\\"id\\\":\\\"run_9avgP4lZ1FRSsL3y9UO8HPa1\\\",\\\"object\\\":\\\"thread.run\\\",\\\"created_at\\\":1727971737,\\\"assistant_id\\\":\\\"asst_b0QhuzySG6jofHFdzPZD7WEz\\\",\\\"thread_id\\\":\\\"thread_laO8JLPW6L1upYHW6fSRj8Bt\\\",\\\"status\\\":\\\"completed\\\",\\\"started_at\\\":1727971738,\\\"expires_at\\\":null,\\\"cancelled_at\\\":null,\\\"failed_at\\\":null,\\\"completed_at\\\":1727971740,\\\"required_action\\\":null,\\\"last_error\\\":null,\\\"model\\\":\\\"gpt-4o-mini\\\",\\\"instructions\\\":\\\"You are ChatGPT\\\",\\\"tools\\\":[],\\\"tool_resources\\\":{\\\"code_interpreter\\\":{\\\"file_ids\\\":[]}},\\\"metadata\\\":{},\\\"temperature\\\":1.0,\\\"top_p\\\":1.0,\\\"max_completion_tokens\\\":null,\\\"max_prompt_tokens\\\":null,\\\"truncation_strategy\\\":{\\\"type\\\":\\\"auto\\\",\\\"last_messages\\\":null},\\\"incomplete_details\\\":null,\\\"usage\\\":{\\\"prompt_tokens\\\":39,\\\"completion_tokens\\\":25,\\\"total_tokens\\\":64},\\\"response_format\\\":\\\"auto\\\",\\\"tool_choice\\\":\\\"auto\\\",\\\"parallel_tool_calls\\\":true}\\n\\nevent: done\\ndata: [DONE]\\n\\n\"\n      }\n    ]\n  },\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OPENAI - Send message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find User\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If User exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create User\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"If User exists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"OPENAI - Create thread\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get New Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find User\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OPENAI - Get messages\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Message to User\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OPENAI - Send message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OPENAI - Run assistant\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OPENAI - Create thread\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create User\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OPENAI - Run assistant\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OPENAI - Get messages\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.telegramTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.supabase",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.if",
      "n8n-nodes-base.supabase",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}