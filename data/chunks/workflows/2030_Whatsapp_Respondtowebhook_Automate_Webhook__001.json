{
  "source": "2030_Whatsapp_Respondtowebhook_Automate_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"yxv7OYbDEnqsqfa9\",\n  \"meta\": {\n    \"instanceId\": \"fb924c73af8f703905bc09c9ee8076f48c17b596ed05b18c0ff86915ef8a7c4a\"\n  },\n  \"name\": \"WhatsApp starter workflow\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"9b385dfe-fa67-4c2c-83df-e3e02c0ff796\",\n      \"name\": \"Verify\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        700,\n        180\n      ],\n      \"webhookId\": \"793f285b-9da7-4a5e-97ce-f0976c113db5\",\n      \"parameters\": {\n        \"path\": \"1fea1f5f-81c0-48ad-ae13-41e0f8e474ed\",\n        \"options\": {},\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"676efc61-c875-4675-a843-20f98ef1a642\",\n      \"name\": \"Respond to Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        920,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"text\",\n        \"responseBody\": \"={{ $json.query['hub.challenge'] }}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8dd6d094-415c-40d7-ad2b-4ed9f2d23232\",\n      \"name\": \"Echo the message back\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        1140,\n        540\n      ],\n      \"parameters\": {\n        \"textBody\": \"=Echo back: {{ $json.body.entry[0].changes[0].value.messages[0].text.body }}\",\n        \"operation\": \"send\",\n        \"phoneNumberId\": \"244242975437240\",\n        \"additionalFields\": {},\n        \"recipientPhoneNumber\": \"={{ $json.body.entry[0].changes[0].value.messages[0].from }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"dy22WXWn0Xz4WRby\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cd9e2cfd-9589-4390-95fd-f0bc3960d60c\",\n      \"name\": \"Is message?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        920,\n        540\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"looseTypeValidation\": true\n        },\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"8a765e57-8e39-4547-a99a-0458df2b75f4\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.body.entry[0].changes[0].value.messages[0] }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"20939289-3c4f-467a-b0e9-bf7e6d42cc18\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        46\n      ],\n      \"parameters\": {\n        \"width\": 618,\n        \"height\": 272,\n        \"content\": \"## Verify Webhook\\n* Go to your [Meta for Developers App page](https://developers.facebook.com/apps/), navigate to the App settings\\n* Add a **production webhook URL** as a new Callback URL\\n* *Verify* webhook receives a GET Request and sends back a verification code\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"36ffeb5b-165a-4723-8250-a4feb9123140\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        360\n      ],\n      \"parameters\": {\n        \"width\": 619,\n        \"height\": 343,\n        \"content\": \"## Main flow\\n* *Respond* webhook receives various POST Requests from Meta regarding WhatsApp messages (user messages + status notifications)\\n* Check if the incoming JSON contains user message\\n* Echo back the text message to the user. This is a custom message, not a WhatsApp Business template message\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"aa234bca-c8db-43c6-9aeb-02aef6a084e5\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        240,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 405,\n        \"height\": 177,\n        \"content\": \"## Important!\\n### Configure the webhook nodes this way:\\n* Make sure that both *Verify* and *Respond* have the same URL\\n* *Verify* should have GET HTTP Method\\n* *Respond* should have POST HTTP Method\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2370b81a-0721-42fd-8893-e3ee02e20278\",\n      \"name\": \"Respond\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        700,\n        540\n      ],\n      \"webhookId\": \"c4cbc1c4-e1f5-4ea5-bd9a-c5f697493985\",\n      \"parameters\": {\n        \"path\": \"1fea1f5f-81c0-48ad-ae13-41e0f8e474ed\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1.1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"executionOrder\": \"v1\",\n    \"saveManualExecutions\": true,\n    \"saveDataSuccessExecution\": \"all\"\n  },\n  \"versionId\": \"0d254e91-2ad0-4f38-97d5-fec5057043ea\",\n  \"connections\": {\n    \"Verify\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Respond\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is message?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is message?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Echo the message back\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.respondToWebhook",
      "n8n-nodes-base.whatsApp",
      "n8n-nodes-base.if",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.webhook"
    ],
    "trigger": null
  }
}