{
  "source": "0731_Splitout_Limit_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"5287ddd2fa569cf8e4c5a724666246a45305c032a19bb677c9e4b963d365f84b\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"95c798a4-bc34-4219-b7c3-6b4a4070886b\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -320,\n        1080\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"09987590-1ec2-48d4-aa04-32b85addd9e6\",\n      \"name\": \"Split Out\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        420,\n        1080\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"newsTitle\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"758e3f60-01dc-46c7-bb53-7460eaed92e3\",\n      \"name\": \"Extract News Block\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        220,\n        1080\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"extractHtmlContent\",\n        \"extractionValues\": {\n          \"values\": [\n            {\n              \"key\": \"newsTitle\",\n              \"cssSelector\": \".eGcloy\",\n              \"returnArray\": true,\n              \"returnValue\": \"html\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"20440f9a-a40c-4419-af6d-383de041d078\",\n      \"name\": \"Extract News Content\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        600,\n        1080\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"extractHtmlContent\",\n        \"dataPropertyName\": \"newsTitle\",\n        \"extractionValues\": {\n          \"values\": [\n            {\n              \"key\": \"title\",\n              \"cssSelector\": \"h2\"\n            },\n            {\n              \"key\": \"link\",\n              \"attribute\": \"href\",\n              \"cssSelector\": \"a\",\n              \"returnValue\": \"attribute\"\n            },\n            {\n              \"key\": \"description\",\n              \"cssSelector\": \".kYtujW\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"47a50ada-127a-4037-8fe7-41c0caebb3de\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        2000,\n        1060\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"33050a43-842d-464d-b227-a6c2c870c0af\",\n      \"name\": \"Fetch BBC News Detail\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1400,\n        1060\n      ],\n      \"parameters\": {\n        \"url\": \"=https://www.bbc.com{{ $json.link }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"646bfe6b-cac6-4177-9b59-dc205b44b7eb\",\n      \"name\": \"Extract Detail\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        1600,\n        1060\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"extractHtmlContent\",\n        \"extractionValues\": {\n          \"values\": [\n            {\n              \"key\": \"newsDetail\",\n              \"cssSelector\": \".dlWCEZ .fYAfXe\",\n              \"returnArray\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"6e14f528-1e94-411f-8601-3c713d492aa9\",\n      \"name\": \"Filter Empty Detail\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1800,\n        1060\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"7066e88c-03da-4196-b1c5-80bc16fa3fc6\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.newsDetail }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"5863e420-2392-468a-8e03-5d4c273168e0\",\n      \"name\": \"If script exists\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2620,\n        1060\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 1,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"2e968b41-88f7-4b28-9837-af50ae130979\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"=voice_id {{ $json.output.podcast_script }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"90b370d3-5712-401d-b769-490014e2b17c\",\n      \"name\": \"Basic Podcast LLM Chain\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        2200,\n        1060\n      ],\n      \"parameters\": {\n        \"text\": \"=News Articles:{{ $json.data.map(item => item.newsDetail) }}\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"= \\n*Convert the following one or multiple news articles into a podcast script formatted for direct use in ElevenLabs. If there is only one news piece, transform it into a compelling and engaging narrative. If multiple news stories are provided, structure them like a news bulletin, presenting each piece sequentially with smooth transitions. Avoid a formal or dry tone; instead, use a natural, conversational, and warm style. The podcast should feel dynamic, engaging, and informative while maintaining a storytelling approach.*  \\n\\n- *Ensure the script is formatted as a single, continuous text block suitable for direct speech synthesis.*  \\n- *Start with an engaging introduction that sets the tone for the podcast.*  \\n- *Narrate each news story smoothly, with natural transitions between segments.*  \\n- *End with a closing statement that leaves the listener informed and engaged.*  \\n- *Output must be in JSON format, with the full script as a single string under the key `\\\"podcast_script\\\"`.*  \\n\\n---\\n\\n### **Input Format:**  \\n```json\\n{\\n  \\\"news_articles\\\": [\\n    {\\n      \\\"title\\\": \\\"First News Title\\\",\\n      \\\"content\\\": \\\"First news article content...\\\"\\n    },\\n    {\\n      \\\"title\\\": \\\"Second News Title\\\",\\n      \\\"content\\\": \\\"Second news article content...\\\"\\n    }\\n  ]\\n}\\n```\\n\\n---\\n\\nExpected JSON Output Format:\\n \\n{\\n  \\\"podcast_script\\\": \\\"Welcome to today's news podcast! We have some exciting stories lined up for you. Let's start with our first story. [First news article content rewritten in a conversational, engaging style]... Moving on to our next topic... [Second news article content rewritten dynamically]... That’s all for today’s news bulletin! Stay informed and see you next time.\\\"\\n}\\n\\n\\n \"\n            }\n          ]\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.5\n    },\n    {\n      \"id\": \"24c212c2-6d06-4fe1-841b-bc52a21060b1\",\n      \"name\": \"Gemini\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        1600,\n        1600\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-2.0-pro-exp-02-05\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"5x46RlCURyTUmbGW\",\n          \"name\": \"Google Gemini(PaLM) Api account 2\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"02e9f1ee-dc80-403c-8c19-0e6f918cf8ed\",\n      \"name\": \"Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        2360,\n        1280\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\n\\t\\\"podcast_script\\\": \\\"California\\\"\\n}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"395ddac7-b2a4-48c5-b2d3-d21078d29c54\",\n      \"name\": \"News Classifier\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textClassifier\",\n      \"position\": [\n        980,\n        1080\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"inputText\": \"=I will only send the headline as input:\\n{{ $json.title }} {{ $json.description }}\",\n        \"categories\": {\n          \"categories\": [\n            {\n              \"category\": \"Suitable\",\n              \"description\": \"=Role: News Content Suitability Assessor (Positive)\\n\\nTask: Determine if the given news headline is highly likely to be suitable for storytelling, focusing on positive and engaging aspects.\\n\\nCriteria (Focus on what makes it suitable):\\n\\nCuriosity and Interest: Does the headline present an event, discovery, or information that is likely to pique the curiosity of a broad audience? Does it have a \\\"wow\\\" factor or relate to a significant trend?\\n\\nStorytelling Potential: Does the headline lend itself well to narrative expansion? Could it be the start of an engaging story, a key point in a developing situation, or a surprising conclusion?\\n\\nPositive or Neutral Tone: Is the headline generally positive, neutral, or focused on solutions/progress? (Avoid headlines that primarily focus on conflict, negativity, or routine events).\\n\\nRelevance: Does the headline touch upon topics that are relevant to a wide audience, such as health, science, technology, interesting discoveries, or positive global events?\\n\\nOutput Format:\\n\\nHeadline: [Original news headline]\\n\\nSuitable: [Yes / No] (Only say \\\"Yes\\\" if strongly confident)\\n\\nReason (Brief): [Briefly explain why it's likely suitable, focusing on the positive aspects.]\\n\\nExample (for the LLM to learn from):\\n\\nHeadline: \\\"Scientists Discover New Species of Butterfly in Amazon Rainforest\\\"\\n\\nSuitable: Yes\\n\\nReason: Discovery, biodiversity, positive natural event, intriguing.\\n\\nHeadline: \\\"Stock Market Experiences Minor Fluctuations\\\"\\n\\nSuitable: No\\n\\nReason: Routine economic event, lacks general interest.\"\n            },\n            {\n              \"category\": \"Not Suitable\",\n              \"description\": \"=Role: News Content Filter (Negative)\\n\\nTask: Identify news headlines that are clearly unsuitable for storytelling due to negative content, lack of general interest, or ethical concerns.\\n\\nCriteria (Focus on what makes it unsuitable):\\n\\nNegative Content: Does the headline contain violence, crime, accidents, death, suffering, or other traumatic events?\\n\\nPolitical/Economic Routine: Does the headline focus on routine political announcements, standard economic reports (like minor market changes), or internal political disputes?\\n\\nDivisive or Harmful Content: Does the headline contain hate speech, discrimination, strong political bias, or potentially harmful misinformation?\\n\\nLack of General Interest: Is the headline highly niche, specific to a very small group, or about a topic unlikely to interest a broad audience?\\n\\nOutput Format:\\n\\nHeadline: [Original news headline]\\n\\nNot Suitable: [Yes / No] (Only say \\\"Yes\\\" if strongly confident)\\n\\nReason (Brief): [Briefly explain why it's clearly unsuitable.]\\n\\nExample (for the LLM to learn from):\\n\\nHeadline: \\\"Local Politician Announces Campaign Platform\\\"\\n\\nNot Suitable: Yes\\n\\nReason: Routine political event, lacks broad appeal.\\n\\nHeadline: \\\"Car Crash Results in Minor Injuries\\\"\\n\\nNot Suitable: Yes\\n\\nReason: Negative event (accident), though thankfully not severe.\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"13fac9ed-688c-4af9-a810-d49a74b98c22\",\n      \"name\": \"Fetch BBC News Page\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -60,\n        1080\n      ],\n      \"parameters\": {\n        \"url\": \"https://www.bbc.com/\",\n        \"options\": {},\n        \"responseFormat\": \"string\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e2aa33f3-aa7c-4a9d-ac3c-32f9f5872606\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -120,\n        920\n      ],\n      \"parameters\": {\n        \"width\": 500,\n        \"height\": 340,\n        \"content\": \"## This node fetches the main BBC News page, which contains links to various news articles.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0821b944-44cb-41ed-b5ff-70f99018c5dc\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        960,\n        840\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 340,\n        \"height\": 360,\n        \"content\": \"## This node uses a Gemini LLM to classify news articles based on their titles and descriptions. It determines if the content is suitable for a podcast.\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d32b2ebb-0a4d-4d27-9262-894ab7a65cce\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1360,\n        820\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 400,\n        \"height\": 420,\n        \"content\": \"## This node fetches the detailed content of the news articles that were classified as suitable for a podcast.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e6e1d180-b2c2-4b62-a611-7c039037ed69\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2180,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 340,\n        \"height\": 320,\n        \"content\": \"## This node uses a Gemini LLM to convert the news articles into a podcast script.\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d8776355-967d-4875-b948-25792f6f38ec\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2840,\n        920\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 360,\n        \"height\": 300,\n        \"content\": \"##  It structures the script for direct use with the Hugging Face text-to-speech model.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"631a2caf-c640-41df-9215-2b542de51ccb\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -660,\n        740\n      ],\n      \"parameters\": {\n        \"width\": 460,\n        \"height\": 280,\n        \"content\": \"## 3rd Party Application Requirements:\\n\\n### Gemini \\nYou've already set up a Gemini LLM. No access token is needed for this.\\n### Hugging Face\\n You'll need an access token for the Hugging Face text-to-speech model \\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"655e6799-5b7c-4747-b3a9-d01b47f5cba8\",\n      \"name\": \"Limit 10 Items\",\n      \"type\": \"n8n-nodes-base.limit\",\n      \"position\": [\n        800,\n        1080\n      ],\n      \"parameters\": {\n        \"maxItems\": 10\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"64d011d2-9c51-4f1f-a3b8-edf3fcbc6710\",\n      \"name\": \"Hugging Face Text-to-Speech.\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2900,\n        1060\n      ],\n      \"parameters\": {\n        \"url\": \"https://router.huggingface.co/hf-inference/models/facebook/mms-tts-eng\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"inputs\",\n              \"value\": \"={{ $json.output.podcast_script }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"huggingFaceApi\"\n      },\n      \"credentials\": {\n        \"huggingFaceApi\": {\n          \"id\": \"FF4PO5RYOJqZ0vhQ\",\n          \"name\": \"HuggingFaceApi account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Gemini\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"News Classifier\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Basic Podcast LLM Chain\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Basic Podcast LLM Chain\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract News Content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Basic Podcast LLM Chain\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Detail\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter Empty Detail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Limit 10 Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"News Classifier\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"News Classifier\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch BBC News Detail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If script exists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Hugging Face Text-to-Speech.\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        []\n      ]\n    },\n    \"Extract News Block\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetch BBC News Page\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract News Block\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter Empty Detail\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract News Content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Limit 10 Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetch BBC News Detail\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract Detail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Basic Podcast LLM Chain\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If script exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch BBC News Page\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.html",
      "n8n-nodes-base.html",
      "n8n-nodes-base.aggregate",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.html",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.if",
      "@n8n/n8n-nodes-langchain.chainLlm",
      "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "@n8n/n8n-nodes-langchain.outputParserStructured",
      "@n8n/n8n-nodes-langchain.textClassifier",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.limit",
      "n8n-nodes-base.httpRequest"
    ],
    "trigger": null
  }
}