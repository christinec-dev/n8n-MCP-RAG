{
  "source": "1763_Wait_Schedule_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"XiwLd0JwGmDoY0mr\",\n  \"meta\": {\n    \"instanceId\": \"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Image-to-3D\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"8cc77575-854f-4359-8faa-fc78b8c23b65\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -220,\n        400\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0dc7e6b8-43b8-4b9a-aa7a-4a100598162f\",\n      \"name\": \"Get status\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        840,\n        400\n      ],\n      \"parameters\": {\n        \"url\": \"=https://queue.fal.run/fal-ai/trellis/requests/{{ $('Create 3D Image').item.json.request_id }}/status \",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"daOZafXpRXLtoLUV\",\n          \"name\": \"Fal.run API\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"7540df1c-35e2-4ac5-871d-4d8410217979\",\n      \"name\": \"Wait 60 sec.\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        660,\n        400\n      ],\n      \"webhookId\": \"e10e9912-38e7-4e1f-ad7e-52b1e6a65d79\",\n      \"parameters\": {\n        \"amount\": 60\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"44c4b506-2a14-40ca-a75f-7af86ef5a9af\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -220,\n        260\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"ca8b3bcd-3eb6-4723-b2ea-a973582d46af\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        -860\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 740,\n        \"height\": 520,\n        \"content\": \"# Image-to-3D\\n\\n\\nThis workflow allows users to convert a 2D image into a 3D model by integrating multiple AI and web services. The process begins with a user uploading or providing an image URL, which is then sent to a generative AI model capable of interpreting the content and generating a 3D representation in .glb format. The model is then stored and a download link is returned to the user.\\n\\n![image](https://i.postimg.cc/1Xd20z4R/3d.png)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2230e7a5-225d-4538-b091-a9fbeedb1323\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        -300\n      ],\n      \"parameters\": {\n        \"width\": 740,\n        \"height\": 200,\n        \"content\": \"## STEP 1 - GOOGLE SHEET\\nCreate a [Google Sheet like this](https://docs.google.com/spreadsheets/d/1C0Et6X3Zwr_6CxeNjhLpDwjAfIGeUvLGFawckKb0utY/edit?usp=sharing).\\n\\nPlease insert:\\n- in the \\\"IMAGE MODEL\\\" column the basic image of the model to dress\\n\\nLeave the \\\"3D RESULT\\\" column unfilled. It will be inserted by the system once the image has been created\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3aad3211-e6fc-4e4b-9c59-7dd82827a43b\",\n      \"name\": \"Completed?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1020,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"383d112e-2cc6-4dd4-8985-f09ce0bd1781\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.status }}\",\n              \"rightValue\": \"COMPLETED\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6ad70838-dbf4-4cb1-9b61-4cf6e1fcdf6a\",\n      \"name\": \"Update result\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        440,\n        780\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"row_number\": \"={{ $('Get new image').item.json.row_number }}\",\n            \"IMAGE RESULT\": \"={{ $('Get Url 3D image').item.json.model_mesh.url }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"IMAGE MODEL\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"IMAGE MODEL\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"IMAGE PRODUCT\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"IMAGE PRODUCT\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"PRODUCT ID\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"PRODUCT ID\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"IMAGE RESULT\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"IMAGE RESULT\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"row_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"row_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"row_number\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/11ebWJvwwXHgvQld9kxywKQUvIoBw6xMa0g0BuIqHDxE/edit#gid=0\",\n          \"cachedResultName\": \"Foglio1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1C0Et6X3Zwr_6CxeNjhLpDwjAfIGeUvLGFawckKb0utY\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1C0Et6X3Zwr_6CxeNjhLpDwjAfIGeUvLGFawckKb0utY/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Image to 3D\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"JYR6a64Qecd6t8Hb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"239b45b3-94cc-43a9-aa2e-2c85725f4cc0\",\n      \"name\": \"Set data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        220,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c713d31f-9abd-496a-ac79-e8e2efe60aa0\",\n              \"name\": \"image\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json['IMAGE'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"70908a7d-72a5-4131-a82b-ed455a453fd5\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        120\n      ],\n      \"parameters\": {\n        \"width\": 740,\n        \"height\": 100,\n        \"content\": \"## STEP 3 - MAIN FLOW\\nStart the workflow manually or periodically by hooking the \\\"Schedule Trigger\\\" node. It is recommended to set it at 5 minute intervals.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d81f8aa0-3302-4a26-9425-aeb2a87674e7\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        -60\n      ],\n      \"parameters\": {\n        \"width\": 740,\n        \"height\": 140,\n        \"content\": \"## STEP 2 - GET API KEY (YOURAPIKEY)\\nCreate an account [here](https://fal.ai/) and obtain API KEY.\\nIn the node \\\"Create Image\\\" set \\\"Header Auth\\\" and set:\\n- Name: \\\"Authorization\\\"\\n- Value: \\\"Key YOURAPIKEY\\\"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"484d029d-b88f-48bb-b487-e7a50b47eb7d\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        400,\n        340\n      ],\n      \"parameters\": {\n        \"width\": 180,\n        \"height\": 200,\n        \"content\": \"Set API Key created in Step 2\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7061d7c1-7da8-473c-98a3-57dc15def557\",\n      \"name\": \"Get new image\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        0,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"filtersUI\": {\n          \"values\": [\n            {\n              \"lookupColumn\": \"3D RESULT\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1C0Et6X3Zwr_6CxeNjhLpDwjAfIGeUvLGFawckKb0utY/edit#gid=0\",\n          \"cachedResultName\": \"Foglio1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1C0Et6X3Zwr_6CxeNjhLpDwjAfIGeUvLGFawckKb0utY\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1C0Et6X3Zwr_6CxeNjhLpDwjAfIGeUvLGFawckKb0utY/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Image to 3D\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"JYR6a64Qecd6t8Hb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"edcdc4f0-4e7f-4fec-af9c-bbe8bf6bd8e6\",\n      \"name\": \"Create 3D Image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        440,\n        400\n      ],\n      \"parameters\": {\n        \"url\": \"https://queue.fal.run/fal-ai/trellis\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"image_url\\\": \\\"{{ $json.image }}\\\",\\n  \\\"ss_guidance_strength\\\": 7.5,\\n  \\\"ss_sampling_steps\\\": 12,\\n  \\\"slat_guidance_strength\\\": 3,\\n  \\\"slat_sampling_steps\\\": 12,\\n  \\\"mesh_simplify\\\": 0.95,\\n  \\\"texture_size\\\": 1024\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"daOZafXpRXLtoLUV\",\n          \"name\": \"Fal.run API\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"9ac6f843-090f-4c15-88e7-46ee494ed1b9\",\n      \"name\": \"Get Url 3D image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -220,\n        780\n      ],\n      \"parameters\": {\n        \"url\": \"=https://queue.fal.run/fal-ai/trellis/requests/{{ $json.request_id }}\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"daOZafXpRXLtoLUV\",\n          \"name\": \"Fal.run API\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"a02ac260-c88a-4c5a-9fc6-7230b95c462b\",\n      \"name\": \"Get File 3D image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        0,\n        780\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.model_mesh.url }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"311be624-4707-4361-a58a-ee90ff42490c\",\n      \"name\": \"Upload 3D Image\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        220,\n        780\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $now.format('yyyyLLddHHmmss') }}-{{ $('Get Url 3D image').item.json.model_mesh.file_name }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1aHRwLWyrqfzoVC8HoB-YMrBvQ4tLC-NZ\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive/folders/1aHRwLWyrqfzoVC8HoB-YMrBvQ4tLC-NZ\",\n          \"cachedResultName\": \"Fal.run\"\n        }\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"HEy5EuZkgPZVEa9w\",\n          \"name\": \"Google Drive account (n3w.it)\"\n        }\n      },\n      \"typeVersion\": 3\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"2f0d3488-25ac-4332-a8e3-62d7b34b96ae\",\n  \"connections\": {\n    \"Set data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create 3D Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Completed?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Url 3D image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait 60 sec.\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Completed?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait 60 sec.\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get new image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update result\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Create 3D Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait 60 sec.\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload 3D Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update result\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Url 3D image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get File 3D image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get File 3D image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload 3D Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get new image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.if",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.googleDrive"
    ],
    "trigger": "schedule trigger"
  }
}