{
  "source": "0833_Splitout_Schedule_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"c3a9ba81-3a7e-4afe-be8b-cf482cbb88c2\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -1040,\n        -540\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"triggerAtHour\": 6\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"f63d035c-5a7b-4cf4-8730-5fa7dff6f94b\",\n      \"name\": \"Get Subscribers\",\n      \"type\": \"n8n-nodes-base.microsoftExcel\",\n      \"position\": [\n        -860,\n        -540\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"worksheet\",\n        \"workbook\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"=\"\n        },\n        \"operation\": \"readRows\",\n        \"worksheet\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"=\"\n        }\n      },\n      \"credentials\": {\n        \"microsoftExcelOAuth2Api\": {\n          \"id\": \"56tIUYYVARBe9gfX\",\n          \"name\": \"Microsoft Excel account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"e93aa8de-5c68-4a01-ae60-beb141e0a430\",\n      \"name\": \"Get Unique Categories\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -400,\n        -160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"fe138128-50d5-469f-8c0b-0af8c873f198\",\n              \"name\": \"categories\",\n              \"type\": \"array\",\n              \"value\": \"={{ $input.all().flatMap(item => item.json.categories).unique() }}\"\n            }\n          ]\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"a874ae4e-d67e-4019-9e5c-03ea677468ae\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        760,\n        80\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"bc9c7578-3b6f-45fb-9f93-94637774d125\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1180,\n        40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ae83c9e2-a267-463c-a606-b4d101f93f92\",\n      \"name\": \"Collect Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        980,\n        -60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"4a266505-4b88-41cf-bf22-f38c705c27e5\",\n              \"name\": \"workflow_id\",\n              \"type\": \"number\",\n              \"value\": \"={{ $('Workflows to Items').item.json.workflow.id }}\"\n            },\n            {\n              \"id\": \"df3348e2-b6ec-4c38-a146-c38be9b830bc\",\n              \"name\": \"workflow_name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Workflows to Items').item.json.workflow.name }}\"\n            },\n            {\n              \"id\": \"b4646059-748f-407a-b829-d6605d5ab683\",\n              \"name\": \"workflow_desc\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.response.text }}\"\n            },\n            {\n              \"id\": \"eac0d9ab-9445-4bc2-9e64-160fe44b9ace\",\n              \"name\": \"workflow_created_at\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Workflows to Items').item.json.workflow.createdAt }}\"\n            },\n            {\n              \"id\": \"24a3c0cb-224c-4ce6-b59e-38b10ab2c02f\",\n              \"name\": \"author_id\",\n              \"type\": \"number\",\n              \"value\": \"={{ $('Workflows to Items').item.json.workflow.user.id }}\"\n            },\n            {\n              \"id\": \"a2b8a52f-be72-484c-aa86-582b73be1859\",\n              \"name\": \"author_name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Workflows to Items').item.json.workflow.user.name }}\"\n            },\n            {\n              \"id\": \"ae735511-8c7c-4bef-b6ac-cfe3d4b87b4f\",\n              \"name\": \"author_username\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Workflows to Items').item.json.workflow.user.username }}\"\n            },\n            {\n              \"id\": \"2dc1f59f-a854-4322-85df-c5998f782dcd\",\n              \"name\": \"category\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('For Each Category').item.json.category }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"8ca1ea7e-9098-4e82-919b-ba98ae7d7574\",\n      \"name\": \"Categories to Items\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        -220,\n        -160\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"destinationFieldName\": \"category\"\n        },\n        \"fieldToSplitOut\": \"categories\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"eb6d74b8-f1ed-4ab2-8c5f-7e6c6361b055\",\n      \"name\": \"For Each Category\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        320,\n        -160\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"8640ffac-9df6-4154-bcd5-dfa90c3843d4\",\n      \"name\": \"Workflows to Items\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        500,\n        -60\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"destinationFieldName\": \"workflow\"\n        },\n        \"fieldToSplitOut\": \"workflows\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4456a43b-df26-4bb8-a62d-b9f05eff4479\",\n      \"name\": \"Workflow Summarizer\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        660,\n        -60\n      ],\n      \"parameters\": {\n        \"text\": \"=## Description\\n```\\n{{ $json.workflow.description.replaceAll('#', '') }}\\n```\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"=You have received a description of a n8n template from the official template gallery. Your task is to summarize the description into one or two sentences. The summary should loosely follow the structure of:\\n* identify the goal of the template\\n* describe the method or approached implemented\\n* highlight which important n8n nodes were used\\n\\neg. \\\"Obtain real-time crypto market insights using an AI-powered workflow with CoinMarketCap APIs through Telegram\\\"\"\n            }\n          ]\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.5\n    },\n    {\n      \"id\": \"5f4a5921-c954-4523-8925-90401d8dbf22\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        660,\n        -460\n      ],\n      \"parameters\": {\n        \"mode\": \"chooseBranch\"\n      },\n      \"typeVersion\": 3.1\n    },\n    {\n      \"id\": \"f95fb28c-875c-4105-aa83-9fea257ea440\",\n      \"name\": \"Fetch Latest 10 per Category\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -40,\n        -160\n      ],\n      \"parameters\": {\n        \"url\": \"=https://n8n.io/api/product-api/workflows/search\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"category\",\n              \"value\": \"={{$json.category }}\"\n            },\n            {\n              \"name\": \"rows\",\n              \"value\": \"10\"\n            },\n            {\n              \"name\": \"sort\",\n              \"value\": \"createdAt:desc\"\n            },\n            {\n              \"name\": \"page\",\n              \"value\": \"1\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"4dda6cbc-e53f-452d-b257-df9ef18abd75\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1560,\n        -460\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"881337d8-3ca8-43d2-931f-9cfec16cc367\",\n      \"name\": \"Get Relevant Workflows\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1380,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"fbd0ad94-e5aa-4082-81f5-d7b2e08dfbcf\",\n              \"name\": \"workflows\",\n              \"type\": \"array\",\n              \"value\": \"={{\\n$json.categories\\n  .flatMap(cat =>\\n    $('Flatten Workflows').first().json.workflows.filter(item => item.category === cat)\\n  )\\n}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b3ad0e26-e495-4dae-bfdd-f65961178acc\",\n      \"name\": \"Flatten Workflows\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        500,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"17a82dd9-3fcf-44d9-b5da-bf89a1f53d59\",\n              \"name\": \"workflows\",\n              \"type\": \"array\",\n              \"value\": \"={{\\n$input.all().flatMap(item => item.json.data)\\n}}\"\n            }\n          ]\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"05f72731-f8b0-4d8f-ba78-66ef8fbaf059\",\n      \"name\": \"Remove Already Seen\",\n      \"type\": \"n8n-nodes-base.removeDuplicates\",\n      \"position\": [\n        1740,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"removeItemsSeenInPreviousExecutions\",\n        \"dedupeValue\": \"={{ $('For Each Subscriber').item.json.name.toSnakeCase() }}_{{ $json.workflow_id }}\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"3904d2a2-9a95-4e11-883e-b2e88c6a884f\",\n      \"name\": \"Workflow to Items\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        1560,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"workflows\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d416dee7-df0f-4579-a25f-6baed16453e8\",\n      \"name\": \"Combine Workflows\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1920,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3797dd21-3144-47e8-9359-841b97073001\",\n      \"name\": \"Has New Workflows?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1380,\n        -600\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"08403b2a-4ae6-4cf5-aa88-cc49441e3c56\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"lengthGt\",\n                \"rightType\": \"number\"\n              },\n              \"leftValue\": \"={{ $json.data }}\",\n              \"rightValue\": 0\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"0cd6ce35-c083-4db6-bc87-9d21e70a3bab\",\n      \"name\": \"With User Reference\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2100,\n        -280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"d69921eb-b518-4614-af63-e67a521ee373\",\n              \"name\": \"name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('For Each Subscriber').item.json.name }}\"\n            },\n            {\n              \"id\": \"01ee6e0a-9d03-42f6-ad46-68b9df861679\",\n              \"name\": \"email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('For Each Subscriber').item.json.email }}\"\n            },\n            {\n              \"id\": \"5263e512-1b24-43c8-9033-6547dab2811b\",\n              \"name\": \"categories\",\n              \"type\": \"array\",\n              \"value\": \"={{ $('For Each Subscriber').item.json.categories }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b3a616c7-615f-49ff-8e6f-530324a98be4\",\n      \"name\": \"Generate HTML Template\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        1740,\n        -720\n      ],\n      \"parameters\": {\n        \"html\": \"<h1>New Workflows for {{ $now.format('DD') }}</h1>\\n{{\\n$json.categories\\n  .filter(cat =>\\n    $json.data.filter(item => item.category === cat).length > 0\\n  )\\n  .map(category => `\\n    <h2>${category.toSentenceCase()}</h2>\\n    <ul>\\n    ${$json.data\\n      .filter(workflow => workflow.category === category)\\n      .map(workflow => `\\n      <li>\\n        <a href=\\\"https://n8n.io/workflows/${workflow.workflow_id}\\\">\\n          <h3>${workflow.workflow_name}</h3>\\n        </a>\\n        <p>\\n          by\\n          <a href=\\\"https://n8n.io/creators/${workflow.author_username}\\\">\\n            ${workflow.author_name}\\n          </a>\\n          &middot;\\n          created on ${DateTime.fromISO(workflow.workflow_created_at).toFormat('DD')}\\n        </p>\\n        <p>${workflow.workflow_desc}</p>\\n      </li>\\n    `).join('\\\\n')}\\n    </ul>\\n  `)\\n  .join('\\\\n')\\n}}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"0c9865c7-9352-4fda-a943-34c8f524de6c\",\n      \"name\": \"Parse Rows\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -660,\n        -540\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"d89dfc07-3c1f-4fbc-9a52-3748797a4840\",\n              \"name\": \"name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.name }}\"\n            },\n            {\n              \"id\": \"c622ceca-2e6d-4bab-bb08-235f704c7e2f\",\n              \"name\": \"email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.email }}\"\n            },\n            {\n              \"id\": \"9fca8e33-330a-4e4d-b461-251cd7e5c620\",\n              \"name\": \"categories\",\n              \"type\": \"array\",\n              \"value\": \"={{ $json.categories.split(',') }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"f5fbd7f2-65e5-4dd7-8e43-38a8a99e3321\",\n      \"name\": \"Send Daily Digest\",\n      \"type\": \"n8n-nodes-base.microsoftOutlook\",\n      \"position\": [\n        1920,\n        -720\n      ],\n      \"webhookId\": \"8cd83f97-1e5f-4280-9a9d-26d1ee05c45e\",\n      \"parameters\": {\n        \"subject\": \"=New Workflows for {{ $now.format('DD') }}\",\n        \"bodyContent\": \"={{\\n$json.html\\n  .replaceAll('\\\\n', '')\\n  .replaceAll('  ', '')\\n  .trim()\\n}}\",\n        \"toRecipients\": \"={{ $('Has New Workflows?').item.json.email }}\",\n        \"additionalFields\": {\n          \"from\": \"=no-reply <no-reply@example.com>\",\n          \"replyTo\": \"=no-reply <no-reply@example.com>\",\n          \"bodyContentType\": \"html\"\n        }\n      },\n      \"credentials\": {\n        \"microsoftOutlookOAuth2Api\": {\n          \"id\": \"EWg6sbhPKcM5y3Mr\",\n          \"name\": \"Microsoft Outlook account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e81ba3a0-e3f6-4231-8870-8ef03edf41e1\",\n      \"name\": \"Append Category\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        140,\n        -160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b965dee8-f3b5-419b-b39a-79bf2b7d04c1\",\n              \"name\": \"category\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Categories to Items').item.json.category }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"e1c2c743-a560-47e8-b906-a2e8fd17622f\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1060,\n        -740\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 440,\n        \"content\": \"## 1. Get Subscribers from Excel\\n[Learn more about the Excel node](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.microsoftexcel)\\n\\nExcel can be an easy way to store a simple list of subscribers who will receive our daily digest. We can also specify only the categories they are interested in.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e10a23be-2af7-4b92-9b5f-df855e6ee349\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -400,\n        -420\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 620,\n        \"height\": 220,\n        \"content\": \"## 2. Fetch Latest Templates from n8n\\n[Learn more about the HTTP Request node](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest)\\n\\nUsing the HTTP request node, we can call the n8n.io template search API to the latest published templates. However, to save on resources, we only want to fetch from categories relevant to our subscribers. To do so:\\n1) We only want to fetch latest templates from unique categories amongst all subscribers\\n2) Do this fetching once to later reference for all subscribers\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0ee0b2ca-0247-4471-a6f5-920fd8e67f96\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        500,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 580,\n        \"height\": 180,\n        \"content\": \"## 3. Generate AI Summary For Each Template\\n[Read more about the Basic LLM node](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.chainllm)\\n\\nWhen building our email digest, we'd rather have a shortened and summarized version of each template's description for easier scanning and reading. We can use AI to accomplish this and merge it with the template object.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ab234694-2878-440b-aeb5-37573ebe517e\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1680,\n        -60\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 580,\n        \"height\": 200,\n        \"content\": \"## 4. Filter Relevant Templates for Subscriber\\n[Read more about the Split Out node](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.splitout)\\n\\nFor each subscriber, we want to filter out our freshly collected n8n.io templates by the categories relevant to the subscriber as defined in the Excel sheet. A \\\"Remove duplicates\\\" node can be used to keep track of duplicate templates - as templates can have more than one category and appear twice!\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"460a8b3d-c125-41c3-95c5-afdfe63c7561\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1740,\n        -960\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 580,\n        \"height\": 200,\n        \"content\": \"## 5. Generate Daily Digest and Send Via Outlook\\n[Read more about the Outlook node](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.microsoftoutlook)\\n\\nFinally, we can construct our digest's content using the HTML node and customise it by subscriber as necessary. The Outlook node is then used to send the digest to the subscriber.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c79a2775-6276-41df-a9f0-64017e88a8c7\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -500,\n        0\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 200,\n        \"height\": 120,\n        \"content\": \"### Execute Once\\nThis node has been set to execute once rather than for each subscriber.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5290822e-b63b-4b73-8511-6a12e2387656\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -940,\n        -360\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 280,\n        \"height\": 120,\n        \"content\": \"### Columns\\n- name *(text)*\\n- email *(text)*\\n- categories *(text, comma-delimited)*\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"56acbd11-7fa5-44b8-b031-fcdeb6e44839\",\n      \"name\": \"For Each Subscriber\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        1180,\n        -460\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"6aef7efc-1bc7-4a1d-b0cb-459484b3d179\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1600,\n        -1400\n      ],\n      \"parameters\": {\n        \"width\": 500,\n        \"height\": 1000,\n        \"content\": \"## Try It Out!\\n### This n8n template builds a newsletter (\\\"daily digest\\\") delivery service which pulls and summarises the latest n8n.io template in select categories defined by subscribers.\\n\\nIt's scheduled to run once a day and sends the newsletter directly to subscriber via a nicely formatted email. If you've had trouble keeping up with the latest and greatest templates beign published daily, this workflow can save you a lot of time!\\n\\n### How it works\\n* A scheduled trigger pulls a list of subscribers (email and category preferences) from an Excel workbook.\\n* We work out unique categories amongst all subscribers and only fetch the latest n8n website templates from these categories to save on resources and optimise the number of API calls we make.\\n* The fetched templates are summarised via AI to produce a short description which is more suitable for our email format.\\n* For each subscriber, we filter and collect only the templates relevant to their category preferences (as defined in the Excel) and ensure that duplicate templates or those which have been \\\"seen before\\\" are omitted.\\n* A HTML node is then used to generate the email newsletter. HTML emails are the perfect format since we can add links back to the template.\\n* Finally, we use the Outlook node to send the email digest to the subscriber.\\n\\n### How to use\\n* Populate your Excel sheet with 3 columns: name, email and categories. Categories is a comma-delimited list of categories which match the n8n template website. The available categories are AI, SecOps, Sales, IT Ops, Marketing, Engineering, DevOps, Building Blocks, Design, Finance, HR, Other, Product and Support.\\n* To subscribe a new user, simply add their email to the Excel sheet with at least one category.\\n* To unsubscribe a user, remove them from the sheet.\\n* If you're not interested in paid templates, you may want to filter them out after fetching them.\\n\\n### Need Help?\\nJoin the [Discord](https://discord.com/invite/XPKeKXeB7d) or ask in the [Forum](https://community.n8n.io/)!\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For Each Subscriber\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For Each Category\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse Rows\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Unique Categories\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Collect Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Append Category\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For Each Category\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Subscribers\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse Rows\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Subscribers\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Combine Workflows\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"With User Reference\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Flatten Workflows\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"For Each Category\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Flatten Workflows\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Workflows to Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Workflow Summarizer\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Workflow to Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Remove Already Seen\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Has New Workflows?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate HTML Template\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Workflows to Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Workflow Summarizer\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Categories to Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch Latest 10 per Category\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"For Each Subscriber\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Has New Workflows?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Get Relevant Workflows\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Remove Already Seen\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Combine Workflows\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"With User Reference\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For Each Subscriber\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Workflow Summarizer\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Collect Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Unique Categories\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Categories to Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate HTML Template\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Daily Digest\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Relevant Workflows\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Workflow to Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetch Latest 10 per Category\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Append Category\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.microsoftExcel",
      "n8n-nodes-base.set",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.aggregate",
      "n8n-nodes-base.set",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.splitOut",
      "@n8n/n8n-nodes-langchain.chainLlm",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.removeDuplicates",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.aggregate",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.html",
      "n8n-nodes-base.set",
      "n8n-nodes-base.microsoftOutlook",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}