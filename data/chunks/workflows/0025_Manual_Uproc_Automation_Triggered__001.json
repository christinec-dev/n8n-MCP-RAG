{
  "source": "0025_Manual_Uproc_Automation_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": \"104\",\n  \"name\": \"location_by_ip\",\n  \"nodes\": [\n    {\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        440,\n        510\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Get Location By IP\",\n      \"type\": \"n8n-nodes-base.uproc\",\n      \"position\": [\n        850,\n        510\n      ],\n      \"parameters\": {\n        \"ip\": \"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"ip\\\"]}}\",\n        \"tool\": \"getLocationByIp\",\n        \"group\": \"geographic\",\n        \"additionalOptions\": {}\n      },\n      \"credentials\": {\n        \"uprocApi\": \"miquel-uproc\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"User in Spain?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1050,\n        510\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Get Location By IP\\\"].json[\\\"message\\\"][\\\"country_code\\\"]}}\",\n              \"value2\": \"ES\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Create IP and Email Item\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        640,\n        510\n      ],\n      \"parameters\": {\n        \"functionCode\": \"item.ip = \\\"83.46.131.46\\\";\\nitem.email = \\\"miquel@uproc.io\\\";\\n\\nreturn item;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Send English Email\",\n      \"type\": \"n8n-nodes-base.awsSes\",\n      \"position\": [\n        1270,\n        650\n      ],\n      \"parameters\": {\n        \"body\": \"Hi,\\n\\nThank you for your signup!\",\n        \"subject\": \"Welcome aboard\",\n        \"fromEmail\": \"sample@uproc.io\",\n        \"toAddresses\": [\n          \"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"email\\\"]}}\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"aws\": \"ses\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Send Spanish Email\",\n      \"type\": \"n8n-nodes-base.awsSes\",\n      \"position\": [\n        1270,\n        420\n      ],\n      \"parameters\": {\n        \"body\": \"Hola,\\n\\nÂ¡Gracias por registrarte!\",\n        \"subject\": \"Bienvenido a bordo\",\n        \"fromEmail\": \"sample@uproc.io\",\n        \"toAddresses\": [\n          \"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"email\\\"]}}\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"aws\": \"ses\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"User in Spain?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Spanish Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send English Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Location By IP\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"User in Spain?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create IP and Email Item\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create IP and Email Item\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Location By IP\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.uproc",
      "n8n-nodes-base.if",
      "n8n-nodes-base.functionItem",
      "n8n-nodes-base.awsSes",
      "n8n-nodes-base.awsSes"
    ],
    "trigger": null
  }
}