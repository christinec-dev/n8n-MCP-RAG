{
  "source": "1438_Extractfromfile_Manual_Process_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"f4f5d195bb2162a0972f737368404b18be694648d365d6c6771d7b4909d28167\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"b6cd232e-e82e-457b-9f03-c010b3eba148\",\n      \"name\": \"When clicking 'Test workflow'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -40,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2b734806-e3c0-4552-a491-54ca846ed3ac\",\n      \"name\": \"Extract from File\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        620,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"binaryToPropery\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2c199499-cc4f-405c-8560-765500b7acba\",\n      \"name\": \"Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        420,\n        0\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"18Ac2xorxirIBm9FNFDDB5aVUSPBCCg1U\",\n          \"cachedResultUrl\": \"https://drive.google.com/file/d/18Ac2xorxirIBm9FNFDDB5aVUSPBCCg1U/view?usp=drivesdk\",\n          \"cachedResultName\": \"Invoice-798FE2FA-0004.pdf\"\n        },\n        \"options\": {},\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"AUEpxwlqBJghNMtb\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"e3031c0c-f059-4f30-9684-10014a277d55\",\n      \"name\": \"Call Gemini 2.0 Flash with PDF Capabilities\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        880,\n        220\n      ],\n      \"parameters\": {\n        \"url\": \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n \\\"contents\\\": [\\n {\\n \\\"parts\\\": [\\n {\\n \\\"inline_data\\\": {\\n \\\"mime_type\\\": \\\"application/pdf\\\",\\n \\\"data\\\": \\\"{{ $json.data }}\\\"\\n }\\n },\\n {\\n \\\"text\\\": \\\"{{ $('Define Prompt').item.json.prompt }}\\\"\\n }\\n ]\\n }\\n ]\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"googlePalmApi\"\n      },\n      \"credentials\": {\n        \"anthropicApi\": {\n          \"id\": \"eOt6Ois0jSizRFMJ\",\n          \"name\": \"Anthropic Mira Account\"\n        },\n        \"googlePalmApi\": {\n          \"id\": \"IQrjvfoUd5LUft3b\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"135df716-32a1-47e8-9ed8-30c830b803d6\",\n      \"name\": \"Call Claude 3.5 Sonnet with PDF Capabilities\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        880,\n        -140\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.anthropic.com/v1/messages\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n \\\"model\\\": \\\"claude-3-5-sonnet-20241022\\\",\\n \\\"max_tokens\\\": 1024,\\n \\\"messages\\\": [{\\n \\\"role\\\": \\\"user\\\",\\n \\\"content\\\": [{\\n \\\"type\\\": \\\"document\\\",\\n \\\"source\\\": {\\n \\\"type\\\": \\\"base64\\\",\\n \\\"media_type\\\": \\\"application/pdf\\\",\\n \\\"data\\\": \\\"{{$json.data}}\\\"\\n }\\n },\\n {\\n \\\"type\\\": \\\"text\\\",\\n \\\"text\\\": \\\"{{ $('Define Prompt').item.json.prompt }}\\\"\\n }]\\n }]\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"anthropic-version\",\n              \"value\": \"2023-06-01\"\n            },\n            {\n              \"name\": \"content-type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"anthropicApi\"\n      },\n      \"credentials\": {\n        \"anthropicApi\": {\n          \"id\": \"eOt6Ois0jSizRFMJ\",\n          \"name\": \"Anthropic Mira Account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"5b8994d1-4bfd-4776-84ac-b3141aca6378\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -700,\n        -280\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 601,\n        \"height\": 585,\n        \"content\": \"## Workflow: Extract data from PDF with Claude 3.5 Sonnet or Gemini 2.0 Flash\\n\\n**Overview**\\n- This workflow helps you compare Claude 3.5 Sonnet and Gemini 2.0 Flash when extracting data from a PDF\\n- This workflow extracts and processes the data within a PDF in **one single step**, **instead of calling an OCR and then an LLM\\u201d**\\n\\n\\n**How it works**\\n- The initial 2 steps download the PDF and convert it to base64.\\n- This base64 string is then sent to both Claude 3.5 Sonnet and Gemini 2.0 Flash to extract information.\\n- This workflow is made to let you compare results, latency, and cost (in their dedicated dashboard).\\n\\n\\n**How to use it**\\n- Set up your Google Drive if not already done\\n- Select a document on your Google Drive\\n- Modify the prompt in \\\"Define Prompt\\\" to extract the information you need and transform it as wanted.\\n- Get a [Claude API key](https://console.anthropic.com/settings/keys) and/or [Gemini API key](https://aistudio.google.com/app/apikey)\\n- Note that you can deactivate one of the 2 API calls if you don't want to try both\\n- Test the Workflow\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"616241a9-6199-406b-88dc-0afc7d974250\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        820,\n        60\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 320,\n        \"height\": 360,\n        \"content\": \"You can output the result as JSON by adding the following:\\n```\\n\\\"generationConfig\\\": {\\n \\\"responseMimeType\\\": \\\"application/json\\\"\\n```\\nor even use a structured output.\\n[Check the documentation](https://ai.google.dev/gemini-api/docs/structured-output?lang=rest)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bbac8d3d-d68f-4aa2-a41a-b06f7de2317b\",\n      \"name\": \"Define Prompt\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        180,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"dba23ef5-95df-496a-8e24-c7c1544533d2\",\n              \"name\": \"prompt\",\n              \"type\": \"string\",\n              \"value\": \"Extract the VAT numbers for each country\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"3c2e7265-76e5-4911-a950-7e6b0c89ec5a\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        820,\n        -200\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 320,\n        \"height\": 240,\n        \"content\": \"You can force Claude to output JSON with [Prefill response format](https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/increase-consistency#prefill-claudes-response)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f2b46305-5200-486e-ad4d-ecc0d2a14314\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 380,\n        \"height\": 280,\n        \"content\": \"These 2 steps first download the PDF file, and then convert it to base64.\\nThis is required by both APIs to process the file.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e5dff70f-b55a-4c23-9025-765a7cf19c4a\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 220,\n        \"height\": 280,\n        \"content\": \"This prompt is used in both Gemini\\u2019s and Claude\\u2019s calls to define what information should be extracted and processed.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Define Prompt\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call Claude 3.5 Sonnet with PDF Capabilities\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Call Gemini 2.0 Flash with PDF Capabilities\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking 'Test workflow'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Define Prompt\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.extractFromFile",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}