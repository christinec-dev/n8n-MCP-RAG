{
  "source": "1579_Wait_Manual_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"OjwmaLrXhW4pO5ph\",\n  \"meta\": {\n    \"instanceId\": \"885b4fb4a6a9c2cb5621429a7b972df0d05bb724c20ac7dac7171b62f1c7ef40\"\n  },\n  \"name\": \"Structured Bulk Data Extract with Bright Data Web Scraper\",\n  \"tags\": [\n    {\n      \"id\": \"Kujft2FOjmOVQAmJ\",\n      \"name\": \"Engineering\",\n      \"createdAt\": \"2025-04-09T01:31:00.558Z\",\n      \"updatedAt\": \"2025-04-09T01:31:00.558Z\"\n    },\n    {\n      \"id\": \"ZOwtAMLepQaGW76t\",\n      \"name\": \"Building Blocks\",\n      \"createdAt\": \"2025-04-13T15:23:40.462Z\",\n      \"updatedAt\": \"2025-04-13T15:23:40.462Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"1bdca5ae-1e56-4cf2-a8dc-e135a6a2dfec\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -900,\n        -395\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"533968cd-1329-4a86-8875-478600ed82b7\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        200,\n        -470\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"6a7e5360-4cb5-4806-892e-5c85037fa71c\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.status }}\",\n              \"rightValue\": \"ready\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"83991fdf-0402-4de3-bbb5-7050e3e9fb62\",\n      \"name\": \"Set Snapshot Id\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -240,\n        -395\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"2c3369c6-9206-45d7-9349-f577baeaf189\",\n              \"name\": \"snapshot_id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.snapshot_id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"408a36af-decb-49b3-a95e-a2df0b6eea5f\",\n      \"name\": \"Download Snapshot\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        640,\n        -520\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.brightdata.com/datasets/v3/snapshot/{{ $json.snapshot_id }}\",\n        \"options\": {\n          \"timeout\": 10000\n        },\n        \"sendQuery\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"format\",\n              \"value\": \"json\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"kdbqXuxIR8qIxF7y\",\n          \"name\": \"Header Auth account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"9d6cd882-c287-46ca-bc1e-df6b995fc422\",\n      \"name\": \"Wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        420,\n        -295\n      ],\n      \"webhookId\": \"631cd5de-36b3-4264-88ae-45b30e2c2ccc\",\n      \"parameters\": {\n        \"amount\": 30\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"c9cf847a-6399-4c93-a901-30f1c0e7408a\",\n      \"name\": \"Check on the errors\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        420,\n        -520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"b267071c-7102-407b-a98d-f613bcb1a106\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.errors.toString() }}\",\n              \"rightValue\": \"0\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"b648614e-c33e-4818-8348-e95df56928c7\",\n      \"name\": \"Check Snapshot Status\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -20,\n        -395\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.brightdata.com/datasets/v3/progress/{{ $json.snapshot_id }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {}\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"kdbqXuxIR8qIxF7y\",\n          \"name\": \"Header Auth account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"408a1584-666f-471e-bfcd-c4d857319688\",\n      \"name\": \"Initiate a Webhook Notification\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1080,\n        -520\n      ],\n      \"parameters\": {\n        \"url\": \"https://webhook.site/daf9d591-a130-4010-b1d3-0c66f8fcf467\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"response\",\n              \"value\": \"={{ $json.data[0] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"6548a794-a4fd-4050-b07d-bc7ca4517882\",\n      \"name\": \"Aggregate JSON Response\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        860,\n        -520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c84e195c-edd2-4f59-8986-516d116b7352\",\n      \"name\": \"Set Dataset Id, Request URL\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -680,\n        -400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c16061c8-c829-4bd3-b335-e79c605665f2\",\n              \"name\": \"dataset_id\",\n              \"type\": \"string\",\n              \"value\": \"gd_l7q7dkf244hwjntr0\"\n            },\n            {\n              \"id\": \"a4594c55-e39e-4a9e-80d6-d39370001e20\",\n              \"name\": \"request\",\n              \"type\": \"string\",\n              \"value\": \"[{     \\\"url\\\": \\\"https://www.amazon.com/Quencher-FlowState-Stainless-Insulated-Smoothie/dp/B0CRMZHDG8\\\"   }]\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"ceae108e-ed78-40c5-8e58-7013591ccaad\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -900,\n        -700\n      ],\n      \"parameters\": {\n        \"width\": 520,\n        \"height\": 280,\n        \"content\": \"## Note\\n\\nDeals with the Amazon web scraping by utilizing Bright Data Web Scraper Product.\\n\\n\\n**Please make sure to set the Bright Data \\n -> Dataset Id, Request URL and update the Webhook Notification URL**\\n\\nRefer \\n- https://brightdata.com/products/web-scraper/ai\\n- https://brightdata.com/products/web-scraper\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1f55cffa-abd9-437b-bc9d-3fe0d8b02454\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -120,\n        -600\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 720,\n        \"height\": 500,\n        \"content\": \"## Wait until the Snapshot is ready\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d8ba0f62-80a9-4e66-b70c-086ee5992df6\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -900,\n        -220\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 660,\n        \"content\": \"## Who can benefit?\\nData analysts, scientists, engineers, and developers seeking efficient methods to collect and analyze web data for AI, ML, big data applications, and more will find Scraper APIs particularly beneficial.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7fdffafd-f256-4760-b001-a42b5198dbad\",\n      \"name\": \"Create a binary data\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        1100,\n        -720\n      ],\n      \"parameters\": {\n        \"functionCode\": \"items[0].binary = {\\n  data: {\\n    data: new Buffer(JSON.stringify(items[0].json, null, 2)).toString('base64')\\n  }\\n};\\nreturn items;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"934ab31a-cfb9-4e97-8d86-92cd95dd219c\",\n      \"name\": \"Write the file to disk\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"position\": [\n        1320,\n        -720\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fileName\": \"d:\\\\bulk_data.json\",\n        \"operation\": \"write\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1130523a-b598-425e-acf1-417ae8699f66\",\n      \"name\": \"HTTP Request to the specified URL\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -460,\n        -395\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.brightdata.com/datasets/v3/trigger\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={{ $json.request }}\",\n        \"sendBody\": true,\n        \"sendQuery\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"dataset_id\",\n              \"value\": \"={{ $json.dataset_id }}\"\n            },\n            {\n              \"name\": \"format\",\n              \"value\": \"json\"\n            },\n            {\n              \"name\": \"uncompressed_webhook\",\n              \"value\": \"true\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {}\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"kdbqXuxIR8qIxF7y\",\n          \"name\": \"Header Auth account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"8fb2eb85-ffd6-4632-9668-00f29bc91c34\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check on the errors\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Snapshot Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Snapshot Id\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Snapshot Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Snapshot\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate JSON Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check on the errors\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Snapshot\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create a binary data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Write the file to disk\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check Snapshot Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate JSON Response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Initiate a Webhook Notification\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Create a binary data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Dataset Id, Request URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request to the specified URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request to the specified URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Snapshot Id\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Dataset Id, Request URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.if",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.aggregate",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.function",
      "n8n-nodes-base.readWriteFile",
      "n8n-nodes-base.httpRequest"
    ],
    "trigger": null
  }
}