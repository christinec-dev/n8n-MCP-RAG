{
  "source": "0440_HTTP_Stickynote_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"cb484ba7b742928a2048bf8829668bed5b5ad9787579adea888f05980292a4a7\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"1f506d0f-e999-409c-8456-d77d1771a2f3\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        740,\n        120\n      ],\n      \"webhookId\": \"a8877bd7-8364-4868-9f88-d9080cce0cb1\",\n      \"parameters\": {\n        \"path\": \"slack-trigger\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d5bdebab-cb97-44b5-8f85-e2bc71c0b7fb\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        220,\n        -100\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 446,\n        \"height\": 321,\n        \"content\": \"## Needed pre-work: Add a Slack App\\n1. Visit https://api.slack.com/apps, click on `New App` and choose a name and workspace.\\n2. Click on `OAuth & Permissions` and scroll down to Scopes -> Bot token Scopes\\n3. Add the `chat:write` scope\\n4. Head over to `Slash Commands` and click on `Create New Command`\\n5. Use `/idea` as the command\\n6. Copy the test URL from the **Webhook** node into `Request URL`\\n7. Add whatever feels best to the description and usage hint\\n8. Go to `Install app` and click install\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fa0734a5-6794-4ba8-9675-b54ba9ddf6e8\",\n      \"name\": \"Notion\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1620,\n        20\n      ],\n      \"parameters\": {\n        \"title\": \"={{ $json.body.text }}\",\n        \"options\": {},\n        \"resource\": \"databasePage\",\n        \"databaseId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $('Set me up').first().json['Notion URL'] }}\"\n        },\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"Creator|rich_text\",\n              \"textContent\": \"={{ $json.body.user_name }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"1exvaAn7wzyBgkXZ\",\n          \"name\": \"Nik's Notion Cred\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"28116568-f19c-47b3-9cd2-e08032db4dd5\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1360,\n        120\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"New idea\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.body.command }}\",\n                    \"rightValue\": \"/idea\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Add more here\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"25221a2c-18e9-47f6-a112-0edc85b63cda\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.body.command }}\",\n                    \"rightValue\": \"/some-other-command\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"8a153fab-dd1a-4108-8522-766b09b4caf3\",\n      \"name\": \"Hidden message to add feature details\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1840,\n        20\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('Webhook').item.json.body.response_url }}\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"text\",\n              \"value\": \"=Thanks for adding the idea `{{ $('Webhook').item.json[\\\"body\\\"][\\\"text\\\"] }}` <@{{$('Webhook').item.json[\\\"body\\\"][\\\"user_id\\\"]}}> :rocket: Please make sure to add some details and a hypothesis to it to make it easier for us to work with it.\\n\\n:point_right: <{{$json[\\\"url\\\"]}}|Add your details here>\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"68d6136b-291f-4e17-b07f-da3672b6622f\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        920,\n        -315\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 331,\n        \"height\": 422.85671270290686,\n        \"content\": \"## Setup\\n1. Add a Database in Notion with the columns `Name` and `Creator`\\n2. Add your Notion credentials and add the integration to your Notion page.\\n3. Fill the setup node below\\n4. Create your slack app (*see other sticky*)\\n5. Click `Test` workflow and use the `/idea` comment in Slack\\n6. Activate the workflow and exchange the Request URL with the production URL from the webhook\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4a2d6224-352a-4625-b4ae-bc856b2602fd\",\n      \"name\": \"Set me up\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1020,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"9bcc3fa7-a09e-48f0-b4ff-2c78264dec2d\",\n              \"name\": \"Notion URL\",\n              \"type\": \"string\",\n              \"value\": \"https://www.notion.so/n8n/12f1bb41e54345f6bdbe85085a67a5a9?v=72d337e995204017a24aa648edb5e7cc\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"89dc4c0d-7fab-4a6f-b8e9-65a0701c7d49\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1300,\n        40\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 237.2740046838409,\n        \"content\": \"You can easily support more commands, like `/bug` or `/pain` here\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {\n    \"Webhook\": [\n      {\n        \"body\": {\n          \"text\": \"Some name\",\n          \"token\": \"OROQZiopO3NiQVLFg0muEISq\",\n          \"command\": \"/idea\",\n          \"team_id\": \"TG9695PUK\",\n          \"user_id\": \"U047V1J0E7J\",\n          \"user_name\": \"niklas\",\n          \"api_app_id\": \"A06MQ8S7QM6\",\n          \"channel_id\": \"C04KYPACRJA\",\n          \"trigger_id\": \"6718698191332.553213193971.2b472ec4e6e0fb9094507f09a98d01e7\",\n          \"team_domain\": \"n8nio\",\n          \"channel_name\": \"nik-wf-testing\",\n          \"response_url\": \"https://hooks.slack.com/commands/TG9695PUK/6701685292247/8Q0IUAqaVcycw4skTzdYLSx3\",\n          \"is_enterprise_install\": \"false\"\n        },\n        \"query\": {},\n        \"params\": {},\n        \"headers\": {\n          \"host\": \"internal.users.n8n.cloud\",\n          \"accept\": \"application/json,*/*\",\n          \"x-real-ip\": \"10.255.0.2\",\n          \"user-agent\": \"Slackbot 1.0 (+https://api.slack.com/robots)\",\n          \"content-type\": \"application/x-www-form-urlencoded\",\n          \"content-length\": \"420\",\n          \"accept-encoding\": \"gzip,deflate\",\n          \"x-forwarded-for\": \"10.255.0.2\",\n          \"x-forwarded-host\": \"internal.users.n8n.cloud\",\n          \"x-forwarded-port\": \"443\",\n          \"x-forwarded-proto\": \"https\",\n          \"x-slack-signature\": \"v0=9fb3ff0c0b84fd7ec95a0847b38c365124c8294b451dd29941d8fcd85fbd0eb9\",\n          \"x-forwarded-server\": \"3d9f11a36e52\",\n          \"x-slack-request-timestamp\": \"1709130534\"\n        }\n      }\n    ]\n  },\n  \"connections\": {\n    \"Notion\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Hidden message to add feature details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Notion\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set me up\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}