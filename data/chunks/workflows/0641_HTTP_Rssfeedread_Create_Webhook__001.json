{
  "source": "0641_HTTP_Rssfeedread_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"25a28584-ae1b-4d14-9261-80be8f3c6727\",\n      \"name\": \"Create Post\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        520,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"https://bsky.social/xrpc/com.atproto.repo.createRecord\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"neverError\": true,\n              \"responseFormat\": \"json\"\n            }\n          }\n        },\n        \"jsonBody\": \"={\\n  \\\"repo\\\": \\\"{{ $node['Create Session'].json['did'] }}\\\",\\n  \\\"collection\\\": \\\"app.bsky.feed.post\\\",\\n  \\\"record\\\": {\\n    \\\"text\\\": {{ JSON.stringify($node['RSS Feed Trigger'].json['content:encodedSnippet']) }},\\n    \\\"$type\\\": \\\"app.bsky.feed.post\\\",\\n    \\\"embed\\\": {\\n      \\\"$type\\\": \\\"app.bsky.embed.external\\\",\\n      \\\"external\\\": {\\n          \\\"uri\\\": \\\"{{ $node['RSS Feed Trigger'].json['link'] }}\\\",\\n          \\\"title\\\": \\\"{{ $node['RSS Feed Trigger'].json['lintitlek'] }}\\\",\\n          \\\"description\\\": \\\"{{ $node['RSS Feed Trigger'].json['contentSnippet'] }}\\\",\\n          \\\"thumb\\\": {\\n            \\\"$type\\\": \\\"{{ $json.blob.$type }}\\\",\\n            \\\"ref\\\": {\\n              \\\"$link\\\": \\\"{{ $json['blob']['ref']['$link'] }}\\\"\\n            },\\n            \\\"mimeType\\\": \\\"{{ $json.blob.mimeType }}\\\",\\n            \\\"size\\\": {{ $json.blob.size }}\\n          }\\n        }\\n    },\\n    \\\"createdAt\\\": \\\"{{ $node['Get current datetime'].json['currentDate'] }}\\\",\\n    \\\"langs\\\": [ \\\"es-ES\\\" ]\\n  }\\n}\\n\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json[\\\"accessJwt\\\"] }}\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"b9d02b7f-f73d-4b53-a1ef-c693a0847bb2\",\n      \"name\": \"Upload image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        320,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"https://bsky.social/xrpc/com.atproto.repo.uploadBlob\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"binaryData\",\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json[\\\"accessJwt\\\"] }}\"\n            },\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"={{ $json.enclosure.type }}\"\n            }\n          ]\n        },\n        \"inputDataFieldName\": \"data\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"3593c517-03af-483f-b0d3-c538840a55d9\",\n      \"name\": \"Download image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        120,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('RSS Feed Trigger').item.json.enclosure.url }}\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"file\"\n            }\n          }\n        }\n      },\n      \"typeVersion\": 4.2,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"71edf797-6aac-44dd-b988-a8b7e5667bac\",\n      \"name\": \"Create Session\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -320,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"https://bsky.social/xrpc/com.atproto.server.createSession\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"identifier\",\n              \"value\": \"<your username here>\"\n            },\n            {\n              \"name\": \"password\",\n              \"value\": \"<your app password here>\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"c28b280f-c169-4f03-9f93-20655cc0c095\",\n      \"name\": \"RSS Feed Trigger\",\n      \"type\": \"n8n-nodes-base.rssFeedReadTrigger\",\n      \"position\": [\n        -580,\n        0\n      ],\n      \"parameters\": {\n        \"feedUrl\": \"<your feed URL here>\",\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1217c82c-694a-48dd-82d3-2ca5c24891c7\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -380,\n        -120\n      ],\n      \"parameters\": {\n        \"width\": 220,\n        \"height\": 300,\n        \"content\": \"### Configure your credentials\\nCreate [an app password](https://bsky.app/settings/app-passwords) first\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5e08fd12-8ba0-4c58-b813-0ffefb5be37c\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        460,\n        -120\n      ],\n      \"parameters\": {\n        \"width\": 210,\n        \"height\": 300,\n        \"content\": \"### Customize the text \\nYou can customize the message text here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3c472b8f-928a-44bc-b75d-56c7b263f490\",\n      \"name\": \"Get current datetime\",\n      \"type\": \"n8n-nodes-base.dateTime\",\n      \"position\": [\n        -100,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"5d9905af-1194-41ff-acfd-773611092bee\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        60,\n        -120\n      ],\n      \"parameters\": {\n        \"width\": 220,\n        \"height\": 300,\n        \"content\": \"### Image preview \\nBy default retrieved from the feed, but you can configure a custom one here from an URL\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"faeaf1bd-560e-4606-8a67-48ae8a18f17a\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -140,\n        -400\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 420,\n        \"height\": 180,\n        \"content\": \"## Post new RSS feed items as BlueSky posts\\nThis will create a BlueSky post with each new RSS feed item, including the feed title, post image, link and content (up to 200 characters)\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Upload image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Post\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Session\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get current datetime\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"RSS Feed Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Session\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get current datetime\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.rssFeedReadTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.dateTime",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "rss feed trigger"
  }
}