{
  "source": "1721_Splitout_Manual_Automate_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"UuuCIDvTNnloIlvq\",\n  \"meta\": {\n    \"instanceId\": \"885b4fb4a6a9c2cb5621429a7b972df0d05bb724c20ac7dac7171b62f1c7ef40\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Automate Etsy Data Mining with Bright Data Scrape & Google Gemini\",\n  \"tags\": [\n    {\n      \"id\": \"Kujft2FOjmOVQAmJ\",\n      \"name\": \"Engineering\",\n      \"createdAt\": \"2025-04-09T01:31:00.558Z\",\n      \"updatedAt\": \"2025-04-09T01:31:00.558Z\"\n    },\n    {\n      \"id\": \"ddPkw7Hg5dZhQu2w\",\n      \"name\": \"AI\",\n      \"createdAt\": \"2025-04-13T05:38:08.053Z\",\n      \"updatedAt\": \"2025-04-13T05:38:08.053Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"f369feaf-4782-4411-9d08-fe91b9ffd97e\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        200,\n        -555\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"231bae3c-c27e-49fc-b878-2d5cc1e14c5a\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        200,\n        -1020\n      ],\n      \"parameters\": {\n        \"width\": 400,\n        \"height\": 300,\n        \"content\": \"## Note\\n\\nDeals with the Esty web scraping by utilizing the Bright Data Web Unlocker Product.\\n\\nThe Information Extraction node being used to demonstrate the usage of the N8N AI capabilities.\\n\\n**Please make sure to set the Indeed search query and update the Webhook Notification URL**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f568de40-b389-41f9-afe9-5e09a291c367\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        -1020\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"height\": 300,\n        \"content\": \"## LLM Usages\\n\\nGoogle Gemini Flash Exp model is being used.\\n\\nBasic LLM Chain Data Extractor.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4f1db865-a0cb-4978-9c7d-fde448bd978a\",\n      \"name\": \"Set Esty Search Query\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        420,\n        -555\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"3aedba66-f447-4d7a-93c0-8158c5e795f9\",\n              \"name\": \"url\",\n              \"type\": \"string\",\n              \"value\": \"https://www.etsy.com/search?q=wall+art+for+mum&order=date_desc&page=1&ref=pagination\"\n            },\n            {\n              \"id\": \"4e7ee31d-da89-422f-8079-2ff2d357a0ba\",\n              \"name\": \"zone\",\n              \"type\": \"string\",\n              \"value\": \"web_unlocker1\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"4cb51368-bb69-4d99-a0b6-e8e8013f1dfd\",\n      \"name\": \"Perform Esty Web Request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        640,\n        -680\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.brightdata.com/request\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"zone\",\n              \"value\": \"={{ $json.zone }}\"\n            },\n            {\n              \"name\": \"url\",\n              \"value\": \"={{ $json.url }}?product=unlocker&method=api\"\n            },\n            {\n              \"name\": \"format\",\n              \"value\": \"raw\"\n            },\n            {\n              \"name\": \"data_format\",\n              \"value\": \"markdown\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {}\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"kdbqXuxIR8qIxF7y\",\n          \"name\": \"Header Auth account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"9fb7bdc5-ba64-4df4-89b4-a3207e7f6d0e\",\n      \"name\": \"Google Gemini Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        948,\n        -460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-2.0-flash-exp\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"YeO7dHZnuGBVQKVZ\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1f95576d-e243-481d-9d5f-308764d8ea4b\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        1460,\n        -680\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"47f23aa1-63ee-49e3-a465-283c7ab71b76\",\n      \"name\": \"Perform Esty web request over the loop\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1680,\n        -560\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.brightdata.com/request\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"zone\",\n              \"value\": \"=web_unlocker1\"\n            },\n            {\n              \"name\": \"url\",\n              \"value\": \"={{ $json.url }}&product=unlocker\"\n            },\n            {\n              \"name\": \"format\",\n              \"value\": \"raw\"\n            },\n            {\n              \"name\": \"data_format\",\n              \"value\": \"markdown\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {}\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"kdbqXuxIR8qIxF7y\",\n          \"name\": \"Header Auth account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"0b5ea206-a5a0-49b5-8f53-10b4dec5806c\",\n      \"name\": \"Initiate a Webhook Notification for the extracted data\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2320,\n        -560\n      ],\n      \"parameters\": {\n        \"url\": \"https://webhook.site/3c36d7d1-de1b-4171-9fd3-643ea2e4dd76\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"summary\",\n              \"value\": \"={{ $json.output }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"a164b90b-f44c-4862-b010-d515926774c7\",\n      \"name\": \"Extract Item List with the Product Info\",\n      \"type\": \"@n8n/n8n-nodes-langchain.informationExtractor\",\n      \"position\": [\n        1920,\n        -560\n      ],\n      \"parameters\": {\n        \"text\": \"=Extract the product info in JSON\\n\\n{{ $json.data }}\",\n        \"options\": {},\n        \"schemaType\": \"fromJson\",\n        \"jsonSchemaExample\": \"[{\\n    \\\"image\\\": \\\"https://i.etsystatic.com/34923795/r/il/8f3bba/5855230678/il_fullxfull.5855230678_n9el.jpg\\\",\\n    \\\"name\\\": \\\"Custom Coffee Mug with Photo\\\",\\n    \\\"url\\\": \\\"https://www.etsy.com/listing/1193808036/custom-coffee-mug-with-photo\\\",\\n    \\\"brand\\\": {\\n        \\\"@type\\\": \\\"Brand\\\",\\n        \\\"name\\\": \\\"TheGiftBucks\\\"\\n    },\\n    \\\"offers\\\": {\\n        \\\"@type\\\": \\\"Offer\\\",\\n        \\\"price\\\": \\\"14.99\\\",\\n        \\\"priceCurrency\\\": \\\"USD\\\"\\n    }\\n}]\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c3798c64-ac53-44c8-ba91-8fe33377113d\",\n      \"name\": \"Google Gemini Chat Model for product info\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        2000,\n        -300\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-2.0-flash-exp\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"YeO7dHZnuGBVQKVZ\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"11e4ae42-d2e1-4a4b-adcf-382f9e494431\",\n      \"name\": \"Extract Paginated Resultset\",\n      \"type\": \"@n8n/n8n-nodes-langchain.informationExtractor\",\n      \"position\": [\n        860,\n        -680\n      ],\n      \"parameters\": {\n        \"text\": \"=Analyze and Extract the below content. Make sure to produce a unique resultset. Exclude page_numbers which are not numbers.\\n\\n {{ $json.data }}\",\n        \"options\": {},\n        \"schemaType\": \"manual\",\n        \"inputSchema\": \"{\\n  \\\"$schema\\\": \\\"http://json-schema.org/schema#\\\",\\n  \\\"title\\\": \\\"PagedResultSetSchema\\\",\\n  \\\"type\\\": \\\"array\\\",\\n  \\\"items\\\": {\\n    \\\"type\\\": \\\"object\\\",\\n    \\\"properties\\\": {\\n      \\\"page_number\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"description\\\": \\\"Page number, typically a string (e.g., '1', '2', 'next').\\\"\\n      },\\n      \\\"url\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"format\\\": \\\"uri\\\",\\n        \\\"description\\\": \\\"URL pointing to the page.\\\"\\n      }\\n    },\\n    \\\"required\\\": [\\\"page_number\\\", \\\"url\\\"],\\n    \\\"additionalProperties\\\": false\\n  }\\n}\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"28c1822b-d51c-4f8e-b98e-2e12324397be\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1400,\n        -780\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1340,\n        \"height\": 620,\n        \"content\": \"## Loop and Perform Paginated Esty Data Extraction\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d4f18f2b-9825-4320-addb-c02bfdc4da97\",\n      \"name\": \"Write the scraped content to disk\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"position\": [\n        2560,\n        -760\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fileName\": \"=d:\\\\Esty-Scraped-Content-{{ $('Loop Over Items').item.json.page_number }}.json\",\n        \"operation\": \"write\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5555407d-c7dd-4e5c-83ab-ef6ba9c46da3\",\n      \"name\": \"Create a binary data\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        2360,\n        -760\n      ],\n      \"parameters\": {\n        \"functionCode\": \"items[0].binary = {\\n  data: {\\n    data: new Buffer(JSON.stringify(items[0].json, null, 2)).toString('base64')\\n  }\\n};\\nreturn items;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2f7a5fab-a2f4-422e-8f83-ce50fbe2a738\",\n      \"name\": \"Split Out\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        1240,\n        -680\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"output\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3d7a8992-b8d4-4a86-b60b-a92a7d63e31b\",\n      \"name\": \"Extract Paginated Resultset With OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.informationExtractor\",\n      \"position\": [\n        880,\n        -120\n      ],\n      \"parameters\": {\n        \"text\": \"=Analyze and Extract the below content. Make sure to produce a unique resultset. Exclude page_numbers which are not numbers.\\n\\n {{ $json.data }}\",\n        \"options\": {},\n        \"schemaType\": \"manual\",\n        \"inputSchema\": \"{\\n  \\\"$schema\\\": \\\"http://json-schema.org/schema#\\\",\\n  \\\"title\\\": \\\"PagedResultSetSchema\\\",\\n  \\\"type\\\": \\\"array\\\",\\n  \\\"items\\\": {\\n    \\\"type\\\": \\\"object\\\",\\n    \\\"properties\\\": {\\n      \\\"page_number\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"description\\\": \\\"Page number, typically a string (e.g., '1', '2', 'next').\\\"\\n      },\\n      \\\"url\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"format\\\": \\\"uri\\\",\\n        \\\"description\\\": \\\"URL pointing to the page.\\\"\\n      }\\n    },\\n    \\\"required\\\": [\\\"page_number\\\", \\\"url\\\"],\\n    \\\"additionalProperties\\\": false\\n  }\\n}\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"aa42d335-67bc-4dc5-a68a-4ce93e05464a\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        880,\n        80\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"vPKynKbDzJ5ZU4cU\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"82df0ccc-3065-4bb5-a48e-90e4dbf2162f\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        -260\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 660,\n        \"height\": 460,\n        \"content\": \"## Open AI Extraction (Optional)\\nNote - Replace the above workflow with the Open AI Chat Model if needed\\nPlease make sure to set the OpenAI Chat Model -> Credential to connect with **OpenAi Account**\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"40a1bbd5-05b2-41c2-8b3c-72e3f16fd13a\",\n  \"connections\": {\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Perform Esty web request over the loop\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Extract Paginated Resultset With OpenAI\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create a binary data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Write the scraped content to disk\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Esty Search Query\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Perform Esty Web Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Extract Paginated Resultset\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Perform Esty Web Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract Paginated Resultset\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Paginated Resultset\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Esty Search Query\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Perform Esty web request over the loop\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract Item List with the Product Info\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Item List with the Product Info\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Initiate a Webhook Notification for the extracted data\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Create a binary data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model for product info\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Extract Item List with the Product Info\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Initiate a Webhook Notification for the extracted data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "@n8n/n8n-nodes-langchain.informationExtractor",
      "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "@n8n/n8n-nodes-langchain.informationExtractor",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.readWriteFile",
      "n8n-nodes-base.function",
      "n8n-nodes-base.splitOut",
      "@n8n/n8n-nodes-langchain.informationExtractor",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}