{
  "source": "1669_Manual_Openai_Automation_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": \"Lwvu2jjMU2irTyAY\",\n  \"meta\": {\n    \"instanceId\": \"fb924c73af8f703905bc09c9ee8076f48c17b596ed05b18c0ff86915ef8a7c4a\"\n  },\n  \"name\": \"Summarize Google Sheets form feedback via OpenAI's GPT-4\",\n  \"tags\": [\n    {\n      \"id\": \"y9tvM3hISJKT2jeo\",\n      \"name\": \"Ted's Tech Talks\",\n      \"createdAt\": \"2023-08-15T22:12:34.260Z\",\n      \"updatedAt\": \"2023-08-15T22:12:34.260Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"cd80cd2f-a6e1-48eb-ba05-0f8f1a0875e5\",\n      \"name\": \"When clicking \\\"Test workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        680,\n        320\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9f03f1c4-c47e-4eda-bc0a-a598c21e4616\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        130\n      ],\n      \"parameters\": {\n        \"width\": 369.1031874662338,\n        \"height\": 349,\n        \"content\": \"### 1. Create a Google Sheet document\\n* This tutorial uses Google Sheet document connected to Google Forms, but a standalone Sheet document will work too\\n* Adapt initial trigger to your needs: run manually or at some time intervals\\n\\n[Link to the Google Sheets template](https://docs.google.com/spreadsheets/d/1Kcr1oF_RrfNQJczmJDpwClOSYpvSnwbeX-_pdUo91-I/edit?usp=sharing)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1e478f81-76e7-4fc3-a147-11a92d3f9998\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1040,\n        160\n      ],\n      \"parameters\": {\n        \"width\": 394,\n        \"height\": 319,\n        \"content\": \"### 2. Combine all answers into an array\\n* Since the main goal is to provide an overall summary, we need to combine all answers for each Google Form question\\n* Aggregate Node takes multiple incoming items and produces just a single item which contains arrays of user feedback\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1ab06b51-3b9e-4a4c-afba-c98e529a636c\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1480,\n        160\n      ],\n      \"parameters\": {\n        \"width\": 432,\n        \"height\": 319,\n        \"content\": \"### 3. Generate a summary report\\n* Enter a __system message__ with a overall instructions on how to analyze the feedback form\\n* Provide a __user message__ with JSON arrays.\\n\\n__NB! Consider splitting the form questions for a very long forms or when the number of responses is too high__\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ce0118a3-4eaf-4d60-adf0-5bde5d41328a\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1940,\n        160\n      ],\n      \"parameters\": {\n        \"width\": 359.1031874662346,\n        \"height\": 319,\n        \"content\": \"### 4. Convert to HTML and send an email\\n* GPT is configured to reply in Markdown format. Markdown Node converts such text into HTML\\n* Finally, the Gmail node sends a message with HTML report\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"37bc8ab5-328c-4f50-bbda-f7482bf36522\",\n      \"name\": \"Get Google Sheets records\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        860,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 2035968519,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1Kcr1oF_RrfNQJczmJDpwClOSYpvSnwbeX-_pdUo91-I/edit#gid=2035968519\",\n          \"cachedResultName\": \"Form Responses 1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1Kcr1oF_RrfNQJczmJDpwClOSYpvSnwbeX-_pdUo91-I\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1Kcr1oF_RrfNQJczmJDpwClOSYpvSnwbeX-_pdUo91-I/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Event feedback form (Responses)\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"RtRiRezoxiWkzZQt\",\n          \"name\": \"Ted's Tech Talks Google account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"d75b11b1-2cce-40c2-ab5a-d18fdf7f5283\",\n      \"name\": \"Aggregate responses into arrays\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1200,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToAggregate\": {\n          \"fieldToAggregate\": [\n            {\n              \"fieldToAggregate\": \"['What went great?']\"\n            },\n            {\n              \"fieldToAggregate\": \"['How can we improve?']\"\n            },\n            {\n              \"fieldToAggregate\": \"['What is the chance of recommending our event?']\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a90f83fe-809b-42db-b65d-43fb11b2979a\",\n      \"name\": \"Summarize via GPT model\",\n      \"type\": \"n8n-nodes-base.openAi\",\n      \"position\": [\n        1620,\n        320\n      ],\n      \"parameters\": {\n        \"prompt\": {\n          \"messages\": [\n            {\n              \"role\": \"system\",\n              \"content\": \"Your task is to summarize event feedback form responses. You will receive answers on three questions:\\n1. What went great?\\n2. How can we improve?\\n3. What is the chance of recommending our event?\\n\\nEach questions has several answers separated by | character.\\nAnalyze each question and prepare a summary report. It should contain an overall sentiment regarding the event, followed by the constructive ideas of what to improve.\\n\\nReply in Markdown formatting\"\n            },\n            {\n              \"content\": \"=1. What went great: ```{{ $json['What went great?'].join(' | ') }}```\\n2. How can we improve: ```{{ $json['How can we improve?'].join(' | ') }}```\\n3. What is the chance of recommending our event: ```{{ $json['What is the chance of recommending our event?'].join(' | ') }}```\"\n            }\n          ]\n        },\n        \"options\": {\n          \"temperature\": 0.3\n        },\n        \"resource\": \"chat\",\n        \"chatModel\": \"gpt-4-turbo-preview\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"rveqdSfp7pCRON1T\",\n          \"name\": \"Ted's Tech Talks OpenAi\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"2c8d4e46-9d3e-4655-952b-37d04f673914\",\n      \"name\": \"Convet from Markdown to HTML\",\n      \"type\": \"n8n-nodes-base.markdown\",\n      \"position\": [\n        1980,\n        320\n      ],\n      \"parameters\": {\n        \"mode\": \"markdownToHtml\",\n        \"options\": {\n          \"completeHTMLDocument\": false\n        },\n        \"markdown\": \"={{ $json.message.content }}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a27d8664-dc87-4458-9f12-970b88ab6515\",\n      \"name\": \"Send via Gmail\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        2160,\n        320\n      ],\n      \"parameters\": {\n        \"sendTo\": \"teds.tech.talks@gmail.com\",\n        \"message\": \"={{ $json.data }}\",\n        \"options\": {\n          \"appendAttribution\": false\n        },\n        \"subject\": \"Feedback form response\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"UllrXlZsDnkdA3tT\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"756cdd85-49dd-4f0f-acc7-58f834a3512f\",\n  \"connections\": {\n    \"Summarize via GPT model\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convet from Markdown to HTML\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Google Sheets records\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate responses into arrays\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convet from Markdown to HTML\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send via Gmail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Test workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Google Sheets records\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate responses into arrays\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Summarize via GPT model\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.aggregate",
      "n8n-nodes-base.openAi",
      "n8n-nodes-base.markdown",
      "n8n-nodes-base.gmail"
    ],
    "trigger": null
  }
}