{
  "source": "1533_Telegram_Splitout_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"KgoL0qrLYZUJFuAS\",\n  \"meta\": {\n    \"instanceId\": \"53cd73f110e7e1f0aa170e039c302b8f2a1790f1200f176610cac2d761dfa4b7\"\n  },\n  \"name\": \"Summarize YouTube Videos & Chat About Content with GPT-4o-mini via Telegram\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"a9cb4358-f9ec-4d81-9422-f1b7133f1f2a\",\n      \"name\": \"Split Transcript into Segments\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        800,\n        680\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"transcript\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"03650773-fd85-4ecb-a218-0d18e2f88e68\",\n      \"name\": \"Extract YouTube URL from Input\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        580,\n        220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"3ee42e4c-3cee-4934-97e7-64c96b5691ed\",\n              \"name\": \"youtubeUrl\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.chatInput || $json.query.url}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"9b55683c-6b04-44e6-8af2-ef69a50e783a\",\n      \"name\": \"Extract Video ID from URL\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        580,\n        460\n      ],\n      \"parameters\": {\n        \"language\": \"python\",\n        \"pythonCode\": \"# Loop over input items and add a new field called 'myNewField' to the JSON of each one\\nfor item in _input.all():\\n  item.json.myNewField = 1\\nreturn _input.all()\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"8552bb5d-c857-4a4e-b97b-7482b5e97244\",\n      \"name\": \"gpt-4o-mini\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1280,\n        960\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"ZjnhmdYT28d52ebY\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5cea6925-cbf7-47a4-9a26-45f42f91c074\",\n      \"name\": \"Generate Summary with GPT-4o-mini\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        1260,\n        760\n      ],\n      \"parameters\": {\n        \"text\": \"=Please analyze the given text and create a structured summary following these guidelines:\\n\\n1. *General Summary*:\\n   - Provide a concise overview of the main topic or purpose of the text in one paragraph.\\n   - Focus on the essence of the content without excessive detail.\\n\\n2. *Key Moments*:\\n   - List the most important points, events, or concepts from the text.\\n   - Use bullet points for clarity.\\n   - Keep each point short and focused.\\n   - Highlight key terms using HTML bold tags (<b>term</b>).\\n\\n3. *Instructions (if applicable)*:\\n   - If the text is a tutorial or instructional, list the steps in a clear order.\\n   - Use numbered points for steps.\\n   - If not applicable, state: \\\"This text does not contain instructions.\\\"\\n\\n4. *Format requirements*:\\n   - Use markdown for headers (e.g., ## General Summary) and bullet points.\\n   - Use HTML bold tags (<b>term</b>) for emphasis instead of markdown bold.\\n   - Do not use tables; use simple text for lists or comparisons (e.g., \\\"Element: opis\\\").\\n   - Ensure the message is simple and displays correctly in the Telegram app, avoiding unsupported features like nested lists or tables.\\n\\nHere is the text: {{ $json.concatenated_text }}\",\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.4\n    },\n    {\n      \"id\": \"cba394e4-3ae3-4506-a1d9-7b8ffbdf5d93\",\n      \"name\": \"Concatenate Transcript Segments\",\n      \"type\": \"n8n-nodes-base.summarize\",\n      \"position\": [\n        1000,\n        680\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToSummarize\": {\n          \"values\": [\n            {\n              \"field\": \"text\",\n              \"separateBy\": \" \",\n              \"aggregation\": \"concatenate\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c4b266bd-ab23-4823-8f2c-f12704bad58f\",\n      \"name\": \"Trigger on Telegram Message\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        360,\n        100\n      ],\n      \"webhookId\": \"da4bfbb8-d077-4ea1-8d2d-08d408002213\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"57f22922-29fd-402e-b5c3-79cb133209cd\",\n      \"name\": \"Extract YouTube Transcript\",\n      \"type\": \"n8n-nodes-youtube-transcription-kasha.youtubeTranscripter\",\n      \"position\": [\n        580,\n        680\n      ],\n      \"parameters\": {\n        \"videoId\": \"={{ $json.videoId}}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"196453ad-8a63-4fbc-9dc3-37a1ee611857\",\n      \"name\": \"Send Summary via Telegram\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1660,\n        760\n      ],\n      \"webhookId\": \"7159b4c8-984a-4c86-aa32-84e55d406745\",\n      \"parameters\": {\n        \"text\": \"={{ $json.text }}\\n\\n\\n{{ $('Extract YouTube URL from Input').item.json.youtubeUrl}}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"MR8ATMwMsj9Ux1De\",\n          \"name\": \"YoutubeTranscriptChat\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"7754143b-9449-427c-9e04-e91434c4bc74\",\n      \"name\": \"Receive YouTube URL via Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        360,\n        320\n      ],\n      \"webhookId\": \"8f0beaaf-b2c3-4148-8006-3b73fa146f60\",\n      \"parameters\": {\n        \"path\": \"8f0beaaf-b2c3-4148-8006-3b73fa146f60\",\n        \"options\": {},\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e9aaec56-2458-49a4-989e-eb4af03441b9\",\n      \"name\": \"Send Response to Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        1860,\n        760\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"bac178f2-be91-4f28-a024-d7dbef11c442\",\n      \"name\": \"Telegram Trigger\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        240,\n        1040\n      ],\n      \"webhookId\": \"254daa2a-41b8-49f7-8781-52c7e573de70\",\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"MR8ATMwMsj9Ux1De\",\n          \"name\": \"YoutubeTranscriptChat\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"128b8e7a-9b56-4d98-a270-9f627f188b8b\",\n      \"name\": \"Retrieve Transcript from Google Docs\",\n      \"type\": \"n8n-nodes-base.googleDocs\",\n      \"position\": [\n        1280,\n        520\n      ],\n      \"parameters\": {\n        \"operation\": \"get\",\n        \"documentURL\": \"1-NdqfoVWfG1gpjltzJthw_MZeyAlGF3d3gYiIOBLbPk\"\n      },\n      \"credentials\": {\n        \"googleDocsOAuth2Api\": {\n          \"id\": \"N5fN0xR3iI0aCpms\",\n          \"name\": \"Google Docs account 2\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"d4377188-fac7-4d48-8ef4-747f9dd39cf0\",\n      \"name\": \"Update Transcript in Google Docs\",\n      \"type\": \"n8n-nodes-base.googleDocs\",\n      \"position\": [\n        1480,\n        520\n      ],\n      \"parameters\": {\n        \"actionsUi\": {\n          \"actionFields\": [\n            {\n              \"text\": \"={{ $json.content }}\",\n              \"action\": \"replaceAll\",\n              \"replaceText\": \"={{ $('Concatenate Transcript Segments').item.json.concatenated_text }}\"\n            }\n          ]\n        },\n        \"operation\": \"update\",\n        \"documentURL\": \"={{ $json.documentId }}\"\n      },\n      \"credentials\": {\n        \"googleDocsOAuth2Api\": {\n          \"id\": \"N5fN0xR3iI0aCpms\",\n          \"name\": \"Google Docs account 2\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"25504013-f1e0-4556-a318-dbc482bde4fa\",\n      \"name\": \"Handle User Questions via AI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        440,\n        1040\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.message.text }}\",\n        \"options\": {\n          \"systemMessage\": \"You are a tool for answering user questions about a YouTube video based on its transcript, which is available in a Google Docs document. Always check the transcript content before responding and ensure your answers are consistent with it.\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"562ce57d-600e-4bb2-a5a2-e6d005f840bd\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        380,\n        1220\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"ZjnhmdYT28d52ebY\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"39ba9c74-a5c1-455e-b51b-9d36bce76635\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        540,\n        1260\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"={{ $json.message.text }}\",\n        \"sessionIdType\": \"customKey\"\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"1983dc09-f74f-4863-8b2c-9069bc6d64d9\",\n      \"name\": \"Google Docs2\",\n      \"type\": \"n8n-nodes-base.googleDocsTool\",\n      \"position\": [\n        660,\n        1280\n      ],\n      \"parameters\": {\n        \"operation\": \"get\",\n        \"documentURL\": \"1-NdqfoVWfG1gpjltzJthw_MZeyAlGF3d3gYiIOBLbPk\"\n      },\n      \"credentials\": {\n        \"googleDocsOAuth2Api\": {\n          \"id\": \"N5fN0xR3iI0aCpms\",\n          \"name\": \"Google Docs account 2\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"4dfcba99-98e5-49e4-b8bd-31fb841a0985\",\n      \"name\": \"Send AI Response via Telegram\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        840,\n        1040\n      ],\n      \"webhookId\": \"63608fd8-27e6-4b87-8021-95f7441b7ca1\",\n      \"parameters\": {\n        \"text\": \"={{ $json.output }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"MR8ATMwMsj9Ux1De\",\n          \"name\": \"YoutubeTranscriptChat\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"29c22c9f-cca2-459f-8ef0-577c6e1ddd93\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 540,\n        \"height\": 500,\n        \"content\": \"## Get a video URL\\nGet video url via webhook or message\\n\\nFor this I recommend using a shortcut \\nif you are using apple. \\nThis allows you to share a video\\ndirectly to n8n via webhook\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7a987035-42cc-4b52-b4e3-f75194173a58\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1200,\n        360\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 540,\n        \"height\": 360,\n        \"content\": \"## Load memory \\nUploading the transcript about the memory in google docs so you can then ask questions about the film\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2c7446b3-d7bf-4d0c-9b07-87e6ffaea0da\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        40,\n        900\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 1020,\n        \"height\": 600,\n        \"content\": \"## Ask AI about video\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"0b743433-f1cf-4a8c-9c4e-4b7778d6391a\",\n  \"connections\": {\n    \"gpt-4o-mini\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Generate Summary with GPT-4o-mini\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Docs2\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Handle User Questions via AI\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Telegram Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Handle User Questions via AI\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Handle User Questions via AI\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Video ID from URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract YouTube Transcript\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send Summary via Telegram\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Response to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract YouTube Transcript\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Transcript into Segments\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Trigger on Telegram Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract YouTube URL from Input\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Handle User Questions via AI\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send AI Response via Telegram\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract YouTube URL from Input\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract Video ID from URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Transcript into Segments\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Concatenate Transcript Segments\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Concatenate Transcript Segments\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate Summary with GPT-4o-mini\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Retrieve Transcript from Google Docs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Receive YouTube URL via Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract YouTube URL from Input\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Summary with GPT-4o-mini\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Summary via Telegram\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Retrieve Transcript from Google Docs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Transcript in Google Docs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.set",
      "n8n-nodes-base.code",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.chainLlm",
      "n8n-nodes-base.summarize",
      "@n8n/n8n-nodes-langchain.chatTrigger",
      "n8n-nodes-youtube-transcription-kasha.youtubeTranscripter",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.respondToWebhook",
      "n8n-nodes-base.telegramTrigger",
      "n8n-nodes-base.googleDocs",
      "n8n-nodes-base.googleDocs",
      "@n8n/n8n-nodes-langchain.agent",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "n8n-nodes-base.googleDocsTool",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "trigger on telegram message"
  }
}