{
  "source": "1478_Code_Todoist_Automate_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"Glb4VNoQI44GT0p9\",\n  \"meta\": {\n    \"instanceId\": \"a1f3364de0f3da48758a2641efb07c3b0d216a3a7cc93596fbed2316d6dea4ad\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"My workflow 4\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"909a08a4-4cec-4987-9379-d4cdc2d92a53\",\n      \"name\": \"RSS Feed: Times of India\",\n      \"type\": \"n8n-nodes-base.rssFeedRead\",\n      \"position\": [\n        680,\n        240\n      ],\n      \"parameters\": {\n        \"url\": \"https://timesofindia.indiatimes.com/rssfeeds/-2128936835.cms\",\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"471cc8ab-0074-4e25-b952-1899574398a9\",\n      \"name\": \"Gmail: Fetch Emails\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        700,\n        440\n      ],\n      \"webhookId\": \"85735980-07e5-418b-b029-44bb9825ac9b\",\n      \"parameters\": {\n        \"filters\": {},\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"WbGCG42FAaeECe0u\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"07a33739-0181-4ead-87bd-c1f0c3fc4999\",\n      \"name\": \"TodoList: Fetch Tasks\",\n      \"type\": \"n8n-nodes-base.todoist\",\n      \"position\": [\n        700,\n        620\n      ],\n      \"parameters\": {\n        \"limit\": 5,\n        \"filters\": {},\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"todoistApi\": {\n          \"id\": \"q3NiAT93rPChns6G\",\n          \"name\": \"Todoist account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"af295aad-f7e7-4d38-80e5-b79b79637b5f\",\n      \"name\": \"Format Digest: Merge & Style Data\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1280,\n        440\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const newsItems = $input.all().map(item => item.json);\\nconst emails = $(\\\"Gmail: Fetch Emails\\\").all().map(item => item.json);\\nconst tasks = $(\\\"TodoList: Fetch Tasks\\\").all().map(item => item.json);\\n\\n// Select top 5 items from each\\nconst topNews = newsItems.slice(0, 5).map(item => ({\\n  title: item.title,\\n  link: item.link\\n}));\\n\\nconst latestEmails = emails.slice(0, 5).map(item => ({\\n  subject: item.Subject,\\n  snippet: item.snippet\\n}));\\n\\nconst topTasks = tasks.slice(0, 5).map(task => ({\\n  content: task.content,\\n  url: task.url,\\n  emoji: task.emoji || 'üî¥',\\n  due: task.due\\n}));\\n\\n// Create the final JSON object with email subject and a formatted email body with inline CSS\\nconst result = {\\n  meta: {\\n    generated_at: new Date().toISOString(),\\n    time_emoji: \\\"üåû\\\"\\n  },\\n  email: {\\n    subject: `üåû Daily Digest ‚Ä¢ üìã ${topTasks.length} Tasks ‚ö†Ô∏è ‚Ä¢ üì∞ ${topNews.length} News Updates`,\\n    body: `\\n      <div style=\\\"max-width:600px; margin:0 auto; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color:#333; background:#f4f7f9; padding:20px; border:1px solid #e1e8ed; border-radius:8px;\\\">\\n         <div style=\\\"text-align:center; padding-bottom:20px;\\\">\\n             <h1 style=\\\"margin:0; font-size:28px; color:#0073e6;\\\">Daily Digest</h1>\\n             <p style=\\\"margin:10px 0 0; font-size:16px; color:#666;\\\">Your automated daily summary</p>\\n         </div>\\n         <hr style=\\\"border:none; border-top:1px solid #ddd; margin:20px 0;\\\">\\n         <div style=\\\"margin-bottom:20px;\\\">\\n             <h2 style=\\\"font-size:20px; color:#0073e6; margin-bottom:10px;\\\">Tasks (${topTasks.length})</h2>\\n             <ul style=\\\"list-style:none; padding:0;\\\">\\n               ${topTasks.map(task => `\\n                 <li style=\\\"margin-bottom:10px; padding:10px; background:#fff; border:1px solid #e1e8ed; border-radius:4px;\\\">\\n                   <span style=\\\"font-size:18px; margin-right:10px;\\\">${task.emoji}</span> \\n                   <span style=\\\"font-size:16px;\\\">${task.content}</span> \\n                   <span style=\\\"color:#999; font-size:14px; margin-left:5px;\\\">(Due: ${task.due})</span>\\n                   <a href=\\\"${task.url}\\\" style=\\\"text-decoration:none; color:#0073e6; float:right;\\\">View Task</a>\\n                 </li>\\n               `).join('')}\\n             </ul>\\n         </div>\\n         <div style=\\\"margin-bottom:20px;\\\">\\n             <h2 style=\\\"font-size:20px; color:#0073e6; margin-bottom:10px;\\\">News (${topNews.length})</h2>\\n             <ul style=\\\"list-style:none; padding:0;\\\">\\n               ${topNews.map(news => `\\n                 <li style=\\\"margin-bottom:10px; padding:10px; background:#fff; border:1px solid #e1e8ed; border-radius:4px;\\\">\\n                   <a href=\\\"${news.link}\\\" style=\\\"text-decoration:none; font-size:16px; color:#0073e6;\\\">${news.title}</a>\\n                 </li>\\n               `).join('')}\\n             </ul>\\n         </div>\\n         <div style=\\\"margin-bottom:20px;\\\">\\n             <h2 style=\\\"font-size:20px; color:#0073e6; margin-bottom:10px;\\\">Emails (${latestEmails.length})</h2>\\n             <ul style=\\\"list-style:none; padding:0;\\\">\\n               ${latestEmails.map(email => `\\n                 <li style=\\\"margin-bottom:10px; padding:10px; background:#fff; border:1px solid #e1e8ed; border-radius:4px;\\\">\\n                   <strong style=\\\"font-size:16px; color:#0073e6;\\\">${email.subject}</strong>\\n                   <p style=\\\"margin:5px 0 0; font-size:14px; color:#666;\\\">${email.snippet}</p>\\n                 </li>\\n               `).join('')}\\n             </ul>\\n         </div>\\n         <div style=\\\"text-align:center; font-size:12px; color:#aaa; margin-top:20px;\\\">\\n             <p>Digest generated at: ${new Date().toLocaleString()}</p>\\n         </div>\\n      </div>\\n    `\\n  },\\n  tasks: topTasks,\\n  news: topNews,\\n  emails: latestEmails\\n};\\n\\nreturn [{ json: result }];\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"5399bee1-d0e7-4ed7-af7f-d0ddccb00b4d\",\n      \"name\": \"Gmail: Send Digest\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        1540,\n        440\n      ],\n      \"webhookId\": \"3cd541af-51d4-465e-803d-a74572a15d83\",\n      \"parameters\": {\n        \"sendTo\": \"youremail@gmail.com\",\n        \"message\": \"={{ $json.email.body }}\",\n        \"options\": {},\n        \"subject\": \"={{ $json.email.subject }}\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"WbGCG42FAaeECe0u\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"9f398bc2-e84c-4df4-8958-aaa1d7c2ed37\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        0,\n        60\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"9984d3c0-7469-4b79-8d31-1a06b8dd23b6\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1020,\n        440\n      ],\n      \"parameters\": {\n        \"numberInputs\": 3\n      },\n      \"typeVersion\": 3\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"550f65e6-68ec-449a-9fb5-241acba42455\",\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format Digest: Merge & Style Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"RSS Feed: Times of India\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Gmail: Fetch Emails\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"TodoList: Fetch Tasks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Gmail: Fetch Emails\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"TodoList: Fetch Tasks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 2\n          }\n        ]\n      ]\n    },\n    \"RSS Feed: Times of India\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format Digest: Merge & Style Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gmail: Send Digest\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.rssFeedRead",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.todoist",
      "n8n-nodes-base.code",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.merge"
    ],
    "trigger": "schedule trigger"
  }
}