{
  "source": "0398_Telegram_Wait_Send_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"dbd43d88d26a9e30d8aadc002c9e77f1400c683dd34efe3778d43d27250dde50\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"1c7b05e0-d82b-4851-a1ec-713093cdf489\",\n      \"name\": \"Email Trigger (IMAP)\",\n      \"type\": \"n8n-nodes-base.emailReadImap\",\n      \"position\": [\n        540,\n        660\n      ],\n      \"parameters\": {\n        \"format\": \"resolved\",\n        \"options\": {\n          \"forceReconnect\": 60,\n          \"customEmailConfig\": \"[\\\"UNSEEN\\\"]\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"734424e6-d292-47d7-abb9-9630bdc00e35\",\n      \"name\": \"Telegram\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1140,\n        660\n      ],\n      \"parameters\": {\n        \"text\": \"=📧 <b>You've got mail!</b>\\n\\nA new email has arrived from this address: <code>{{ $node[\\\"Email Trigger (IMAP)\\\"].json[\\\"from\\\"][\\\"value\\\"][\\\"0\\\"][\\\"address\\\"] }}</code>\\n\\n🌐 A secert HTML page has been created for it, where you can preview the message by following the link below 👇\",\n        \"chatId\": \"<Your Chat ID Here>\",\n        \"replyMarkup\": \"inlineKeyboard\",\n        \"inlineKeyboard\": {\n          \"rows\": [\n            {\n              \"row\": {\n                \"buttons\": [\n                  {\n                    \"text\": \"={{ $('Github Gist').item.json.files[\\\"email.html\\\"].filename }}\",\n                    \"additionalFields\": {\n                      \"url\": \"={{'http://emails.nskha.com/?iloven8n=nskha&id='+ $('Github Gist').item.json.id}}\"\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": true,\n          \"disable_web_page_preview\": true\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"260c6ba6-1922-4bcb-bd5e-20b307ac638d\",\n      \"name\": \"Github Gist\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"Save HTML content\",\n      \"position\": [\n        840,\n        660\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.github.com/gists\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {}\n          }\n        },\n        \"jsonBody\": \"={\\n  \\\"description\\\": \\\"{{ $json.date }} - from {{ JSON.stringify($json.from.value[0].address).slice(1, -1) }} - to {{ JSON.stringify($json.to.value[0].address).slice(1, -1) }}\\\",\\n  \\\"public\\\": false,\\n  \\\"files\\\": {\\n    \\\"email.html\\\": {\\n      \\\"content\\\": \\\"{{ JSON.stringify($json.html).slice(1, -1) }}\\\"\\n    }\\n  }\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Accept\",\n              \"value\": \"application/vnd.github+json\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"githubApi\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"0a77d236-e387-4458-a9cc-9ff7977ba4aa\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        460,\n        440\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 872,\n        \"height\": 626.9128738621571,\n        \"content\": \"## Simple Conversion of Emails into HTML Webpages\\nTo-do:\\n* Configure your GitHub credentials through `Predefined Credential Type` => `GitHub API`.\\n* Add your Telegram credentials by providing your `Chat ID`.\\n* [**Optional**] You can host this [small project](https://github.com/Automations-Project/Emails/tree/main) on your own domain using GitHub Pages.\\n\\n ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌  ‌ ‌ ‌  ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ![image](https://cdn.statically.io/gh/Automations-Project/Emails/main/iloven8n.min.svg)\\n\\n\\n\\n\\n\\n\\n\\n ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌  ‌ ‌ ‌  ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ![image](https://cdn.statically.io/gh/Automations-Project/Emails/main/iloven8n%E2%80%8C.min.svg)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f69cf395-0050-44b3-a713-61f0cc5977ad\",\n      \"name\": \"Wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"notes\": \"Delete within 3h\",\n      \"position\": [\n        540,\n        900\n      ],\n      \"webhookId\": \"c5202512-f84e-44b4-b357-9ee2124bd507\",\n      \"parameters\": {\n        \"amount\": 3\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c6067792-4fc2-4ced-bb04-6c5449a533ab\",\n      \"name\": \"Telegram ‌\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1140,\n        900\n      ],\n      \"parameters\": {\n        \"chatId\": \"<Your Chat ID Here>\",\n        \"messageId\": \"={{ $('Telegram').item.json.result.message_id }}\",\n        \"operation\": \"deleteMessage\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"ebfe89fb-b0a3-4826-a72b-3fb8baa473c4\",\n      \"name\": \"Github Gist ‌\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"Remove HTML content\",\n      \"position\": [\n        840,\n        900\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.github.com/gists/{{ $item(\\\"0\\\").$node[\\\"Github Gist\\\"].json[\\\"id\\\"] }}\",\n        \"method\": \"DELETE\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {}\n          }\n        },\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Accept\",\n              \"value\": \"application/vnd.github+json\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"githubApi\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Github Gist ‌\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Telegram\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Github Gist\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Telegram\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Github Gist ‌\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Telegram ‌\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Email Trigger (IMAP)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Github Gist\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.emailReadImap",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.httpRequest"
    ],
    "trigger": "email trigger (imap)"
  }
}