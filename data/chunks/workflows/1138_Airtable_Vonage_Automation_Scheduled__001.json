{
  "source": "1138_Airtable_Vonage_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"7\",\n  \"name\": \"Daily Language Learning\",\n  \"nodes\": [\n    {\n      \"name\": \"Daily trigger\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        620,\n        750\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"hour\": 8\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Get top 3 articles\",\n      \"type\": \"n8n-nodes-base.hackerNews\",\n      \"position\": [\n        820,\n        750\n      ],\n      \"parameters\": {\n        \"limit\": 3,\n        \"resource\": \"all\",\n        \"additionalFields\": {\n          \"tags\": [\n            \"front_page\"\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Extract words\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        1020,\n        750\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const words = [];\\nconst regex = /\\\\d/g;\\nconst newItems = [];\\n\\n// Splits titles into words and removes numbers\\n// using regular expressions\\n\\nfor(let i=0; i < items.length; i++) {\\n  let split_titles = []; \\n  split_titles = items[i].json.title.split(' ');\\n  for(let j=0; j < split_titles.length; j++) {\\n    if(regex.test(split_titles[j])) {\\n      continue;\\n    } else {\\n      words.push(split_titles[j]);\\n    }\\n  }\\n}\\n\\n// Removes all duplicate words by converting the\\n// array into a set and then back into an array\\n\\nconst uniqueWords = [...new Set(words)];\\n\\n// Transform the array to the data structure expected\\n// by n8n\\n\\nfor(let k=0; k < uniqueWords.length; k++) {\\n  newItems.push({json: { words: uniqueWords[k] }});\\n}\\n\\nreturn newItems;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Translate\",\n      \"type\": \"n8n-nodes-base.lingvaNex\",\n      \"position\": [\n        1220,\n        750\n      ],\n      \"parameters\": {\n        \"text\": \"={{$node[\\\"Extract words\\\"].json[\\\"words\\\"]}}\",\n        \"options\": {},\n        \"translateTo\": \"de_DE\"\n      },\n      \"credentials\": {\n        \"lingvaNexApi\": \"LingvaNex\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Filter data \",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1420,\n        750\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"English word\",\n              \"value\": \"={{$node[\\\"Translate\\\"].json[\\\"source\\\"]}}\"\n            },\n            {\n              \"name\": \"Translated word\",\n              \"value\": \"={{$node[\\\"Translate\\\"].json[\\\"result\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Save today's words\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        1620,\n        850\n      ],\n      \"parameters\": {\n        \"table\": \"Table 1\",\n        \"options\": {},\n        \"operation\": \"append\",\n        \"application\": \"app4Y6qcCHIO1cYNB\"\n      },\n      \"credentials\": {\n        \"airtableApi\": \"Airtable\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Craft message\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        1620,\n        650\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const number_of_words = 5;\\nconst words = [];\\n\\n// Crafts the words to be sent in en_word : translated_word format\\n// and adds them to an array\\n\\nfor(let i=0; i < number_of_words; i++) {\\n  words.push(items[i].json['English word'] + ' : ' + items[i].json['Translated word']);\\n}\\n\\n// Takes all the items from the array and converts them into a comma\\n// separated string\\n\\nconst words_of_the_day = words.join(', ');\\n\\nreturn [{json: {words_of_the_day: words_of_the_day}}];\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Send SMS\",\n      \"type\": \"n8n-nodes-base.vonage\",\n      \"position\": [\n        1820,\n        650\n      ],\n      \"parameters\": {\n        \"to\": \"+4915225152610\",\n        \"from\": \"Vonage APIs\",\n        \"message\": \"=Good morning, here are your words for today\\n{{$node[\\\"Craft message\\\"].json[\\\"words_of_the_day\\\"]}}\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"vonageApi\": \"Vonage\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"Translate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter data \",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter data \": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Craft message\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Save today's words\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Craft message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send SMS\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Daily trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get top 3 articles\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract words\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Translate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get top 3 articles\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract words\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.cron",
      "n8n-nodes-base.hackerNews",
      "n8n-nodes-base.function",
      "n8n-nodes-base.lingvaNex",
      "n8n-nodes-base.set",
      "n8n-nodes-base.airtable",
      "n8n-nodes-base.function",
      "n8n-nodes-base.vonage"
    ],
    "trigger": "daily trigger"
  }
}