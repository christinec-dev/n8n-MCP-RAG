{
  "source": "0188_Rssfeedread_Telegram_Create_Scheduled.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"name\": \"RSS Feed Read\",\n      \"type\": \"n8n-nodes-base.rssFeedRead\",\n      \"position\": [\n        420,\n        -20\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"SplitInBatches\\\"].json[\\\"url\\\"]}}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"SplitInBatches\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        200,\n        -20\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 1\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Cron\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        -240,\n        -20\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyX\",\n              \"unit\": \"minutes\",\n              \"value\": 10\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"only get new RSS\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        640,\n        -20\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const staticData = getWorkflowStaticData('global');\\nconst newRSSIds = items.map(item => item.json[\\\"isoDate\\\"]);\\nconst oldRSSIds = staticData.oldRSSIds; \\n\\nif (!oldRSSIds) {\\n  staticData.oldRSSIds = newRSSIds;\\n  return items;\\n}\\n\\n\\nconst actualNewRSSIds = newRSSIds.filter((id) => !oldRSSIds.includes(id));\\nconst actualNewRSS = items.filter((data) => actualNewRSSIds.includes(data.json['isoDate']));\\nstaticData.oldRSSIds = [...actualNewRSSIds, ...oldRSSIds];\\n\\nreturn actualNewRSS;\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Telegram_IT\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1220,\n        460\n      ],\n      \"parameters\": {\n        \"text\": \"={{$json[\\\"title\\\"]}}\\n{{$json[\\\"link\\\"]}}\",\n        \"chatId\": \"TelegramID\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"2\",\n          \"name\": \"IT_RSS\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Telegram_Security\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1220,\n        220\n      ],\n      \"parameters\": {\n        \"text\": \"={{$json[\\\"title\\\"]}}\\n{{$json[\\\"link\\\"]}}\",\n        \"chatId\": \"TelegramID\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"4\",\n          \"name\": \"Security_RSS\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"RSS Source\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        -20,\n        -20\n      ],\n      \"parameters\": {\n        \"functionCode\": \"return [\\n  {\\n    json: {\\n      url: 'https://feeds.feedburner.com/UnikosHardware',\\n    }\\n  },\\n  {\\n    json: {\\n      url: 'http://www.ithome.com.tw/rss.php',\\n    }\\n  },\\n  {\\n    json: {\\n      url: 'http://feeds.feedburner.com/playpc',\\n    }\\n  },\\n  {\\n    json: {\\n      url: 'https://lab.ocf.tw/feed/',\\n    }\\n  },\\n  {\\n    json: {\\n      url: 'https://techcommunity.microsoft.com/plugins/custom/microsoft/o365/custom-blog-rss?tid=3754543230341459569&board=microsoft_365blog',\\n    }\\n  }\\n];\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Telegram_M365\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1220,\n        -40\n      ],\n      \"parameters\": {\n        \"text\": \"={{$json[\\\"title\\\"]}}\\n{{$json[\\\"link\\\"]}}\",\n        \"chatId\": \"TelegramID\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"5\",\n          \"name\": \"M365_RSS\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IF-2\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        880,\n        240\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json[\\\"title\\\"]}}\",\n              \"value2\": \"資安|資訊安全|安全|外洩|監控|威脅|漏洞|封鎖|修補|攻擊|入侵|個資|隱私|私密|騙|社交工程|釣魚|駭|Security|security|Secure|secure\",\n              \"operation\": \"regex\"\n            }\n          ]\n        },\n        \"combineOperation\": \"any\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IF-1\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        880,\n        -20\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json[\\\"link\\\"]}}\",\n              \"value2\": \"techcommunity.microsoft.com\",\n              \"operation\": \"contains\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Clear Function\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        -20,\n        -180\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Get the global workflow static data\\nconst staticData = getWorkflowStaticData('global');\\n// Update its data\\nstaticData.oldRSSIds = new Date().getTime();\\n// Delete data\\ndelete staticData.oldRSSIds;\\n\\nreturn [\\n  {\\n    json: {}\\n  }\\n]\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Cron\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"RSS Source\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"IF-1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Telegram_M365\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"IF-2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"IF-2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Telegram_Security\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Telegram_IT\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"RSS Source\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"SplitInBatches\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"RSS Feed Read\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"SplitInBatches\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"only get new RSS\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"SplitInBatches\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"RSS Feed Read\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"only get new RSS\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF-1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.rssFeedRead",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.cron",
      "n8n-nodes-base.function",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.function",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.if",
      "n8n-nodes-base.if",
      "n8n-nodes-base.function"
    ],
    "trigger": null
  }
}