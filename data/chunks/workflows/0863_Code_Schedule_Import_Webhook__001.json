{
  "source": "0863_Code_Schedule_Import_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"431926ace0ab32761b92304a05ffb4819a2a2a8ee5de45404953945769b5412a\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"53bf4cb6-8f55-4d8d-b4af-48345f75cdd5\",\n      \"name\": \"Daily Trigger1\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -660,\n        6580\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"774624c1-cb4d-4355-9ed7-448d393c5f3b\",\n      \"name\": \"Set Date1\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -440,\n        6580\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"today\",\n              \"value\": \"={{ new Date().toISOString().split('T')[0] }}\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"951eb189-8143-48d7-88c9-3ce235de83f6\",\n      \"name\": \"Sticky Note16\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -260,\n        6400\n      ],\n      \"parameters\": {\n        \"content\": \"### ðŸ” How to Get Your Product Hunt Token\\n\\nTo get your Product Hunt token, follow the official guide here:  \\nðŸ‘‰ [Product Hunt OAuth Token Guide](https://api.producthunt.com/v2/docs/oauth_user_authentication/oauth_authorize_ask_for_access_grant_code_on_behalf_of_the_user)\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ae83bb19-a981-4b28-8dcd-ecd9501bd3d0\",\n      \"name\": \"Sticky Note17\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        820,\n        6280\n      ],\n      \"parameters\": {\n        \"width\": 360,\n        \"height\": 280,\n        \"content\": \"### ðŸ“„ How to Connect Google Sheets in n8n\\n\\nTo connect your Google Sheets to n8n:\\n\\n1. Go to your n8n Credentials page.\\n2. Select **Google Sheets** and add new credentials.\\n3. Authenticate your Google account and give the required permissions.\\n\\nFollow the full guide here:  \\nðŸ‘‰ https://www.youtube.com/watch?v=pWGXlZBGu4k\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4a0c04d4-3ce2-4ebb-94a3-2a0441e25e23\",\n      \"name\": \"Fetches todayâ€™s Product Hunt posts via API.\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"### ðŸ” How to Get Your Product Hunt Token\\n\\nTo get your Product Hunt token, follow the official guide here:  \\nðŸ‘‰ [Product Hunt OAuth Token Guide](https://api.producthunt.com/v2/docs/oauth_user_authentication/oauth_authorize_ask_for_access_grant_code_on_behalf_of_the_user)\\n\",\n      \"position\": [\n        -220,\n        6580\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.producthunt.com/v2/api/graphql\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"query\",\n              \"value\": \"query {   posts(first: 10, postedAfter: \\\"{{ $node[\\\\\\\"Set Date1\\\\\\\"].json[\\\\\\\"today\\\\\\\"] }}T00:00:00Z\\\", postedBefore: \\\"{{ $node[\\\\\\\"Set Date1\\\\\\\"].json[\\\\\\\"today\\\\\\\"] }}T23:59:59Z\\\") {     edges {       node {         name         tagline         description         website       }       cursor     }     pageInfo {       hasNextPage       endCursor     }   } }\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer YOUR_PRODUCT_HUNT_API_KEY\"\n            },\n            {\n              \"name\": \"User-Agent\",\n              \"value\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": false,\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"994c8a22-ce3a-42cf-95e1-9512f1525fd7\",\n      \"name\": \"Extracts Product Info\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        0,\n        6580\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return $json.data.posts.edges.map(edge => {\\n  return {\\n    json: {\\n      name: edge.node.name,\\n      tagline: edge.node.tagline,\\n      description: edge.node.description,\\n      website: edge.node.website\\n    }\\n  };\\n});\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"f7846147-cd50-4b5e-bb79-0f17ff7d5900\",\n      \"name\": \"Resolve Website Redirection\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        220,\n        6680\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.website }}\\n\",\n        \"options\": {\n          \"fullResponse\": true,\n          \"followRedirect\": false,\n          \"followAllRedirects\": false,\n          \"ignoreResponseCode\": true\n        },\n        \"responseFormat\": \"string\",\n        \"dataPropertyName\": \"body\",\n        \"allowUnauthorizedCerts\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"11f5df7a-bc46-4ae6-b97d-0ce8c15d804d\",\n      \"name\": \"Data  2 (website url)\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        440,\n        6680\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"next_url\",\n              \"value\": \"={{$json[\\\"headers\\\"][\\\"location\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3fd9b50e-c30b-44dd-ac53-83b0a597db2e\",\n      \"name\": \"Data 1 (product info)\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        440,\n        6480\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"name\",\n              \"value\": \"={{ $json.name }}\"\n            },\n            {\n              \"name\": \"tagline\",\n              \"value\": \"={{ $json.tagline }}\"\n            },\n            {\n              \"name\": \"description\",\n              \"value\": \"={{ $json.description }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"68acc44b-10cd-4bae-bf01-b304cd753f15\",\n      \"name\": \"Merge Data\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        660,\n        6580\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Initialize empty arrays for both data sources\\nlet productData = [];\\nlet redirectData = [];\\n\\ntry {\\n  productData = $items(\\\"Data to Keep4\\\");\\n} catch (error) {\\n  console.log(\\\"Error fetching product data:\\\", error.message);\\n}\\n\\ntry {\\n  redirectData = $items(\\\"Data to Keep3\\\");\\n} catch (error) {\\n  console.log(\\\"Error fetching redirect data:\\\", error.message);\\n}\\n\\nconst mergedItems = [];\\n\\nfor (let i = 0; i < productData.length; i++) {\\n  const product = productData[i].json;\\n  \\n  const mergedItem = {\\n    name: product.name,\\n    tagline: product.tagline,\\n    description: product.description,\\n    next_url: null\\n  };\\n  \\n  if (i < redirectData.length && redirectData[i] && redirectData[i].json) {\\n    let url = redirectData[i].json.next_url;\\n    // Remove ?ref=producthunt from the URL\\n    if (url && url.includes('?ref=producthunt')) {\\n      url = url.replace('?ref=producthunt', '');\\n    }\\n    mergedItem.next_url = url;\\n  }\\n  \\n  mergedItems.push({ json: mergedItem });\\n}\\n\\nconsole.log(`Product data items: ${productData.length}`);\\nconsole.log(`Redirect data items: ${redirectData.length}`);\\nconsole.log(`Merged items: ${mergedItems.length}`);\\n\\nreturn mergedItems;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"39429f34-19d1-488a-9603-7b25f6042fa6\",\n      \"name\": \"Appends all details\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        880,\n        6580\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"name\": \"={{ $json.name }}\",\n            \"tagline\": \"={{ $json.tagline }}\",\n            \"description\": \"={{ $json.description }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"tagline\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"tagline\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"description\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"description\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"next_url\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"next_url\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"autoMapInputData\",\n          \"matchingColumns\": [\n            \"name\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"appendOrUpdate\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"demo\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"demo\",\n          \"cachedResultUrl\": \"demo\",\n          \"cachedResultName\": \"Get product hunt products\"\n        },\n        \"authentication\": \"serviceAccount\"\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"6be5f1a1-c6e9-4dea-9199-523cd7f4b659\",\n      \"name\": \"Sticky Note18\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -980,\n        6380\n      ],\n      \"parameters\": {\n        \"width\": 280,\n        \"height\": 260,\n        \"content\": \"### About Me  \\n\\nHey there! Iâ€™m **Ajetomobi Ifeoluwa** â€“ the brains (and vibe) behind this template. When Iâ€™m not crafting cool workflows, Iâ€™m busy making the web more beautiful and functional as a **UI/UX Designer** and **Vibe Coder**. Want your project to stand out? Letâ€™s chat! Check out my [portfolio](https://ifeoluwaajetomobi.framer.website/) and my work on [Behance](https://www.behance.net/ajetomoifeoluw). Letâ€™s create something awesome together! ðŸŽ¨âœ¨\\n\\n\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Set Date1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetches todayâ€™s Product Hunt posts via API.\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Appends all details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Daily Trigger1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Date1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Data  2 (website url)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Data 1 (product info)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extracts Product Info\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Resolve Website Redirection\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Data 1 (product info)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Resolve Website Redirection\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Data  2 (website url)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetches todayâ€™s Product Hunt posts via API.\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extracts Product Info\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.code",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.function",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "daily trigger1"
  }
}