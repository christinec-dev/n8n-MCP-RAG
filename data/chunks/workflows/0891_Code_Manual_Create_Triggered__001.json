{
  "source": "0891_Code_Manual_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"4de3652773c3e67f6210deb1e1d390d75b23715f2e2cca0340008f99419607e6\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"4c9256c8-8dd7-4e81-8aef-0789e6808808\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -260,\n        80\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1935ad6a-ade4-4073-9205-0c3dd1091c0f\",\n      \"name\": \"Set parameters for next run\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1520,\n        460\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"const desired_path = $('Create desired path').item.json.desired_path;\\ndesired_path.shift();\\n\\nreturn {\\n  desired_path: desired_path,\\n  google_drive_folder_id: $json.id,\\n}\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"5d99a9c4-57c6-4052-b093-fb0c32d9ff56\",\n      \"name\": \"Execute Workflow Trigger\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        -40,\n        460\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"879b92ae-edab-4d73-96d0-4df36d12fbb2\",\n      \"name\": \"Dummy input data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -40,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"041e1077-f4dc-476f-b75a-6d60d9c8d0b9\",\n              \"name\": \"google_drive_folder_id\",\n              \"type\": \"string\",\n              \"value\": \"root\"\n            },\n            {\n              \"id\": \"843e3a7f-c59e-48c1-80f8-c9995515e340\",\n              \"name\": \"desired_path\",\n              \"type\": \"string\",\n              \"value\": \"testXavier/2024/Q4/03 Documenten\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"822d45f1-149d-430c-8daf-183998c01166\",\n      \"name\": \"Split the desired path\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        340,\n        260\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"// Add a new field called 'myNewField' to the JSON of the item\\n$input.item.json.desired_path = $input.item.json.desired_path.split('/');\\n\\nreturn $input.item;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e2aba13a-fec6-4d1e-aa1c-af95d3f957ad\",\n      \"name\": \"Create desired path\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        580,\n        260\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"return {\\n  google_drive_folder_id: $json.google_drive_folder_id,\\n  desired_path: $json.desired_path,\\n};\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"aa3f9b95-3197-4b89-bcb2-9e723b8496a0\",\n      \"name\": \"Check if top folder exists\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        800,\n        260\n      ],\n      \"parameters\": {\n        \"filter\": {\n          \"folderId\": {\n            \"__rl\": true,\n            \"mode\": \"id\",\n            \"value\": \"={{ $json.google_drive_folder_id }}\"\n          },\n          \"whatToSearch\": \"folders\"\n        },\n        \"options\": {},\n        \"resource\": \"fileFolder\",\n        \"queryString\": \"={{ $json.desired_path[0] }}\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"Xk1mfDiQRaqwWUaU\",\n          \"name\": \"Google Drive account 2\"\n        }\n      },\n      \"typeVersion\": 3,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"969b7823-2720-45c5-b98c-1cc659fe62df\",\n      \"name\": \"If top folder doesn't exist\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1040,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"59e55ba1-5db4-455e-95a1-bb8e4c1d0d31\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"empty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"2cd3932d-b066-438a-b968-4078dfc9dbe7\",\n      \"name\": \"Create new subfolder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1340,\n        240\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Create desired path').item.json.desired_path[0] }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Create desired path').item.json.google_drive_folder_id }}\"\n        },\n        \"resource\": \"folder\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"Xk1mfDiQRaqwWUaU\",\n          \"name\": \"Google Drive account 2\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"f9322682-b77f-4bad-8bbc-13868c126063\",\n      \"name\": \"If path has been completely created\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1740,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"d95b4b2e-68c5-4d82-84af-a46fbb84035c\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"empty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.desired_path }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"94c4694b-0a32-4681-b977-c01e3232d9e8\",\n      \"name\": \"Return the ID of the last folder\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2040,\n        440\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"692a23db-71c8-4154-af87-a0177045b63d\",\n              \"name\": \"google_drive_folder_id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Set parameters for next run').item.json.google_drive_folder_id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"5e9f327d-61bb-46af-b16b-21499f5c22e0\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -820,\n        -80\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"height\": 880,\n        \"content\": \"# Create Google Drive Folders by Path\\nThis workflow created nested Google Drive folder from a path string and returns the ID of the final folder for immediate use.\\n\\nUse this workflow in your other flows by calling it directly with the following data:\\n- `google_drive_folder_id` -> The ID of the folder where you want to create additional folders in. You can use \\\"root\\\" if you want to begin at root level of your Drive.\\n- `desired_path` -> The folder structure you'd like to create in Google Drive. Each folder is separated by a slash, eg: `Projects/Clients/Reports`\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"35b3741f-465a-4846-9f62-4dedc40ca884\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        -20\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 500,\n        \"height\": 80,\n        \"content\": \"## Test data for the workflow\\nUse this in case you want to test the workflow.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3b7fe210-d966-4988-aaf4-5e07567b3054\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        320\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 500,\n        \"height\": 120,\n        \"content\": \"## Triggered from another workflow\\nThis workflow is intended to be triggered by other workflows. Don't copy/paste this workflow as it will be more difficult to maintain and keep up-to-date.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"16477e77-656e-4bff-914f-633d61477d38\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        560,\n        80\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1320,\n        \"height\": 120,\n        \"content\": \"## Main loop\\nTake the desired_path and split it into parts. Eg: `Projects/Clients/Reports` will turn into 3 parts: Projects, Clients, Reports.\\nWe then check if the top folder exists and create it if not. We repeat this process until all subfolders have been created and correctly nested.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"57404f59-28b8-4969-b483-fb8a3320a592\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1980,\n        80\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 280,\n        \"height\": 120,\n        \"content\": \"## Rerturn data\\nHere we return the ID of the last folder in the path, so you can start uploading new files to it.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Dummy input data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split the desired path\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create desired path\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check if top folder exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create new subfolder\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set parameters for next run\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split the desired path\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create desired path\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Execute Workflow Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split the desired path\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check if top folder exists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If top folder doesn't exist\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If top folder doesn't exist\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create new subfolder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Set parameters for next run\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set parameters for next run\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If path has been completely created\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Dummy input data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If path has been completely created\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Return the ID of the last folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create desired path\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.code",
      "n8n-nodes-base.executeWorkflowTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.code",
      "n8n-nodes-base.code",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.if",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "execute workflow trigger"
  }
}