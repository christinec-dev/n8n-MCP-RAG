{
  "source": "0239_Code_Typeform_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"8c8c5237b8e37b006a7adce87f4369350c58e41f3ca9de16196d3197f69eabcd\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"7917ccbb-ef43-4784-adb9-7347be1f1e20\",\n      \"name\": \"Set\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        580,\n        560\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"company\",\n              \"value\": \"={{$json[\\\"What *company* are you contacting us from?\\\"]}}\"\n            },\n            {\n              \"name\": \"name\",\n              \"value\": \"={{$json[\\\"Let's start with your *first and last name.*\\\"]}}\"\n            },\n            {\n              \"name\": \"email\",\n              \"value\": \"={{$json[\\\"What *email address* can we reach you at?\\\"]}}\"\n            },\n            {\n              \"name\": \"n8nFamiliar\",\n              \"value\": \"={{$json[\\\"How familiar are you with*  n8n*?\\\"]}}\"\n            },\n            {\n              \"name\": \"questions\",\n              \"value\": \"={{$json[\\\"Do you have any *specific questions* about embedding n8n at this stage?\\\"]}}\"\n            },\n            {\n              \"name\": \"employees\",\n              \"value\": \"={{$json[\\\"How many employees?\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c0cc18d0-fdd1-4ef8-aabe-33bd13667c7d\",\n      \"name\": \"Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        540,\n        360\n      ],\n      \"parameters\": {\n        \"width\": 760,\n        \"height\": 440,\n        \"content\": \"## Format Typeform inputs to Pipedrive\\nIn this example, we ask for the number of employees at a company. \\n\\nTo map this to Pipedrive, we need the unique item number coming from Pipedrive for each of these sections. This is what the function node does. \\n\\nIn the Pipedrive: Organization, we map this under the custom property.\\n\\n\\n\\n\\n\\n\\n\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"92646ffb-73fb-4fee-a2b4-5060c7e04b59\",\n      \"name\": \"Create Organization\",\n      \"type\": \"n8n-nodes-base.pipedrive\",\n      \"position\": [\n        1060,\n        560\n      ],\n      \"parameters\": {\n        \"name\": \"={{$node[\\\"Map company size\\\"].json[\\\"company\\\"]}}\",\n        \"resource\": \"organization\",\n        \"additionalFields\": {\n          \"customProperties\": {\n            \"property\": [\n              {\n                \"name\": \"eb7a7fb64081a9b9100c0622c696c159330cf3d2\",\n                \"value\": \"={{$node[\\\"Map company size\\\"].json[\\\"pipedriveemployees\\\"]}}\"\n              }\n            ]\n          }\n        }\n      },\n      \"credentials\": {\n        \"pipedriveApi\": {\n          \"id\": \"96\",\n          \"name\": \"Pipedrive account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4c1b7376-cc1f-4974-9110-7e1481e3fdbe\",\n      \"name\": \"Create Person\",\n      \"type\": \"n8n-nodes-base.pipedrive\",\n      \"position\": [\n        1400,\n        560\n      ],\n      \"parameters\": {\n        \"name\": \"={{$node[\\\"Map company size\\\"].json[\\\"name\\\"]}}\",\n        \"resource\": \"person\",\n        \"additionalFields\": {\n          \"email\": [\n            \"={{$node[\\\"On form completion\\\"].json[\\\"What *email address* can we reach you at?\\\"]}}\"\n          ],\n          \"org_id\": \"={{$json.id}}\"\n        }\n      },\n      \"credentials\": {\n        \"pipedriveApi\": {\n          \"id\": \"96\",\n          \"name\": \"Pipedrive account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5c463f99-38e0-4c2e-a34c-86fc199b9d1f\",\n      \"name\": \"Create Lead\",\n      \"type\": \"n8n-nodes-base.pipedrive\",\n      \"position\": [\n        1600,\n        560\n      ],\n      \"parameters\": {\n        \"title\": \"={{$node[\\\"Map company size\\\"].json[\\\"company\\\"]}} lead\",\n        \"resource\": \"lead\",\n        \"organization_id\": \"={{$node[\\\"Create Organization\\\"].json.id}}\",\n        \"additionalFields\": {\n          \"person_id\": \"={{$json.id}}\"\n        }\n      },\n      \"credentials\": {\n        \"pipedriveApi\": {\n          \"id\": \"96\",\n          \"name\": \"Pipedrive account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d63383ca-a71e-4384-a3fb-942c25d7fe01\",\n      \"name\": \"Create Note\",\n      \"type\": \"n8n-nodes-base.pipedrive\",\n      \"position\": [\n        1800,\n        560\n      ],\n      \"parameters\": {\n        \"content\": \"=Website form submitted\\n\\nQuestion:\\n{{$node[\\\"Map company size\\\"].json[\\\"questions\\\"]}}\\n\\nCompany Size:\\n{{$node[\\\"Set\\\"].json[\\\"employees\\\"]}}\",\n        \"resource\": \"note\",\n        \"additionalFields\": {\n          \"lead_id\": \"={{$json.id}}\"\n        }\n      },\n      \"credentials\": {\n        \"pipedriveApi\": {\n          \"id\": \"96\",\n          \"name\": \"Pipedrive account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"78568df6-1c6b-493d-b186-9f9246de518a\",\n      \"name\": \"On form completion\",\n      \"type\": \"n8n-nodes-base.typeformTrigger\",\n      \"position\": [\n        380,\n        560\n      ],\n      \"webhookId\": \"[UPDATE ME]\",\n      \"parameters\": {\n        \"formId\": \"[UPDATE ME]\"\n      },\n      \"credentials\": {\n        \"typeformApi\": {\n          \"id\": \"21\",\n          \"name\": \"Typeform account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6bc56059-6ae7-48bd-838c-08e717bd6bd4\",\n      \"name\": \"Map company size\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        820,\n        560\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"switch ($input.item.json.employees) {\\n  case '< 20':\\n  // small\\n    $input.item.json.pipedriveemployees='59' \\n    break;\\n  case '20 - 100':\\n    // medium\\n    $input.item.json.pipedriveemployees='60' \\n    break;\\n  case '101 - 500':\\n    // large\\n    $input.item.json.pipedriveemployees='73' \\n    break;\\n  case '501 - 1000':\\n    // xlarge\\n    $input.item.json.pipedriveemployees='74' \\n    break;\\n  case '1000+':\\n    // Enterprise\\n    $input.item.json.pipedriveemployees='61' \\n    break;\\n}\\nreturn $input.item;\\n\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Set\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Map company size\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Lead\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Note\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Person\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Lead\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Map company size\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Organization\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On form completion\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Organization\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Person\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.pipedrive",
      "n8n-nodes-base.pipedrive",
      "n8n-nodes-base.pipedrive",
      "n8n-nodes-base.pipedrive",
      "n8n-nodes-base.typeformTrigger",
      "n8n-nodes-base.code"
    ],
    "trigger": null
  }
}