{
  "source": "1918_Executeworkflow_Automation_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": \"mNbQmMNEvpiZqASG\",\n  \"meta\": {\n    \"instanceId\": \"f80e038bf7b8c99e3db7e7d6a34de2c19f0af25e5d7445b15c36d79b6e8e9e55\"\n  },\n  \"name\": \"Format US Phone Number\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"bf150da4-5e01-4571-a606-10a0fb25004b\",\n      \"name\": \"When Executed by Another Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        0,\n        275\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"Phone Number\",\n              \"type\": \"any\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"7c560ecf-c827-413f-a115-7b6bc8f21a41\",\n      \"name\": \"Check if first digit is valid country code\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        660,\n        275\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"4d5c838e-9b08-4466-b00d-c695fd76d66d\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json['Phone Number'].toString().slice(0,1).toNumber() }}\",\n              \"rightValue\": 1\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"783d8fd0-2a38-41fc-87c9-b0aec9933070\",\n      \"name\": \"Add valid country code\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        880,\n        475\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"e47a1812-f69c-4182-bed5-cf037071cd9b\",\n              \"name\": \"Phone Number\",\n              \"type\": \"number\",\n              \"value\": \"=1{{ $json['Phone Number'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"a93923f3-5d8d-4617-a63d-50b66b3b1128\",\n      \"name\": \"Strip phone number formatting\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        220,\n        275\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"91d348df-6937-4118-8f7b-c9d386eb5c21\",\n              \"name\": \"Phone Number\",\n              \"type\": \"number\",\n              \"value\": \"={{ $json['Phone Number'].match(/[0-9]+/gmi).join('') }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"58d6d280-ec86-4b69-a89c-e43571ce1035\",\n      \"name\": \"Check number of digits in phone number\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        440,\n        254\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Full Number\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"66c9d1e7-dc56-4ce8-b7e4-64274feb8750\",\n                    \"operator\": {\n                      \"type\": \"number\",\n                      \"operation\": \"gte\"\n                    },\n                    \"leftValue\": \"={{ $json['Phone Number'].toString().length }}\",\n                    \"rightValue\": 11\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Number\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"2b9be422-2c4d-402a-b598-e8ab55aa5196\",\n                    \"operator\": {\n                      \"type\": \"number\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json['Phone Number'].toString().length }}\",\n                    \"rightValue\": 10\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Invalid Number\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"a442130a-f2f8-4399-8edb-180d3607ec9b\",\n                    \"operator\": {\n                      \"type\": \"number\",\n                      \"operation\": \"lt\"\n                    },\n                    \"leftValue\": \"={{ $json['Phone Number'].toString().length }}\",\n                    \"rightValue\": 10\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Not a Number\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"efba5af9-dfe4-47f0-8e82-253accd4f238\",\n                    \"operator\": {\n                      \"type\": \"number\",\n                      \"operation\": \"notExists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json['Phone Number'] }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"1f6a4aa7-0595-4db3-a9c3-dc7a72656597\",\n      \"name\": \"Format phone numbers\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1100,\n        325\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"402c8481-3dee-4b90-8a08-7e611156d012\",\n              \"name\": \"Phone Number (Input)\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('When Executed by Another Workflow').item.json['Phone Number'] }}\"\n            },\n            {\n              \"id\": \"9bc193b1-664f-40c0-8545-6792b5599777\",\n              \"name\": \"Phone Number\",\n              \"type\": \"number\",\n              \"value\": \"={{ $json['Phone Number'].toString().slice(0,11).toNumber() }}\"\n            },\n            {\n              \"id\": \"a4944be5-bfd5-4804-aeb5-d84c59145485\",\n              \"name\": \"=Phone Number (E-164)\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json['Phone Number'] ? '+' + $json['Phone Number'] : '' }}\"\n            },\n            {\n              \"id\": \"3a8d506c-45ba-4843-b186-78bf877b7903\",\n              \"name\": \"Phone Number (National)\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json['Phone Number'] ? '(' + $json['Phone Number'].toString().slice(1,4) + ') ' + $json['Phone Number'].toString().slice(4,7) + '-' + $json['Phone Number'].toString().slice(7,11) : '' }}\"\n            },\n            {\n              \"id\": \"14daf876-5f94-44d7-915b-bc4a8d6afbc4\",\n              \"name\": \"Phone Number (Full National)\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json['Phone Number'] ? '1 (' + $json['Phone Number'].toString().slice(1,4) + ') ' + $json['Phone Number'].toString().slice(4,7) + '-' + $json['Phone Number'].toString().slice(7,11) : '' }}\"\n            },\n            {\n              \"id\": \"3270cc41-bfd7-4c5d-a05e-4af8da028bd5\",\n              \"name\": \"Phone Number (International)\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json['Phone Number'] ? '00-1-' + $json['Phone Number'].toString().slice(1,4) + '-' + $json['Phone Number'].toString().slice(4,7) + '-' + $json['Phone Number'].toString().slice(7,11) : '' }}\"\n            },\n            {\n              \"id\": \"a6bd3652-071f-41b6-b523-bca427ef54f5\",\n              \"name\": \"Extension\",\n              \"type\": \"number\",\n              \"value\": \"={{ $json['Phone Number'].toString().slice(11).toNumber() }}\"\n            },\n            {\n              \"id\": \"7b808bfb-0d69-410c-b8f4-cbf2cafcf7e8\",\n              \"name\": \"Extension (String)\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json['Phone Number'].toString().slice(11).toNumber() > 0 ? $json['Phone Number'].toString().slice(11).toNumber() : '' }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"7bc3c1a0-2056-48a0-b826-21a8c1bff31b\",\n      \"name\": \"Clear invalid number\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        880,\n        125\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c8d90980-61c9-49c5-8769-32c445790328\",\n              \"name\": \"Phone Number\",\n              \"type\": \"string\",\n              \"value\": \"\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {\n    \"When Executed by Another Workflow\": [\n      {\n        \"json\": {\n          \"Phone Number\": \"1-800-555-5555\"\n        }\n      },\n      {\n        \"json\": {\n          \"Phone Number\": \"1.800.555.5555\"\n        }\n      },\n      {\n        \"json\": {\n          \"Phone Number\": \"800.555.5555\"\n        }\n      },\n      {\n        \"json\": {\n          \"Phone Number\": \"1.800.555.55551234\"\n        }\n      },\n      {\n        \"json\": {\n          \"Phone Number\": \"1(800)555-55\"\n        }\n      },\n      {\n        \"json\": {\n          \"Phone Number\": \"5(800)555-5555\"\n        }\n      },\n      {\n        \"json\": {\n          \"Phone Number\": \"1(800)555-5555 extension 1234\"\n        }\n      },\n      {\n        \"json\": {\n          \"Phone Number\": \"A string\"\n        }\n      }\n    ]\n  },\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"1b7626d5-b32b-41bd-989a-a79616769278\",\n  \"connections\": {\n    \"Clear invalid number\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format phone numbers\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format phone numbers\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Add valid country code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format phone numbers\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Strip phone number formatting\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check number of digits in phone number\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Strip phone number formatting\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check number of digits in phone number\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check if first digit is valid country code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Add valid country code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Clear invalid number\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Clear invalid number\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check if first digit is valid country code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format phone numbers\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Clear invalid number\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.executeWorkflowTrigger",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set"
    ],
    "trigger": null
  }
}