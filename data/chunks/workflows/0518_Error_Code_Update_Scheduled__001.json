{
  "source": "0518_Error_Code_Update_Scheduled.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"78ab5e476ecaa1f377d804637c3e86d3fd449c31126b69159de63d266513b694\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"d46a710d-0d0e-4040-b2b2-a2bd2e2410ff\",\n      \"name\": \"Error Trigger\",\n      \"type\": \"n8n-nodes-base.errorTrigger\",\n      \"position\": [\n        440,\n        520\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2e3a9cf6-9a9f-4f11-ab53-e3fa9c393e1f\",\n      \"name\": \"n8n\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        900,\n        180\n      ],\n      \"parameters\": {\n        \"filters\": {},\n        \"requestOptions\": {}\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"27\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7fc93f47-24ee-4000-ac3f-eb2746a926bb\",\n      \"name\": \"Gmail\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        660,\n        520\n      ],\n      \"parameters\": {\n        \"sendTo\": \"=(your email address)\",\n        \"message\": \"={{ $json.execution.url }}\",\n        \"options\": {},\n        \"subject\": \"=[n8n] workflow failed:  {{ $json.workflow.name }}\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"3\",\n          \"name\": \"gmail bart@blendernation.com\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"25ed8ec8-2c28-498a-a951-c5ef1b2a2c59\",\n      \"name\": \"get error handler\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        660,\n        180\n      ],\n      \"parameters\": {\n        \"operation\": \"get\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"requestOptions\": {}\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"27\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"44713be9-786a-4bff-b562-a23146792995\",\n      \"name\": \"n8n | update\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        1500,\n        180\n      ],\n      \"parameters\": {\n        \"operation\": \"update\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.id }}\"\n        },\n        \"requestOptions\": {},\n        \"workflowObject\": \"={{ JSON.stringify($json) }}\"\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"27\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"be27247a-71e5-4204-9c7c-2692d8a82c8b\",\n      \"name\": \"set fields\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1300,\n        180\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"const data = $json\\n\\ndata.settings.errorWorkflow = $('get error handler').item.json.id ;\\ndelete data.settings.callerPolicy;\\n\\nreturn {\\n  id: data.id,\\n  name: data.name,\\n  nodes: data.nodes,\\n  connections: data.connections,\\n  settings: data.settings\\n}\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"d8774911-f4b2-4198-838b-2d0b89002e25\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        400\n      ],\n      \"parameters\": {\n        \"width\": 483.4744075807993,\n        \"height\": 308.64949804469416,\n        \"content\": \"## Default Error Handler\\n\\nUpdate this to your preferred notification mechanism\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0baa0fc3-4d5e-4507-bd5d-65ebce68178f\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        605.0603083429507,\n        126.84319830832769\n      ],\n      \"parameters\": {\n        \"width\": 232.91556831986873,\n        \"height\": 216.67545344104974,\n        \"content\": \"get ID of self\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fabb0db7-7364-4349-8563-952c9f0e07b2\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        440,\n        180\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"dd1e0036-1093-4160-adad-ed1b0c1b3548\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        125.83113663973751\n      ],\n      \"parameters\": {\n        \"width\": 214.6984582852457,\n        \"height\": 219.7116384468202,\n        \"content\": \"Runs every day at midnight to update new workflows\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"aca838c8-ff3e-4630-824b-a6d1d8414326\",\n      \"name\": \"active && no error handler set && not this  handler workflow\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1100,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"290fd302-4e2d-44d6-8a8a-14a0b8f2c360\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notExists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.settings.errorWorkflow }}\",\n              \"rightValue\": \"=Default Error Handler\"\n            },\n            {\n              \"id\": \"2a5799e9-2030-4281-bf11-e7f9777906c5\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $json.id }}\",\n              \"rightValue\": \"={{ $('get error handler').item.json.id }}\"\n            },\n            {\n              \"id\": \"8bc4c2a0-e094-4426-8ae6-71b6e4fa9842\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.active }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"n8n\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"active && no error handler set && not this  handler workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"set fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"n8n | update\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Error Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gmail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"get error handler\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"get error handler\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"n8n\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"active && no error handler set && not this  handler workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"set fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.errorTrigger",
      "n8n-nodes-base.n8n",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.n8n",
      "n8n-nodes-base.n8n",
      "n8n-nodes-base.code",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.if"
    ],
    "trigger": "error trigger"
  }
}