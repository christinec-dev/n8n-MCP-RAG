{
  "source": "0414_Webhook_Filter_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"cb484ba7b742928a2048bf8829668bed5b5ad9787579adea888f05980292a4a7\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"8916c4a2-00a1-4c57-a661-0433a71ab316\",\n      \"name\": \"Filter out common personal emails\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"notes\": \"Saves on Enrichment credits\",\n      \"position\": [\n        1000,\n        360\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"or\",\n          \"conditions\": [\n            {\n              \"id\": \"31a3f64f-cce1-44c3-938c-f18e85c670f3\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notContains\"\n              },\n              \"leftValue\": \"={{ $json.body.user.email }}\",\n              \"rightValue\": \"@gmail.\"\n            },\n            {\n              \"id\": \"60087832-5f76-4dcc-bfe6-c899b3623af7\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notContains\"\n              },\n              \"leftValue\": \"={{ $json.body.user.email }}\",\n              \"rightValue\": \"@yahoo.\"\n            },\n            {\n              \"id\": \"7fd74d31-ef3d-4a06-aee1-202ade476c10\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notContains\"\n              },\n              \"leftValue\": \"={{ $json.body.user.email }}\",\n              \"rightValue\": \"@hotmail.\"\n            },\n            {\n              \"id\": \"4f86817c-53ec-4a80-a961-b4c9bd0c8f7c\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notContains\"\n              },\n              \"leftValue\": \"={{ $json.body.user.email }}\",\n              \"rightValue\": \"@proton.\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"bf4c1985-71ae-4bb2-86e0-8f795f89620e\",\n      \"name\": \"No clearbit enrichment available\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1520,\n        520\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0ee7d23a-f6c7-4651-9f4c-b4b041326145\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1720,\n        540\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 314.8866754976157,\n        \"height\": 119.43509109499996,\n        \"content\": \"**👈 Optional**\\nIf the workflow ends here, the email wasn't found in Clearbit. Consider checking with another enrichment service or sending a Slack message for manual verification.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"93d1b345-2954-4bb2-8c13-510bb48f730a\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1660,\n        120\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 194,\n        \"height\": 101,\n        \"content\": \"**Optional 👇**\\nChange filter criteria here to determine what \\\"high value\\\" means for you \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ad2823cf-861f-4302-8c8a-51700fbe9602\",\n      \"name\": \"Enrich user with Clearbit\",\n      \"type\": \"n8n-nodes-base.clearbit\",\n      \"notes\": \" Clearbit returns a 404 error (and in n8n empty output payload) when email is not found\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        1220,\n        360\n      ],\n      \"parameters\": {\n        \"email\": \"={{ $json.body.user.email }}\",\n        \"resource\": \"person\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"clearbitApi\": {\n          \"id\": \"fJAEKGUyTHSl0EpC\",\n          \"name\": \"max@n8n.io (use carefully!)\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"60c5727e-3e9e-48dd-8534-8b89ede90594\",\n      \"name\": \"Get company info\",\n      \"type\": \"n8n-nodes-base.clearbit\",\n      \"position\": [\n        1500,\n        280\n      ],\n      \"parameters\": {\n        \"domain\": \"={{ $json.employment.domain }}\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"clearbitApi\": {\n          \"id\": \"fJAEKGUyTHSl0EpC\",\n          \"name\": \"max@n8n.io (use carefully!)\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f5abe4a5-bbe9-4024-a448-c855d7bd8f54\",\n      \"name\": \"Filter for high value leads\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1700,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"90e62611-28d9-465a-b98e-bf866589363e\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"gte\"\n              },\n              \"leftValue\": \"={{ $json.metrics.employees }}\",\n              \"rightValue\": 30\n            },\n            {\n              \"id\": \"06c5fd69-1423-4442-bd8f-f61e5c119a39\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"lte\"\n              },\n              \"leftValue\": \"={{ $json.metrics.alexaGlobalRank }}\",\n              \"rightValue\": 100000\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"fd6cab51-0146-401d-b2ef-75780b6e8bd7\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        600,\n        11.812931088613368\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 312.11707638995097,\n        \"height\": 309.60234316641487,\n        \"content\": \"### Enrich new Discourse members then notify in Slack for high value leads\\n### [🎥 Watch set up video (~2min)](https://www.loom.com/share/d379895004374ddc85dc9171ca37c139?sid=0996f0d2-aff2-45a7-aae9-c62df4fb0799)\\n![Example result in Slack](https://i.ibb.co/s9MfsjV/Screenshot-2024-02-21-at-13-51-29.png#full-width)\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5a2e98f1-c681-4a2e-b88c-473069a12b9a\",\n      \"name\": \"On new Discourse user\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        640,\n        360\n      ],\n      \"webhookId\": \"06e900e8-9a4f-4786-bd79-928459c36e68\",\n      \"parameters\": {\n        \"path\": \"abde7a49-208b-4bce-bcb9-910c4e529b06\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"baa0ed59-75a2-4cdb-a540-073bf505bc43\",\n      \"name\": \"Post message in Channel\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1900,\n        280\n      ],\n      \"parameters\": {\n        \"text\": \"Test message!\",\n        \"select\": \"channel\",\n        \"blocksUi\": \"={\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"A high value lead just signed up on our Discourse community 👇\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"context\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"image\\\",\\n\\t\\t\\t\\t\\t\\\"image_url\\\": \\\"{{ $('Enrich user with Clearbit').item.json[\\\"avatar\\\"] }}\\\",\\n\\t\\t\\t\\t\\t\\\"alt_text\\\": \\\"User's profile avatar\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*{{ $('Enrich user with Clearbit').item.json[\\\"name\\\"][\\\"fullName\\\"] }}*, *{{ $('Enrich user with Clearbit').item.json[\\\"employment\\\"][\\\"title\\\"] }}* at *{{ $('Enrich user with Clearbit').item.json[\\\"employment\\\"][\\\"name\\\"] }}* ({{ $json[\\\"category\\\"][\\\"industry\\\"] }})\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"actions\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"actionblock789\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"button\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"Open LinkedIn Profile\\\"\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\\"style\\\": \\\"primary\\\",\\n\\t\\t\\t\\t\\t\\\"url\\\": \\\"https://www.linkedin.com/{{ $('Enrich user with Clearbit').item.json[\\\"linkedin\\\"][\\\"handle\\\"]}}\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"button\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"Email {{ $('Enrich user with Clearbit').item.json[\\\"name\\\"][\\\"givenName\\\"] }} \\\"\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\\"url\\\": \\\"mailto:{{ $('On new Discourse user').item.json[\\\"body\\\"][\\\"user\\\"][\\\"email\\\"] }}\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"#team-design\"\n        },\n        \"messageType\": \"block\",\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"114\",\n          \"name\": \"n8n Slack\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"3f9687f4-0bb4-4e46-9beb-e37eb632bb95\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        600,\n        520\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 330.80402248919853,\n        \"height\": 159.6208789325232,\n        \"content\": \"**1. ☝️ Set up `On new Discourse user` Trigger and Webhook in Discourse**\\n\\nOpen `https://{Your discourse root domain}/admin/api/web_hooks/new/edit` to create a new Webhook in Discourse. See detailed instructions in [🎥 set up video](https://www.loom.com/share/d379895004374ddc85dc9171ca37c139?t=32&sid=da64c668-f7f5-4d49-982e-d1e72fb77fcc)\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3223fcb7-dddb-4566-a6c3-340bd1a8b3e3\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1900,\n        120\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 249.15806405688022,\n        \"height\": 124.16286220264169,\n        \"content\": \"**2. 👇 Set up `Post message in Channel`  node**\\nChange `Channel` parameter to your channel like `#sales` or `#townsquare`\\n\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Get company info\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter for high value leads\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On new Discourse user\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter out common personal emails\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Enrich user with Clearbit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get company info\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No clearbit enrichment available\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter for high value leads\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Post message in Channel\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter out common personal emails\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Enrich user with Clearbit\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.filter",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.clearbit",
      "n8n-nodes-base.clearbit",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.slack",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}