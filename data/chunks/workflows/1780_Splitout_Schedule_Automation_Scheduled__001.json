{
  "source": "1780_Splitout_Schedule_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"ZI0PxugfKsyepqeH\",\n  \"meta\": {\n    \"instanceId\": \"e2c978396c9c745cf0aaa9ed3abe4464dbcef93c5fe2df809b9e14440e628df6\"\n  },\n  \"name\": \"Shopify order UTM to Baserow\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"2ba892fc-59c9-442b-aa21-a5c23b6076e5\",\n      \"name\": \"Baserow\",\n      \"type\": \"n8n-nodes-base.baserow\",\n      \"position\": [\n        2860,\n        380\n      ],\n      \"parameters\": {\n        \"tableId\": 646,\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldId\": 6164,\n              \"fieldValue\": \"={{ $json.order }}\"\n            },\n            {\n              \"fieldId\": 6165,\n              \"fieldValue\": \"={{ $json.campaign }}\"\n            },\n            {\n              \"fieldId\": 6166,\n              \"fieldValue\": \"={{ $json.content }}\"\n            },\n            {\n              \"fieldId\": 6167,\n              \"fieldValue\": \"={{ $json.medium }}\"\n            },\n            {\n              \"fieldId\": 6168,\n              \"fieldValue\": \"={{ $json.source }}\"\n            },\n            {\n              \"fieldId\": 6170,\n              \"fieldValue\": \"={{ $json.revenue }}\"\n            }\n          ]\n        },\n        \"operation\": \"create\",\n        \"databaseId\": 121\n      },\n      \"credentials\": {\n        \"baserowApi\": {\n          \"id\": \"VaQgKQ8NPXVMrvMl\",\n          \"name\": \"Baserow account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e35a0417-7a6a-46bb-8970-20aa7c19d168\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        2860,\n        720\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"76e327e9-2cc2-42dd-b31a-1aa1e9b02cd1\",\n      \"name\": \"Set Shopify Subdomain\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1900,\n        320\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"Shopify Subdomain\",\n              \"stringValue\": \"you-domain\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"85c0f561-a75d-44a4-a8a5-3791c10a2891\",\n      \"name\": \"Get orders from Shopify\",\n      \"type\": \"n8n-nodes-base.graphql\",\n      \"position\": [\n        1900,\n        560\n      ],\n      \"parameters\": {\n        \"query\": \"=query yersterdaysOrders {\\n  orders(query: \\\"created_at:{{$today.minus({days: 1})}}\\\", first: 100) {\\n    edges {\\n      node {\\n        id\\n        name\\n        totalReceived\\n        customerJourneySummary {\\n          firstVisit {\\n            id\\n            source\\n            referrerUrl\\n            landingPage\\n            utmParameters {\\n              campaign\\n              content\\n              medium\\n              source\\n              term\\n            }\\n          }\\n        }\\n      }\\n    }\\n  }\\n}\",\n        \"endpoint\": \"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"dPZdfPnUTz1YJ54o\",\n          \"name\": \"Shopify Header Auth - lanakk.com\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4ddbe343-6d4f-4079-9c60-bdf2c34fb015\",\n      \"name\": \"Every day at 00:00\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        1660,\n        560\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"6b3dd6f7-a761-4a01-bb77-cb8689fe64a0\",\n      \"name\": \"Split Shopify data into n8n items\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        2120,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data.orders.edges\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c50ca221-1330-44c9-9877-3b5bd36a05fb\",\n      \"name\": \"Transform incoming data structure\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2340,\n        560\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"order\",\n              \"stringValue\": \"={{ $json.node.name }}\"\n            },\n            {\n              \"name\": \"campaign\",\n              \"stringValue\": \"={{ $json.node.customerJourneySummary.firstVisit.utmParameters.campaign }}\"\n            },\n            {\n              \"name\": \"content\",\n              \"stringValue\": \"={{ $json.node.customerJourneySummary.firstVisit.utmParameters.content || \\\"\\\" }}\"\n            },\n            {\n              \"name\": \"medium\",\n              \"stringValue\": \"={{ $json.node.customerJourneySummary.firstVisit.utmParameters.medium || \\\"\\\" }}\"\n            },\n            {\n              \"name\": \"source\",\n              \"stringValue\": \"={{ $json.node.customerJourneySummary.firstVisit.utmParameters.medium || \\\"\\\" }}\"\n            },\n            {\n              \"name\": \"term\",\n              \"stringValue\": \"={{ $json.node.customerJourneySummary.firstVisit.utmParameters.term || \\\"\\\" }}\"\n            },\n            {\n              \"name\": \"revenue\",\n              \"type\": \"numberValue\",\n              \"numberValue\": \"={{ $json.node.totalReceived }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"c84c3619-fd41-4d06-8894-1ba7998477fb\",\n      \"name\": \"Check if \\\"Campaign\\\" is present\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2560,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"61fe8905-1b9f-45d9-9742-2d5799200d18\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.campaign }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"b0f07670-4fdd-4b64-8d77-87ea5cc399ac\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1240,\n        460\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 360.408084305475,\n        \"height\": 315.5897364788551,\n        \"content\": \"## Shopify API\\n\\nThis workflow uses GraphQL calls to the Shopify Admin API. In order to get a better understanding for the queries and mutations please check the API Docs.\\n\\n\\n[Shopify GraphQL API docs](https://shopify.dev/docs/api/admin-graphql)\\n\\nTo make it easy to build queries for the GraphQL API easy please check out the [GraphiQL App for the Admin API](https://shopify.dev/docs/apps/tools/graphiql-admin-api) from Shopify\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"742d92d7-9c3e-4515-a9ca-d840685d8ebf\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1720,\n        120\n      ],\n      \"parameters\": {\n        \"width\": 279.1188177339898,\n        \"content\": \"## Set your Shopify Subdomain here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a4feb388-0d60-41ee-a269-d39717c6267c\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1900,\n        760\n      ],\n      \"parameters\": {\n        \"width\": 279.1188177339898,\n        \"content\": \"## Shopify \\nThe n8n Shopify node cannot get the customer journey, so we get this from the Shopify GraphQL API\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"adc71ed1-fcb9-40fa-b3c8-ccca7e2fc699\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        3060,\n        360\n      ],\n      \"parameters\": {\n        \"width\": 279.1188177339898,\n        \"height\": 157.78205353137358,\n        \"content\": \"## Baserow\\nPlease map the fields coming from the IF node to your own structure in Baserow\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"c7fd635a-81e5-461b-885f-5b375bc51138\",\n  \"connections\": {\n    \"Every day at 00:00\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Shopify Subdomain\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Get orders from Shopify\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get orders from Shopify\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Shopify data into n8n items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check if \\\"Campaign\\\" is present\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Baserow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Shopify data into n8n items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Transform incoming data structure\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Transform incoming data structure\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check if \\\"Campaign\\\" is present\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.baserow",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.set",
      "n8n-nodes-base.graphql",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.set",
      "n8n-nodes-base.if",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}