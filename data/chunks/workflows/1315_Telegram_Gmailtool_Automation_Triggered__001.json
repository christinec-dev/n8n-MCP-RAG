{
  "source": "1315_Telegram_Gmailtool_Automation_Triggered.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"2723a3a635131edfcb16103f3d4dbaadf3658e386b4762989cbf49528dccbdbd\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"c70236ea-91ab-4e47-b6f6-63a70ede5d3c\",\n      \"name\": \"Google Calendar\",\n      \"type\": \"n8n-nodes-base.googleCalendarTool\",\n      \"position\": [\n        1000,\n        680\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"fields\": \"=items(summary, start(dateTime))\",\n          \"timeMin\": \"={{$fromAI(\\\"date\\\",\\\"the date after which to fetch the messages in format YYYY-MM-DDTHH:MM:SS\\\")}}\"\n        },\n        \"calendar\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"derekcheungsa@gmail.com\",\n          \"cachedResultName\": \"derekcheungsa@gmail.com\"\n        },\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"googleCalendarOAuth2Api\": {\n          \"id\": \"qx8JdPX4I5Xk9c46\",\n          \"name\": \"Google Calendar account\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"d2287bea-de47-4180-8ee6-55d4ab1a89da\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        760,\n        680\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"={{ $('Listen for incoming events').first().json.message.from.id }}\",\n        \"sessionIdType\": \"customKey\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"fa955731-86f6-4e4d-8604-dab5f52dee87\",\n      \"name\": \"Get Email\",\n      \"type\": \"n8n-nodes-base.gmailTool\",\n      \"position\": [\n        880,\n        680\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"labelIds\": [\n            \"INBOX\",\n            \"UNREAD\"\n          ],\n          \"readStatus\": \"unread\",\n          \"receivedAfter\": \"={{$fromAI(\\\"date\\\",\\\"the date after which to fetch the messages in format YYYY-MM-DDTHH:MM:SS\\\")}}\"\n        },\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"tojOpzEqFprdxS46\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"46511f47-1687-4cbe-ae41-ceb205ed1f11\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        640,\n        680\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o-mini\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"5oYe8Cxj7liOPAKk\",\n          \"name\": \"Derek T\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"64fe44db-af19-43eb-9ff1-de0a72a9e645\",\n      \"name\": \"Listen for incoming events\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        -160,\n        360\n      ],\n      \"webhookId\": \"322dce18-f93e-4f86-b9b1-3305519b7834\",\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"Ov00cT0t4h4AFtZ0\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e35c04ff-a050-4564-8c1b-5b22b556872f\",\n      \"name\": \"Telegram\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        1280,\n        360\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.output }}\",\n        \"chatId\": \"={{ $('Listen for incoming events').first().json.message.from.id }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"Markdown\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"Ov00cT0t4h4AFtZ0\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"e791d4f8-2c19-4c14-a71e-39a04f22e944\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        200,\n        360\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a0bf9719-4272-46f6-ab3b-eda6f7b44fd8\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"empty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.message.text }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"5bd1788a-3d08-4eb3-8e03-3ce82f44d2a7\",\n      \"name\": \"Speech to Text\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        620,\n        360\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"audio\",\n        \"operation\": \"transcribe\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"5oYe8Cxj7liOPAKk\",\n          \"name\": \"Derek T\"\n        }\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"b67a2a93-517b-469e-aaa4-32c422710743\",\n      \"name\": \"Voice or Text\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        40,\n        360\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"text\",\n              \"stringValue\": \"={{ $json?.message?.text || \\\"\\\" }}\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"8105c39f-9e87-44c4-9215-b3777f0b4164\",\n      \"name\": \"Get Voice File\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        380,\n        360\n      ],\n      \"parameters\": {\n        \"fileId\": \"={{ $('Listen for incoming events').item.json.message.voice.file_id }}\",\n        \"resource\": \"file\"\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"Ov00cT0t4h4AFtZ0\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"759b975f-d17c-4386-a5b3-12413f0361f4\",\n      \"name\": \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        780,\n        360\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.text }}\",\n        \"options\": {\n          \"systemMessage\": \"=You are a helpful assistant.\\n\\nToday's date is {{ $now }}.\\n\\nGuidelines:\\n- When fetching emails, filter out any promotional emails. \\n- When summarizing emails, include Sender, Message date, subject, and brief summary of email.\\n- if the user did not specify a date in the request assume they are asking for today\\n- Use baserow tool to answer questions about tasks\\n- When answering questions about calendar events, filter out events that don't apply to the question. For example, the question is about events for today, only reply with events for today. Don't mention future events if it's more than 1 week away\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.6\n    },\n    {\n      \"id\": \"5537c777-f003-4673-b48a-4993a0c10520\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        20,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 496.25,\n        \"height\": 278.75,\n        \"content\": \"## Process Telegram Request\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"40e92679-b47a-4213-bb23-3f8d086459f2\",\n      \"name\": \"Tasks\",\n      \"type\": \"n8n-nodes-base.baserowTool\",\n      \"position\": [\n        1120,\n        680\n      ],\n      \"parameters\": {\n        \"tableId\": 372174,\n        \"databaseId\": 146496,\n        \"additionalOptions\": {}\n      },\n      \"credentials\": {\n        \"baserowApi\": {\n          \"id\": \"jsgACn0VxAPoD0E2\",\n          \"name\": \"Baserow account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"570a0647-b571-4ebc-9dfe-40244b5a0b2a\",\n      \"name\": \"Contacts\",\n      \"type\": \"n8n-nodes-base.baserowTool\",\n      \"position\": [\n        1240,\n        680\n      ],\n      \"parameters\": {\n        \"tableId\": 372177,\n        \"databaseId\": 146496,\n        \"descriptionType\": \"manual\",\n        \"toolDescription\": \"Useful for getting contact information. For example emails or phone numbers.\",\n        \"additionalOptions\": {}\n      },\n      \"credentials\": {\n        \"baserowApi\": {\n          \"id\": \"jsgACn0VxAPoD0E2\",\n          \"name\": \"Baserow account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7fb1d95a-a8d6-4040-9271-5197296be7da\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -620,\n        220\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 386.9292441979969,\n        \"height\": 389.78268107403096,\n        \"content\": \"## Start here: Step-by Step Youtube Tutorial :star:\\n\\n[![Building an AI Personal Assistant](https://img.youtube.com/vi/pXjowPc6V2s/sddefault.jpg)](https://youtu.be/pXjowPc6V2s)\\n\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Voice File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Tasks\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Contacts\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Email\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Voice or Text\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Voice File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Speech to Text\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Speech to Text\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Calendar\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Listen for incoming events\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Voice or Text\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Angie, AI Assistant \\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83c\\udfeb\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Telegram\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.googleCalendarTool",
      "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "n8n-nodes-base.gmailTool",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.telegramTrigger",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.if",
      "@n8n/n8n-nodes-langchain.openAi",
      "n8n-nodes-base.set",
      "n8n-nodes-base.telegram",
      "@n8n/n8n-nodes-langchain.agent",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.baserowTool",
      "n8n-nodes-base.baserowTool",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}