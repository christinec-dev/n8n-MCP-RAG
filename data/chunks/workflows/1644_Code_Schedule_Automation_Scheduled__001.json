{
  "source": "1644_Code_Schedule_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"SJrqDqTBIAyaZQkq\",\n  \"meta\": {\n    \"instanceId\": \"73d9d5380db181d01f4e26492c771d4cb5c4d6d109f18e2621cf49cac4c50763\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"UTM Link Creator & QR Code Generator with Scheduled Google Analytics Reports\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"5efbd956-51b6-4f94-aebc-07e3e691f7eb\",\n      \"name\": \"OpenAI Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -180,\n        480\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"95QGJD3XSz0piaNU\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a1acd323-ed07-41b4-a51e-614afe361893\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        0,\n        480\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"={{ $json.timestamp }}\",\n        \"sessionIdType\": \"customKey\",\n        \"contextWindowLength\": 200\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"c3c2b5fa-c294-4306-a050-dccd592477fa\",\n      \"name\": \"Google Analytics\",\n      \"type\": \"n8n-nodes-base.googleAnalyticsTool\",\n      \"position\": [\n        160,\n        480\n      ],\n      \"parameters\": {\n        \"metricsGA4\": {\n          \"metricValues\": [\n            {\n              \"listName\": \"sessions\"\n            }\n          ]\n        },\n        \"propertyId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"404306108\",\n          \"cachedResultUrl\": \"https://analytics.google.com/analytics/web/#/p404306108/\",\n          \"cachedResultName\": \"East Coast Concrete Coating\"\n        },\n        \"dimensionsGA4\": {\n          \"dimensionValues\": [\n            {},\n            {\n              \"listName\": \"sourceMedium\"\n            }\n          ]\n        },\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"googleAnalyticsOAuth2\": {\n          \"id\": \"sVZ61SpNfC2D1Z7V\",\n          \"name\": \"Google Analytics account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"cbc7b539-2fa6-493b-a66c-13db8d8d420c\",\n      \"name\": \"Create UTM Link & Send To Database\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -440,\n        -80\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5358f2cc-bdb0-4e9b-a6b9-93418f83db02\",\n      \"name\": \"Set UTM Parameters For Link\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -220,\n        -80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"28d0a36d-5b03-4b74-9941-ef0e1aab86bf\",\n              \"name\": \"website_url\",\n              \"type\": \"string\",\n              \"value\": \"https://ecconcretecoating.com/\"\n            },\n            {\n              \"id\": \"1a2ee174-4684-4246-813f-b67285af48b8\",\n              \"name\": \"campaign_id\",\n              \"type\": \"string\",\n              \"value\": \"12246\"\n            },\n            {\n              \"id\": \"e15a846d-6e37-4fbf-a9f4-b3fce3441295\",\n              \"name\": \"campaign_source\",\n              \"type\": \"string\",\n              \"value\": \"google\"\n            },\n            {\n              \"id\": \"f15e2bb1-08a6-48c4-8458-b753864e9364\",\n              \"name\": \"campaign_medium\",\n              \"type\": \"string\",\n              \"value\": \"display\"\n            },\n            {\n              \"id\": \"548900ab-aa2c-498f-bbd9-a787306e72db\",\n              \"name\": \"campaign_name\",\n              \"type\": \"string\",\n              \"value\": \"summerfun\"\n            },\n            {\n              \"id\": \"fd8d1bd4-a75d-4c49-b795-8fda7c377b66\",\n              \"name\": \"campaign_term\",\n              \"type\": \"string\",\n              \"value\": \"conretecoating\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"45daf73a-01c2-40ab-8546-7fdd489e2a1c\",\n      \"name\": \"Create UTM Link With Parameters\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        40,\n        -140\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const items = $input.all();\\nconst updatedItems = items.map((item) => {\\n  const utmUrl = `${item?.json?.website_url}?utm_source=${item?.json?.campaign_source}&utm_medium=${item?.json?.campaign_medium}&utm_campaign=${item?.json?.campaign_name}&utm_term=${item?.json?.campaign_term}&utm_content=${item?.json?.campaign_id}`;\\n  item.json.utmUrl = utmUrl;\\n  return item;\\n});\\nreturn updatedItems;\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"a621984d-eea5-464d-9be3-e620e779abd5\",\n      \"name\": \"Submit UTM Link To Database\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        280,\n        -200\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appIXd8a8JeB9bPaL\",\n          \"cachedResultUrl\": \"https://airtable.com/appIXd8a8JeB9bPaL\",\n          \"cachedResultName\": \"Untitled Base\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblXyFxXMHraieGCa\",\n          \"cachedResultUrl\": \"https://airtable.com/appIXd8a8JeB9bPaL/tblXyFxXMHraieGCa\",\n          \"cachedResultName\": \"UTM_URL\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"URL\": \"={{ $json.utmUrl }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"id\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"id\",\n              \"defaultMatch\": true\n            },\n            {\n              \"id\": \"URL\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"URL\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"id\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"upsert\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"0ApVmNsLu7aFzQD6\",\n          \"name\": \"Airtable Personal Access Token account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"19074462-d719-4fdf-bc59-d6b2ecd1ce20\",\n      \"name\": \"Create QR Code With Submitted QR Link\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        280,\n        -20\n      ],\n      \"parameters\": {\n        \"url\": \"=https://quickchart.io/qr?text={{ $json.utmUrl }}&size=300&margin=10&ecLevel=H&dark=000000&light=FFFFFF\\n\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"a8c22bb2-f8eb-4e5f-b288-9c25e0aeb648\",\n      \"name\": \"Schedule Google Analytics Report To Marketing Manager\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -460,\n        280\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"268c110c-2b7c-4450-b5b0-5d5326eac17f\",\n      \"name\": \"Google Analytics Data Analysis Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        -100,\n        280\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.timestamp }}\",\n        \"options\": {\n          \"systemMessage\": \"\\\"You are an advanced data analytics AI specializing in executive reporting. Your task is to analyze the provided dataset and generate a structured executive summary that highlights key insights, trends, and actionable takeaways. Structure your summary in the following format:\\n\\nOverview – Briefly describe the dataset and its significance.\\nKey Performance Indicators (KPIs) – Highlight the most important metrics and compare them to previous periods if applicable.\\nTrends & Insights – Identify patterns, growth areas, declines, and anomalies.\\nOpportunities & Recommendations – Provide strategic recommendations based on the insights.\\nConclusion – Summarize the key takeaways concisely.\\n*Ensure the tone is professional, clear, and tailored for executives who require quick, data-driven insights without unnecessary details.\\\"\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"1b012731-e67b-4e0d-95b7-a7f587754a05\",\n      \"name\": \"Send Summary Report To Marketing Manager\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        300,\n        280\n      ],\n      \"webhookId\": \"a9b88615-c7e2-4b56-891a-98f4d6b34220\",\n      \"parameters\": {\n        \"sendTo\": \"john@marketingcanopy.com\",\n        \"message\": \"={{ $json.output }}\",\n        \"options\": {},\n        \"subject\": \"Google Analytics Metrics Summary Report\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"pIXP1ZseBP4Z5CCp\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"9da758e1-8aed-446b-a074-8fee5405583f\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -540,\n        -280\n      ],\n      \"parameters\": {\n        \"width\": 500,\n        \"height\": 400,\n        \"content\": \"Create a marketing link with UTM parameters. Easily store in database and have QR code created and ready as well.\\n\\nType in requirements:\\nwebsite URL\\ncampaign id\\ncampaign source\\ncampaign medium\\ncampaign name\\ncampaign term\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"92f5df8d-88ca-4b58-b544-c0b2d3578a73\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        -380\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 580,\n        \"height\": 540,\n        \"content\": \"Code node creates the URL with UTM parameters. \\n\\nIt then sends to your Airtable database to store for records. It also creates a QR code with the embedded link to be used for materials. \\n\\nSample Airtable Setup:\\n-Website Link UTM column\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"408af10c-4b0e-4d94-b02d-5d887fb150c3\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -540,\n        180\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1340,\n        \"height\": 460,\n        \"content\": \"Schedule a Google Analytics Reports with Medium/Source to track UTM link performance. Update the reporting fields to fit your business needs. You can track traffic, conversions and other engagement metrics.\\n\\n*Sample Google Report Metrics: Sessions. Update metrics as needed.\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"6e6641fd-a59c-49e9-af43-1b2b9b458544\",\n  \"connections\": {\n    \"Google Analytics\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Google Analytics Data Analysis Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Google Analytics Data Analysis Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"Google Analytics Data Analysis Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set UTM Parameters For Link\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create UTM Link With Parameters\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Submit UTM Link To Database\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Create UTM Link With Parameters\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create QR Code With Submitted QR Link\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Submit UTM Link To Database\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create UTM Link & Send To Database\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set UTM Parameters For Link\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Analytics Data Analysis Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Summary Report To Marketing Manager\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send Summary Report To Marketing Manager\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Schedule Google Analytics Report To Marketing Manager\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Analytics Data Analysis Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "n8n-nodes-base.googleAnalyticsTool",
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.code",
      "n8n-nodes-base.airtable",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.scheduleTrigger",
      "@n8n/n8n-nodes-langchain.agent",
      "n8n-nodes-base.gmail",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}