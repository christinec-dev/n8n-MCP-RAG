{
  "source": "1523_Datetime_Code_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"JIegnKLVXTkkTzfO\",\n  \"meta\": {\n    \"instanceId\": \"bdce9ec27bbe2b742054f01d034b8b468d2e7758edd716403ad5bd4583a8f649\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Daylight Saving Time Notification\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"87b11535-a9ae-49d4-a33f-b895274643e5\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d1cd9157-9948-43fd-a725-2a82a21a82c6\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        340,\n        -300\n      ],\n      \"parameters\": {\n        \"width\": 394,\n        \"height\": 264,\n        \"content\": \"## How it works\\n- check list of timezones\\n- check if any timezone switches from/to Daylight Saving Time\\n- notify on Slack\\n\\n## Remember to set up\\n- Add timezones to \\\"Timezones List\\\"\\n- Slack notification channel\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0f4369fc-80b6-4fd6-8533-4aacbf4c9c65\",\n      \"name\": \"Timezones List\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        220,\n        0\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return [\\n\\t{\\n      timezone : \\\"America/New_York\\\"\\n\\t},\\n\\t{\\n      timezone : \\\"Europe/Warsaw\\\"\\n\\t},\\n];\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"3c1e6cd7-3812-4670-a53f-7270e29574f9\",\n      \"name\": \"Calculate Zone Date and Time\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        440,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"4e9f973f-a11f-474b-89ce-dac4a77a7c68\",\n              \"name\": \"datetime_zone\",\n              \"type\": \"string\",\n              \"value\": \"={{ $now.setZone( $json.timezone ) }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"7f49ac42-afcb-4552-84da-180bc65b84b0\",\n      \"name\": \"Check If Daylight Saving Time\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        40,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"4e9f973f-a11f-474b-89ce-dac4a77a7c68\",\n              \"name\": \"datetime_zone_dst\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.datetime_zone.toDateTime().setZone($json.timezone).isInDST }}\"\n            },\n            {\n              \"id\": \"ff13ee6d-c146-4dcb-98c4-6cb9b2474b1d\",\n              \"name\": \"datetime_zone_tomorrow_dst\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.datetime_zone_tomorrow.toDateTime().setZone($json.timezone).isInDST }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"f3596b52-03af-4a07-be04-a7300fc7b239\",\n      \"name\": \"Check If Change Tomorrow\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        240,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"1f49e05d-d36e-4652-8ad3-b2266d750d94\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $json.datetime_zone_dst }}\",\n              \"rightValue\": \"={{ $json.datetime_zone_tomorrow_dst }}\"\n            }\n          ]\n        },\n        \"looseTypeValidation\": true\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"612e2e06-0283-4acd-8d85-cba16acb7126\",\n      \"name\": \"Send Notification On Upcoming Change\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        660,\n        240\n      ],\n      \"webhookId\": \"871515be-56fc-4de7-835b-119d394fea47\",\n      \"parameters\": {\n        \"text\": \"=Tomorrow is Daylight Saving Time change in zone {{ $json.timezone }} - remember to adjust meeting times!\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\"\n        },\n        \"otherOptions\": {},\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"slackOAuth2Api\": {\n          \"id\": \"B0jUtT53pVAEPaQM\",\n          \"name\": \"Slack Oauth\"\n        }\n      },\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"d5e47ff8-d530-47ee-a98d-3a50a7054cb0\",\n      \"name\": \"Calculate Tomorrow's Date\",\n      \"type\": \"n8n-nodes-base.dateTime\",\n      \"position\": [\n        660,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"includeInputFields\": true\n        },\n        \"duration\": 1,\n        \"magnitude\": \"={{ $json.datetime_zone }}\",\n        \"operation\": \"addToDate\",\n        \"outputFieldName\": \"datetime_zone_tomorrow\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"5ae0aa75-515d-4025-901e-82693f697436\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        0,\n        -160\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"e233c67c-a79b-4c96-a172-0465021d3911\",\n      \"name\": \"Send Email On Upcoming Change\",\n      \"type\": \"n8n-nodes-base.emailSend\",\n      \"position\": [\n        660,\n        420\n      ],\n      \"webhookId\": \"40cc0fc1-c135-44fc-b3cb-dfec6fc1ce75\",\n      \"parameters\": {\n        \"text\": \"=Tomorrow is Daylight Saving Time change in zone {{ $json.timezone }} - remember to adjust meeting times!\",\n        \"options\": {},\n        \"subject\": \"DST change tomorrow in {{ $json.timezone }}\",\n        \"emailFormat\": \"text\"\n      },\n      \"credentials\": {\n        \"smtp\": {\n          \"id\": \"tkdzDgcUAt04af3B\",\n          \"name\": \"SMTP account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"7605726a-1a09-4564-b60f-aee3ac0b8c70\",\n  \"connections\": {\n    \"Timezones List\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Calculate Zone Date and Time\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Timezones List\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check If Change Tomorrow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Notification On Upcoming Change\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Send Email On Upcoming Change\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        []\n      ]\n    },\n    \"Calculate Tomorrow's Date\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check If Daylight Saving Time\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Calculate Zone Date and Time\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Calculate Tomorrow's Date\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check If Daylight Saving Time\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check If Change Tomorrow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Timezones List\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.code",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.if",
      "n8n-nodes-base.slack",
      "n8n-nodes-base.dateTime",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.emailSend"
    ],
    "trigger": "schedule trigger"
  }
}