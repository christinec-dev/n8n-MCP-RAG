{
  "source": "0285_Zendesk_HubSpot_Create_Scheduled.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"60e3ee97-68cb-46ef-8a92-a9e8d1cdd45d\",\n      \"name\": \"Add Zendesk company data to Hubspot data\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1120,\n        320\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByKey\",\n        \"propertyName1\": \"properties.name.value\",\n        \"propertyName2\": \"name\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d72c4307-c24c-494f-b5c2-57fd44ede5a5\",\n      \"name\": \"Set new last execution timestamp\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        1820,\n        300\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Code here will run once per input item.\\n// More info and help: https://docs.n8n.io/nodes/n8n-nodes-base.functionItem\\n// Tip: You can use luxon for dates and $jmespath for querying JSON structures\\n\\n// Add a new field called 'myNewField' to the JSON of the item\\nconst staticData = getWorkflowStaticData('global');\\n\\nstaticData.lastExecution = $item(0).$node[\\\"Get last execution timestamp\\\"].executionTimeStamp;\\n\\nreturn item;\"\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c10e7993-4cd4-4b79-9dce-66097d797b30\",\n      \"name\": \"Get last execution timestamp\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        400,\n        300\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Code here will run once per input item.\\n// More info and help: https://docs.n8n.io/nodes/n8n-nodes-base.functionItem\\n// Tip: You can use luxon for dates and $jmespath for querying JSON structures\\n\\n// Add a new field called 'myNewField' to the JSON of the item\\nconst staticData = getWorkflowStaticData('global');\\n\\nif(!staticData.lastExecution){\\n  staticData.lastExecution = new Date();\\n}\\n\\nitem.executionTimeStamp = new Date();\\nitem.lastExecution = staticData.lastExecution;\\n\\n\\nreturn item;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3c154d99-7984-4561-9fdf-60b0f705c5ee\",\n      \"name\": \"Get modified companies\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        620,\n        300\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"since\": \"={{ $json[\\\"lastExecution\\\"] }}\"\n        },\n        \"resource\": \"company\",\n        \"operation\": \"getRecentlyModified\",\n        \"authentication\": \"appToken\"\n      },\n      \"credentials\": {\n        \"hubspotAppToken\": {\n          \"id\": \"13\",\n          \"name\": \"HubSpot App Token account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6f05aae1-731e-42cf-b403-baf5f86aa934\",\n      \"name\": \"Get all Zendesk organisations\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        880,\n        420\n      ],\n      \"parameters\": {\n        \"resource\": \"organization\",\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a8ae65dc-0c60-42cb-9996-26e84770e299\",\n      \"name\": \"Company exists in Zendesk\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1340,\n        320\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json[\\\"id\\\"] }}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a81ff688-8639-476d-8274-383e5ff51b97\",\n      \"name\": \"Create organisation\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        1600,\n        400\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $json[\\\"properties\\\"].name.value }}\",\n        \"resource\": \"organization\",\n        \"additionalFields\": {\n          \"domain_names\": \"={{ $json[\\\"properties\\\"].domain.value }}\"\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fd2780b3-c5cc-4535-ba71-840b13578a07\",\n      \"name\": \"Update organisation\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        1600,\n        200\n      ],\n      \"parameters\": {\n        \"id\": \"={{ $json[\\\"id\\\"] }}\",\n        \"resource\": \"organization\",\n        \"operation\": \"update\",\n        \"updateFields\": {\n          \"name\": \"={{ $json[\\\"properties\\\"].name.value }}\",\n          \"domain_names\": \"={{ $json[\\\"properties\\\"].domain.value }}\"\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7f19e5ba-e973-4e6c-a2d0-a320ac314fa6\",\n      \"name\": \"Every 5 minutes\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        180,\n        300\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyX\",\n              \"unit\": \"minutes\",\n              \"value\": 5\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Every 5 minutes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get last execution timestamp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create organisation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set new last execution timestamp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update organisation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set new last execution timestamp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get modified companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all Zendesk organisations\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Add Zendesk company data to Hubspot data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Company exists in Zendesk\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update organisation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create organisation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get last execution timestamp\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get modified companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all Zendesk organisations\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add Zendesk company data to Hubspot data\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Add Zendesk company data to Hubspot data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Company exists in Zendesk\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.merge",
      "n8n-nodes-base.functionItem",
      "n8n-nodes-base.functionItem",
      "n8n-nodes-base.hubspot",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.if",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.cron"
    ],
    "trigger": null
  }
}