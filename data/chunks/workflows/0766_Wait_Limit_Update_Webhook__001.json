{
  "source": "0766_Wait_Limit_Update_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"fddb3e91967f1012c95dd02bf5ad21f279fc44715f47a7a96a33433621caa253\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"b717d887-4d4b-4f21-97a3-978fcde2c9f6\",\n      \"name\": \"slack_action_payload\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -1020,\n        100\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"= {{ $json.body.payload }}\"\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"046950ad-a40c-47d9-8dab-406bc6bf6e12\",\n      \"name\": \"slack_action_drink_data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -800,\n        100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"3d208143-1b80-4701-bff7-fc1dfbf9b89c\",\n              \"name\": \"value\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.actions[0].value }}\"\n            },\n            {\n              \"id\": \"1600b553-8ef1-44ac-9ae7-d33be8e539e5\",\n              \"name\": \"message_text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.message.text }}\"\n            },\n            {\n              \"id\": \"5ea5f093-7e36-4de0-aa14-fb2bc0788e84\",\n              \"name\": \"shortcut_url\",\n              \"type\": \"string\",\n              \"value\": \"=shortcuts://run-shortcut?name=darrell_water&input=\"\n            },\n            {\n              \"id\": \"5d9e4946-10eb-48ed-87d8-978235d44ec1\",\n              \"name\": \"shortcut_url_data\",\n              \"type\": \"string\",\n              \"value\": \"={\\\"value\\\":{{ $json.actions[0].value }},\\\"time\\\":\\\"{{ $now.format(\\\"yyyy-MM-dd\\\") }}T{{ $now.format(\\\"HH:mm:ss\\\") }}\\\"}\"\n            },\n            {\n              \"id\": \"625258d8-55eb-4252-b313-b4954da57de1\",\n              \"name\": \"message_ts\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.container.message_ts }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"f90ec31c-b63e-470c-84ba-9429539d6bf4\",\n      \"name\": \"OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        140,\n        -800\n      ],\n      \"parameters\": {\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {\n          \"temperature\": 1\n        },\n        \"messages\": {\n          \"values\": [\n            {\n              \"content\": \"=Remind to drink water, the last time you drank water was {{ DateTime.fromISO($('combine data').item.json.date +\\\"T\\\"+$('combine data').item.json.time).format('yyyy-MM-dd HH:mm:ss') }}\\nThe current time is {{ $now.format('yyyy-MM-dd HH:mm:ss') }}\\nThe user has drunk water {{ $('combine data').item.json.count_date }} times today\"\n            },\n            {\n              \"role\": \"assistant\",\n              \"content\": \"You are a gentle and professional Chinese medicine practitioner who provides health advice in a friendly, encouraging tone. Please generate a response in JSON format with the structure {\\\"message\\\": \\\"...\\\"}, keeping the message brief (<100-200 words), persuasive, reminding me to drink water, clearly specifying intervals (such as 2 hours), and mentioning at least one benefit of drinking water (such as replenishing qi) and one negative effect of dehydration (such as blood stasis), encouraging me to take action to drink water, ending with an action prompt. Start directly without using any form of address. \"\n            },\n            {\n              \"role\": \"system\",\n              \"content\": \"must return {\\\\\\\"message\\\\\\\": \\\\\\\"...\\\\\\\"} and **responding in English**\"\n            }\n          ]\n        },\n        \"jsonOutput\": true\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"AE7fbXM0LWEUpaUf\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"28fe1f82-a8d6-4a9a-9061-ec94a7344fa3\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -1260,\n        -800\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"cronExpression\",\n              \"expression\": \"=0 {{ Math.floor(Math.random() * 11) }} 8-23 * * *\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"ef12fb27-4377-42be-b9bc-bdbaaaa4c754\",\n      \"name\": \"Limit\",\n      \"type\": \"n8n-nodes-base.limit\",\n      \"position\": [\n        -840,\n        -640\n      ],\n      \"parameters\": {\n        \"keep\": \"lastItems\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e36862e2-912f-4e41-80b0-6f66cc8ba0ba\",\n      \"name\": \"Google Sheets - Get Target\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -1040,\n        -820\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"returnFirstMatch\": false\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 2141999480,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1NRPq87zvNiBGKzVJaT0YYc55qp-6-9kGA4VpqkylpbI/edit#gid=2141999480\",\n          \"cachedResultName\": \"setting\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1NRPq87zvNiBGKzVJaT0YYc55qp-6-9kGA4VpqkylpbI\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1NRPq87zvNiBGKzVJaT0YYc55qp-6-9kGA4VpqkylpbI/edit?usp=drivesdk\",\n          \"cachedResultName\": \"n8n-drink-water\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"atsKA0m2aQXeL6i6\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"9809c9bd-51ff-4277-9f0f-5e1438c25fe8\",\n      \"name\": \"Summarize\",\n      \"type\": \"n8n-nodes-base.summarize\",\n      \"position\": [\n        -840,\n        -500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToSummarize\": {\n          \"values\": [\n            {\n              \"field\": \"value\",\n              \"aggregation\": \"sum\"\n            },\n            {\n              \"field\": \"date\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"ca995a95-9c35-43e4-ab68-0f7aa44f99d1\",\n      \"name\": \"combine data\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -620,\n        -800\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combineBy\": \"combineByPosition\",\n        \"numberInputs\": 3\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"44da169c-a2da-427c-aa46-54082b27e94b\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -200,\n        -800\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"350fc192-3049-407a-b468-bfdcfbdde966\",\n              \"operator\": {\n                \"type\": \"dateTime\",\n                \"operation\": \"after\"\n              },\n              \"leftValue\": \"={{ DateTime.fromISO($('combine data').item.json.date +\\\"T\\\"+$('combine data').item.json.time).format('yyyy-MM-dd HH:mm:ss') }}\",\n              \"rightValue\": \"={{ $now.minus(30, \\\"minutes\\\") }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"bc85d85a-cee2-43ab-a434-b26c5cd69122\",\n      \"name\": \"Wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"notes\": \"If the user log water recently. \\nWait for another 3x minutes\",\n      \"position\": [\n        -20,\n        -640\n      ],\n      \"webhookId\": \"fb26360f-6364-4069-a3f1-ed5c37ecccc0\",\n      \"parameters\": {\n        \"unit\": \"minutes\",\n        \"amount\": \"={{ Math.floor(Math.random() * 11) + 21 }}\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"551c217e-9192-486e-ae9f-068bebd0792a\",\n      \"name\": \"slack drink webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -1200,\n        100\n      ],\n      \"webhookId\": \"f992f346-0076-4a79-a046-5b5c295bf6c2\",\n      \"parameters\": {\n        \"path\": \"f992f346-0076-4a79-a046-5b5c295bf6c2\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"c000d036-7246-47a5-9001-ffc482c74371\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1340,\n        -960\n      ],\n      \"parameters\": {\n        \"width\": 1060,\n        \"height\": 620,\n        \"content\": \"## Grab recent drink data\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fd4bdbf4-c2d0-497c-891e-2667a85fa2ad\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -260,\n        -960\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 360,\n        \"height\": 500,\n        \"content\": \"If already drink recently. Delay the notification in 3x minutes randomly\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cd4b4928-a858-4f12-b294-51ba8a4484da\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        -960\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 580,\n        \"height\": 360,\n        \"content\": \"## Send the slack notification with AI wording. Also have the drink water action buttons\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cc7c8459-a97d-4ee9-b97c-b4a95afecf5a\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1340,\n        -320\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 1300,\n        \"height\": 660,\n        \"content\": \"## When User interact the drink button. Record the drink value to sheet and send back the iOS health log water url to start the shortcut\\n\\n**Note for Shortcut:**\\n\\nThe shortcul url will be like `shortcuts://run-shortcut?name=darrell_water&input=%7B%22value%22%3A100%2C%22time%22%3A%222025-03-04T16%3A10%3A15%22%7D`\\n\\nIt's url encoded. The decoded version will be:\\n`shortcuts://run-shortcut?name=darrell_water&input={\\\"value\\\":100,\\\"time\\\":\\\"2025-03-04T16:10:15\\\"}`\\n\\nWe can see it pass the shortcut name and input with json string value. This will be used in iOS shortcut\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e8e388e0-dddc-4db2-b5fa-acb76d025580\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1700,\n        -960\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 340,\n        \"height\": 240,\n        \"content\": \"## Created by darrell_tw_ \\n\\nAn engineer now focus on AI and Automation\\n\\n### contact me with following:\\n[X](https://x.com/darrell_tw_)\\n[Threads](https://www.threads.net/@darrell_tw_)\\n[Instagram](https://www.instagram.com/darrell_tw_/)\\n[Website](https://www.darrelltw.com/)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"32b098ea-a72f-4906-9a39-916afcf47dc8\",\n      \"name\": \"Slack send drink notification\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        480,\n        -800\n      ],\n      \"webhookId\": \"1ffefb29-4176-4a9c-a8e2-cfc3caf05910\",\n      \"parameters\": {\n        \"text\": \"喝水提醒\",\n        \"select\": \"channel\",\n        \"blocksUi\": \"={\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"{{ $json.message.content.message ? $json.message.content.message : 'Time to drink！' }}\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"{{ $('Edit Fields-Set progress').item.json.progress_image }}\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"actions\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"button\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true,\\n\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"100\\\"\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\\"style\\\": \\\"primary\\\",\\n\\t\\t\\t\\t\\t\\\"value\\\": \\\"100\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"button\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true,\\n\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"150\\\"\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\\"style\\\": \\\"primary\\\",\\n\\t\\t\\t\\t\\t\\\"value\\\": \\\"150\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"button\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true,\\n\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"200\\\"\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\\"style\\\": \\\"primary\\\",\\n\\t\\t\\t\\t\\t\\\"value\\\": \\\"200\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"button\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true,\\n\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"250\\\"\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\\"style\\\": \\\"primary\\\",\\n\\t\\t\\t\\t\\t\\\"value\\\": \\\"250\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"button\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true,\\n\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"300\\\"\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\\"style\\\": \\\"primary\\\",\\n\\t\\t\\t\\t\\t\\\"value\\\": \\\"300\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"C08FW6YKVC1\",\n          \"cachedResultName\": \"n8n-drink-water-nofity-demo\"\n        },\n        \"messageType\": \"block\",\n        \"otherOptions\": {},\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"slackOAuth2Api\": {\n          \"id\": \"sD1J9ZLyEhcglrRa\",\n          \"name\": \"Slack account\"\n        }\n      },\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"8f550d8f-b960-41df-8a3b-2443327d5892\",\n      \"name\": \"Send to Slack with confirm\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        -560,\n        0\n      ],\n      \"webhookId\": \"fc8af764-ed01-4ca1-acef-80b8076bb9db\",\n      \"parameters\": {\n        \"text\": \"=Log Successfully\",\n        \"select\": \"channel\",\n        \"blocksUi\": \"={\\n\\t\\\"blocks\\\": [\\n        {\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Already log the water\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Click me to Shortcut\\\"\\n\\t\\t\\t},\\n\\t\\t\\t\\\"accessory\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"button\\\",\\n\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"iOS Health\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\\"value\\\": \\\"click\\\",\\n\\t\\t\\t\\t\\\"url\\\": \\\"{{ $('slack_action_drink_data').item.json.shortcut_url}}{{ $('slack_action_drink_data').item.json.shortcut_url_data.urlEncode() }}\\\",\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"button-action\\\"\\n\\t\\t\\t}\\n\\t\\t}\\n\\t]\\n}\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"C08FW6YKVC1\",\n          \"cachedResultName\": \"n8n-drink-water-nofity-demo\"\n        },\n        \"messageType\": \"block\",\n        \"otherOptions\": {\n          \"thread_ts\": {\n            \"replyValues\": {\n              \"thread_ts\": \"={{ $('slack_action_drink_data').item.json.message_ts }}\"\n            }\n          }\n        },\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"slackOAuth2Api\": {\n          \"id\": \"sD1J9ZLyEhcglrRa\",\n          \"name\": \"Slack account\"\n        }\n      },\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"3383574c-7c96-4332-9876-2e47ad21f3de\",\n      \"name\": \"Edit Fields-Set progress\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -420,\n        -800\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"427f1878-99a0-446a-b4a2-2c49c919c809\",\n              \"name\": \"progress_percent\",\n              \"type\": \"number\",\n              \"value\": \"={{ ($json.sum_value/$json.target) }}\"\n            },\n            {\n              \"id\": \"3fd85387-6ad3-4f4a-92ee-1db7e84f065b\",\n              \"name\": \"progress_image\",\n              \"type\": \"string\",\n              \"value\": \"={{ (function() {    let p = $json.sum_value / $json.target;    let n = Math.round(p * 10);    n = Math.max(0, Math.min(10, n));    return '💧'.repeat(n) + '⬜'.repeat(10 - n);  })() }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"67fa160d-0ea2-48c2-83b5-2f5f1b6a01b5\",\n      \"name\": \"Google Sheets - log water value to sheet\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -560,\n        180\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"date\": \"={{ $now.format('yyyy-MM-dd') }}\",\n            \"time\": \"={{ $now.format('HH:mm:ss') }}\",\n            \"value\": \"={{ $json.value }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"time\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"time\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"value\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"value\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1NRPq87zvNiBGKzVJaT0YYc55qp-6-9kGA4VpqkylpbI/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1NRPq87zvNiBGKzVJaT0YYc55qp-6-9kGA4VpqkylpbI\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1NRPq87zvNiBGKzVJaT0YYc55qp-6-9kGA4VpqkylpbI/edit?usp=drivesdk\",\n          \"cachedResultName\": \"n8n-drink-water\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"atsKA0m2aQXeL6i6\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"6d336f63-0016-46ae-b71f-2e1dfac06826\",\n      \"name\": \"Google Sheets - Get Today Water Log\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -1040,\n        -640\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"returnFirstMatch\": false\n        },\n        \"filtersUI\": {\n          \"values\": [\n            {\n              \"lookupValue\": \"={{ $now.format('yyyy-MM-dd') }}\",\n              \"lookupColumn\": \"date\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1NRPq87zvNiBGKzVJaT0YYc55qp-6-9kGA4VpqkylpbI/edit#gid=0\",\n          \"cachedResultName\": \"log\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1NRPq87zvNiBGKzVJaT0YYc55qp-6-9kGA4VpqkylpbI\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1NRPq87zvNiBGKzVJaT0YYc55qp-6-9kGA4VpqkylpbI/edit?usp=drivesdk\",\n          \"cachedResultName\": \"n8n-drink-water\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"atsKA0m2aQXeL6i6\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Limit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"combine data\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"OpenAI\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack send drink notification\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Summarize\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"combine data\",\n            \"type\": \"main\",\n            \"index\": 2\n          }\n        ]\n      ]\n    },\n    \"combine data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields-Set progress\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheets - Get Target\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Google Sheets - Get Today Water Log\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"slack drink webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"slack_action_payload\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"slack_action_payload\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"slack_action_drink_data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"slack_action_drink_data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheets - log water value to sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Send to Slack with confirm\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit Fields-Set progress\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Sheets - Get Target\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"combine data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send to Slack with confirm\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Google Sheets - Get Today Water Log\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Limit\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Summarize\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "@n8n/n8n-nodes-langchain.openAi",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.limit",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.summarize",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.if",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.slack",
      "n8n-nodes-base.slack",
      "n8n-nodes-base.set",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.googleSheets"
    ],
    "trigger": "schedule trigger"
  }
}