{
  "source": "0468_Splitout_Code_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"8eaf0925-1394-4771-bf43-281ad14fefb4\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        540,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 301.3874093724939,\n        \"height\": 371.765663140765,\n        \"content\": \"## Data check\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ab31ac7c-6bd4-44f6-8c0c-8e41463a3983\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        560,\n        940\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 272.8190508599808,\n        \"height\": 80,\n        \"content\": \"Checks that the data returned by OpenAI is correct\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"306ffdb5-d6b6-4e49-a26d-a256e32f7c67\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1940,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 302,\n        \"height\": 392,\n        \"content\": \"## Draft on WordPress\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"928da5f9-194c-461d-a5dd-7fd5c8563345\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1960,\n        960\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 254.77269221373095,\n        \"height\": 80,\n        \"content\": \"The article is posted as a draft on WordPress\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"271f6b4d-cf7c-49b8-9479-dd753d7c5199\",\n      \"name\": \"Sticky Note10\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2260,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 678,\n        \"height\": 389,\n        \"content\": \"## Featured image\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"efb047c4-b835-4706-af6a-b40c6cd76757\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2280,\n        960\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 517.9195082760601,\n        \"height\": 80,\n        \"content\": \"The image is generated with Dall-E, uploaded to WordPress, and then connected to the post as its featured image\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4f78eb2c-a501-4774-b5ab-29d7aa83817d\",\n      \"name\": \"Sticky Note12\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        160,\n        940\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 287.370178643191,\n        \"height\": 80,\n        \"content\": \"Starting from the given keywords, generates the article title, subtitle, chapters, and image prompt\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"536d265a-1c0b-4262-adab-96edd5924530\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        140,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 360,\n        \"height\": 371,\n        \"content\": \"## Article structure\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8b4b7cf6-4809-44e7-af9a-c72919981698\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -400,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 239.97343293577688,\n        \"height\": 370.512611879577,\n        \"content\": \"## User form\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"734b8ac2-2148-4d56-ab04-84f12991cf44\",\n      \"name\": \"Sticky Note13\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -380,\n        940\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 199.7721486302032,\n        \"height\": 80,\n        \"content\": \"The user triggers the post creation\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c54f91a7-ac3d-4029-a19f-3fa3794d581a\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2960,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 220,\n        \"height\": 391,\n        \"content\": \"## User feedback\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"509e89e7-8916-4228-91ae-baae25a75be7\",\n      \"name\": \"Sticky Note14\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2980,\n        960\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 183.38125554060056,\n        \"height\": 80,\n        \"content\": \"Final confirmation to the user\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5c6e90c4-9714-43db-a82c-54fcbf43a26c\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        880,\n        1280\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 281.2716777103785,\n        \"height\": 288.4116890365125,\n        \"content\": \"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nUser is notified to try again since some data is missing\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"54e10057-b300-475b-8280-cb761acc303a\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        140,\n        1280\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 340,\n        \"height\": 275,\n        \"content\": \"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nWikipedia is used to write the article\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5f5b9ad9-1da5-4321-b6b4-e1985ff257ca\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -120,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 226.71615243495023,\n        \"height\": 370.512611879577,\n        \"content\": \"## Settings\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6e298414-634f-45fb-b931-2abcae9c6db1\",\n      \"name\": \"Sticky Note15\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -100,\n        940\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 179.37633247508526,\n        \"height\": 80,\n        \"content\": \"Set the URL of your WordPress here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"94b09f31-31aa-4284-936e-c37fb3088acc\",\n      \"name\": \"Sticky Note16\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        880,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 225.47038972308582,\n        \"height\": 370.512611879577,\n        \"content\": \"## Chapters split\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"633cba39-ec92-410c-b010-083048487b2b\",\n      \"name\": \"Sticky Note17\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        900,\n        940\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 185.6051460344073,\n        \"height\": 80,\n        \"content\": \"Splits out chapter contents from the previous node\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4c9fd35f-d69d-4ced-a759-175336f43c8a\",\n      \"name\": \"Sticky Note18\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1160,\n        940\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 287.370178643191,\n        \"height\": 80,\n        \"content\": \"Writes the text for each chapter\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0d751d84-117a-4bf4-a9a7-d5ad1b557fec\",\n      \"name\": \"Sticky Note19\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1140,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 333.40108076977657,\n        \"height\": 370.512611879577,\n        \"content\": \"## Chapters text\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ce36a500-136b-4082-988c-5f9b6dd6d971\",\n      \"name\": \"Sticky Note21\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1500,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 420.4253447940705,\n        \"height\": 514.2177254645992,\n        \"content\": \"## Content preparation\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9da83dc4-9e99-42a4-88a1-27ef87df6d09\",\n      \"name\": \"Sticky Note22\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1520,\n        960\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 368.1523541074699,\n        \"height\": 80,\n        \"content\": \"Merges the content and prepare it before sending it to WordPress\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8591f4cb-edc4-4582-96b4-bcb2214a27a7\",\n      \"name\": \"On form submission\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        -340,\n        1080\n      ],\n      \"webhookId\": \"080f8376-cc82-49cc-8dd0-6db36bb887ab\",\n      \"parameters\": {\n        \"options\": {\n          \"path\": \"create-wordpress-post\"\n        },\n        \"formTitle\": \"Create a WordPress post with AI\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldLabel\": \"Keywords (comma-separated)\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"dropdown\",\n              \"fieldLabel\": \"Number of chapters\",\n              \"fieldOptions\": {\n                \"values\": [\n                  {\n                    \"option\": \"1\"\n                  },\n                  {\n                    \"option\": \"2\"\n                  },\n                  {\n                    \"option\": \"3\"\n                  },\n                  {\n                    \"option\": \"4\"\n                  },\n                  {\n                    \"option\": \"5\"\n                  },\n                  {\n                    \"option\": \"6\"\n                  },\n                  {\n                    \"option\": \"7\"\n                  },\n                  {\n                    \"option\": \"8\"\n                  },\n                  {\n                    \"option\": \"9\"\n                  },\n                  {\n                    \"option\": \"10\"\n                  }\n                ]\n              },\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"number\",\n              \"fieldLabel\": \"Max words count\",\n              \"requiredField\": true\n            }\n          ]\n        },\n        \"responseMode\": \"lastNode\",\n        \"formDescription\": \"Fill this form with the required information to create a draft post on WordPress\"\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"59619ea3-ac29-4188-9050-a6711c3f0921\",\n      \"name\": \"Split Out\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        940,\n        1080\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"message.content.chapters\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"728b7e4c-7b4a-46d9-ac86-98c23bda6c98\",\n      \"name\": \"OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1180,\n        1080\n      ],\n      \"parameters\": {\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {},\n        \"messages\": {\n          \"values\": [\n            {\n              \"content\": \"=Write a chapter for the article: {{ $('Create post title and structure').item.json.message.content.title }}, {{ $('Create post title and structure').item.json.message.content.subtitle  }}, that talks about {{ $('Settings').item.json[\\\"keywords\\\"] }}\\n\\nThis is the prompt for the chapter titled {{ $json.title }}: {{ $json.prompt }}.\\n\\nGuidelines:\\n- Just return the plain text for each chapter (no JSON structure).\\n- Don't use markdown for formatting.\\n- Use HTML for formatting, but limited to bold, italic and lists.\\n- Don't add internal titles or headings.\\n- The length of each chapther should be around {{ Math.round(($('Settings').item.json.words - 120)/ $('Settings').item.json.chapters) }} words long\\n- Go deep in the topic you treat, don't just throw some superficial info\\n{{ $itemIndex > 0 ? \\\"- The previous chapter talks about \\\" + $input.all()[$itemIndex-1].json.title : \\\"\\\" }}\\n{{ $itemIndex > 0 ? \\\"- The promt for the previous chapter is \\\" + $input.all()[$itemIndex-1].json.prompt : \\\"\\\" }}\\n{{ $itemIndex < $input.all().length ? \\\"- The following chapter will talk about \\\" + $input.all()[$itemIndex+1].json.title: \\\"\\\" }}\\n{{ $itemIndex < $input.all().length ? \\\"- The prompt for the following chapter is \\\" + $input.all()[$itemIndex+1].json.prompt : \\\"\\\" }}\\n- Consider the previous and following chapters what writing the text for this chapter. The text must be coherent with the previous and following chapters.\\n- This chapter should not repeat the concepts already exposed in the previous chapter.\\n- This chapter is a part of a larger article so don't include an introduction or conclusions. This chapter should merge with the rest of the article.\\n\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"85007abe-b4b1-4263-a7e6-62f0a2ebd7c3\",\n      \"name\": \"Settings\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -60,\n        1080\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c07386d7-9f51-4052-a62d-500e9aff9336\",\n              \"name\": \"wordpress_url\",\n              \"type\": \"string\",\n              \"value\": \"https://you-wordpress-url-here.com/\"\n            },\n            {\n              \"id\": \"2bbdd88a-3d66-4407-9b77-32af63f44e11\",\n              \"name\": \"keywords\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json['Keywords (comma-separated)'] }}\"\n            },\n            {\n              \"id\": \"4a199e44-1033-446a-a019-e2e1a694009e\",\n              \"name\": \"chapters\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json['Number of chapters'] }}\"\n            },\n            {\n              \"id\": \"312d2e97-d1b6-46d9-b2ae-35f7234b5404\",\n              \"name\": \"words\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json['Max words count'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"d87b4460-1bf1-4c7f-8f5a-51993c1b7cd0\",\n      \"name\": \"Create post title and structure\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        180,\n        1080\n      ],\n      \"parameters\": {\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {},\n        \"messages\": {\n          \"values\": [\n            {\n              \"content\": \"=Write the title, the subtitle, the chapters details, the introduction, the conclusions, and an image prompt for a SEO-friendly article about these topics:\\n{{ $json.keywords }}.\\n\\nInstructions:\\n- Place the article title in a JSON field called `title`\\n- Place the subtitle in a JSON field called `subtitle`\\n- Place the introduction in a JSON field called `introduction`\\n- In the introduction introduce the topic that is then explored in depth in the rest of the text\\n- The introduction should be around 60 words\\n- Place the conclusions in a JSON field called `conclusions`\\n- The conclusions should be around 60 words\\n- Use the conclusions to sum all said in the article and offer a conclusion to the reader\\n- The image prompt will be used to produce a photographic cover image for the article and should depict the topics discussed in the article\\n- Place the image prompt in a JSON field called `imagePrompt`\\n- There should be {{ $json.chapters.toString() }} chapters.\\n- For each chapter provide a title and an exaustive prompt that will be used to write the chapter text.\\n- Place the chapters in an array field called `chapters`\\n- For each chapter provide the fields `title` and `prompt`\\n- The chapters should follow a logical flow and not repeat the same concepts.\\n- The chapters should be one related to the other and not isolated blocks of text. The text should be fluent and folow a linear logic.\\n- Don't start the chapters with \\\"Chapter 1\\\", \\\"Chapter 2\\\", \\\"Chapter 3\\\"... just write the title of the chapter\\n- For the title and the capthers' titles don't use colons (`:`)\\n- For the text, use HTML for formatting, but limited to bold, italic and lists.\\n- Don't use markdown for formatting.\\n- Always search on Wikipedia for useful information or verify the accuracy of what you write.\\n- Never mention it if you don't find information on Wikipedia or the web\\n- Go deep in the topic you treat, don't just throw some superficial info\"\n            }\n          ]\n        },\n        \"jsonOutput\": true\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"57f5811a-e82e-4dd3-8d53-0559b2716dac\",\n      \"name\": \"Wikipedia\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWikipedia\",\n      \"position\": [\n        280,\n        1360\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1987ab2c-4b6e-451d-a831-0817004be72b\",\n      \"name\": \"Check data consistency\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        620,\n        1080\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"9523cb70-8467-4e65-9ecf-65cb91c29cb7\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.message.content.title }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"d754869d-10fe-4348-807f-2e1bc82a7b41\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"lengthGt\",\n                \"rightType\": \"number\"\n              },\n              \"leftValue\": \"={{ $json.message.content.chapters }}\",\n              \"rightValue\": 0\n            },\n            {\n              \"id\": \"79a60fc1-66f8-4cfc-a61b-de528dfb7978\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.message.content.subtitle }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"c0c44d88-1c3d-44ba-9030-6e8fa9f2860f\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.message.content.introduction }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"338cd7e0-d2b8-40f4-838d-3aaf618268d2\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.message.content.conclusions }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"76eb9ba1-7675-403c-9287-ac1319791ffe\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.message.content.imagePrompt }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6b22ae14-80c9-48ac-9a03-9266bc3a9aa4\",\n      \"name\": \"Form\",\n      \"type\": \"n8n-nodes-base.form\",\n      \"position\": [\n        940,\n        1340\n      ],\n      \"webhookId\": \"691e1010-7083-46be-9e6e-4e77fb853a9a\",\n      \"parameters\": {\n        \"operation\": \"completion\",\n        \"respondWith\": \"showText\",\n        \"responseText\": \"There was a problem creating the article, please refresh the form and try again!\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5a22467a-6835-4a62-951f-e8cd43bef3af\",\n      \"name\": \"Merge chapters title and text\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1580,\n        1200\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combineBy\": \"combineByPosition\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"f4609858-7f65-4f2d-b222-f03ee207f166\",\n      \"name\": \"Final article text\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1760,\n        1080\n      ],\n      \"parameters\": {\n        \"jsCode\": \"let article = \\\"\\\";\\n\\n// Introduction\\narticle += $('Create post title and structure').first().json.message.content.introduction;\\narticle += \\\"<br><br>\\\";\\n\\nfor (const item of $input.all()) {\\n  article += \\\"<strong>\\\" + item.json.title + \\\"</strong>\\\";\\n  article += \\\"<br><br>\\\";\\n  article += item.json.message.content;\\n  article += \\\"<br><br>\\\";\\n}\\n\\n// Conclusions\\narticle += \\\"<strong>Conclusions</strong>\\\";\\narticle += \\\"<br><br>\\\";\\narticle += $('Create post title and structure').first().json.message.content.conclusions;\\n\\n\\nreturn [\\n  {\\n    \\\"article\\\": article\\n  }\\n];\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e21a5519-315b-442e-97d0-8ee745138652\",\n      \"name\": \"Post on Wordpress\",\n      \"type\": \"n8n-nodes-base.wordpress\",\n      \"position\": [\n        2040,\n        1080\n      ],\n      \"parameters\": {\n        \"title\": \"={{ $('Create post title and structure').first().json.message.content.title }}\",\n        \"additionalFields\": {\n          \"status\": \"draft\",\n          \"content\": \"={{ $json.article }}\"\n        }\n      },\n      \"credentials\": {\n        \"wordpressApi\": {\n          \"id\": \"YMW8mGrekjfxKJUe\",\n          \"name\": \"Wordpress account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7d7de1e3-cff2-41f2-a8ae-123441d9b18c\",\n      \"name\": \"Generate featured image\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        2340,\n        1080\n      ],\n      \"parameters\": {\n        \"prompt\": \"=Generate a photographic image to be used as the cover image for the article titled: {{ $('Create post title and structure').first().json.message.content.title }}. This is the prompt for the image: {{ $('Create post title and structure').first().json.message.content.imagePrompt }}, photography, realistic, sigma 85mm f/1.4\",\n        \"options\": {\n          \"size\": \"1792x1024\",\n          \"style\": \"natural\",\n          \"quality\": \"hd\"\n        },\n        \"resource\": \"image\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"edbd0658-0edf-43e8-8428-3fea52639d62\",\n      \"name\": \"Upload media\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2560,\n        1080\n      ],\n      \"parameters\": {\n        \"url\": \"https://wp-demo.mondo.surf/wp-json/wp/v2/media\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"binaryData\",\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Disposition\",\n              \"value\": \"attachment; filename=\\\"example.jpg\\\"\"\n            }\n          ]\n        },\n        \"inputDataFieldName\": \"data\",\n        \"nodeCredentialType\": \"wordpressApi\"\n      },\n      \"credentials\": {\n        \"wordpressApi\": {\n          \"id\": \"YMW8mGrekjfxKJUe\",\n          \"name\": \"Wordpress account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"e2cd720b-03e6-4cee-8901-a6a06e4bd1ec\",\n      \"name\": \"Set image ID for the post\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2780,\n        1080\n      ],\n      \"parameters\": {\n        \"url\": \"=https://wp-demo.mondo.surf/wp-json/wp/v2/posts/{{ $('Post on Wordpress').first().json.id }}\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"featured_media\",\n              \"value\": \"={{ $json.id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"daddda39-db6a-4266-b823-8ae9080ca1a8\",\n      \"name\": \"Form1\",\n      \"type\": \"n8n-nodes-base.form\",\n      \"position\": [\n        3020,\n        1080\n      ],\n      \"webhookId\": \"a9bf2986-4c9d-4d89-b5bf-ef6e93130b60\",\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"completion\",\n        \"completionTitle\": \"Created Successfully!\",\n        \"completionMessage\": \"=The article {{ $json.title.rendered }} was correctly created as a draft on WordPress!\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"OpenAI\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge chapters title and text\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Settings\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create post title and structure\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge chapters title and text\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Wikipedia\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Create post title and structure\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload media\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set image ID for the post\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Post on Wordpress\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate featured image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Final article text\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Post on Wordpress\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On form submission\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Settings\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check data consistency\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Form\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate featured image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload media\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set image ID for the post\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Form1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge chapters title and text\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Final article text\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create post title and structure\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check data consistency\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.formTrigger",
      "n8n-nodes-base.splitOut",
      "@n8n/n8n-nodes-langchain.openAi",
      "n8n-nodes-base.set",
      "@n8n/n8n-nodes-langchain.openAi",
      "@n8n/n8n-nodes-langchain.toolWikipedia",
      "n8n-nodes-base.if",
      "n8n-nodes-base.form",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.code",
      "n8n-nodes-base.wordpress",
      "@n8n/n8n-nodes-langchain.openAi",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.form"
    ],
    "trigger": null
  }
}