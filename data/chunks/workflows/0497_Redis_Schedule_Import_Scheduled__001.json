{
  "source": "0497_Redis_Schedule_Import_Scheduled.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"378c072a34d9e63949fd9cf26b8d28ff276a486e303f0d8963f23e1d74169c1b\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"3035a456-e783-4ac3-a6b7-1925a81672c1\",\n      \"name\": \"Execute Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflow\",\n      \"onError\": \"continueRegularOutput\",\n      \"position\": [\n        1980,\n        440\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"workflowId\": \"4cnnwIeC9Sr5ngGZ\"\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"c2d4d0f3-5f84-41de-9a06-4cd5a19e3337\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        860,\n        440\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"seconds\",\n              \"secondsInterval\": 5\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"deb51138-4f68-4e8e-8118-d29bd4b79cd6\",\n      \"name\": \"Get Status\",\n      \"type\": \"n8n-nodes-base.redis\",\n      \"position\": [\n        1080,\n        440\n      ],\n      \"parameters\": {\n        \"key\": \"=workflowStatus_{{ $workflow.id }}\",\n        \"options\": {},\n        \"operation\": \"get\",\n        \"propertyName\": \"=workflowStatus\"\n      },\n      \"credentials\": {\n        \"redis\": {\n          \"id\": \"Hvn2Vf7bGjmFgDr0\",\n          \"name\": \"Redis account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"73d4e23e-7860-4ac1-8f90-781817e2c98b\",\n      \"name\": \"Set Running\",\n      \"type\": \"n8n-nodes-base.redis\",\n      \"position\": [\n        1760,\n        440\n      ],\n      \"parameters\": {\n        \"key\": \"=workflowStatus_{{ $workflow.id }}\",\n        \"value\": \"running\",\n        \"operation\": \"set\"\n      },\n      \"credentials\": {\n        \"redis\": {\n          \"id\": \"Hvn2Vf7bGjmFgDr0\",\n          \"name\": \"Redis account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c7bc785f-dbb0-48be-98ef-d0f940be7749\",\n      \"name\": \"Set Idle\",\n      \"type\": \"n8n-nodes-base.redis\",\n      \"position\": [\n        2200,\n        440\n      ],\n      \"parameters\": {\n        \"key\": \"=workflowStatus_{{ $workflow.id }}\",\n        \"value\": \"idle\",\n        \"operation\": \"set\"\n      },\n      \"credentials\": {\n        \"redis\": {\n          \"id\": \"Hvn2Vf7bGjmFgDr0\",\n          \"name\": \"Redis account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f65c374e-f189-4d43-9b45-53776a74cbf2\",\n      \"name\": \"Continue if Idle\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1540,\n        360\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"0c6308f0-1c96-41a9-b821-97031454d555\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.workflowStatus }}\",\n              \"rightValue\": \"idle\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"45956f6b-52bf-48d2-8c68-0aa1fa338f8f\",\n      \"name\": \"Redis Key exists\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1300,\n        440\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a844597a-21f9-4869-9abb-4e4b1530931a\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.workflowStatus }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"29896363-cb31-4940-9cef-a993b931484d\",\n      \"name\": \"No Operation\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1540,\n        520\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7a8b0ceb-0c9c-4aa5-9cbb-68a7aee3641f\",\n      \"name\": \"When clicking \\\"Test workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"disabled\": true,\n      \"position\": [\n        860,\n        740\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d9ab7f18-fe96-4514-a576-49e50575185f\",\n      \"name\": \"Reset to Idle\",\n      \"type\": \"n8n-nodes-base.redis\",\n      \"disabled\": true,\n      \"position\": [\n        1080,\n        740\n      ],\n      \"parameters\": {\n        \"key\": \"=workflowStatus_{{ $workflow.id }}\",\n        \"value\": \"idle\",\n        \"operation\": \"set\"\n      },\n      \"credentials\": {\n        \"redis\": {\n          \"id\": \"Hvn2Vf7bGjmFgDr0\",\n          \"name\": \"Redis account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"043e00ca-d191-4b54-b0ec-c14e87a5facb\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        811,\n        614\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 433,\n        \"height\": 300,\n        \"content\": \"## Troubleshooting\\nUnplanned server outage? Need to reset the flag? Disable the schedule trigger, activate these nodes and run the **Reset to Idle** node manually.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"dc045338-4e41-41f3-b197-704e7560c54a\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1696,\n        320\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 222,\n        \"height\": 281,\n        \"content\": \"This updates the flag, indicating, that the workflow is currently running\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5b8dae2f-c2cf-4e16-b4a2-bc97bb64b9e0\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        810.8170310701956,\n        320\n      ],\n      \"parameters\": {\n        \"width\": 205.18296892980436,\n        \"height\": 280,\n        \"content\": \"## Set Interval\\nDefine how frequently the main workflow should run.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d55419d3-84e4-4b73-ae4c-a719d94f9bae\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1248,\n        286\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 445,\n        \"height\": 382,\n        \"content\": \"If the flag stored in Redis already exists and indicates, that the worklow is still running, another execution will be prevented. In that case this workflow ends here.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"55ab702d-0feb-4d13-a42c-f9aed6d4389d\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1920,\n        320\n      ],\n      \"parameters\": {\n        \"width\": 218,\n        \"height\": 281,\n        \"content\": \"## Set Workflow ID\\nSet the ID of the main workflow which should be executed\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7d469990-d3d7-41a1-9a59-7fcf76472342\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1020,\n        320\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 222,\n        \"height\": 281,\n        \"content\": \"This checks for a dynamic flag (containing the workflow ID) which represents if the workflow is currently running.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0d96a5e4-40a2-4abf-96be-7e17c187bc3d\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2140,\n        320\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 222,\n        \"height\": 281,\n        \"content\": \"This updates the flag, indicating, that the workflow is currently idle\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Get Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Redis Key exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Running\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Execute Workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"No Operation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Running\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Continue if Idle\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Running\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Execute Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Idle\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Redis Key exists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Continue if Idle\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Test workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Reset to Idle\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.executeWorkflow",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.redis",
      "n8n-nodes-base.redis",
      "n8n-nodes-base.redis",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.redis",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}