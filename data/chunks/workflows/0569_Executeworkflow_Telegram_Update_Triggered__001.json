{
  "source": "0569_Executeworkflow_Telegram_Update_Triggered.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"1dbc26c48fe55fbd6f6084822260e5ffcc6df7c619b3d6ceeb699da53e67c82c\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"5d9cf2ce-4808-4d44-9f0d-2c15d8dcea91\",\n      \"name\": \"Trigger\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        -400,\n        340\n      ],\n      \"webhookId\": \"96a20e88-ba8f-4827-b874-b0a9867c59e9\",\n      \"parameters\": {\n        \"updates\": [\n          \"*\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"BsrAeDsPMOnQOFa7\",\n          \"name\": \"n8n template\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"22fc0669-96f2-4767-9bc2-03644c7ced21\",\n      \"name\": \"Global data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -200,\n        340\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"d5925fd8-abde-45bf-ac3d-22649ecb1f4e\",\n      \"name\": \"Telegram1\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1700,\n        -360\n      ],\n      \"parameters\": {\n        \"text\": \"Photo\",\n        \"chatId\": \"={{ $('Trigger').item.json.message.from.id }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"BsrAeDsPMOnQOFa7\",\n          \"name\": \"n8n template\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"5dc06f04-26b4-45af-99d6-a06b7c1b936d\",\n      \"name\": \"Telegram2\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1700,\n        -120\n      ],\n      \"parameters\": {\n        \"text\": \"File\",\n        \"chatId\": \"={{ $('Trigger').item.json.message.from.id }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"BsrAeDsPMOnQOFa7\",\n          \"name\": \"n8n template\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"d036c602-17bb-45b5-b7b0-331339570cb3\",\n      \"name\": \"Telegram3\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1260,\n        460\n      ],\n      \"parameters\": {\n        \"text\": \"Callback\",\n        \"chatId\": \"={{ $('Trigger').item.json.callback_query.data }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"BsrAeDsPMOnQOFa7\",\n          \"name\": \"n8n template\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a86fe429-65df-471b-bdcb-e4765b14f109\",\n      \"name\": \"Telegram4\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1600,\n        -700\n      ],\n      \"parameters\": {\n        \"text\": \"Text\",\n        \"chatId\": \"={{ $('Trigger').item.json.message.from.id }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"BsrAeDsPMOnQOFa7\",\n          \"name\": \"n8n template\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"b28ef71b-4e4b-48cb-b64d-029feee13ee4\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        980,\n        360\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1200.5980355767667,\n        \"height\": 326.00218267794156,\n        \"content\": \"## Callback\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d51d4ac4-e182-4245-b26f-248f99235de8\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        980,\n        -920\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1200.5980355767667,\n        \"height\": 481.314448671577,\n        \"content\": \"## Text\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"05754c06-8f64-44c6-be55-3eb480e0cb3d\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        980,\n        -400\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1200.5980355767667,\n        \"height\": 198.69915410333263,\n        \"content\": \"## Photo\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d9906042-25cd-4812-bbf1-4c46aa2c0492\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        980,\n        -160\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1200.5980355767667,\n        \"height\": 198.69915410333263,\n        \"content\": \"## File\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0e0bfc7f-23a3-478e-a3a1-cffbc9f9f95e\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        980,\n        100\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1200.5980355767667,\n        \"height\": 198.69915410333263,\n        \"content\": \"## Voice\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a4519088-76c3-427c-95b6-7982814bf8e3\",\n      \"name\": \"Telegram5\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1700,\n        140\n      ],\n      \"parameters\": {\n        \"text\": \"Voice\",\n        \"chatId\": \"={{ $('Trigger').item.json.message.from.id }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"BsrAeDsPMOnQOFa7\",\n          \"name\": \"n8n template\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"0b597db9-d240-4be3-90f3-095117b1c6bc\",\n      \"name\": \"Switch_MessageType\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        720,\n        -120\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Text\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"360a2e5b-8736-488c-87dc-b5fcbd2b5102\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.message.hasOwnProperty('text') }}\",\n                    \"rightValue\": \"/\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Photo\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.message.hasOwnProperty('photo') }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"File\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"eb5a5507-4374-46c9-b8eb-25b36cbe17ee\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.message.hasOwnProperty('document') }}\",\n                    \"rightValue\": \"2\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Voice\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"b5a43050-e657-4b56-aa9b-290a94aa8902\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.message.hasOwnProperty('voice') }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"efb08696-e76f-494c-8872-d117a379adec\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        980,\n        -1440\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1195.9520561291508,\n        \"height\": 481.314448671577,\n        \"content\": \"## Commands\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7edecce3-6371-45ab-8dc1-f3e1a2052daa\",\n      \"name\": \"Telegram6\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1840,\n        -1180\n      ],\n      \"parameters\": {\n        \"text\": \"Don't know the command\",\n        \"chatId\": \"={{ $('Trigger').item.json.message.from.id }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"BsrAeDsPMOnQOFa7\",\n          \"name\": \"n8n template\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"c3b030e2-a085-4e21-8645-0224d6bb7c35\",\n      \"name\": \"Menu\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1420,\n        460\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Conditions\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"798e1a40-e85b-4294-afcb-b129f92eb833\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.callback_query.data }}\",\n                    \"rightValue\": \"menu_conditions\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Reviews\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"f91b8a94-8961-4d20-ae9c-0ee34ff04000\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.callback_query.data }}\",\n                    \"rightValue\": \"menu_reviews\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"71907904-21f3-459c-a445-ca44a432dd36\",\n      \"name\": \"Command?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1380,\n        -760\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a2025331-2c2b-4df8-9e23-37035a5c808a\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"startsWith\"\n              },\n              \"leftValue\": \"={{ $('Trigger').item.json.message.text }}\\n\",\n              \"rightValue\": \"/\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"23e5c351-095b-4485-ad09-4dc4df195a8d\",\n      \"name\": \"Change status\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1460,\n        1220\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Status\": \"0\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"ID\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"ID\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Lastname\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Lastname\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Username\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Username\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Language\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Language\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Balance\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"Balance\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"row_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"row_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"ID\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1nTDcSinsEdKUA_BzISUwCa8WogQZXc7sjIdBvs3D7o0/edit#gid=0\",\n          \"cachedResultName\": \"USERS\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/1nTDcSinsEdKUA_BzISUwCa8WogQZXc7sjIdBvs3D7o0/edit?gid=0#gid=0\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"3\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.4\n    },\n    {\n      \"id\": \"12e9c69a-ac4d-4c1b-ba2e-18602a1ac715\",\n      \"name\": \"Start bot?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1260,\n        1040\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"253b4dfb-2b86-499a-a1a6-b6d916c9c25f\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Trigger').item.json.my_chat_member.new_chat_member.status }}\",\n              \"rightValue\": \"member\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"b60a7063-a62f-4fbe-bc33-40ff55170f3e\",\n      \"name\": \"Register\",\n      \"type\": \"n8n-nodes-base.executeWorkflow\",\n      \"position\": [\n        1620,\n        920\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"waitForSubWorkflow\": false\n        },\n        \"workflowId\": \"XZKoHGcXJE1fUizb\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6a7249dd-f664-4115-a907-883d1da4e1c5\",\n      \"name\": \"Payment Handler\",\n      \"type\": \"n8n-nodes-base.executeWorkflow\",\n      \"position\": [\n        1460,\n        1660\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"lPX901W8CIMbKbww\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"586f875f-e119-467e-8a3d-6090b8eaed80\",\n      \"name\": \"Trigger Data for Payment\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"notes\": \"Chat ID required. \\n\\nSend action name to handle it inside Payment workflow\",\n      \"position\": [\n        1280,\n        1660\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"={{ Object.assign({}, $('Trigger').item.json, { \\\"action\\\": \\\"HandlePayment\\\" }) }}\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"f6f231a0-f5b7-4e58-acda-4f8dfe46a666\",\n      \"name\": \"Trigger Data for Register\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1460,\n        920\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"={{ $('Trigger').item.json }}\"\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b7287bcc-b4d0-4b42-bdfc-eeb8c1a0c289\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -20,\n        340\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Message\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"360a2e5b-8736-488c-87dc-b5fcbd2b5102\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.message && (!$('Trigger').item.json.message.successful_payment) }}\",\n                    \"rightValue\": \"/\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Callback\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.hasOwnProperty('callback_query') }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"System\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"e014a230-519a-4028-98b3-33c10d408c85\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.hasOwnProperty('my_chat_member') }}\",\n                    \"rightValue\": \"System\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Payment\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"b03aaa37-d57f-437c-acb2-de2068d3241a\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.hasOwnProperty('pre_checkout_query') || $('Trigger').item.json.message.hasOwnProperty('successful_payment') }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"509c5575-2226-486c-8398-887eb69a74f8\",\n      \"name\": \"Data for Invoice\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"notes\": \"Chat ID required. \\n\\nSend action name to handle it inside Payment workflow\",\n      \"position\": [\n        1840,\n        -1380\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"={{ Object.assign({}, $('Trigger').item.json, { \\\"action\\\": \\\"SendInvoice\\\" }) }}\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"6634d3a8-848a-4a14-ba37-58f33e3409f2\",\n      \"name\": \"Send Invoice\",\n      \"type\": \"n8n-nodes-base.executeWorkflow\",\n      \"position\": [\n        2040,\n        -1380\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"waitForSubWorkflow\": false\n        },\n        \"workflowId\": \"lPX901W8CIMbKbww\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e4bef639-3451-4ddc-ad26-481ba2acf33d\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        980,\n        820\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1216.6513404859077,\n        \"height\": 612.9550079288388,\n        \"content\": \"## New member or Member left\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4affaf7d-0694-4aa0-9616-8e12ca5bee15\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        980,\n        1500\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1216.6513404859077,\n        \"height\": 496.56854733756575,\n        \"content\": \"## Payment handler\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"58008f10-7336-4633-ab15-51556e3b53bd\",\n      \"name\": \"Switch_Commands\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1540,\n        -1280\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Command 1\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"360a2e5b-8736-488c-87dc-b5fcbd2b5102\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"contains\"\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.message.text }}\",\n                    \"rightValue\": \"/pay\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Command 2\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"546c81bf-2ee0-46b2-847b-1f92b84efaf3\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"contains\"\n                    },\n                    \"leftValue\": \"={{ $('Trigger').item.json.message.text }}\",\n                    \"rightValue\": \"/command2\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"extra\"\n        }\n      },\n      \"typeVersion\": 3\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch_MessageType\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Telegram3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Start bot?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Trigger Data for Payment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Global data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Command?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch_Commands\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Telegram4\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Telegram3\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Menu\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Start bot?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Trigger Data for Register\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Change status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Global data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch_Commands\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Data for Invoice\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Telegram6\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Data for Invoice\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Invoice\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch_MessageType\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Command?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Telegram1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Telegram2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Telegram5\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Trigger Data for Payment\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Payment Handler\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Trigger Data for Register\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Register\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.telegramTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.if",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.if",
      "n8n-nodes-base.executeWorkflow",
      "n8n-nodes-base.executeWorkflow",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.set",
      "n8n-nodes-base.executeWorkflow",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.switch"
    ],
    "trigger": "trigger"
  }
}