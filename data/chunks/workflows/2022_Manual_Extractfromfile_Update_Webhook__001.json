{
  "source": "2022_Manual_Extractfromfile_Update_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"xzKlhjcc6QEzA98Z\",\n  \"meta\": {\n    \"instanceId\": \"494d0146a0f47676ad70a44a32086b466621f62da855e3eaf0ee51dee1f76753\",\n    \"templateId\": \"2041\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Update Roles by Excel\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"580d8a47-32cc-4976-a464-793523ae3d1e\",\n      \"name\": \"When clicking \\\"Execute Workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        80,\n        140\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f37ea772-a953-4b5b-8e54-c76e42938544\",\n      \"name\": \"Extract from File\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        760,\n        140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"xlsx\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"60ab7913-d421-41cd-af04-ccec2ed6838e\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1700,\n        120\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"fieldsToMatchString\": \"email\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"ad6719b4-95dc-419e-94cb-97039014be62\",\n      \"name\": \"Basic Variables\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        320,\n        140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"68b32087-5e23-4590-8042-0061234ce479\",\n              \"name\": \"zammad_base_url\",\n              \"type\": \"string\",\n              \"value\": \"https://zammad.sirhexalot.de/\"\n            },\n            {\n              \"id\": \"240f4dc5-a070-4623-96e7-1e0750dbeba5\",\n              \"name\": \"excel_source_url\",\n              \"type\": \"string\",\n              \"value\": \"http://zammad.sirhexalot.de/Users.txt\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"8f18e493-5dbe-4447-a422-450c610e9585\",\n      \"name\": \"Zammad Univeral User Object\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1020,\n        140\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"email\",\n              \"value\": \"={{ $json.email }}\"\n            },\n            {\n              \"name\": \"role_ids\",\n              \"value\": \"={{ $json.role_ids }}\\n\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5bc0a423-91bc-4b52-af05-2869223bbbff\",\n      \"name\": \"Download Excel\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        540,\n        140\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.excel_source_url }}\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"file\"\n            }\n          }\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"b5962a7b-27d3-45f1-adc4-1abff5d1c990\",\n      \"name\": \"Find Zammad User by email\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1360,\n        -60\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('Basic Variables').item.json.zammad_base_url }}api/v1/users/search?query=email:{{ $json.email }}\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"GJ7tG0KxDpEUv3DS\",\n          \"name\": \"zammad.sirhexalot.de\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 4.2,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"0b8f5007-d28d-4406-a7ec-aa69d2b865d5\",\n      \"name\": \"Update User Roles\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        2020,\n        120\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('Basic Variables').item.json.zammad_base_url }}/api/v1/users/{{ $json.id }}\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"role_ids\\\": [\\n  {{ $json.role_ids }}\\n  ]\\n} \",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"GJ7tG0KxDpEUv3DS\",\n          \"name\": \"zammad.sirhexalot.de\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"7724e271-0beb-4fc3-a9dd-4e55bcf033a1\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        60,\n        -500\n      ],\n      \"parameters\": {\n        \"width\": 577.5890410958907,\n        \"height\": 253.58904109589045,\n        \"content\": \"## Authentication for Zammad\\n\\nCreate in the Node Find Zammad User by email a Header Auth Authentication\\n\\nUse:\\n\\nName: Authorization\\nValue: Bearer - put here your zammad api token - \\n\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"2e34f31f-cb00-43e1-8709-6405ea8521ac\",\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update User Roles\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Excel\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Basic Variables\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Excel\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Zammad Univeral User Object\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find Zammad User by email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Zammad Univeral User Object\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          },\n          {\n            \"node\": \"Find Zammad User by email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Execute Workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Basic Variables\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.extractFromFile",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}