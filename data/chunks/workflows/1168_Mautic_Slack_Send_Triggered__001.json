{
  "source": "1168_Mautic_Slack_Send_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": 86,\n  \"name\": \"Check for valid Mautic contact email\",\n  \"nodes\": [\n    {\n      \"name\": \"If is not new contact\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        780,\n        460\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json[\\\"mautic.lead_post_save_new\\\"]}}\",\n              \"operation\": \"isEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"On Contact Identified\",\n      \"type\": \"n8n-nodes-base.mauticTrigger\",\n      \"position\": [\n        600,\n        460\n      ],\n      \"webhookId\": \"a3ee0f93-2870-44e2-bb2f-0175433263b3\",\n      \"parameters\": {\n        \"events\": [\n          \"mautic.lead_post_save_new\"\n        ],\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"mauticOAuth2Api\": {\n          \"id\": \"54\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"extract information\",\n      \"type\": \"n8n-nodes-base.itemLists\",\n      \"position\": [\n        980,\n        480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"mautic.lead_post_save_new\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"validate email\",\n      \"type\": \"n8n-nodes-base.oneSimpleApi\",\n      \"position\": [\n        1180,\n        480\n      ],\n      \"parameters\": {\n        \"resource\": \"utility\",\n        \"emailAddress\": \"={{$json[\\\"lead\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"email\\\"][\\\"value\\\"]}}\"\n      },\n      \"credentials\": {\n        \"oneSimpleApi\": {\n          \"id\": \"33\",\n          \"name\": \"One Simple account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"If the email is suspicious\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"notes\": \"IF\\ndeliverability is not good\\nOR\\nDomain is not valid\\nOR\\nEmail is Disposable\",\n      \"position\": [\n        1360,\n        480\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json[\\\"deliverability\\\"]}}\",\n              \"value2\": \"GOOD\",\n              \"operation\": \"notEqual\"\n            }\n          ],\n          \"boolean\": [\n            {\n              \"value1\": \"={{$json[\\\"is_domain_valid\\\"]}}\"\n            },\n            {\n              \"value1\": \"={{$json[\\\"is_email_disposable\\\"]}}\",\n              \"value2\": true\n            }\n          ]\n        },\n        \"combineOperation\": \"any\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Send to Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1560,\n        460\n      ],\n      \"parameters\": {\n        \"text\": \"=:warning: New Contact with Suspicious Email :warning:\\n*Name: * {{$node[\\\"extract information\\\"].json[\\\"contact\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"firstname\\\"][\\\"normalizedValue\\\"]}} {{$node[\\\"extract information\\\"].json[\\\"contact\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"lastname\\\"][\\\"normalizedValue\\\"]}}\\n*Email: * {{$node[\\\"extract information\\\"].json[\\\"contact\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"email\\\"][\\\"normalizedValue\\\"]}}\\n*Link: * https://mautic.my.domain.com/s/contacts/view/{{$node[\\\"extract information\\\"].json[\\\"contact\\\"][\\\"id\\\"]}}\\n*Creator: * {{$node[\\\"extract information\\\"].json[\\\"contact\\\"][\\\"createdByUser\\\"]}}\",\n        \"channel\": \"#mautic-alerts\",\n        \"attachments\": [],\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"53\",\n          \"name\": \"Slack Access Token\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"validate email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If the email is suspicious\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"extract information\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"validate email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If is not new contact\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"extract information\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On Contact Identified\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If is not new contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If the email is suspicious\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send to Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.if",
      "n8n-nodes-base.mauticTrigger",
      "n8n-nodes-base.itemLists",
      "n8n-nodes-base.oneSimpleApi",
      "n8n-nodes-base.if",
      "n8n-nodes-base.slack"
    ],
    "trigger": null
  }
}