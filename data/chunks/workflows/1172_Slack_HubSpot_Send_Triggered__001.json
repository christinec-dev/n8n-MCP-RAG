{
  "source": "1172_Slack_HubSpot_Send_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": 88,\n  \"name\": \"Check for valid Hubspot contact email\",\n  \"nodes\": [\n    {\n      \"name\": \"When contact created\",\n      \"type\": \"n8n-nodes-base.hubspotTrigger\",\n      \"position\": [\n        540,\n        480\n      ],\n      \"webhookId\": \"d24ffb14-1e00-4d4e-b3b8-a812690c40d5\",\n      \"parameters\": {\n        \"eventsUi\": {\n          \"eventValues\": [\n            {}\n          ]\n        },\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"hubspotDeveloperApi\": {\n          \"id\": \"58\",\n          \"name\": \"Hubspot Developer account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Get contact email address\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        720,\n        480\n      ],\n      \"parameters\": {\n        \"resource\": \"contact\",\n        \"contactId\": \"={{$json[\\\"contactId\\\"] ? 151 : 151}}\",\n        \"operation\": \"get\",\n        \"additionalFields\": {\n          \"properties\": [\n            \"email\"\n          ],\n          \"propertyMode\": \"valueOnly\"\n        }\n      },\n      \"credentials\": {\n        \"hubspotApi\": {\n          \"id\": \"57\",\n          \"name\": \"Hubspot account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"validate the email\",\n      \"type\": \"n8n-nodes-base.oneSimpleApi\",\n      \"position\": [\n        900,\n        480\n      ],\n      \"parameters\": {\n        \"resource\": \"utility\",\n        \"emailAddress\": \"={{$json[\\\"properties\\\"][\\\"email\\\"][\\\"value\\\"]}}\"\n      },\n      \"credentials\": {\n        \"oneSimpleApi\": {\n          \"id\": \"33\",\n          \"name\": \"One Simple account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"If email is suspicious\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"notes\": \"IF\\ndeliverability is not good\\nOR\\nDomain is not valid\\nOR\\nEmail is Disposable\",\n      \"position\": [\n        1080,\n        480\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json[\\\"deliverability\\\"]}}\",\n              \"value2\": \"GOOD\",\n              \"operation\": \"notEqual\"\n            }\n          ],\n          \"boolean\": [\n            {\n              \"value1\": \"={{$json[\\\"is_domain_valid\\\"]}}\"\n            },\n            {\n              \"value1\": \"={{$json[\\\"is_email_disposable\\\"]}}\",\n              \"value2\": true\n            }\n          ]\n        },\n        \"combineOperation\": \"any\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Send to Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1280,\n        460\n      ],\n      \"parameters\": {\n        \"text\": \"=:warning: New Contact with Suspicious Email :warning:\\n*Name: * {{$node[\\\"Item Lists\\\"].json[\\\"contact\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"firstname\\\"][\\\"normalizedValue\\\"]}} {{$node[\\\"Item Lists\\\"].json[\\\"contact\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"lastname\\\"][\\\"normalizedValue\\\"]}}\\n*Email: * {{$node[\\\"Item Lists\\\"].json[\\\"contact\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"email\\\"][\\\"normalizedValue\\\"]}}\\n*Creator: * {{$node[\\\"Item Lists\\\"].json[\\\"contact\\\"][\\\"createdByUser\\\"]}}\",\n        \"channel\": \"#hubspot-alerts\",\n        \"attachments\": [],\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"53\",\n          \"name\": \"Slack Access Token\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"validate the email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If email is suspicious\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When contact created\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get contact email address\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If email is suspicious\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send to Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get contact email address\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"validate the email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.hubspotTrigger",
      "n8n-nodes-base.hubspot",
      "n8n-nodes-base.oneSimpleApi",
      "n8n-nodes-base.if",
      "n8n-nodes-base.slack"
    ],
    "trigger": null
  }
}