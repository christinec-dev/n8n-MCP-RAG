{
  "source": "1700_HTTP_Webhook_Process_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"c59c4acfed171bdc864e7c432be610946898c3ee271693e0303565c953d88c1d\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Transform Image to Lego Style Using Line and Dall-E\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"82b62d4e-a263-4232-9bae-4c581db2269c\",\n      \"name\": \"Receive a Line Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"webhookId\": \"2a27c148-3977-485f-b197-567c96671023\",\n      \"parameters\": {\n        \"path\": \"lineimage\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"f861c4eb-3d4f-4253-810f-8032602f079b\",\n      \"name\": \"Receive Line Messages\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        220,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api-data.line.me/v2/bot/message/{{ $json.body.events[0].message.id }}/content\",\n        \"options\": {},\n        \"jsonHeaders\": \"={\\n\\\"Authorization\\\": \\\"Bearer YOUR_LINE_BOT_TOKEN\\\",\\n\\\"Content-Type\\\": \\\"application/json\\\"\\n}\",\n        \"sendHeaders\": true,\n        \"specifyHeaders\": \"json\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"da3a9188-028d-4c75-b23f-5f1f4e50784c\",\n      \"name\": \"Creating an Image using Dall-E\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        860,\n        0\n      ],\n      \"parameters\": {\n        \"prompt\": \"={{ $json.content }}\",\n        \"options\": {\n          \"returnImageUrls\": true\n        },\n        \"resource\": \"image\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"YOUR_OPENAI_CREDENTIAL_ID\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"36c826e5-eacd-43ad-b663-4d788005e61a\",\n      \"name\": \"Creating a Prompt for Dall-E (Lego Style)\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        540,\n        0\n      ],\n      \"parameters\": {\n        \"text\": \"Creating the DALL\\u00b7E 3 prompt to transform this kind of image into a isometric LEGO image (Only provide me with a prompt).\",\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {},\n        \"resource\": \"image\",\n        \"inputType\": \"base64\",\n        \"operation\": \"analyze\",\n        \"binaryPropertyName\": \"=data\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"YOUR_OPENAI_CREDENTIAL_ID\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"3c19f931-9ca0-4bd7-b4eb-1628d89bbba1\",\n      \"name\": \"Send Back an Image through Line\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1160,\n        0\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.line.me/v2/bot/message/reply\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n \\\"replyToken\\\": \\\"{{ $('Receive a Line Webhook').item.json.body.events[0].replyToken }}\\\",\\n \\\"messages\\\": [\\n {\\n \\\"type\\\": \\\"image\\\",\\n \\\"originalContentUrl\\\": \\\"{{ $json.url }}\\\",\\n \\\"previewImageUrl\\\": \\\"{{ $json.url }}\\\"\\n }\\n ]\\n}\",\n        \"sendBody\": true,\n        \"jsonHeaders\": \"{\\n\\\"Authorization\\\": \\\"Bearer YOUR_LINE_BOT_TOKEN\\\",\\n\\\"Content-Type\\\": \\\"application/json\\\"\\n}\",\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"specifyHeaders\": \"json\"\n      },\n      \"typeVersion\": 4.2\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"\",\n  \"connections\": {\n    \"Receive Line Messages\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Creating a Prompt for Dall-E (Lego Style)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Receive a Line Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Receive Line Messages\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Creating an Image using Dall-E\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Back an Image through Line\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Creating a Prompt for Dall-E (Lego Style)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Creating an Image using Dall-E\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.httpRequest",
      "@n8n/n8n-nodes-langchain.openAi",
      "@n8n/n8n-nodes-langchain.openAi",
      "n8n-nodes-base.httpRequest"
    ],
    "trigger": null
  }
}