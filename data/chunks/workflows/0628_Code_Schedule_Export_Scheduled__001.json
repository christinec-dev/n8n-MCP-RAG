{
  "source": "0628_Code_Schedule_Export_Scheduled.json",
  "index": 1,
  "content": "{\n  \"name\": \"Backup workflows to git repository\",\n  \"nodes\": [\n    {\n      \"id\": \"b09ae4c6-ad75-4b3b-a78a-4cc2d48b2d24\",\n      \"name\": \"GitHub\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        -40,\n        -20\n      ],\n      \"parameters\": {\n        \"owner\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"owner\\\"]}}\",\n        \"filePath\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"path\\\"]}}{{$json[\\\"name\\\"]}}.json\",\n        \"resource\": \"file\",\n        \"operation\": \"get\",\n        \"repository\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"name\\\"]}}\",\n        \"asBinaryProperty\": false,\n        \"additionalParameters\": {}\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"lSdxakI6ik5M2np2\",\n          \"name\": \"Shashikanth | GitHub account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"continueOnFail\": true,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"639582ef-f13e-4844-bd10-647718079121\",\n      \"name\": \"Globals\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -740,\n        -100\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"repo.owner\",\n              \"value\": \"shashikanth171\"\n            },\n            {\n              \"name\": \"repo.name\",\n              \"value\": \"n8n-backup\"\n            },\n            {\n              \"name\": \"repo.path\",\n              \"value\": \"workflows/\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9df89713-220e-43b9-b234-b8f5612629cf\",\n      \"name\": \"n8n\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        -500,\n        -100\n      ],\n      \"parameters\": {\n        \"filters\": {},\n        \"requestOptions\": {}\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"RgwFr3HsPUEjFJNO\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"43a60315-d381-4ac4-be4c-f6a158651a00\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        -280,\n        -100\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"41a7da89-1c8c-4100-8c30-d0788962efc1\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        160,\n        -20\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"16a9182d-059d-4774-ba95-654fb4293fdb\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notExists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.error }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"ab9246eb-a253-4d76-b33b-5f8f12342542\",\n      \"name\": \"If1\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1040,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"e0c66624-429a-4f1f-bf7b-1cc1b32bad7b\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $json.content }}\",\n              \"rightValue\": \"={{ $('Loop Over Items').item.json.toJsonString() }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"72e4a5a4-6dfe-4b5c-b57b-7c1c9625e967\",\n      \"name\": \"Code\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        720,\n        -40\n      ],\n      \"parameters\": {\n        \"jsCode\": \"let items = $input.all()\\n\\nfor (item of items) {\\n    item.json.content = Buffer.from(item.json.content, 'base64').toString('utf8')\\n}\\n\\nreturn items;\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"68f14ac5-14d6-432e-9e6b-25df610eadac\",\n      \"name\": \"Create new file and commit\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        340,\n        140\n      ],\n      \"parameters\": {\n        \"owner\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"owner\\\"]}}\",\n        \"filePath\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"path\\\"]}}{{ $('Loop Over Items').item.json.name }}.json\",\n        \"resource\": \"file\",\n        \"repository\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"name\\\"]}}\",\n        \"fileContent\": \"={{ $('Loop Over Items').item.json.toJsonString()  }}\",\n        \"commitMessage\": \"=[N8N Backup] {{ $('Loop Over Items').item.json.name }}.json\"\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"lSdxakI6ik5M2np2\",\n          \"name\": \"Shashikanth | GitHub account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e50f00a3-292c-4285-b767-8d6ee4606575\",\n      \"name\": \"Update file content and commit\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        1400,\n        460\n      ],\n      \"parameters\": {\n        \"owner\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"owner\\\"]}}\",\n        \"filePath\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"path\\\"]}}{{ $('Loop Over Items').item.json.name }}.json\",\n        \"resource\": \"file\",\n        \"operation\": \"edit\",\n        \"repository\": \"={{$node[\\\"Globals\\\"].json[\\\"repo\\\"][\\\"name\\\"]}}\",\n        \"fileContent\": \"={{ $('Loop Over Items').item.json.toJsonString()  }}\",\n        \"commitMessage\": \"=[N8N Backup] {{ $('Loop Over Items').item.json.name }}.json\"\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"lSdxakI6ik5M2np2\",\n          \"name\": \"Shashikanth | GitHub account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4b2d375c-a339-404c-babd-555bd2fc4091\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -960,\n        -100\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"ea026e96-0db1-41fd-b003-2f2bf4662696\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1560,\n        480\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"Workflow changes committed to the repository\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9c402daa-6d03-485d-b8a0-58f1b65d396d\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1180,\n        260\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"Check if there are any changes in the workflow\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1d9216d9-bf8d-4945-8a58-22fb1ffc9be8\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        460,\n        160\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"Create a new file for the workflow\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"60a3953b-d9f1-4afd-b299-e314116b96c6\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        160,\n        -120\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"Check if file exists in the repository\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6df689fb-cb49-4634-9d1e-59648a1e7219\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        -140\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"Convert the file contents to JSON string\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f2340ad0-71a1-4c74-8d90-bcb974b8b305\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -560,\n        -200\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"Get all workflows\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"617bea19-341a-4e9d-b6fd-6b417e58d756\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -820,\n        40\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"Set variables\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create new file and commit\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update file content and commit\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"n8n\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GitHub\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Globals\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"n8n\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"GitHub\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Globals\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create new file and commit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update file content and commit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.github",
      "n8n-nodes-base.set",
      "n8n-nodes-base.n8n",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.if",
      "n8n-nodes-base.if",
      "n8n-nodes-base.code",
      "n8n-nodes-base.github",
      "n8n-nodes-base.github",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}