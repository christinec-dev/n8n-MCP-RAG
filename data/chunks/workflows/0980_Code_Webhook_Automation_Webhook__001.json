{
  "source": "0980_Code_Webhook_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"4wPgPbxtojrUO7Dx\",\n  \"meta\": {\n    \"instanceId\": \"f46651348590f9c7e3e7fe91218ed49590c553ab737d5cc247951397ff85fa93\"\n  },\n  \"name\": \"Google Page Entity Extraction Template\",\n  \"tags\": [\n    {\n      \"id\": \"hBkrfz3jN0GbUgJa\",\n      \"name\": \"Google Page Entity Extraction Template\",\n      \"createdAt\": \"2025-05-08T23:29:39.011Z\",\n      \"updatedAt\": \"2025-05-08T23:29:39.011Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"8719f1de-2a3e-4c34-9edc-e4b8f993b525\",\n      \"name\": \"Respond to Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        1240,\n        -420\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"01420fd5-3483-4e74-b9fc-971199898449\",\n      \"name\": \"Google Entities\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1020,\n        -420\n      ],\n      \"parameters\": {\n        \"url\": \"https://language.googleapis.com/v1/documents:analyzeEntities\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={{ $json.apiRequest }}\",\n        \"sendBody\": true,\n        \"sendQuery\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"key\",\n              \"value\": \"YOUR-GOOGLE-API-KEY\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"5c1c258a-44ed-4d5a-a22d-cddb4df09018\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -300,\n        -700\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 620,\n        \"height\": 880,\n        \"content\": \"# Google Page Entity Extraction Template\\n\\n## What this workflow does\\nThis workflow allows you to extract named entities (people, organizations, locations, etc.) from any web page using Google's Natural Language API. Simply send a URL to the webhook endpoint, and the workflow will fetch the page content, process it through Google's entity recognition service, and return the structured entity data.\\n\\n### How to use\\n1. Replace \\\"YOUR-GOOGLE-API-KEY\\\" with your actual Google Cloud API key (Natural Language API must be enabled)\\n2. Activate the workflow and use the webhook URL as your endpoint\\n3. Send a POST request to the webhook with a JSON body containing the URL you want to analyze: {\\\"url\\\": \\\"https://example.com/page\\\"}\\n4. Review the returned entity analysis with categories, salience scores, and metadata\\n\\n## Webhook Input Format\\nThe webhook expects a POST request with a JSON body in this format:\\n```json\\n{\\n  \\\"url\\\": \\\"https://website-to-analyze.com/page\\\"\\n}\\n```\\n### Response Format\\nThe webhook returns a JSON response containing the full entity analysis from Google's Natural Language API, including:\\n\\nEntity names and types (PERSON, LOCATION, ORGANIZATION, etc.)\\nSalience scores indicating entity importance\\nMetadata and mentions within the text\\nEntity sentiment (if available)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"79add9a7-adca-4ce5-8a6a-5fcb75288846\",\n      \"name\": \"Get Url\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        360,\n        -420\n      ],\n      \"webhookId\": \"2944c8f6-03cd-4ab8-8b8e-cb033edf877a\",\n      \"parameters\": {\n        \"path\": \"2944c8f6-03cd-4ab8-8b8e-cb033edf877a\",\n        \"options\": {},\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"081a52bc-2da7-44fb-bdc3-4cb73cbf8dd3\",\n      \"name\": \"Get URL Page Contents\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        580,\n        -420\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.body.url }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"dda5ef3d-f031-4dd6-b117-c1f69aa66b63\",\n      \"name\": \"Respond with detected entities\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        800,\n        -420\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Clean and prepare HTML for API request\\nconst html = $input.item.json.data;\\n// Trim if too large (optional)\\nconst trimmedHtml = html.length > 100000 ? html.substring(0, 100000) : html;\\n\\nreturn {\\n  json: {\\n    apiRequest: {\\n      document: {\\n        type: \\\"HTML\\\",\\n        content: trimmedHtml\\n      },\\n      encodingType: \\\"UTF8\\\"\\n    }\\n  }\\n}\"\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"432203af-190a-4a89-81d8-f86682a0b63f\",\n  \"connections\": {\n    \"Get Url\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get URL Page Contents\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Entities\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get URL Page Contents\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond with detected entities\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Respond with detected entities\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Entities\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.respondToWebhook",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.code"
    ],
    "trigger": null
  }
}