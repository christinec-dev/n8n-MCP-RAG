{
  "source": "0405_HTTP_Executeworkflow_Send_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"12061ba0-24f8-4853-9898-c8710b118959\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        500\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1260,\n        \"height\": 635,\n        \"content\": \"### Sub-workflow: Custom tool\\nThe agent above can call this workflow. It calls an example API called \\\"Bored API\\\" and returns a string with an activity idea.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4a2101f4-de86-4b2c-9fbc-5a75e73e3a26\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 927.5,\n        \"height\": 486.5625,\n        \"content\": \"### Main workflow: AI agent using custom tool\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"102ec972-1784-4b89-be6f-1d4bd8f85cf1\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        240\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 177,\n        \"height\": 199,\n        \"content\": \"**This tool calls the sub-workflow below**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"707d76f1-0b45-4347-b16a-3b66906711bc\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        300,\n        240\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 170,\n        \"height\": 191,\n        \"content\": \"**Set your credentials**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d2a9637b-d988-4978-a112-4b96f279f0c0\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        280,\n        840\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 170,\n        \"height\": 190,\n        \"content\": \"**Set your credentials**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"02f5308b-61db-467d-84f4-8b2ae8655dfd\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -160,\n        80\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 185.9375,\n        \"height\": 214.8397420554627,\n        \"content\": \"## Try it out\\n\\nSelect **Chat** at the bottom and enter:\\n\\n_Hi! Please suggest something to do. I feel like learning something new._\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c012dfad-0ed8-4072-9c57-24f48aadd620\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        960,\n        920\n      ],\n      \"parameters\": {\n        \"width\": 280,\n        \"height\": 145,\n        \"content\": \"## Next steps\\n\\nLearn more about [Advanced AI in n8n](https://docs.n8n.io/advanced-ai/)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"39e0c9eb-5736-46a0-b4ce-64425f56ba8c\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        160,\n        80\n      ],\n      \"webhookId\": \"34e91943-c4e0-4a87-8a0f-68cbd2bca3fb\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"38dad34c-116b-4673-b338-6fbf1d019bab\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        340,\n        300\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"78af18c4-3541-4ff2-8526-fb186614051b\",\n      \"name\": \"Simple Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        520,\n        300\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"45f17ad3-f7da-4d98-a597-f66c2efdbbea\",\n      \"name\": \"When Executed by Another Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        120,\n        660\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"chatInput\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"135ac846-fcc7-4754-8127-6a810b76594a\",\n      \"name\": \"OpenAI Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        320,\n        900\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"8e9d8b39-a7a4-44fb-8ac4-0555e632f0df\",\n      \"name\": \"Work out activity type and number of people1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.informationExtractor\",\n      \"position\": [\n        340,\n        660\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $('When Executed by Another Workflow').item.json.chatInput }}\",\n        \"options\": {},\n        \"schemaType\": \"manual\",\n        \"inputSchema\": \"{\\n  \\\"type\\\": \\\"object\\\",\\n  \\\"required\\\": [\\\"type\\\",\\\"participants\\\"],\\n  \\\"properties\\\": {\\n    \\\"type\\\": {\\n      \\\"type\\\": \\\"object\\\",\\n      \\\"properties\\\": {\\n        \\\"data\\\": {\\n          \\\"enum\\\": [\\\"education\\\", \\\"recreational\\\",\\\"social\\\",\\\"diy\\\",\\\"charity\\\",\\\"cooking\\\",\\\"relaxation\\\",\\\"music\\\",\\\"busywork\\\"]\\n        }\\n      }\\n    },\\n    \\\"participants\\\": {\\n      \\\"type\\\": \\\"number\\\"\\n    }\\n  }\\n}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"312f12d9-db30-48b0-aca3-a6c3a0250b2d\",\n      \"name\": \"Call the API\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        700,\n        660\n      ],\n      \"parameters\": {\n        \"url\": \"https://bored-api.appbrewery.com/filter\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"type\",\n              \"value\": \"={{ $json.output.type.data }}\"\n            },\n            {\n              \"name\": \"participicants\",\n              \"value\": \"={{ $json.output.participants }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"0e97b6c1-3291-44a2-bf35-39335b9b90a1\",\n      \"name\": \"Activity Tool\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        700,\n        300\n      ],\n      \"parameters\": {\n        \"name\": \"activity_tool\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"Suggest an activity for a person to do. Use this tool if someone is bored, or asking for ideas of things to do.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"chatInput\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('chatInput', ``, 'string') }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"chatInput\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"chatInput\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"256b8adc-ef71-40da-a40c-10a1045c9d7d\",\n      \"name\": \"Set 'response' value\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1060,\n        660\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c78b10cd-7d6d-4512-ad0b-6f6ec3c706b2\",\n              \"name\": \"response\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.data }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"ede9e3c2-c3ce-44bd-92be-51eb90d086dc\",\n      \"name\": \"Combine\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        880,\n        660\n      ],\n      \"parameters\": {\n        \"include\": \"specifiedFields\",\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\",\n        \"fieldsToInclude\": \"activity\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b4b49c7f-5491-416c-98d1-518372329c77\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        420,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.8\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Combine\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set 'response' value\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Call the API\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Combine\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Activity Tool\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simple Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Work out activity type and number of people1\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Work out activity type and number of people1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Work out activity type and number of people1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call the API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "@n8n/n8n-nodes-langchain.chatTrigger",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "n8n-nodes-base.executeWorkflowTrigger",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.informationExtractor",
      "n8n-nodes-base.httpRequest",
      "@n8n/n8n-nodes-langchain.toolWorkflow",
      "n8n-nodes-base.set",
      "n8n-nodes-base.aggregate",
      "@n8n/n8n-nodes-langchain.agent"
    ],
    "trigger": null
  }
}