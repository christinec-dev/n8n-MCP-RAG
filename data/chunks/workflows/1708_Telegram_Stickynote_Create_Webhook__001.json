{
  "source": "1708_Telegram_Stickynote_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"U8EOTtZvmZPMYc6m\",\n  \"meta\": {\n    \"instanceId\": \"fb924c73af8f703905bc09c9ee8076f48c17b596ed05b18c0ff86915ef8a7c4a\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Agentic Telegram AI bot with LangChain nodes and new tools\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"13b3488e-af72-4d89-bef4-e9b895e3bf76\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1640,\n        580\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o\",\n        \"options\": {\n          \"temperature\": 0.7,\n          \"frequencyPenalty\": 0.2\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"rveqdSfp7pCRON1T\",\n          \"name\": \"Ted's Tech Talks OpenAi\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"864937a1-43f6-4055-bdea-61ab07db9903\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        1760,\n        580\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"=chat_with_{{ $('Listen for incoming events').first().json.message.chat.id }}\",\n        \"contextWindowLength\": 10\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4ef838d4-feaa-4bd3-b2c7-ccd938be4373\",\n      \"name\": \"Listen for incoming events\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        1580,\n        360\n      ],\n      \"webhookId\": \"322dce18-f93e-4f86-b9b1-3305519b7834\",\n      \"parameters\": {\n        \"updates\": [\n          \"*\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"9dexJXnlVPA6wt8K\",\n          \"name\": \"Chat & Sound\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fed51c41-2846-4a1a-a5f5-ce121ee7fe88\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1460,\n        180\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 926.3188190787038,\n        \"height\": 553.452795998601,\n        \"content\": \"## Generate an image with Dall-E-3 and send it via Telegram\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1c7a204b-3ed7-47bd-a434-202b05272d18\",\n      \"name\": \"Send final reply\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        2140,\n        360\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.output }}\",\n        \"chatId\": \"={{ $('Listen for incoming events').first().json.message.from.id }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"9dexJXnlVPA6wt8K\",\n          \"name\": \"Chat & Sound\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"bebbe9d4-47ba-4c13-9e1e-d36bfe6e472e\",\n      \"name\": \"Send back an image\",\n      \"type\": \"n8n-nodes-base.telegramTool\",\n      \"position\": [\n        2020,\n        580\n      ],\n      \"parameters\": {\n        \"file\": \"={{ $fromAI(\\\"url\\\", \\\"a valid url of an image\\\", \\\"string\\\", \\\" \\\") }}\",\n        \"chatId\": \"={{ $('Listen for incoming events').first().json.message.from.id }}\",\n        \"operation\": \"sendDocument\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"9dexJXnlVPA6wt8K\",\n          \"name\": \"Chat & Sound\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"38f2410d-bd55-4ddf-8aaa-4e28919de78f\",\n      \"name\": \"Generate image in Dalle\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"position\": [\n        1880,\n        580\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.openai.com/v1/images/generations\",\n        \"method\": \"POST\",\n        \"sendBody\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"parametersBody\": {\n          \"values\": [\n            {\n              \"name\": \"model\",\n              \"value\": \"dall-e-3\",\n              \"valueProvider\": \"fieldValue\"\n            },\n            {\n              \"name\": \"prompt\"\n            }\n          ]\n        },\n        \"toolDescription\": \"Call this tool to request a Dall-E-3 model, when the user asks to draw something. If you g–µt a response from this tool, forward it to the Telegram tool.\",\n        \"nodeCredentialType\": \"openAiApi\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"rveqdSfp7pCRON1T\",\n          \"name\": \"Ted's Tech Talks OpenAi\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"34265eab-9f37-475a-a2ae-a6c37c69c595\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1780,\n        360\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.message.text }}\",\n        \"options\": {\n          \"systemMessage\": \"=You are a helpful assistant. You are communicating with a user named {{ $json.message.from.first_name }}. Address the user by name every time. If the user asks for an image, always send the link to the image in the final reply.\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"b36989c5-295a-4df6-84e9-776815509bc9\",\n  \"connections\": {\n    \"AI Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send final reply\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send back an image\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate image in Dalle\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Listen for incoming events\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "n8n-nodes-base.telegramTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.telegramTool",
      "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "@n8n/n8n-nodes-langchain.agent"
    ],
    "trigger": null
  }
}