{
  "source": "0257_Manual_GoogleSheets_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"29451054-fcd6-4054-b072-a87c716f6c67\",\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        240,\n        240\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"995ae9b0-130c-4989-8e94-81a14b7743c4\",\n      \"name\": \"Read Google Sheet\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        460,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetId\": \"1cz-4tVi7Nn3j1gh147hROq9l6S4ta06sMfhm2AAI6js\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"19\",\n          \"name\": \"Tom's Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2c1ed019-85f1-4b0f-bcf5-ce59ff13ea49\",\n      \"name\": \"Search Salesforce accounts\",\n      \"type\": \"n8n-nodes-base.salesforce\",\n      \"position\": [\n        680,\n        240\n      ],\n      \"parameters\": {\n        \"query\": \"=SELECT id, Name FROM Account WHERE Name = '{{$json[\\\"Company Name\\\"].replace(/'/g, '\\\\\\\\\\\\'')}}'\",\n        \"resource\": \"search\"\n      },\n      \"credentials\": {\n        \"salesforceOAuth2Api\": {\n          \"id\": \"40\",\n          \"name\": \"Salesforce account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"c6978a27-3cdc-44a2-a961-94557b2aed88\",\n      \"name\": \"Keep new companies\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        900,\n        40\n      ],\n      \"parameters\": {\n        \"mode\": \"removeKeyMatches\",\n        \"propertyName1\": \"Company Name\",\n        \"propertyName2\": \"Name\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7b5df5cf-7019-415b-9758-7f62c4fb13c8\",\n      \"name\": \"Merge existing account data\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        900,\n        440\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByKey\",\n        \"propertyName1\": \"Company Name\",\n        \"propertyName2\": \"Name\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7da1de2f-2b37-4e33-b8d4-d1dc59e94bbe\",\n      \"name\": \"Account found?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1120,\n        440\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json[\\\"Id\\\"] }}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"80890a2a-f6d3-4efd-92b1-6465f98f512b\",\n      \"name\": \"Remove duplicate companies\",\n      \"type\": \"n8n-nodes-base.itemLists\",\n      \"position\": [\n        1120,\n        140\n      ],\n      \"parameters\": {\n        \"compare\": \"selectedFields\",\n        \"options\": {},\n        \"operation\": \"removeDuplicates\",\n        \"fieldsToCompare\": {\n          \"fields\": [\n            {\n              \"fieldName\": \"Company Name\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ea9afa15-77be-4d7a-a287-35d4c1c6e6c1\",\n      \"name\": \"Set Account ID for existing accounts\",\n      \"type\": \"n8n-nodes-base.renameKeys\",\n      \"position\": [\n        1340,\n        440\n      ],\n      \"parameters\": {\n        \"keys\": {\n          \"key\": [\n            {\n              \"newKey\": \"Account ID\",\n              \"currentKey\": \"Id\"\n            }\n          ]\n        },\n        \"additionalOptions\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"61cfdf30-9135-40bf-929d-317fca0ad474\",\n      \"name\": \"Retrieve new company contacts\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1780,\n        40\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByKey\",\n        \"propertyName1\": \"Company Name\",\n        \"propertyName2\": \"Name\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c10dea7c-96b0-4f3b-b859-af094ced51cc\",\n      \"name\": \"Set new account name\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1560,\n        140\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"id\",\n              \"value\": \"={{ $json[\\\"id\\\"] }}\"\n            },\n            {\n              \"name\": \"Name\",\n              \"value\": \"={{ $node[\\\"Remove duplicate companies\\\"].json[\\\"Company Name\\\"] }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a4a2be2a-7bd9-4a70-b4d9-0df53834bdda\",\n      \"name\": \"Create Salesforce account\",\n      \"type\": \"n8n-nodes-base.salesforce\",\n      \"position\": [\n        1340,\n        140\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $json[\\\"Company Name\\\"] }}\",\n        \"resource\": \"account\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"salesforceOAuth2Api\": {\n          \"id\": \"40\",\n          \"name\": \"Salesforce account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"89f49e6f-62be-403f-9a4c-cd56e28141f3\",\n      \"name\": \"Create Salesforce contact\",\n      \"type\": \"n8n-nodes-base.salesforce\",\n      \"position\": [\n        2000,\n        240\n      ],\n      \"parameters\": {\n        \"lastname\": \"={{ $json[\\\"Last Name\\\"] }}\",\n        \"resource\": \"contact\",\n        \"operation\": \"upsert\",\n        \"externalId\": \"Email\",\n        \"externalIdValue\": \"={{ $json[\\\"Email\\\"] }}\",\n        \"additionalFields\": {\n          \"email\": \"={{ $json[\\\"Email\\\"] }}\",\n          \"firstName\": \"={{ $json[\\\"First Name\\\"] }}\",\n          \"acconuntId\": \"={{ $json[\\\"Account ID\\\"] }}\"\n        }\n      },\n      \"credentials\": {\n        \"salesforceOAuth2Api\": {\n          \"id\": \"40\",\n          \"name\": \"Salesforce account\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Account found?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Account ID for existing accounts\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Read Google Sheet\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search Salesforce accounts\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Keep new companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge existing account data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Keep new companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Remove duplicate companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Retrieve new company contacts\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set new account name\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Retrieve new company contacts\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Read Google Sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Salesforce account\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set new account name\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Remove duplicate companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Salesforce account\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search Salesforce accounts\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Keep new companies\",\n            \"type\": \"main\",\n            \"index\": 1\n          },\n          {\n            \"node\": \"Merge existing account data\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Merge existing account data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Account found?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Retrieve new company contacts\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Salesforce contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Account ID for existing accounts\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Salesforce contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.salesforce",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.if",
      "n8n-nodes-base.itemLists",
      "n8n-nodes-base.renameKeys",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.set",
      "n8n-nodes-base.salesforce",
      "n8n-nodes-base.salesforce"
    ],
    "trigger": null
  }
}