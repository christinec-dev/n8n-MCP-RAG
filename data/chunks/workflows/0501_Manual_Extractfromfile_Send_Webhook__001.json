{
  "source": "0501_Manual_Extractfromfile_Send_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"cb484ba7b742928a2048bf8829668bed5b5ad9787579adea888f05980292a4a7\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"e7725ddb-8cdc-4e36-8a9e-5bf079d94972\",\n      \"name\": \"When clicking \\\"Test workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        460,\n        460\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7cd477d3-e7fd-4a2b-b39e-f5b00271540a\",\n      \"name\": \"Compose message\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1340,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"2addc1b4-68a0-4c72-87d6-d47286eef70c\",\n              \"name\": \"raw\",\n              \"type\": \"string\",\n              \"value\": \"={{ \\\"From: \\\"+$('Message settings').item.json.from+\\\"\\\\nTo: \\\"+$('Message settings').item.json.to+\\\"\\\\nSubject: \\\"+$('Message settings').item.json.subject+\\\"\\\\nMIME-Version: 1.0\\\\nContent-Type: multipart/related; boundary=boundary1\\\\n\\\\n--boundary1\\\\nContent-Type: text/html; charset=UTF-8\\\\n\\\\n<html>\\\\n<body>\\\\n\\\"+$('Message settings').item.json.body_html+\\\"\\\\n</body>\\\\n</html>\\\\n\\\\n--boundary1\\\\nContent-Type: \\\"+$('Get image').item.binary.data.mimeType+\\\"\\\\nContent-Transfer-Encoding: base64\\\\nContent-Disposition: inline\\\\nContent-ID: <image1>\\\\n\\\\n\\\"+$json.chart1+\\\"\\\\n\\\\n--boundary1--\\\\n\\\" }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"4aca2efe-cf79-4cec-8912-44761595e9ea\",\n      \"name\": \"Send message\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1560,\n        460\n      ],\n      \"parameters\": {\n        \"url\": \"https://www.googleapis.com/gmail/v1/users/me/messages/send\",\n        \"body\": \"={ \\\"raw\\\": \\\"{{ $json.raw.base64Encode() }}\\\"}\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"raw\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"rawContentType\": \"application/json\",\n        \"nodeCredentialType\": \"gmailOAuth2\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"198\",\n          \"name\": \"Gmail account (David)\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"75ec79b0-782a-462e-8f68-5c3f6a77190a\",\n      \"name\": \"Get image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        900,\n        460\n      ],\n      \"parameters\": {\n        \"url\": \"https://thistleandrose.co.uk/img/userimages/Page/0/bgmainfront.jpg\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"23d3665c-0dfe-470c-98b6-ac67bcd186ee\",\n      \"name\": \"Message settings\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        680,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b640b120-cf83-4141-8a74-59da3ec1bb92\",\n              \"name\": \"from\",\n              \"type\": \"string\",\n              \"value\": \"sender@example.com\"\n            },\n            {\n              \"id\": \"a01d10b2-a61c-4173-b31c-b24c6c0859d4\",\n              \"name\": \"to\",\n              \"type\": \"string\",\n              \"value\": \"recipient@example.com\"\n            },\n            {\n              \"id\": \"1173b361-ed4b-4c3d-af96-c66b9909a4c4\",\n              \"name\": \"subject\",\n              \"type\": \"string\",\n              \"value\": \"Email with embedded image\"\n            },\n            {\n              \"id\": \"b6c8771a-f1c9-4952-9b9d-2684a8017ff4\",\n              \"name\": \"body_html\",\n              \"type\": \"string\",\n              \"value\": \"=<p>This email contains an embedded image:</p>\\n<p><img src='cid:image1'></p>\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"f2586628-8664-442b-b822-2caa075f6f4d\",\n      \"name\": \"Convert image to base64\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        1120,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"binaryToPropery\",\n        \"destinationKey\": \"chart1\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"69de86e7-eef2-4792-81db-1fdb930c7790\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        860,\n        340\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 168.75,\n        \"height\": 281.25,\n        \"content\": \"Gets a random image from the internet. Replace this with your image (should be called 'data')\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9bf60739-3388-4394-bec4-542ec3fddbb8\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1520,\n        340\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 168.75,\n        \"height\": 281.25,\n        \"content\": \"We use an HTTP node rather than the Gmail node. Add your Gmail creds here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2700414e-3fb1-45de-9550-c1ffb5702b94\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        340\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 168.75,\n        \"height\": 281.25,\n        \"content\": \"To use the image in the body of the email, insert <img src='cid:image1'>\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"81d9af8b-b232-4d15-8c7a-c773a2fb7aa8\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        160,\n        360\n      ],\n      \"parameters\": {\n        \"height\": 205,\n        \"content\": \"## Try me out\\n1. Make sure you add your Gmail credential in the last node\\n2. Update the sender and recipient in the 'Message settings' node\\n3. Click 'test workflow'\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Get image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert image to base64\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Compose message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Message settings\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert image to base64\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Compose message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Test workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Message settings\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.extractFromFile",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}