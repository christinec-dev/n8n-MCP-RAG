{
  "source": "0268_Shopify_Zendesk_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"94fc73af-a35d-4d5c-a192-6190d2a731ff\",\n      \"name\": \"Keep only UserId and email\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1200,\n        260\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [\n            {\n              \"name\": \"ZendeskUserId\",\n              \"value\": \"={{ $json[\\\"id\\\"] }}\"\n            }\n          ],\n          \"string\": [\n            {\n              \"name\": \"ZendeskEmail\",\n              \"value\": \"={{ $json[\\\"email\\\"] }}\"\n            },\n            {\n              \"name\": \"ZendeskPhone\",\n              \"value\": \"={{ $json[\\\"phone\\\"]  }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6decc852-d5b9-40c4-b51e-832283637027\",\n      \"name\": \"User exists in Zendesk\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1660,\n        140\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{ $json[\\\"ZendeskUserId\\\"] }}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"70fa2ad7-c43c-4d22-ba6d-89495f8b5794\",\n      \"name\": \"Add Zendesk contact Id to Shopify data\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1420,\n        140\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByKey\",\n        \"propertyName1\": \"email\",\n        \"propertyName2\": \"ZendeskEmail\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"346d3e04-433c-4b43-868f-729d3ee67ee2\",\n      \"name\": \"On customer updated\",\n      \"type\": \"n8n-nodes-base.shopifyTrigger\",\n      \"position\": [\n        740,\n        120\n      ],\n      \"webhookId\": \"a0d5e8ea-3f53-496e-a41b-cb022f715b43\",\n      \"parameters\": {\n        \"topic\": \"customers/update\"\n      },\n      \"credentials\": {\n        \"shopifyApi\": {\n          \"id\": \"10\",\n          \"name\": \"Shopify account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a2ff1fa3-d67a-4abb-94ae-f22cad7de359\",\n      \"name\": \"NoOp\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        2160,\n        180\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"41418930-0898-4602-88a3-cf4238f32890\",\n      \"name\": \"Contact data is modified\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1940,\n        80\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json[\\\"phone\\\"] }}\",\n              \"value2\": \"={{ $json[\\\"ZendeskPhone\\\"] }}\",\n              \"operation\": \"notEqual\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ee1791fb-eaa0-4829-af3b-e72d7b3e80d5\",\n      \"name\": \"Create contact in Zendesk\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        1940,\n        240\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $json[\\\"first_name\\\"] }} {{ $json[\\\"last_name\\\"] }}\",\n        \"resource\": \"user\",\n        \"additionalFields\": {\n          \"email\": \"={{ $json[\\\"email\\\"] }}\",\n          \"phone\": \"={{ $json[\\\"phone\\\"] ?? ' ' }}\"\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"67dc85c6-39af-43cc-951e-bcfd31b73e46\",\n      \"name\": \"Update contact in Zendesk\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        2160,\n        -20\n      ],\n      \"parameters\": {\n        \"id\": \"={{ $json[\\\"ZendeskUserId\\\"] }}\",\n        \"resource\": \"user\",\n        \"operation\": \"update\",\n        \"updateFields\": {\n          \"phone\": \"={{ $json[\\\"phone\\\"] ?? 0}}\"\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9ab30a51-e599-4361-b170-b18b9d4021cb\",\n      \"name\": \"Search contact by email adress\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        1000,\n        260\n      ],\n      \"parameters\": {\n        \"limit\": 1,\n        \"filters\": {\n          \"query\": \"={{ $json[\\\"email\\\"] }}\"\n        },\n        \"resource\": \"user\",\n        \"operation\": \"search\"\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    }\n  ],\n  \"connections\": {\n    \"On customer updated\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add Zendesk contact Id to Shopify data\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Search contact by email adress\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"User exists in Zendesk\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Contact data is modified\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create contact in Zendesk\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Contact data is modified\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update contact in Zendesk\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"NoOp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Keep only UserId and email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add Zendesk contact Id to Shopify data\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Search contact by email adress\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Keep only UserId and email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add Zendesk contact Id to Shopify data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"User exists in Zendesk\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.set",
      "n8n-nodes-base.if",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.shopifyTrigger",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.if",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.zendesk"
    ],
    "trigger": null
  }
}