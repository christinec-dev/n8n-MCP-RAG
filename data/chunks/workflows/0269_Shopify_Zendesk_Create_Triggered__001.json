{
  "source": "0269_Shopify_Zendesk_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"1b1fd43f-5acb-45e7-bd98-e4774754cdfe\",\n      \"name\": \"On order updated\",\n      \"type\": \"n8n-nodes-base.shopifyTrigger\",\n      \"position\": [\n        180,\n        520\n      ],\n      \"webhookId\": \"0972ce92-d800-4049-ab60-7c71898ecbfa\",\n      \"parameters\": {\n        \"topic\": \"orders/updated\"\n      },\n      \"credentials\": {\n        \"shopifyApi\": {\n          \"id\": \"10\",\n          \"name\": \"Shopify account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d96cde15-f810-4302-aa45-554f6675b505\",\n      \"name\": \"Order exists in Zendesk\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1220,\n        540\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json[\\\"ZendeskTicketId\\\"] }}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"62c09ef2-55c8-4269-9869-c15e8a955169\",\n      \"name\": \"NoOp\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1500,\n        460\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"68f867c3-842c-478a-8afd-c7299e12b98d\",\n      \"name\": \"Find if order already has a ticket in Zendesk\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        480,\n        660\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"query\": \"external_id:1027\",\n          \"status\": \"open\"\n        },\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"01d4acba-8641-43e8-b333-e4494a2594d1\",\n      \"name\": \"Keep only ticket Id\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        720,\n        660\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"external_Id\",\n              \"value\": \"={{ $json[\\\"external_id\\\"] }}\"\n            },\n            {\n              \"name\": \"ZendeskTicketId\",\n              \"value\": \"={{ $json[\\\"id\\\"] }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"63099ec6-7ae5-4d88-881b-a6a8ae3a64b8\",\n      \"name\": \"Add ticket info to order data\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        960,\n        540\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByKey\",\n        \"propertyName1\": \"order_number\",\n        \"propertyName2\": \"external_Id\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"79bf059e-d3b9-4323-88e5-7887deae74f7\",\n      \"name\": \"Create new ticket for new orders\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        1500,\n        640\n      ],\n      \"parameters\": {\n        \"description\": \"=Order #{{ $json[\\\"order_number\\\"] }} - {{$json[\\\"line_items\\\"].length}} item(s)\\n\\nOrder:\\nCustomer: {{$json[\\\"customer\\\"][\\\"first_name\\\"]}} {{$json[\\\"customer\\\"][\\\"last_name\\\"]}} \\nemail: {{$json[\\\"customer\\\"][\\\"email\\\"]}}\\nStatus: New order\",\n        \"additionalFields\": {\n          \"status\": \"open\",\n          \"subject\": \"=Order #{{ $json[\\\"order_number\\\"] }} - {{$json[\\\"line_items\\\"].length}} item(s)\",\n          \"externalId\": \"={{ $json[\\\"order_number\\\"] }}\"\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"On order updated\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find if order already has a ticket in Zendesk\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Add ticket info to order data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Keep only ticket Id\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add ticket info to order data\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Order exists in Zendesk\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"NoOp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create new ticket for new orders\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add ticket info to order data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Order exists in Zendesk\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find if order already has a ticket in Zendesk\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Keep only ticket Id\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.shopifyTrigger",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.zendesk",
      "n8n-nodes-base.set",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.zendesk"
    ],
    "trigger": null
  }
}