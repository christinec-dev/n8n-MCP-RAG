{
  "source": "0265_Shopify_HubSpot_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"5cb9cd37-a73d-4f3f-b4dd-4b56e79f4056\",\n      \"name\": \"On order updated\",\n      \"type\": \"n8n-nodes-base.shopifyTrigger\",\n      \"position\": [\n        380,\n        200\n      ],\n      \"webhookId\": \"0972ce92-d800-4049-ab60-7c71898ecbfa\",\n      \"parameters\": {\n        \"topic\": \"orders/updated\"\n      },\n      \"credentials\": {\n        \"shopifyApi\": {\n          \"id\": \"10\",\n          \"name\": \"Shopify account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"720e35c7-387e-428a-8930-0dfb67536382\",\n      \"name\": \"Keep only userId\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        860,\n        280\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [\n            {\n              \"name\": \"userId\",\n              \"value\": \"={{ $json[\\\"vid\\\"] }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3bb1f676-6733-4c1f-b3d0-4604f8baa0c8\",\n      \"name\": \"New Order, deal not found\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1560,\n        220\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json}}\",\n              \"operation\": \"isEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7f4b86a1-9ea7-4c5d-a336-eea2ec6dc341\",\n      \"name\": \"Do Nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1800,\n        320\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f60c88f1-8dab-498e-9f18-d7842dfa60c6\",\n      \"name\": \"Create new deal\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        1800,\n        120\n      ],\n      \"parameters\": {\n        \"stage\": \"closedwon\",\n        \"authentication\": \"oAuth2\",\n        \"additionalFields\": {\n          \"amount\": \"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"current_total_price\\\"] }}\",\n          \"dealName\": \"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"name\\\"] }}\",\n          \"closeDate\": \"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"created_at\\\"] }}\",\n          \"associatedVids\": \"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"userId\\\"] }}\"\n        }\n      },\n      \"credentials\": {\n        \"hubspotOAuth2Api\": {\n          \"id\": \"21\",\n          \"name\": \"HubSpot account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3d9de7e0-8cd4-4cea-a78c-8a862c32edeb\",\n      \"name\": \"Find if order already exists as deal\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        1340,\n        220\n      ],\n      \"parameters\": {\n        \"operation\": \"search\",\n        \"authentication\": \"oAuth2\",\n        \"additionalFields\": {\n          \"query\": \"={{ $json[\\\"name\\\"] }}\"\n        }\n      },\n      \"credentials\": {\n        \"hubspotOAuth2Api\": {\n          \"id\": \"21\",\n          \"name\": \"HubSpot account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"f85b698a-872a-477b-9466-e35622b381a2\",\n      \"name\": \"Add Hubspot userId to data\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1140,\n        220\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByIndex\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"11502ac7-1e57-4614-9dd5-31f5fc62c91c\",\n      \"name\": \"Create or update contact\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        640,\n        280\n      ],\n      \"parameters\": {\n        \"email\": \"={{ $json[\\\"contact_email\\\"] }}\",\n        \"resource\": \"contact\",\n        \"authentication\": \"oAuth2\",\n        \"additionalFields\": {\n          \"city\": \"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"city\\\"] }}\",\n          \"country\": \"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"country\\\"] }}\",\n          \"lastName\": \"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"last_name\\\"] }}\",\n          \"firstName\": \"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"first_name\\\"] }}\"\n        }\n      },\n      \"credentials\": {\n        \"hubspotOAuth2Api\": {\n          \"id\": \"21\",\n          \"name\": \"HubSpot account\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Keep only userId\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add Hubspot userId to data\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"On order updated\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add Hubspot userId to data\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Create or update contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create or update contact\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Keep only userId\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"New Order, deal not found\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create new deal\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Do Nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add Hubspot userId to data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find if order already exists as deal\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find if order already exists as deal\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"New Order, deal not found\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.shopifyTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.hubspot",
      "n8n-nodes-base.hubspot",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.hubspot"
    ],
    "trigger": null
  }
}