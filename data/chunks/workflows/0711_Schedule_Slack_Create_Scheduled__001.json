{
  "source": "0711_Schedule_Slack_Create_Scheduled.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"2f9460831fcdb0e9a4494f0630367cfe2968282072e2d27c6ee6ab0a4c165a36\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"140f236c-8946-4ca8-b18f-0af99107b15c\",\n      \"name\": \"Assign parameters\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        300,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b836ba12-262a-4fed-a31d-9e2f6514137a\",\n              \"name\": \"startUrls\",\n              \"type\": \"array\",\n              \"value\": \"=[\\n    {\\n      \\\"url\\\": \\\"https://www.upwork.com/nx/search/jobs/?nbs=1&q=python\\\",\\n      \\\"method\\\": \\\"GET\\\"\\n    },\\n{\\n            \\\"url\\\": \\\"https://www.upwork.com/nx/search/jobs/?nbs=1&q=java\\\",\\n            \\\"method\\\": \\\"GET\\\"\\n        }\\n  ]\"\n            },\n            {\n              \"id\": \"5f7ba5cc-a8fc-4f67-9feb-6243d08462f9\",\n              \"name\": \"proxyCountryCode\",\n              \"type\": \"string\",\n              \"value\": \"FR\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"d1863b34-d35f-477c-bb94-8a77ff08b51d\",\n      \"name\": \"Query For Upwork Job Posts\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        520,\n        80\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.apify.com/v2/acts/arlusm~upwork-scraper-with-fresh-job-posts/run-sync-get-dataset-items\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"startUrls\",\n              \"value\": \"={{ $json.startUrls }}\"\n            },\n            {\n              \"name\": \"proxyCountryCode\",\n              \"value\": \"={{ $json.proxyCountryCode }}\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpQueryAuth\"\n      },\n      \"credentials\": {\n        \"httpQueryAuth\": {\n          \"id\": \"WajVMGJs8zYL5VdP\",\n          \"name\": \"Query Auth account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"a923af43-f417-470c-af97-2a50dc0c0d79\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -100,\n        80\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\",\n              \"minutesInterval\": 10\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"26322972-4ecd-4f8e-a1fc-81607a911c22\",\n      \"name\": \"If Working Hours\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        80,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"795a6d51-0ea0-4493-bc1e-a1807a2cbd77\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"gt\"\n              },\n              \"leftValue\": \"={{ $json.Hour }}\",\n              \"rightValue\": 2\n            },\n            {\n              \"id\": \"f9ba101d-226d-4d6a-aab8-62229762a046\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"lt\"\n              },\n              \"leftValue\": \"={{ $json.Hour }}\",\n              \"rightValue\": 15\n            }\n          ]\n        },\n        \"looseTypeValidation\": true\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"d68cb363-df1f-4601-b194-c1dc044b0c6a\",\n      \"name\": \"Find Existing Entries\",\n      \"type\": \"n8n-nodes-base.mongoDb\",\n      \"position\": [\n        720,\n        -40\n      ],\n      \"parameters\": {\n        \"query\": \"={\\n  \\\"title\\\": \\\"{{ $json.title }}\\\",\\n  \\\"budget\\\": \\\"{{ $json.budget }}\\\"\\n}\\n\",\n        \"options\": {},\n        \"collection\": \"n8n\"\n      },\n      \"credentials\": {\n        \"mongoDb\": {\n          \"id\": \"aXU1Q0utjxwEpfEk\",\n          \"name\": \"MongoDB account\"\n        }\n      },\n      \"typeVersion\": 1.1,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"82a6a26a-9fd5-4ce5-986f-e0aeb0c43fcc\",\n      \"name\": \"Output New Entries\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        940,\n        80\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"joinMode\": \"keepNonMatches\",\n        \"fieldsToMatchString\": \"title, budget\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"361603e9-d173-42e2-a170-de08725ffd24\",\n      \"name\": \"Add New Entries To MongoDB\",\n      \"type\": \"n8n-nodes-base.mongoDb\",\n      \"position\": [\n        1160,\n        -40\n      ],\n      \"parameters\": {\n        \"fields\": \"title,link,paymentType,budget,projectLength,shortBio,skills,publishedDate,normalizedDate,searchUrl\",\n        \"options\": {},\n        \"operation\": \"insert\",\n        \"collection\": \"n8n\"\n      },\n      \"credentials\": {\n        \"mongoDb\": {\n          \"id\": \"aXU1Q0utjxwEpfEk\",\n          \"name\": \"MongoDB account\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"e13787c6-f3e5-4bad-afcc-b1c3387a866c\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        220,\n        -240\n      ],\n      \"parameters\": {\n        \"height\": 260,\n        \"content\": \"## Setup\\n1. Add MongoDB, Slack credentials\\n2. Add a query auth credential where the key='token' and the value being your apify token\\n3. Modify the 'Assign parameters' node to include the Upwork URLs you want to query for\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bc83acf0-b28b-48ff-bcb1-695404f30282\",\n      \"name\": \"Send message in #general\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1160,\n        200\n      ],\n      \"webhookId\": \"7b8d0119-c115-4ed3-9d2d-ea8d58edfae6\",\n      \"parameters\": {\n        \"text\": \"=Job Title : {{ $json.title }}\\nPublished : {{ $json.publishedDate }}\\nLink : {{ $json.link }}\\nPayment Type: {{ $json.paymentType }}\\nBudget: {{ $json.budget }}\\nSkills: {{ $json.skills }}\\nBio: {{ $json.shortBio }}\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"#general\"\n        },\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"nilit1oFWL3xhyvx\",\n          \"name\": \"Slack account\"\n        }\n      },\n      \"typeVersion\": 2.3\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"If Working Hours\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Assign parameters\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If Working Hours\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Assign parameters\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Query For Upwork Job Posts\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Output New Entries\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add New Entries To MongoDB\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Send message in #general\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find Existing Entries\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Output New Entries\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Query For Upwork Job Posts\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find Existing Entries\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Output New Entries\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.if",
      "n8n-nodes-base.mongoDb",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.mongoDb",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.slack"
    ],
    "trigger": "schedule trigger"
  }
}