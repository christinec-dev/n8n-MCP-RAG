{
  "source": "1814_Code_Extractfromfile_Automate_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"bhWsUxipJ9wuTA5K\",\n  \"meta\": {\n    \"instanceId\": \"fd11e31161384d7618b8c5580f01ec2285d2165d3df82195429972f6a3f814eb\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"n8n workflow deployer\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"8db6d045-5ef8-444a-ae3e-0f0611946008\",\n      \"name\": \"Get Existing Workflow Tags\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -580,\n        -580\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.N8N_Instance_URL }}api/v1/tags\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"n8nApi\"\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"eOE2pATZyQiS1K4C\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 4.2,\n      \"waitBetweenTries\": 5000\n    },\n    {\n      \"id\": \"da4aeef3-05a4-48c9-ae5c-9038f07e3693\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -300,\n        -1040\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 1460,\n        \"height\": 760,\n        \"content\": \"## Setup Instructions\\n\\n**1.** In Google Drive create a **ToDeploy** folder and a **Deployed** folder\\n+ Update \\\"**Google Drive Trigger -ToDeploy folder**\\\" to your ToDeploy folder\\n+ Update \\\"**Move JSON file to Deployed folder**\\\" to you Deployed folder\\n\\n\\n**2.** Create a **n8n API key**:\\n+Go to Settings > n8n API\\n+Select Create an API key\\n+Copy API Key\\n\\n**3.** In \\\"**Get Existing Workflow Tags**\\\" node: \\nCreate n8n API Authentication\\n**Authentication:** Predefined Credential Type\\n**Credential Type:** n8n API\\n\\nCreate new credential:\\n+Paste in API key\\n+Baseurl: https://SUB.DOMAINNAME.com/api/v1/\\n\\n**4.** Add n8n API authentication to: \\n+ \\\"**Create n8n Workflow**\\\" node\\n+ \\\"**Set Workflow Tag**\\\" node\\n\\n\\n**5.** Add your N8N instance URL to the **N8N_Instance_URL** variable in \\\"**Set n8n URL variable**\\\" node.\\n\\n**6.** Run **\\\"Get Workflow Tags\\\"** node and copy the ID of your chosen tag.\\n\\n**7.** In \\\"**Set n8n API URL & Tag ID variables**\\\" node:\\n+ Add the Workflow Tag ID to the **N8N_Instance_Tag** variable\\n+ Add your N8N instance URL to the **N8N_Instance_URL** variable\\n\\n\\n**9.** Set workflow to Active\\n\\n**10.** Add n8n json files to Google Drive folder \\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"520aa22e-0456-4383-ba6d-fd89fd77f193\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -680,\n        -140\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 260,\n        \"height\": 280,\n        \"content\": \"### Set variables:\\n**N8N_Instance_Tag** **N8N_Instance_URL** \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2e0794eb-0213-48fd-a974-26301bfdfc8a\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        300,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 440,\n        \"height\": 260,\n        \"content\": \"### Configure n8n API authentication\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f77ad2ef-32e3-4d24-b79b-9898152cbbac\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1100,\n        -780\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 740,\n        \"height\": 420,\n        \"content\": \"## 1. Get Workflow Tags\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cf10c998-44fc-4f1a-8d61-9187a9eae82a\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -1040,\n        -580\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"206fffc1-d7ee-41eb-b6ad-55be8ae60526\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -880,\n        -700\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 220,\n        \"height\": 280,\n        \"content\": \"### Set variable:\\n**N8N_Instance_URL** \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2bbe9b3e-c302-497f-a724-e8c51ce673ef\",\n      \"name\": \"Extract JSON object from File\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        -80,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"fromJson\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2f0acb18-86c4-4f94-8f76-b72174809643\",\n      \"name\": \"Clean JSON file ready for import\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        140,\n        -40\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"const fullWorkflow = $json.data || $json;\\n\\n// Build settings with only allowed fields\\nconst cleanSettings = {};\\nif (fullWorkflow.settings?.executionOrder) {\\n  cleanSettings.executionOrder = fullWorkflow.settings.executionOrder;\\n}\\nif (fullWorkflow.settings?.timezone) {\\n  cleanSettings.timezone = fullWorkflow.settings.timezone;\\n}\\n\\n// Construct clean workflow object\\nconst cleanWorkflow = {\\n  name: fullWorkflow.name,\\n  nodes: fullWorkflow.nodes,\\n  connections: fullWorkflow.connections,\\n  settings: cleanSettings,\\n};\\n\\nreturn { json: cleanWorkflow };\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"f0428a03-2194-4390-b14b-5149ea3a220b\",\n      \"name\": \"Set n8n API URL & Tag ID variables\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -600,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"41afa23f-bacf-4c2b-9630-68483acc9fe6\",\n              \"name\": \"N8N_Instance_URL\",\n              \"type\": \"string\",\n              \"value\": \"https://SUB.DOMAINNAME.com/\"\n            },\n            {\n              \"id\": \"c27f2d9d-ee1f-4ada-90cc-20177017b342\",\n              \"name\": \"N8N_Instance_Tag\",\n              \"type\": \"string\",\n              \"value\": \"mIzqUB1qBwewiiX3\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"9f59cba9-9452-4e05-9d95-3e405ec195cf\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -980,\n        -140\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 260,\n        \"height\": 280,\n        \"content\": \"### Change Google Drive Folder\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"87ce4868-407c-461f-92e2-6b3bf1dd616e\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -640,\n        -760\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"height\": 340,\n        \"content\": \"### Configure n8n API authentication.\\n\\n### Tag ID\\nCopy your chosen Tag ID to **N8N_Instance_Tag** \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b1c3f693-a587-4928-a90a-8288eb84a879\",\n      \"name\": \"Create n8n Workflow\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        360,\n        -40\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('Set n8n API URL & Tag ID variables').item.json.N8N_Instance_URL }}api/v1/workflows\",\n        \"body\": \"={{ $json }}\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"raw\",\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"rawContentType\": \"application/json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"n8nApi\"\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"eOE2pATZyQiS1K4C\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"70ff3b11-3664-4fec-a220-72696a6083c5\",\n      \"name\": \"Set Workflow Tag\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"onError\": \"continueRegularOutput\",\n      \"position\": [\n        600,\n        -40\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('Set n8n API URL & Tag ID variables').item.json.N8N_Instance_URL }}api/v1/workflows/{{ $json.id }}/tags\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"jsonBody\": \"=[\\n  {\\n    \\\"id\\\": \\\"{{ $('Set n8n API URL & Tag ID variables').item.json.N8N_Instance_Tag }}\\\"\\n  }\\n]\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"n8nApi\"\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"eOE2pATZyQiS1K4C\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 4.2,\n      \"waitBetweenTries\": 5000\n    },\n    {\n      \"id\": \"55671121-7027-476b-8eff-9d9a16385cce\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        800,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 260,\n        \"height\": 260,\n        \"content\": \"### Change Google Drive Deployed Folder\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e8a9bbd8-a41d-4b82-931c-5570651d8583\",\n      \"name\": \"Capture Name If Fails To Create Workflow\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        600,\n        160\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return [{\\n  json: {\\n    workflowName:   $json.name,\\n    errorMessage:   $json.error.message,\\n  }\\n}];\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"0fee0939-f3bd-4fd1-b444-40509f4b0f50\",\n      \"name\": \"Move JSON file to Deployed folder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        880,\n        -40\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Google Drive Trigger -ToDeploy folder').item.json.id }}\"\n        },\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1nQb17Xf7ZTF75E-aettkFtBVKI_nOrsW\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive/folders/1nQb17Xf7ZTF75E-aettkFtBVKI_nOrsW\",\n          \"cachedResultName\": \"Deployed\"\n        },\n        \"operation\": \"move\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"SfLfcExz8PihKGNB\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"59567f07-4d69-4d30-a5ef-934198ff101d\",\n      \"name\": \"Download n8n JSON File\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -320,\n        -40\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Google Drive Trigger -ToDeploy folder').item.json.id }}\"\n        },\n        \"options\": {\n          \"binaryPropertyName\": \"data\"\n        },\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"SfLfcExz8PihKGNB\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"a5837765-9787-43a5-bbfe-44e5f3728aee\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1100,\n        -260\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 2260,\n        \"height\": 620,\n        \"content\": \"## 2. Import JSON Workflow Into n8n Instance\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bcb77b34-36c8-4839-b3e2-72f8e60871ba\",\n      \"name\": \"Set n8n URL variable\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -820,\n        -580\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"41afa23f-bacf-4c2b-9630-68483acc9fe6\",\n              \"name\": \"N8N_Instance_URL\",\n              \"type\": \"string\",\n              \"value\": \"https://SUB.DOMAINNAME.com/\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"7281ab81-d1e8-4a78-8e2f-e1049633d6e6\",\n      \"name\": \"Google Drive Trigger -ToDeploy folder\",\n      \"type\": \"n8n-nodes-base.googleDriveTrigger\",\n      \"position\": [\n        -880,\n        -40\n      ],\n      \"parameters\": {\n        \"event\": \"fileCreated\",\n        \"options\": {},\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            }\n          ]\n        },\n        \"triggerOn\": \"specificFolder\",\n        \"folderToWatch\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1EPGHT5fBn0Hx_EVDixJiJMJgRbNNdB0I\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive/folders/1EPGHT5fBn0Hx_EVDixJiJMJgRbNNdB0I\",\n          \"cachedResultName\": \"toDeploy\"\n        }\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"SfLfcExz8PihKGNB\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"77325a25-51f0-441a-8750-fe6d1d5a266f\",\n  \"connections\": {\n    \"Set Workflow Tag\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Move JSON file to Deployed folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create n8n Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Workflow Tag\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Capture Name If Fails To Create Workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set n8n URL variable\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Existing Workflow Tags\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download n8n JSON File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract JSON object from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract JSON object from File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clean JSON file ready for import\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Clean JSON file ready for import\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create n8n Workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set n8n URL variable\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set n8n API URL & Tag ID variables\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download n8n JSON File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Drive Trigger -ToDeploy folder\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set n8n API URL & Tag ID variables\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.extractFromFile",
      "n8n-nodes-base.code",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.code",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.googleDriveTrigger"
    ],
    "trigger": "google drive trigger -todeploy folder"
  }
}