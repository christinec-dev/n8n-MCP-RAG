{
  "source": "1596_Telegram_Code_Automate_Webhook.json",
  "index": 1,
  "content": "{\n  \"name\": \"Parents smart bot\",\n  \"nodes\": [\n    {\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {\n          \"download\": true\n        }\n      },\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"typeVersion\": 1.2,\n      \"position\": [\n        -560,\n        20\n      ],\n      \"id\": \"a1117c0e-8fcc-4de6-b5c3-fe76ea10b975\",\n      \"name\": \"Telegram Trigger\",\n      \"webhookId\": \"a9b9daf6-4fb2-4c08-a7e3-8dc69a155511\",\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"FXdJyw1yYOOUGF1m\",\n          \"name\": \"Telegram account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"promptType\": \"define\",\n        \"text\": \"={{ $json.text }} {{ $json.fullPrompt }}\\n\",\n        \"options\": {\n          \"systemMessage\": \"=# Overview\\nYou are the central brain of a smart personal assistant built especially for busy parents.  \\nYour job is to understand the user's intent and delegate the request to the most appropriate specialized agent (tool).  \\nYou do not generate content yourself â€” only orchestrate which tool should do what.\\n\\nYouâ€™re here to help parents stay organized, reduce cognitive load, and make their lives easier â€“ whether it's managing appointments, messaging people, creating content, or helping with daily logistics.\\n\\n## Tools\\n- Email Agent: Use this tool to take action in email.\\n- Calendar Agent: Use this tool to take action in calendar.\\n- Contact Agent: Use this to get, update, or add contacts (like the doctor, the teacher, family, etc).\\n- Content Creator Agent: Use this for generating any written content â€” reminders, messages, summaries, posts, etc.\\n- Tavily: Use this to search the web and gather quick facts or ideas.\\n- Calculator: Use this tool to perform calculations or evaluate numerical expressions when needed\\n\\n## Rules\\n- Never write emails, posts, or summaries yourself. Always delegate to the appropriate Agent.\\n- When sending an email or creating an event that involves people, you must first get their contact details via the Contact Agent, then pass them to the relevant tool.\\n- When a task involves written communication (like messages, reminders, social posts, or summaries), use the Content Creator Agent. Include in your instruction:\\n  - What kind of content is needed\\n  - Who it is for (e.g. wife, teacher, LinkedIn)\\n  - What the tone should be (supportive, excited, reflective)\\n  - That it should be written in Hebrew\\n\\n- If the request is to \\\"write a post\\\" or \\\"LinkedIn post\\\", instruct the Content Creator Agent to use **LinkedIn Mode**.\\n\\n## Special Use Cases\\n- Natural language reminders like â€œDoctor appointment for Maya on Tuesday at 16:00â€ â†’ use Calendar Agent.\\n- Quick tasks like â€œSend a thank-you message to the kindergarten teacherâ€ â†’ use Contact Agent â†’ then Email Agent.\\n- Content requests like â€œWrite a LinkedIn post about parenting and techâ€ â†’ instruct the Content Creator Agent accordingly.\\n\\n## Tone\\nAlways be warm, calm, and empathetic â€” like a personal family assistant.  \\nUse simple, human language thatâ€™s gentle, proactive, and respectful.  \\nAssume youâ€™re often speaking to a multitasking parent (especially mom ğŸ˜…).\\n\\n## Final Check Before Responding\\n- ğŸ”„ **Language**: Ensure your final response is in **Hebrew**. If not, translate it accurately while keeping the tone and meaning.\\n- ğŸ’¬ **Tone**: Ensure the final message is soft, personal, and appropriate for a family context.\\n- Do not send robotic or dry messages â€” always aim for warmth and helpfulness.\\n\\n---\\n\\n## Output Structure\\nWhenever you delegate a task to the Content Creator Agent, provide it with:\\n- A short, clear instruction of what to write\\n- Target audience (e.g. my wife, my team, LinkedIn)\\n- Desired tone (e.g. friendly, professional, celebratory)\\n- Indicate Hebrew as the language\\n\"\n        }\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"typeVersion\": 1.7,\n      \"position\": [\n        1820,\n        0\n      ],\n      \"id\": \"b22f36e2-563d-428e-a4dc-41d5135d3174\",\n      \"name\": \"Ultimate Assistant\"\n    },\n    {\n      \"parameters\": {\n        \"name\": \"emailAgent\",\n        \"description\": \"Call this tool for any email actions.\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"value\": \"MuzLEMDHERvU0CMD\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"Email Agent\"\n        },\n        \"workflowInputs\": {\n          \"mappingMode\": \"defineBelow\",\n          \"value\": {},\n          \"matchingColumns\": [],\n          \"schema\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"typeVersion\": 2,\n      \"position\": [\n        1700,\n        440\n      ],\n      \"id\": \"f7874c27-c85c-438f-bdef-7ac9fce3b305\",\n      \"name\": \"Email Agent\"\n    },\n    {\n      \"parameters\": {\n        \"name\": \"contactAgent\",\n        \"description\": \"Call this tool for any contact related actions.\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"value\": \"IsSUyrla7wc1cDLE\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"ğŸ¤–Contact Agent\"\n        },\n        \"workflowInputs\": {\n          \"mappingMode\": \"defineBelow\",\n          \"value\": {},\n          \"matchingColumns\": [],\n          \"schema\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"typeVersion\": 2,\n      \"position\": [\n        1940,\n        440\n      ],\n      \"id\": \"4e75c746-beb8-45b6-bfbc-1edf184dc2d4\",\n      \"name\": \"Contact Agent\"\n    },\n    {\n      \"parameters\": {\n        \"name\": \"contentCreator\",\n        \"description\": \"Call this tool whenever you need to create any kind of written content for the user.  \\nThis includes but is not limited to: reminders, messages, summaries, emails, posts, or even fun or empathetic replies.  \\n\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"value\": \"MTO7R5h1y1XSuN5o\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"Content Agent\"\n        },\n        \"workflowInputs\": {\n          \"mappingMode\": \"defineBelow\",\n          \"value\": {},\n          \"matchingColumns\": [],\n          \"schema\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"typeVersion\": 2,\n      \"position\": [\n        2080,\n        440\n      ],\n      \"id\": \"63f55d55-1a46-49d2-9113-2db2edf6682a\",\n      \"name\": \"Content Creator Agent\"\n    },\n    {\n      \"parameters\": {\n        \"toolDescription\": \"Use this tool to search the internet\",\n        \"method\": \"POST\",\n        \"url\": \"https://api.tavily.com/search\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"jsonBody\": \"{\\n    \\\"api_key\\\": \\\"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\\\",\\n    \\\"query\\\": \\\"{searchTerm}\\\",\\n    \\\"search_depth\\\": \\\"basic\\\",\\n    \\\"include_answer\\\": true,\\n    \\\"topic\\\": \\\"news\\\",\\n    \\\"include_raw_content\\\": true,\\n    \\\"max_results\\\": 3\\n} \",\n        \"placeholderDefinitions\": {\n          \"values\": [\n            {\n              \"name\": \"searchTerm\",\n              \"description\": \"What the user has requested to search the internet for\",\n              \"type\": \"string\"\n            }\n          ]\n        }\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        2200,\n        440\n      ],\n      \"id\": \"cdd8d779-053b-4147-8f0b-85db923711bf\",\n      \"name\": \"Tavily\"\n    },\n    {\n      \"parameters\": {\n        \"name\": \"calendarAgent\",\n        \"description\": \"Call this tool for any calendar action.\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"value\": \"QbIV4MIEmgQG4nUa\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"Calender Agent\"\n        },\n        \"workflowInputs\": {\n          \"mappingMode\": \"defineBelow\",\n          \"value\": {},\n          \"matchingColumns\": [],\n          \"schema\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"typeVersion\": 2,\n      \"position\": [\n        1820,\n        440\n      ],\n      \"id\": \"aabea6d5-06b5-4c70-b140-78a6edc277ca\",\n      \"name\": \"Calendar Agent\"\n    },\n    {\n      \"parameters\": {\n        \"resource\": \"file\",\n        \"fileId\": \"={{ $json.message.voice.file_id }}\"\n      },\n      \"id\": \"5dc59107-b53e-47a3-9dc6-cdafe449f8da\",\n      \"name\": \"Download File\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"typeVersion\": 1.2,\n      \"position\": [\n        0,\n        -160\n      ],\n      \"webhookId\": \"83bb7385-33f6-4105-8294-1a91c0ebbee5\",\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"FXdJyw1yYOOUGF1m\",\n          \"name\": \"Telegram account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"resource\": \"audio\",\n        \"operation\": \"transcribe\",\n        \"options\": {}\n      },\n      \"id\": \"9d7d1d10-4266-4b31-9f2f-cc249be68b65\",\n      \"name\": \"Transcribe\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"typeVersion\": 1.6,\n      \"position\": [\n        200,\n        -160\n      ],\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"4dCIIzau81oRIK8h\",\n          \"name\": \"OpenAi account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {},\n      \"type\": \"@n8n/n8n-nodes-langchain.toolCalculator\",\n      \"typeVersion\": 1,\n      \"position\": [\n        2320,\n        440\n      ],\n      \"id\": \"6ef56cfc-702f-4007-9d7a-d0778805b892\",\n      \"name\": \"Calculator1\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"fe7ecc99-e1e8-4a5e-bdd6-6fce9757b234\",\n              \"name\": \"text\",\n              \"value\": \"={{ $json.message.text }}\",\n              \"type\": \"string\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"id\": \"d4ce9e05-bbba-47e7-a23b-8a2aed82dc7b\",\n      \"name\": \"Set 'Text'1\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        240,\n        20\n      ]\n    },\n    {\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"caseSensitive\": true,\n                  \"leftValue\": \"\",\n                  \"typeValidation\": \"strict\",\n                  \"version\": 2\n                },\n                \"conditions\": [\n                  {\n                    \"leftValue\": \"={{ $json.message.voice.file_id }}\",\n                    \"rightValue\": \"\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"id\": \"198d228f-dd5a-4a53-9cb9-de6fc2adff2b\"\n                  }\n                ],\n                \"combinator\": \"and\"\n              },\n              \"renameOutput\": true,\n              \"outputKey\": \"Voice\"\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"caseSensitive\": true,\n                  \"leftValue\": \"\",\n                  \"typeValidation\": \"strict\",\n                  \"version\": 2\n                },\n                \"conditions\": [\n                  {\n                    \"id\": \"8c844924-b2ed-48b0-935c-c66a8fd0c778\",\n                    \"leftValue\": \"={{ $json.message.text }}\",\n                    \"rightValue\": \"\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    }\n                  }\n                ],\n                \"combinator\": \"and\"\n              },\n              \"renameOutput\": true,\n              \"outputKey\": \"Text\"\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"caseSensitive\": true,\n                  \"leftValue\": \"\",\n                  \"typeValidation\": \"strict\",\n                  \"version\": 2\n                },\n                \"conditions\": [\n                  {\n                    \"id\": \"42930344-1ca2-4298-aa5e-4e8884602e5f\",\n                    \"leftValue\": \"\",\n                    \"rightValue\": \"\",\n                    \"operator\": {\n                      \"type\": \"object\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    }\n                  }\n                ],\n                \"combinator\": \"and\"\n              },\n              \"renameOutput\": true,\n              \"outputKey\": \"File\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"id\": \"fde8c340-fcf2-4bc3-a23d-d669ec9a58b0\",\n      \"name\": \"Switch1\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"typeVersion\": 3.2,\n      \"position\": [\n        -240,\n        20\n      ]\n    },\n    {\n      \"parameters\": {\n        \"chatId\": \"={{ $('Telegram Trigger').item.json.message.chat.id }}\",\n        \"text\": \"={{ $json.output }}\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"id\": \"f529779d-a9f8-4854-96ec-c8780a90c8ae\",\n      \"name\": \"Response1\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"typeVersion\": 1.2,\n      \"position\": [\n        2320,\n        0\n      ],\n      \"webhookId\": \"5dced4b9-5066-4036-a4d4-14fc07edd53c\",\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"FXdJyw1yYOOUGF1m\",\n          \"name\": \"Telegram account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {},\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWikipedia\",\n      \"typeVersion\": 1,\n      \"position\": [\n        2440,\n        440\n      ],\n      \"id\": \"87dead2c-0287-44cf-9650-78004a35af4a\",\n      \"name\": \"Wikipedia\"\n    },\n    {\n      \"parameters\": {\n        \"mode\": \"insert\",\n        \"qdrantCollection\": {\n          \"__rl\": true,\n          \"value\": \"family-memory\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"family-memory\"\n        },\n        \"options\": {}\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        720,\n        460\n      ],\n      \"id\": \"40084dad-2aa7-4b51-af93-de38fcd585b5\",\n      \"name\": \"Qdrant Vector Store\",\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"8vZ7qiEVfdQtZNeK\",\n          \"name\": \"QdrantApi account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"jsonMode\": \"expressionData\",\n        \"jsonData\": \"={{ $json.text }}\\n\",\n        \"options\": {}\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\n      \"typeVersion\": 1,\n      \"position\": [\n        840,\n        660\n      ],\n      \"id\": \"91f01d4b-6afc-4698-91c9-83c06fe2a209\",\n      \"name\": \"Default Data Loader\"\n    },\n    {\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter\",\n      \"typeVersion\": 1,\n      \"position\": [\n        860,\n        840\n      ],\n      \"id\": \"d34f1e08-2521-4fc2-aa06-017f148b57f7\",\n      \"name\": \"Recursive Character Text Splitter\"\n    },\n    {\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"value\": \"gpt-3.5-turbo\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"gpt-3.5-turbo\"\n        },\n        \"options\": {}\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"typeVersion\": 1.2,\n      \"position\": [\n        1720,\n        160\n      ],\n      \"id\": \"f0fbf5b5-32bc-4051-b1b1-4741899716e1\",\n      \"name\": \"OpenAI Chat Model\",\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"4dCIIzau81oRIK8h\",\n          \"name\": \"OpenAi account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"model\": \"text-embedding-ada-002\",\n        \"options\": {\n          \"stripNewLines\": true\n        }\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\n      \"typeVersion\": 1.2,\n      \"position\": [\n        700,\n        720\n      ],\n      \"id\": \"e4b062ff-255f-42e8-b0c1-4c5545e71097\",\n      \"name\": \"Embeddings OpenAI1\",\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"4dCIIzau81oRIK8h\",\n          \"name\": \"OpenAi account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"mode\": \"retrieve-as-tool\",\n        \"toolName\": \"memory_store\",\n        \"toolDescription\": \"Call this tool to Retrieve relevant family information to give context to the assistant's decisions. Includes names, roles, events, and personal preferences.\\n\",\n        \"qdrantCollection\": {\n          \"__rl\": true,\n          \"value\": \"family-memory\",\n          \"mode\": \"list\",\n          \"cachedResultName\": \"family-memory\"\n        },\n        \"topK\": 5,\n        \"options\": {}\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\n      \"typeVersion\": 1.1,\n      \"position\": [\n        2580,\n        440\n      ],\n      \"id\": \"508156dc-fa2e-41f2-a8bf-633d4cab2a9f\",\n      \"name\": \"Qdrant Vector Store1\",\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"8vZ7qiEVfdQtZNeK\",\n          \"name\": \"QdrantApi account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\n      \"typeVersion\": 1.2,\n      \"position\": [\n        2560,\n        580\n      ],\n      \"id\": \"84db19a0-8eec-4aea-abfd-e94d88905a56\",\n      \"name\": \"Embeddings OpenAI\",\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"4dCIIzau81oRIK8h\",\n          \"name\": \"OpenAi account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"sessionIdType\": \"customKey\",\n        \"sessionKey\": \"={{ $('Telegram Trigger').item.json.message.chat.id }}\"\n      },\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"typeVersion\": 1.3,\n      \"position\": [\n        1860,\n        200\n      ],\n      \"id\": \"4b5ea288-2d75-4bb8-91b0-e900c44dda1f\",\n      \"name\": \"Window Buffer Memory\"\n    },\n    {\n      \"parameters\": {\n        \"resource\": \"file\",\n        \"fileId\": \"={{ $json.message.document.file_id }}\\n\"\n      },\n      \"id\": \"9c9c0578-d849-4250-9d99-8d500272031f\",\n      \"name\": \"Download File1\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"typeVersion\": 1.2,\n      \"position\": [\n        -240,\n        280\n      ],\n      \"webhookId\": \"83bb7385-33f6-4105-8294-1a91c0ebbee5\",\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"FXdJyw1yYOOUGF1m\",\n          \"name\": \"Telegram account\"\n        }\n      }\n    },\n    {\n      \"parameters\": {\n        \"jsCode\": \"const fileContent = JSON.parse(Buffer.from($input.first().binary.data.data, 'base64').toString());\\nreturn fileContent.map(item => ({\\n  json: {\\n    id: item.id,\\n    text: item.text,\\n    metadata: item.metadata,\\n  }\\n}));\\n\"\n      },\n      \"type\": \"n8n-nodes-base.code\",\n      \"typeVersion\": 2,\n      \"position\": [\n        -280,\n        560\n      ],\n      \"id\": \"b67a9ed8-2095-4402-ab93-c99363e5f496\",\n      \"name\": \"Code\",\n      \"retryOnFail\": true,\n      \"onError\": \"continueErrorOutput\"\n    },\n    {\n      \"parameters\": {\n        \"conditions\": {\n          \"options\": {\n            \"caseSensitive\": true,\n            \"leftValue\": \"\",\n            \"typeValidation\": \"strict\",\n            \"version\": 2\n          },\n          \"conditions\": [\n            {\n              \"id\": \"79412a1a-5b1e-48d9-85c0-f514590d4de6\",\n              \"leftValue\": \"={{$json.text}}\",\n              \"rightValue\": \"/(××™×”|×©×•×”×|× ×•×™|×’×Ÿ|×—×•×’|×¨×•×¤×|×¡×‘×ª×|×©×™×©×™|×©×œ×™×©×™|×ª×–×›×•×¨×ª|×™×©|×‘×™×•×|×‘×¢×‘×•×“×”|×‘×‘×™×ª ×¡×¤×¨)/i\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"regex\"\n              }\n            }\n          ],\n          \"combinator\": \"and\"\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.if\",\n      \"typeVersion\": 2.2,\n      \"position\": [\n        460,\n        20\n      ],\n      \"id\": \"f4fcbe6b-998f-44bb-bbcf-cc7829fc280a\",\n      \"name\": \"If\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"e7ce88f3-4e65-46cd-9c10-800ce2f83ae4\",\n              \"name\": \"text\",\n              \"value\": \"={{ $json.text }}\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"2e4f47c6-a94d-4d69-b5c0-b366a99914c1\",\n              \"name\": \"metadata.source\",\n              \"value\": \"\\\"user_message\\\"\",\n              \"type\": \"string\"\n            },\n            {\n              \"id\": \"dbfd95ac-3101-4548-a1a1-441d34ee455c\",\n              \"name\": \"metadata.timestamp\",\n              \"value\": \"={{ $now }}\",\n              \"type\": \"string\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        480,\n        260\n      ],\n      \"id\": \"03ce3bd2-768a-4e08-b985-dad287900fa9\",\n      \"name\": \"Edit Fields\"\n    },\n    {\n      \"parameters\": {\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"e6fad62f-160d-4bed-bcdf-ba4bcef72e23\",\n              \"name\": \"fullPrompt\",\n              \"value\": \"={{ $json.text }}{{ $json.pageContent ? '\\\\n\\\\n×”×§×©×¨ ××–×™×›×¨×•×Ÿ:\\\\n' + $json.pageContent + '\\\\n(× ×©××¨ ×‘×ª××¨×™×š: ' + $json.metadata.timestamp + ')' : '' }}\\n\",\n              \"type\": \"string\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"type\": \"n8n-nodes-base.set\",\n      \"typeVersion\": 3.4,\n      \"position\": [\n        1260,\n        460\n      ],\n      \"id\": \"0537e668-1fd9-4b19-9d33-fc4d89fb89f9\",\n      \"name\": \"Edit Fields1\"\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Email Agent\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Contact Agent\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Content Creator Agent\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Tavily\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Calendar Agent\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Ultimate Assistant\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Response1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Transcribe\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Transcribe\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Calculator1\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set 'Text'1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Set 'Text'1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Download File1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wikipedia\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Default Data Loader\": {\n      \"ai_document\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"ai_document\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Recursive Character Text Splitter\": {\n      \"ai_textSplitter\": [\n        [\n          {\n            \"node\": \"Default Data Loader\",\n            \"type\": \"ai_textSplitter\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings OpenAI1\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Qdrant Vector Store1\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings OpenAI\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store1\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Qdrant Vector Store\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Telegram Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download File1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit Fields1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Ultimate Assistant\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  },\n  \"active\": true,\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"4fe8a9b0-c21f-4441-a479-7cadd57c57a6\",\n  \"meta\": {\n    \"templateCredsSetupCompleted\": true,\n    \"instanceId\": \"fe6ecd76466cab7a915757a3c6d3a0bd1630ec8396b6ebc38945ac2ef61f7eb1\"\n  },\n  \"id\": \"gFI0IHQrprv83RUU\",\n  \"tags\": [\n    {\n      \"createdAt\": \"2025-04-22T21:45:09.291Z\",\n      \"updatedAt\": \"2025-04-22T21:45:09.291Z\",\n      \"id\": \"5oVNN9LitL7XAvBg\",\n      \"name\": \"Parents bot\"\n    }\n  ]\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.telegramTrigger",
      "@n8n/n8n-nodes-langchain.agent",
      "@n8n/n8n-nodes-langchain.toolWorkflow",
      "@n8n/n8n-nodes-langchain.toolWorkflow",
      "@n8n/n8n-nodes-langchain.toolWorkflow",
      "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "@n8n/n8n-nodes-langchain.toolWorkflow",
      "n8n-nodes-base.telegram",
      "@n8n/n8n-nodes-langchain.openAi",
      "@n8n/n8n-nodes-langchain.toolCalculator",
      "n8n-nodes-base.set",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.telegram",
      "@n8n/n8n-nodes-langchain.toolWikipedia",
      "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "n8n-nodes-base.telegram",
      "n8n-nodes-base.code",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set"
    ],
    "trigger": "telegram trigger"
  }
}