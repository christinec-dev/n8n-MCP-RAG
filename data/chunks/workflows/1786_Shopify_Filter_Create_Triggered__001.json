{
  "source": "1786_Shopify_Filter_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": \"Zp0R3I1dUjZOIz2l\",\n  \"meta\": {\n    \"instanceId\": \"6b3e8c6c30cdfbf06283a3fa57016932c6b4ec959896c5c546ef5865ff697ff1\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Sync New Shopify Customers to Odoo Contacts\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"ae072919-4f88-4722-b139-2628e24b89ba\",\n      \"name\": \"Filter\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        -420,\n        -40\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{ $json.existing }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a36747d5-3381-43b8-9def-e3dbc8942dbd\",\n      \"name\": \"Search Odoo Contact\",\n      \"type\": \"n8n-nodes-base.odoo\",\n      \"position\": [\n        -800,\n        -40\n      ],\n      \"parameters\": {\n        \"limit\": 1,\n        \"options\": {},\n        \"resource\": \"custom\",\n        \"operation\": \"getAll\",\n        \"filterRequest\": {\n          \"filter\": [\n            {\n              \"value\": \"={{ $('Shopify Trigger').item.json.email }}\",\n              \"fieldName\": \"email\"\n            }\n          ]\n        },\n        \"customResource\": \"res.partner\"\n      },\n      \"credentials\": {\n        \"odooApi\": {\n          \"id\": \"0qIK4Cq1BwOSbxT8\",\n          \"name\": \"Odoo 148.66.157.208:8069\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"a52d6acf-e8c2-48cd-b44c-903617c23e9e\",\n      \"name\": \"Shopify Trigger\",\n      \"type\": \"n8n-nodes-base.shopifyTrigger\",\n      \"position\": [\n        -1060,\n        -40\n      ],\n      \"webhookId\": \"30b89f06-e54c-4461-9e1e-9ef7f221e08b\",\n      \"parameters\": {\n        \"topic\": \"customers/create\",\n        \"authentication\": \"accessToken\"\n      },\n      \"credentials\": {\n        \"shopifyAccessTokenApi\": {\n          \"id\": \"zkXzZzc97XyALfN8\",\n          \"name\": \"Evozard - Shopify\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f3023805-dc0b-4745-ab7b-77b2d81137e3\",\n      \"name\": \"Create Contact\",\n      \"type\": \"n8n-nodes-base.odoo\",\n      \"position\": [\n        -240,\n        -40\n      ],\n      \"parameters\": {\n        \"resource\": \"custom\",\n        \"customResource\": \"res.partner\",\n        \"fieldsToCreateOrUpdate\": {\n          \"fields\": [\n            {\n              \"fieldName\": \"name\",\n              \"fieldValue\": \"={{ $('Shopify Trigger').item.json.addresses[0].name }}\"\n            },\n            {\n              \"fieldName\": \"email\",\n              \"fieldValue\": \"={{ $('Shopify Trigger').item.json.email }}\"\n            },\n            {\n              \"fieldName\": \"street\",\n              \"fieldValue\": \"={{ $('Shopify Trigger').item.json.addresses[0].address1 }}\"\n            },\n            {\n              \"fieldName\": \"street2\",\n              \"fieldValue\": \"={{ $('Shopify Trigger').item.json.addresses[0].address2 }}\"\n            },\n            {\n              \"fieldName\": \"city\",\n              \"fieldValue\": \"={{ $('Shopify Trigger').item.json.addresses[0].city }}\"\n            },\n            {\n              \"fieldName\": \"zip\",\n              \"fieldValue\": \"={{ $('Shopify Trigger').item.json.addresses[0].zip }}\"\n            },\n            {\n              \"fieldName\": \"phone\",\n              \"fieldValue\": \"={{ $('Shopify Trigger').item.json.addresses[0].phone }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"odooApi\": {\n          \"id\": \"0qIK4Cq1BwOSbxT8\",\n          \"name\": \"Odoo 148.66.157.208:8069\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"4cef59ef-0ba4-4eee-83b6-27254ffd5974\",\n      \"name\": \"Code\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        -600,\n        -40\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"\\n\\nvar contact_detail = $('Shopify Trigger').item.json\\nconsole.log('-------contact_detail--------',contact_detail)\\nvar existing_contact = $('Search Odoo Contact').item.json\\nconsole.log('-------existing_contact--------',existing_contact,existing_contact.valueOf)\\nreturn {existing:existing_contact.id ? true:false,contact_detail:contact_detail}\\n\"\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"4c04743a-c0c3-4900-9963-3ca05b65908c\",\n  \"connections\": {\n    \"Code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Shopify Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search Odoo Contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search Odoo Contact\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.filter",
      "n8n-nodes-base.odoo",
      "n8n-nodes-base.shopifyTrigger",
      "n8n-nodes-base.odoo",
      "n8n-nodes-base.code"
    ],
    "trigger": "shopify trigger"
  }
}