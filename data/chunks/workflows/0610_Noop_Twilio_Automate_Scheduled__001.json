{
  "source": "0610_Noop_Twilio_Automate_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"247\",\n  \"name\": \"Congratulations Workflow\",\n  \"nodes\": [\n    {\n      \"name\": \"Daily Trigger\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        200,\n        400\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"hour\": 8\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Congratulations Calendar\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        400,\n        400\n      ],\n      \"parameters\": {\n        \"range\": \"A:E\",\n        \"options\": {\n          \"valueRenderMode\": \"FORMATTED_VALUE\"\n        },\n        \"sheetId\": \"\",\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Any Event Today?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        600,\n        400\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Congratulations Calendar\\\"].json[\\\"Date\\\"]}}\",\n              \"value2\": \"={{(new Date).getDate()}}/{{(new Date).getMonth()+1}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Do Nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        800,\n        550\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Congratulations Messages\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1000,\n        550\n      ],\n      \"parameters\": {\n        \"range\": \"Congratulations Messages!A:B\",\n        \"options\": {},\n        \"sheetId\": \"\",\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Merge Data\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1200,\n        400\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByKey\",\n        \"propertyName1\": \"Event Name\",\n        \"propertyName2\": \"Event Name\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Personalize Message\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        1400,\n        400\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const newItems = [];\\n\\nfor (let i=0;i<items.length;i++) {\\n  wishes_array = items[i].json.Congratulations.split(',');\\n  greeting = wishes_array.shift();\\n  \\n  new_wish = greeting + ' ' + items[i].json['First Name'] + ',' + wishes_array.join(',');\\n  newItems.push({json: {Wishes: new_wish, \\\"Phone Number\\\": items[i].json['Phone Number']}});\\n}\\n\\nreturn newItems;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Send SMS\",\n      \"type\": \"n8n-nodes-base.twilio\",\n      \"position\": [\n        1600,\n        400\n      ],\n      \"parameters\": {\n        \"to\": \"={{$node[\\\"Personalize Message\\\"].json[\\\"Phone Number\\\"]}}\",\n        \"from\": \"\",\n        \"message\": \"={{$node[\\\"Personalize Message\\\"].json[\\\"Wishes\\\"]}}\"\n      },\n      \"credentials\": {\n        \"twilioApi\": \"Twilio Programmable SMS\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"settings\": {},\n  \"connections\": {\n    \"Merge Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Personalize Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Daily Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Congratulations Calendar\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Any Event Today?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Do Nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Personalize Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send SMS\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Congratulations Calendar\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Any Event Today?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Congratulations Messages\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Data\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.cron",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.function",
      "n8n-nodes-base.twilio"
    ],
    "trigger": "daily trigger"
  }
}