{
  "source": "1630_Code_Form_Automation_Triggered.json",
  "index": 1,
  "content": "{\n  \"id\": \"RKbQHfblpcvMGZ4w\",\n  \"meta\": {\n    \"instanceId\": \"d47f3738b860eed937a1b18d7345fa2c65cf4b4957554e29477cb064a7039870\"\n  },\n  \"name\": \"Form with Dynamic Dropdown Field\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"aa627a35-9bea-4c07-b7e7-26f048564443\",\n      \"name\": \"n8n | get wf\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        540,\n        -180\n      ],\n      \"parameters\": {\n        \"operation\": \"get\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"requestOptions\": {}\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"us0k8UE7R2MZPFBK\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"902a8e45-f4b4-469c-96a6-80002de5f6dc\",\n      \"name\": \"n8n | update\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        1060,\n        -180\n      ],\n      \"parameters\": {\n        \"operation\": \"update\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.id }}\"\n        },\n        \"requestOptions\": {},\n        \"workflowObject\": \"={{ JSON.stringify($json) }}\"\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"us0k8UE7R2MZPFBK\",\n          \"name\": \"n8n account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3e9e5c16-0080-4cba-8a8a-8f24f7266fcb\",\n      \"name\": \"On form submission\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        40,\n        -620\n      ],\n      \"webhookId\": \"3e975d29-df26-49fb-8dcf-abe8fe8bc4e6\",\n      \"parameters\": {\n        \"options\": {},\n        \"formTitle\": \"Example Title\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldLabel\": \"Example text field\"\n            },\n            {\n              \"fieldType\": \"dropdown\",\n              \"fieldLabel\": \"Example dropdown\",\n              \"fieldOptions\": {\n                \"values\": [\n                  {\n                    \"option\": \"test publieke ruimtes\"\n                  },\n                  {\n                    \"option\": \"Demonstraties\"\n                  },\n                  {\n                    \"option\": \"Demonstraties\"\n                  },\n                  {\n                    \"option\": \"Juridisch medewerker IE-recht  Streetlife\"\n                  },\n                  {\n                    \"option\": \"Bamboe\"\n                  },\n                  {\n                    \"option\": \"Klaar?\"\n                  },\n                  {\n                    \"option\": \"Dannu?\"\n                  }\n                ]\n              }\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"0b874994-c123-44f8-b0f5-0b365b57d945\",\n      \"name\": \"Google Sheets Trigger\",\n      \"type\": \"n8n-nodes-base.googleSheetsTrigger\",\n      \"position\": [\n        -460,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1F73a7uuzLAq916w2JFndumv0JhnCAvOTN-Cn_OOP3uA/edit#gid=0\",\n          \"cachedResultName\": \"Blad1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1F73a7uuzLAq916w2JFndumv0JhnCAvOTN-Cn_OOP3uA\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1F73a7uuzLAq916w2JFndumv0JhnCAvOTN-Cn_OOP3uA/edit?usp=drivesdk\",\n          \"cachedResultName\": \"obsidian-n8n\"\n        },\n        \"includeInOutput\": \"both\"\n      },\n      \"credentials\": {\n        \"googleSheetsTriggerOAuth2Api\": {\n          \"id\": \"FV58wiwivBMosfix\",\n          \"name\": \"Google Sheets Trigger account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4c9bfed8-a758-40b9-9c74-53bedc1d1aa3\",\n      \"name\": \"Execute Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflow\",\n      \"position\": [\n        240,\n        -620\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"6e9d4a5a-9583-4b61-aea1-dd4892230e7c\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -520,\n        -660\n      ],\n      \"parameters\": {\n        \"width\": 960,\n        \"height\": 240,\n        \"content\": \"## Form setup\\n\\n- Customize your form fields. \\n- The dropdown field will auto-update with values from your data source. \\n- Other form fields can be added as needed (limited to one dropdown field).\\n- Connect to your workflow that processes the submitted form data.\\n\\n### Form requires production mode for testing\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"41c364f4-5b1f-42fd-841b-a6f99b585804\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -520,\n        -400\n      ],\n      \"parameters\": {\n        \"width\": 440,\n        \"height\": 400,\n        \"content\": \"## Data source setup\\n\\n- Connect to your Google Sheet containing dropdown values\\n- Node can be replaced with any other data source (API, database)\\n- Set timing trigger\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cda8f803-1773-4df7-90b9-4d8cd0469cd8\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -60,\n        -400\n      ],\n      \"parameters\": {\n        \"width\": 260,\n        \"height\": 400,\n        \"content\": \"## Data formatting\\n\\n- Extracts needed data from source\\n- Renames field to 'value' (do not change this name)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e9594ad1-3bb8-4da6-95b3-cb610a17c1bb\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        220,\n        -400\n      ],\n      \"parameters\": {\n        \"height\": 400,\n        \"content\": \"## Nested properties\\n\\n- Transforms the data to the desired format\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"806a2502-5c6c-435c-a20e-8ca0eee92822\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        480,\n        -400\n      ],\n      \"parameters\": {\n        \"height\": 400,\n        \"content\": \"## Get Workflow \\n\\n- Gets the current workflow data\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"385c3e64-9893-4e3f-b789-abbf079fa8b1\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        740,\n        -400\n      ],\n      \"parameters\": {\n        \"height\": 400,\n        \"content\": \"## Add Dropdown Values \\n- Replaces the nested parameters of the Dropdown Form Field with the nested properties sourced from the data.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f43324fc-6790-445b-a72b-ae4afb051101\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1000,\n        -400\n      ],\n      \"parameters\": {\n        \"height\": 400,\n        \"content\": \"## Update Form \\n\\n- Replaces the current workflowâ€™s JSON with the updated JSON containing the new Dropdown values.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"317694bd-590f-4eb4-a53f-f4d5d2d1ab16\",\n      \"name\": \"Write JSON\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        280,\n        -180\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const inputArray = items.map(item => item.json);\\n\\nconst output = [\\n  {\\n    nodes: [\\n      {\\n        parameters: {\\n          formFields: {\\n            values: [\\n              {\\n                fieldOptions: {\\n                  values: inputArray.map(entry => ({ option: entry.value }))\\n                }\\n              }\\n            ]\\n          }\\n        }\\n      }\\n    ]\\n  }\\n];\\n\\n// Return the transformed output\\nreturn output.map(item => ({ json: item }));\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"08b3c0b3-3df3-40d9-80ce-bd7c763fdbdb\",\n      \"name\": \"Replace values\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        820,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"38ef2b43-b903-4e96-b098-9da2d8c1c153\",\n              \"name\": \"={{ \\n   (() => {\\n      const nodeIndex = $json.nodes.findIndex(\\n         node => node.parameters?.formFields?.values.some(\\n            value => value.fieldType === 'dropdown' && value.fieldOptions?.values\\n         )\\n      );\\n\\n      if (nodeIndex === -1) return 'No matching node found';\\n\\n      const valueIndex = $json.nodes[nodeIndex].parameters.formFields.values.findIndex(\\n         value => value.fieldType === 'dropdown' && value.fieldOptions?.values\\n      );\\n\\n      if (valueIndex === -1) return `nodes[${nodeIndex}].parameters.formFields.values - No matching dropdown value found`;\\n\\n      return `nodes[${nodeIndex}].parameters.formFields.values[${valueIndex}].fieldOptions.values`;\\n   })()\\n}}\",\n              \"type\": \"array\",\n              \"value\": \"={{ $('Write JSON').item.json.nodes[0].parameters.formFields.values[0].fieldOptions.values }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"07635565-f8ea-4fac-b93c-069fbe065ce8\",\n      \"name\": \"Get all values\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -240,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1F73a7uuzLAq916w2JFndumv0JhnCAvOTN-Cn_OOP3uA/edit#gid=0\",\n          \"cachedResultName\": \"Blad1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1F73a7uuzLAq916w2JFndumv0JhnCAvOTN-Cn_OOP3uA\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1F73a7uuzLAq916w2JFndumv0JhnCAvOTN-Cn_OOP3uA/edit?usp=drivesdk\",\n          \"cachedResultName\": \"obsidian-n8n\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"3Pu0wlfxgNYzVqY6\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"9ce7bf73-211a-4f5b-b39d-81a2d513a3ef\",\n      \"name\": \"Format to 'values'\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        20,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"e18aa12e-f277-4257-ba27-9262cc7b866a\",\n              \"name\": \"value\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.title }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"d69a3011-97a6-44e9-9b7e-c8e9a248964a\",\n  \"connections\": {\n    \"Write JSON\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"n8n | get wf\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"n8n | get wf\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Replace values\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all values\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format to 'values'\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Replace values\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"n8n | update\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format to 'values'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Write JSON\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On form submission\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Execute Workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Sheets Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all values\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.n8n",
      "n8n-nodes-base.n8n",
      "n8n-nodes-base.formTrigger",
      "n8n-nodes-base.googleSheetsTrigger",
      "n8n-nodes-base.executeWorkflow",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.code",
      "n8n-nodes-base.set",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.set"
    ],
    "trigger": "google sheets trigger"
  }
}