{
  "source": "0078_Manual_Slack_Monitor_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": 118,\n  \"name\": \"Google Calendar to Slack Status & Philips Hue\",\n  \"nodes\": [\n    {\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"disabled\": true,\n      \"position\": [\n        420,\n        420\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Google Calendar\",\n      \"type\": \"n8n-nodes-base.googleCalendar\",\n      \"position\": [\n        720,\n        600\n      ],\n      \"parameters\": {\n        \"eventId\": \"={{$node[\\\"Event Started\\\"].json[\\\"id\\\"].split(\\\"_\\\")[0]}}\",\n        \"options\": {},\n        \"calendar\": \"youremail@domain.com\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"googleCalendarOAuth2Api\": {\n          \"id\": \"15\",\n          \"name\": \"GoogleCalendar - Personal\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Light - Busy\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1220,\n        180\n      ],\n      \"parameters\": {\n        \"url\": \"WEBHOOK1\",\n        \"options\": {},\n        \"requestMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Light - Available\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1220,\n        600\n      ],\n      \"parameters\": {\n        \"url\": \"WEBHOOK3\",\n        \"options\": {},\n        \"requestMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1040,\n        460\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"rules\": [\n            {\n              \"value2\": \"4dw_doing\",\n              \"operation\": \"startsWith\"\n            },\n            {\n              \"value2\": \"4dw_managing\",\n              \"operation\": \"startsWith\"\n            },\n            {\n              \"value2\": \"4dw_leading\",\n              \"operation\": \"startsWith\"\n            },\n            {\n              \"output\": 1,\n              \"value2\": \"4dw_living\",\n              \"operation\": \"startsWith\"\n            }\n          ]\n        },\n        \"value1\": \"={{$json[\\\"calColor\\\"]}}\",\n        \"dataType\": \"string\",\n        \"fallbackOutput\": 3\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Light - Personal\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1220,\n        340\n      ],\n      \"parameters\": {\n        \"url\": \"WEBHOOK2\",\n        \"options\": {},\n        \"requestMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Event Started\",\n      \"type\": \"n8n-nodes-base.googleCalendarTrigger\",\n      \"position\": [\n        540,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyX\",\n              \"unit\": \"minutes\",\n              \"value\": 5\n            }\n          ]\n        },\n        \"triggerOn\": \"eventStarted\",\n        \"calendarId\": \"youremail@domain.com\"\n      },\n      \"credentials\": {\n        \"googleCalendarOAuth2Api\": {\n          \"id\": \"15\",\n          \"name\": \"GoogleCalendar - Personal\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Slack - Status\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1040,\n        720\n      ],\n      \"parameters\": {\n        \"resource\": \"userProfile\",\n        \"operation\": \"update\",\n        \"additionalFields\": {\n          \"status_text\": \"={{$json[\\\"summary\\\"]}}\",\n          \"status_emoji\": \"=:{{$json[\\\"calColor\\\"]}}:\"\n        }\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"17\",\n          \"name\": \"CompanySlack\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Set CalColor\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        880,\n        600\n      ],\n      \"parameters\": {\n        \"functionCode\": \"for (item of items) {\\n\\n  switch (item.json.colorId) {\\n    case '1':\\n      calColor = 'Lavendar';\\n      break;\\n    case '2':\\n      calColor = '4dw_leading';\\n      break;\\n    case '3':\\n      calColor = 'Grape';\\n      break;\\n    case '4':\\n      calColor = 'Flamingo';\\n      break;\\n    case '5':\\n      calColor = '4dw_managing';\\n      break;\\n    case '6':\\n      calColor = 'Tangerine';\\n      break;\\n    case '7':\\n      calColor = '4dw_living';\\n      break;\\n    case '8':\\n      calColor = 'Graphite';\\n      break;\\n    case '9':\\n      calColor = 'Blueberry';\\n      break;\\n    case '10':\\n      calColor = 'Basil';\\n      break;\\n    case '11':\\n      calColor = '4dw_doing';\\n      break;\\n    default:\\n      calColor = 'undefined';\\n  }\\n  item.json.calColor = calColor;\\n}\\n\\nreturn items;\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Light - Busy\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Light - Personal\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [],\n        [\n          {\n            \"node\": \"Light - Available\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set CalColor\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack - Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Event Started\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Calendar\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Calendar\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set CalColor\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        []\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.googleCalendar",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.googleCalendarTrigger",
      "n8n-nodes-base.slack",
      "n8n-nodes-base.function"
    ],
    "trigger": null
  }
}