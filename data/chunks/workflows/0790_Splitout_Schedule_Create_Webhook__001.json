{
  "source": "0790_Splitout_Schedule_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"568298fde06d3db80a2eea77fe5bf45f0c7bb898dea20b769944e9ac7c6c5a80\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"eb8bbb43-d6ca-48f9-9522-12ac7100961d\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -1360,\n        380\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"77bf0c40-b045-40f9-9401-d1b206938180\",\n      \"name\": \"Convert to File\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        -360,\n        -420\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"toJson\",\n        \"binaryPropertyName\": \"=data\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"c2e870c2-52e8-4808-9091-e3dcf286eaa5\",\n      \"name\": \"Split Out\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        -660,\n        20\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"2bcafdc1-94e0-4a3d-9ad5-a189973be980\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -1500,\n        -340\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\",\n              \"minutesInterval\": 15\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a602fdf3-82d8-4bc1-806b-576b6fc904b7\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1520,\n        -520\n      ],\n      \"parameters\": {\n        \"width\": 760,\n        \"content\": \"### Receive an alert when new breaches are added to haveibeenpwned.com\\nThis workflow demonstrates how we can receive alerts when new breaches are added to haveibeenpwned.com.\\nIt also demonstrates a simple method for caching data between executions.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a53e7c76-0823-415f-91fd-920b354568d3\",\n      \"name\": \"Request breaches\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -1240,\n        -340\n      ],\n      \"parameters\": {\n        \"url\": \"https://haveibeenpwned.com/api/v3/latestbreach\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"777c65aa-1bce-40eb-9de1-dd8fef4afd05\",\n      \"name\": \"Read last breach\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"notes\": \"we alerted about.\",\n      \"position\": [\n        -1020,\n        -160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fileSelector\": \"./cache.json\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"d6638b7b-6209-497a-a176-91751a10bab1\",\n      \"name\": \"Get JSON from file\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        -840,\n        -80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"fromJson\"\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"42103453-54db-4d18-8d2b-9b56f5d3a3dd\",\n      \"name\": \"Check for content\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -480,\n        20\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"6bf6a0bd-e9b3-4fde-a9cc-08f4d0e94fd6\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.lastItem }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"2dfa332e-9892-4385-a693-2ff2fc51f067\",\n      \"name\": \"Set to none\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"notes\": \"File was empty.\",\n      \"position\": [\n        -300,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"47736e3f-0961-4b73-b4d5-207792640e87\",\n              \"name\": \"lastItem\",\n              \"type\": \"string\",\n              \"value\": \"none\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"6653599a-db6a-4a01-af5c-d79a2d58202f\",\n      \"name\": \"If - check for new\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -840,\n        -340\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"badd0a56-081f-49e2-92f4-7711f1cd9289\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $json.lastItem }}\",\n              \"rightValue\": \"={{ $json.Name }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"1f2cbeda-0c84-4b54-84ec-03a7b22f4471\",\n      \"name\": \"Set breach name\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -560,\n        -420\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"d0714936-9956-4af8-93f9-3c44ef7beb09\",\n              \"name\": \"lastItem\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Name }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"85314f2d-98d7-461a-a565-5202006ddd39\",\n      \"name\": \"Write breach name to file\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"position\": [\n        -180,\n        -420\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fileName\": \"./cache.json\",\n        \"operation\": \"write\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e4cc122c-172f-4154-b534-c2c9268cf10d\",\n      \"name\": \"New breach\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"notes\": \"Send alert\",\n      \"position\": [\n        -560,\n        -680\n      ],\n      \"parameters\": {},\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"80b7507f-d5f2-4a3d-9090-784f80770478\",\n      \"name\": \"Old breach\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"notes\": \"already alerted.\",\n      \"position\": [\n        -560,\n        -160\n      ],\n      \"parameters\": {},\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"63f65fa4-fba1-4ab4-93ff-cd4df9068b19\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -600,\n        -500\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 640,\n        \"height\": 240,\n        \"content\": \"### Save the name of the breach\\nWe will check it the next time the workflow runs to see if we have a new breach.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5a8dd017-e3e4-445e-be0f-24a8033d7dac\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -600,\n        -240\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 640,\n        \"height\": 240,\n        \"content\": \"### This breach has been seen before\\nIf we end up here it means that the latest breach has been seen before.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"eb563c4a-54f5-4583-8fb1-e5ee5a14ca43\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -600,\n        -760\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 640,\n        \"height\": 240,\n        \"content\": \"### This is a new breach - send alert\\nIf we end up here it means that the latest breach is new. Time to send some alerts to Slack, or Discord or something.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"45b58d9b-7172-447d-91ab-e91e3516c8d9\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1220,\n        300\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 600,\n        \"height\": 260,\n        \"content\": \"### Clean up the cache\\nDelete the `./cache.json` file. This will make sure the alert is triggered on the next run.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bb2401d2-716c-47eb-9797-5b69583058ee\",\n      \"name\": \"Set empty json\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -1180,\n        380\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"69f35659-fd32-4fa7-969e-6cf266519f5b\",\n              \"name\": \"data\",\n              \"type\": \"string\",\n              \"value\": \"{}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"c3abbf86-50f2-4772-bc7c-9a57ac39d4a3\",\n      \"name\": \"Write cache.json\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"position\": [\n        -840,\n        380\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fileName\": \"./cache.json\",\n        \"operation\": \"write\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"69f03dd6-11f0-41e6-8871-9b17c44ef2fe\",\n      \"name\": \"Convert json to file\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        -1000,\n        380\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"toJson\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"2cf6adf9-59e4-4450-b7f8-96907155da84\",\n      \"name\": \"Add information about the last breach we alerted\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -1020,\n        -340\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combineBy\": \"combineAll\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"80e38061-140a-4c78-b49c-dcf796da1427\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1480,\n        -100\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 380,\n        \"height\": 240,\n        \"content\": \"## Support My Work! ❤️\\n\\n**👋 Hello! I'm Audun / xqus** \\n🔗 My work: [xqus.com](https://xqus.com)\\n💸 n8n shop: [xqus.gumroad.com](https://xqus.gumroad.com)\\n\\n**If you find this workflow helpful**, consider downloading or purchasing it on [Gumroad](https://xqus.gumroad.com/l/hasgi).\\n\\nYour support helps me create more useful n8n workflows and resources for the community. \\n-Thanks a lot! 🙌\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check for content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set to none\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add information about the last breach we alerted\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Set empty json\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert json to file\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert to File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Write breach name to file\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set breach name\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert to File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Read last breach\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get JSON from file\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Request breaches\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Read last breach\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Add information about the last breach we alerted\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Request breaches\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check for content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add information about the last breach we alerted\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ],\n        [\n          {\n            \"node\": \"Set to none\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get JSON from file\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If - check for new\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set breach name\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"New breach\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Old breach\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert json to file\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Write cache.json\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Write breach name to file\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set empty json\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add information about the last breach we alerted\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If - check for new\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.convertToFile",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.readWriteFile",
      "n8n-nodes-base.extractFromFile",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.if",
      "n8n-nodes-base.set",
      "n8n-nodes-base.readWriteFile",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.readWriteFile",
      "n8n-nodes-base.convertToFile",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}