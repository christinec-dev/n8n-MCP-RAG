{
  "source": "0264_GitHub_Stickynote_Create_Triggered.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"0bd18974-8414-4b83-b3fb-85d2f6a74164\",\n      \"name\": \"Create database page\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1220,\n        400\n      ],\n      \"parameters\": {\n        \"title\": \"={{$json[\\\"body\\\"][\\\"issue\\\"][\\\"title\\\"]}}\",\n        \"resource\": \"databasePage\",\n        \"databaseId\": \"5026700b-6693-473a-8100-8cc6ddef62a6\",\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"Issue ID|number\",\n              \"numberValue\": \"={{$node[\\\"Trigger on issues\\\"].json[\\\"body\\\"][\\\"issue\\\"][\\\"id\\\"]}}\"\n            },\n            {\n              \"key\": \"Link|url\",\n              \"urlValue\": \"={{$node[\\\"Trigger on issues\\\"].json[\\\"body\\\"][\\\"issue\\\"][\\\"html_url\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"9\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"dfce23fd-7ff8-42d1-9544-694345156080\",\n      \"name\": \"Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1220,\n        800\n      ],\n      \"parameters\": {\n        \"content\": \"## IF & Switch\\nDepends on what action was taken on an issue in GitHub.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"577e0d7a-0539-414f-8ec8-00ce12807d5b\",\n      \"name\": \"Find database page\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1400,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"databasePage\",\n        \"operation\": \"getAll\",\n        \"returnAll\": true,\n        \"databaseId\": \"5026700b-6693-473a-8100-8cc6ddef62a6\",\n        \"filterJson\": \"={{$node[\\\"Create custom Notion filters\\\"].json[\\\"notionfilter\\\"]}}\",\n        \"filterType\": \"json\"\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"9\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"91b0586c-eb08-41d0-bbb0-8a03c4a0ac3a\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1580,\n        600\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"rules\": [\n            {\n              \"value2\": \"edited\"\n            },\n            {\n              \"output\": 1,\n              \"value2\": \"deleted\"\n            },\n            {\n              \"output\": 2,\n              \"value2\": \"closed\"\n            },\n            {\n              \"output\": 3,\n              \"value2\": \"reopened\"\n            }\n          ]\n        },\n        \"value1\": \"={{$node[\\\"Trigger on issues\\\"].json[\\\"body\\\"][\\\"action\\\"]}}\",\n        \"dataType\": \"string\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5262e14e-adc2-45d1-9e3f-c0eba013077a\",\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1040,\n        500\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Trigger on issues\\\"].json[\\\"body\\\"][\\\"action\\\"]}}\",\n              \"value2\": \"opened\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"735ef0b3-70c3-4a88-ad02-35edf8f749c4\",\n      \"name\": \"Edit issue\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1760,\n        360\n      ],\n      \"parameters\": {\n        \"pageId\": \"={{ $node[\\\"Find database page\\\"].json[\\\"id\\\"] }}\",\n        \"resource\": \"databasePage\",\n        \"operation\": \"update\",\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"Issue|title\",\n              \"title\": \"={{$node[\\\"Trigger on issues\\\"].json[\\\"body\\\"][\\\"issue\\\"][\\\"title\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"9\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"39b75e78-bd62-40e4-9e88-12c6a1901c34\",\n      \"name\": \"Delete issue\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1760,\n        520\n      ],\n      \"parameters\": {\n        \"pageId\": \"={{$node[\\\"Find database page\\\"].json[\\\"id\\\"]}}\",\n        \"operation\": \"archive\"\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"9\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"d8fee72d-c19d-4b99-85c2-dcc5d4fa6756\",\n      \"name\": \"Create custom Notion filters\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        1220,\n        600\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const new_items = [];\\nfor (item of $items(\\\"Trigger on issues\\\")) {\\n\\n  // do not process this item if action is created\\n  if (item.json[\\\"body\\\"][\\\"action\\\"] == \\\"opened\\\") {\\n    continue;\\n  }\\n\\n  // build the output template\\n  var new_item = {\\n    \\\"json\\\": {\\n      \\\"notionfilter\\\": \\\"\\\"\\n    }\\n  };\\n  new_item = JSON.stringify(new_item);\\n  new_item = JSON.parse(new_item);\\n  new_items.push(new_item);\\n\\n  // create Notion filter to find specific database page by issue ID\\n  notionfilter = {\\n    or: [],\\n  }\\n\\n  const filter = {\\n    property: 'Issue ID',\\n    number: {\\n      equals: parseInt(item.json[\\\"body\\\"][\\\"issue\\\"][\\\"id\\\"])\\n    }\\n  }\\n  notionfilter[\\\"or\\\"].push(filter);\\n\\n  new_item.json.notionfilter = JSON.stringify(notionfilter); \\n}\\n\\nreturn new_items;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"99c69200-d932-4379-9a36-96cd8420f21c\",\n      \"name\": \"Close issue\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1760,\n        680\n      ],\n      \"parameters\": {\n        \"pageId\": \"={{$node[\\\"Find database page\\\"].json[\\\"id\\\"]}}\",\n        \"resource\": \"databasePage\",\n        \"operation\": \"update\",\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"Closed|checkbox\",\n              \"checkboxValue\": true\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"9\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"3f4b27d3-33ae-44f8-ab18-1c23ae7cf890\",\n      \"name\": \"Reopen issue\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1760,\n        840\n      ],\n      \"parameters\": {\n        \"pageId\": \"={{$node[\\\"Find database page\\\"].json[\\\"id\\\"]}}\",\n        \"resource\": \"databasePage\",\n        \"operation\": \"update\",\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"Closed|checkbox\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"9\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"62e1a9d3-3fc6-46de-a048-cf8176f30f94\",\n      \"name\": \"Trigger on issues\",\n      \"type\": \"n8n-nodes-base.githubTrigger\",\n      \"position\": [\n        860,\n        500\n      ],\n      \"webhookId\": \"bc0a0a44-00db-473b-8746-b60b3b36039c\",\n      \"parameters\": {\n        \"owner\": \"John-n8n\",\n        \"events\": [\n          \"issues\"\n        ],\n        \"repository\": \"DemoRepo\"\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"20\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create database page\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create custom Notion filters\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Delete issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Close issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Reopen issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Trigger on issues\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find database page\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create custom Notion filters\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find database page\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.notion",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.if",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.function",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.notion",
      "n8n-nodes-base.githubTrigger"
    ],
    "trigger": "trigger on issues"
  }
}