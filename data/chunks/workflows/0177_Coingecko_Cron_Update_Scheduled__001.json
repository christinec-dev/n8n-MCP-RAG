{
  "source": "0177_Coingecko_Cron_Update_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"14\",\n  \"name\": \"Update Crypto Values\",\n  \"nodes\": [\n    {\n      \"name\": \"CoinGecko\",\n      \"type\": \"n8n-nodes-base.coinGecko\",\n      \"position\": [\n        670,\n        400\n      ],\n      \"parameters\": {\n        \"coinId\": \"={{$json[\\\"fields\\\"][\\\"Symbol\\\"]}}\",\n        \"options\": {\n          \"market_data\": true,\n          \"localization\": false\n        },\n        \"operation\": \"get\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Get Portfolio\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        450,\n        400\n      ],\n      \"parameters\": {\n        \"table\": \"Portfolio\",\n        \"operation\": \"list\",\n        \"application\": \"appT7eX4iZcZVRIdq\",\n        \"additionalOptions\": {\n          \"fields\": [\n            \"Symbol\"\n          ]\n        }\n      },\n      \"credentials\": {\n        \"airtableApi\": \"Airtable\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Set\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        870,\n        400\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Present Price\",\n              \"value\": \"={{$json[\\\"market_data\\\"][\\\"current_price\\\"][\\\"usd\\\"]}}\"\n            },\n            {\n              \"name\": \"Id\",\n              \"value\": \"={{$node[\\\"Get Portfolio\\\"].json[\\\"id\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Run Top of Hour\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        240,\n        400\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyHour\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Get Portfolio Values\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        1260,\n        400\n      ],\n      \"parameters\": {\n        \"table\": \"Portfolio\",\n        \"operation\": \"list\",\n        \"application\": \"appT7eX4iZcZVRIdq\",\n        \"additionalOptions\": {\n          \"fields\": [\n            \"Present Value\"\n          ]\n        }\n      },\n      \"credentials\": {\n        \"airtableApi\": \"Airtable\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Determine Total Value\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        1460,\n        400\n      ],\n      \"parameters\": {\n        \"functionCode\": \"var totalValues = 0;\\n\\nitems.forEach(sumValues);\\n\\nfunction sumValues(value, index, array) {\\n  totalValues = totalValues + value.json.fields['Present Value'];\\n}\\n\\nitems = [{\\\"json\\\": {}}];\\n\\n\\nitems[0].json['Portfolio Value (US$)'] = totalValues;\\n\\nreturn items;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Update Values\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        1070,\n        400\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"SplitInBatches\\\"].json[\\\"id\\\"]}}\",\n        \"table\": \"Portfolio\",\n        \"fields\": [\n          \"Present Price\"\n        ],\n        \"options\": {},\n        \"operation\": \"update\",\n        \"application\": \"appT7eX4iZcZVRIdq\",\n        \"updateAllFields\": false\n      },\n      \"credentials\": {\n        \"airtableApi\": \"Airtable\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Append Portfolio Value\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        1660,\n        400\n      ],\n      \"parameters\": {\n        \"table\": \"Portfolio Value\",\n        \"fields\": [\n          \"Portfolio Value (US$)\"\n        ],\n        \"options\": {},\n        \"operation\": \"append\",\n        \"application\": \"appT7eX4iZcZVRIdq\",\n        \"addAllFields\": false\n      },\n      \"credentials\": {\n        \"airtableApi\": \"Airtable\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"Set\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Values\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"CoinGecko\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Portfolio\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"CoinGecko\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Values\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Portfolio Values\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Run Top of Hour\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Portfolio\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Portfolio Values\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Determine Total Value\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Determine Total Value\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Append Portfolio Value\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.coinGecko",
      "n8n-nodes-base.airtable",
      "n8n-nodes-base.set",
      "n8n-nodes-base.cron",
      "n8n-nodes-base.airtable",
      "n8n-nodes-base.function",
      "n8n-nodes-base.airtable",
      "n8n-nodes-base.airtable"
    ],
    "trigger": null
  }
}