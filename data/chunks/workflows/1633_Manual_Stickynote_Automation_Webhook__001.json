{
  "source": "1633_Manual_Stickynote_Automation_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"ReXF4z8ZKcEd6Kea\",\n  \"meta\": {\n    \"instanceId\": \"10e1a946d44026e16f5f1b336bb25f918a0e45738f9dee8024757614581d7d73\"\n  },\n  \"name\": \"dub.co URL Shortener\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"63170148-b769-43b6-9a7a-02baa9f76b02\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1480,\n        1100\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 346.4519761795601,\n        \"height\": 227.3959699655325,\n        \"content\": \"## Dub.co API Limits:\\nDub’s API is capped at 10 requests per second per user.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"defd82ef-25a0-4aa4-8681-d352e5fe8275\",\n      \"name\": \"When clicking \\\"Test Workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        1231,\n        560\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fec7fb8a-3f88-4de9-8392-5c7929a712e7\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"disabled\": true,\n      \"position\": [\n        1480,\n        460\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 826.4578951225271,\n        \"height\": 605.7992490141105,\n        \"content\": \"## Dub.co API\\n**Create** Link. [Based on their API docs](https://dub.co/docs/api-reference/endpoint/create-a-new-link)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8c87aad8-519c-491b-b272-f21dfd5b069f\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1171,\n        460\n      ],\n      \"parameters\": {\n        \"height\": 870.5323777622334,\n        \"content\": \"## Control Stack\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a6cfe224-95d9-47d6-a900-667eed065264\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        486,\n        460\n      ],\n      \"parameters\": {\n        \"width\": 655.6800599837106,\n        \"height\": 462.29577922809585,\n        \"content\": \"# README\\n\\n## Dub.co API Workflow Configuration\\n| Required | Input Field           | Description                                      |\\n|----------|-----------------------|--------------------------------------------------|\\n|✓| **`Dub API Key`**     | _API Key for Dub.co integration._                 |\\n|✓| **`Long URL`**               | _The long URL to be shortened._                    |\\n| | **`Custom Slug`**           | _Slug is the path of shortened URL - default is random 7 characters._               |\\n|✓| **`Project Slug`**                  | _Enter Your Dub project slug, The slug for the project to create links for. E.g. for app.dub.co/acme, the project slug is 'acme'._                   |\\n| | **`Custom Domain`** | _Custom domain linked to Dub.co._                 |\\n\\n\\n\\n\\n\\n\\n\\nYou'll need to add the details listed above in the \\\"API Auth\\\" node by clicking on it and filling the fields ==>\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f3164150-9730-4d20-9aef-9ae7f84e73fc\",\n      \"name\": \"API Auth\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1240,\n        820\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"Dub API Key\",\n              \"stringValue\": \"=<Required: Get your Dub API Key from https://app.dub.co/settings/tokens>\"\n            },\n            {\n              \"name\": \"Long URL\",\n              \"stringValue\": \"https://n8n.io\"\n            },\n            {\n              \"name\": \"Custom Slug\",\n              \"stringValue\": \"=<Optional: Slug is the path of shortened URL - default is random 7 characters>\"\n            },\n            {\n              \"name\": \"Project Slug\",\n              \"stringValue\": \"=<Required: Enter Your Dub project slug, The slug for the project to create links for. E.g. for app.dub.co/acme, the project slug is 'acme'.>\"\n            },\n            {\n              \"name\": \"Custom Domain\",\n              \"stringValue\": \"=<Optional: The domain of the short link. If not provided, the primary domain for the project will be used (or dub.sh if the project has no domains)>\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"a2279ab1-6550-43ef-a41d-c24c669bb2b6\",\n      \"name\": \"CREATE\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"Create Link\",\n      \"position\": [\n        1540,\n        560\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.dub.co/links\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"batching\": {\n            \"batch\": {\n              \"batchSize\": 10,\n              \"batchInterval\": 60000\n            }\n          },\n          \"redirect\": {\n            \"redirect\": {}\n          },\n          \"response\": {\n            \"response\": {\n              \"neverError\": true,\n              \"fullResponse\": true\n            }\n          },\n          \"allowUnauthorizedCerts\": true\n        },\n        \"jsonBody\": \"={\\n{{ $ifEmpty(`\\\"domain\\\": \\\"${$json[\\\"Custom Domain\\\"] || \\\"undefined\\\"}\\\",`, \\\"\\\").replace('\\\"domain\\\": \\\"<Optional: The domain of the short link. If not provided, the primary domain for the project will be used (or dub.sh if the project has no domains)>\\\",', \\\"\\\").replace('\\\"domain\\\": \\\"undefined\\\",', \\\"\\\") }}\\n{{ $ifEmpty(`\\\"key\\\": \\\"${$json[\\\"Custom Slug\\\"] || \\\"undefined\\\"}\\\",`, \\\"\\\").replace('\\\"key\\\": \\\"<Optional: Slug is the path of shortened URL - default is random 7 characters>\\\",', \\\"\\\").replace('\\\"key\\\": \\\"undefined\\\",', \\\"\\\") }}\\n  \\\"url\\\": \\\"{{ $json[\\\"Long URL\\\"] }}\\\",\\n  \\\"comments\\\": \\\"Updated using N8N.io workflow: {{$workflow.name}}\\\"\\n}\",\n        \"sendBody\": true,\n        \"sendQuery\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"projectSlug\",\n              \"value\": \"={{ $json[\\\"Project Slug\\\"] }}\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $json['Dub API Key'] }}\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"970d062f-9206-4ec6-acdd-3fc1cc87db69\",\n      \"name\": \"IF Slug available\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1760,\n        560\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json.statusCode }}\",\n              \"value2\": \"200\",\n              \"operation\": \"regex\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d25eedfd-95a7-4c17-8a76-1cdfae6670d1\",\n      \"name\": \"RETRIEVE\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"Retrieve the link id\",\n      \"position\": [\n        1540,\n        840\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.dub.co/links/info\",\n        \"options\": {\n          \"batching\": {\n            \"batch\": {\n              \"batchSize\": 10,\n              \"batchInterval\": 60000\n            }\n          },\n          \"redirect\": {\n            \"redirect\": {}\n          },\n          \"response\": {\n            \"response\": {\n              \"neverError\": true,\n              \"fullResponse\": true\n            }\n          },\n          \"allowUnauthorizedCerts\": true\n        },\n        \"sendQuery\": true,\n        \"sendHeaders\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"projectSlug\",\n              \"value\": \"={{ $('API Auth').item.json[\\\"Project Slug\\\"] }}\"\n            },\n            {\n              \"name\": \"key\",\n              \"value\": \"={{ $('API Auth').item.json[\\\"Custom Slug\\\"] }}\"\n            },\n            {\n              \"name\": \"domain\",\n              \"value\": \"={{ $('API Auth').item.json[\\\"Custom Domain\\\"] }}\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $('API Auth').item.json[\\\"Dub API Key\\\"] }}\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"18bf5187-422c-486e-84c4-c2f79855ba25\",\n      \"name\": \"UPDATE\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"Update Link\",\n      \"position\": [\n        1780,\n        840\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.dub.co/links/{{ $json.body.id }}\",\n        \"method\": \"PUT\",\n        \"options\": {\n          \"batching\": {\n            \"batch\": {\n              \"batchSize\": 10,\n              \"batchInterval\": 60000\n            }\n          },\n          \"redirect\": {\n            \"redirect\": {}\n          },\n          \"response\": {\n            \"response\": {\n              \"neverError\": true,\n              \"fullResponse\": true\n            }\n          },\n          \"allowUnauthorizedCerts\": true\n        },\n        \"jsonBody\": \"={\\n    {{ $ifEmpty(`\\\"domain\\\": \\\"${$('API Auth').item.json[\\\"Custom Domain\\\"] || \\\"undefined\\\"}\\\",`, \\\"\\\").replace('\\\"domain\\\": \\\"<Optional: The domain of the short link. If not provided, the primary domain for the project will be used (or dub.sh if the project has no domains)>\\\",', \\\"\\\").replace('\\\"domain\\\": \\\"undefined\\\",', \\\"\\\") }}\\n{{ $ifEmpty(`\\\"key\\\": \\\"${$('API Auth').item.json[\\\"Custom Slug\\\"] || \\\"undefined\\\"}\\\",`, \\\"\\\").replace('\\\"key\\\": \\\"<Optional: Slug is the path of shortened URL - default is random 7 characters>\\\",', \\\"\\\").replace('\\\"key\\\": \\\"undefined\\\",', \\\"\\\") }}\\n\\n  \\\"url\\\": \\\"{{ $('API Auth').item.json[\\\"Long URL\\\"] }}\\\",\\n  \\\"comments\\\": \\\"Updated using N8N.io workflow: {{$workflow.name}}\\\"\\n}\",\n        \"sendBody\": true,\n        \"sendQuery\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"projectSlug\",\n              \"value\": \"={{ $('API Auth').item.json[\\\"Project Slug\\\"] }}\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $('API Auth').item.json[\\\"Dub API Key\\\"] }}\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"c16dc19b-f807-4784-a323-5d790cebe718\",\n      \"name\": \"Shortened URL\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2120,\n        840\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Shortened URL\",\n              \"value\": \"={{ $json.body.shortLink }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"44d31a47-dd84-4b07-a606-2da99a73cad1\",\n      \"name\": \"Done\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1240,\n        1060\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"3b5edd9c-e373-4dc1-95d0-b320beb47020\",\n  \"connections\": {\n    \"CREATE\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF Slug available\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"UPDATE\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Shortened URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"API Auth\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"CREATE\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"RETRIEVE\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"UPDATE\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Shortened URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Done\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"IF Slug available\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Shortened URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"RETRIEVE\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Test Workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"API Auth\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.if",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set"
    ],
    "trigger": null
  }
}