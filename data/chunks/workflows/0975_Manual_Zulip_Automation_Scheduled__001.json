{
  "source": "0975_Manual_Zulip_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": 4,\n  \"name\": \"Zammad Open Tickets\",\n  \"nodes\": [\n    {\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -40,\n        340\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Ticket Filtering\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"notes\": \"Filter tickets by status.\",\n      \"position\": [\n        400,\n        460\n      ],\n      \"parameters\": {\n        \"functionCode\": \"let newTickets = 0\\nlet openTickets = 0\\nlet pendingReminder = 0\\nlet pendingClose = 0\\n\\nfor (let i = 0; i < items.length; i++) {\\n  const ticket = items[i]\\n  if (ticket.json.state_id === 1) {\\n    newTickets++\\n  }\\n  if (ticket.json.state_id === 2) {\\n    openTickets++\\n  }\\n  if (ticket.json.state_id === 3) {\\n    pendingReminder++\\n  }\\n  if (ticket.json.state_id === 7) {\\n    pendingClose++\\n  }\\n}\\n\\nreturn [{\\n  json: {\\n    \\\"new\\\": newTickets,\\n    open: openTickets,\\n    pendingReminder: pendingReminder,\\n    pendingClose: pendingClose\\n  }\\n}];\"\n      },\n      \"executeOnce\": true,\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"List Tickets\",\n      \"type\": \"n8n-nodes-base.zammad\",\n      \"notes\": \"Get all tickets.\",\n      \"position\": [\n        200,\n        460\n      ],\n      \"parameters\": {\n        \"resource\": \"ticket\",\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"zammadTokenAuthApi\": {\n          \"id\": \"7\",\n          \"name\": \"Zammad Token Auth account\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Notify for Standup\",\n      \"type\": \"n8n-nodes-base.zulip\",\n      \"notes\": \"Sends a summary to customer support stream.\",\n      \"position\": [\n        580,\n        460\n      ],\n      \"parameters\": {\n        \"topic\": \"=tickets\",\n        \"stream\": \"=customer support\",\n        \"content\": \"=:ticket: Support Tickets Summary:\\n* Open: {{$node[\\\"Ticket Filtering\\\"].json[\\\"open\\\"]}}\\n* New:{{$node[\\\"Ticket Filtering\\\"].json[\\\"new\\\"]}}\\n* Pending Close {{$node[\\\"Ticket Filtering\\\"].json[\\\"pendingClose\\\"]}}\\n* Pending Reminder {{$node[\\\"Ticket Filtering\\\"].json[\\\"pendingReminder\\\"]}}\",\n        \"operation\": \"sendStream\"\n      },\n      \"credentials\": {\n        \"zulipApi\": {\n          \"id\": \"1\",\n          \"name\": \"Zulip n8n Bot\"\n        }\n      },\n      \"executeOnce\": true,\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Standup Cron\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"notes\": \"Daily stand-up open days.\",\n      \"position\": [\n        -40,\n        560\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"custom\",\n              \"cronExpression\": \"0 30 8 * * 1-5\"\n            }\n          ]\n        }\n      },\n      \"executeOnce\": true,\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"settings\": {},\n  \"connections\": {\n    \"List Tickets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Ticket Filtering\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Standup Cron\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List Tickets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Ticket Filtering\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Notify for Standup\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List Tickets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.function",
      "n8n-nodes-base.zammad",
      "n8n-nodes-base.zulip",
      "n8n-nodes-base.cron"
    ],
    "trigger": null
  }
}