{
  "source": "1558_HTTP_Stickynote_Automate_Webhook.json",
  "index": 1,
  "content": "{\n  \"id\": \"Q63cSgFlcqz291ec\",\n  \"meta\": {\n    \"instanceId\": \"31e69f7f4a77bf465b805824e303232f0227212ae922d12133a0f96ffeab4fef\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"✨📊Multi-AI Agent Chatbot for Postgres/Supabase DB and QuickCharts + Tool Router\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"3a332532-a56e-42f5-a114-4a7e138b5e0f\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        -180,\n        -1420\n      ],\n      \"webhookId\": \"faddb40a-7048-4398-a0f9-d239a19c32ce\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"6c707ee7-95e9-4ebd-9373-a2dac0ea73a7\",\n      \"name\": \"Execute SQL Query\",\n      \"type\": \"n8n-nodes-base.postgresTool\",\n      \"position\": [\n        460,\n        -500\n      ],\n      \"parameters\": {\n        \"query\": \"{{ $fromAI(\\\"sql_query\\\", \\\"SQL Query\\\") }}\",\n        \"options\": {},\n        \"operation\": \"executeQuery\",\n        \"descriptionType\": \"manual\",\n        \"toolDescription\": \"Use this tool to query the database with SQL queries\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"wZnget4L3P3bnlfh\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 2.5\n    },\n    {\n      \"id\": \"1d5572e1-de5a-4e67-8ba1-82196bd62e9b\",\n      \"name\": \"When Executed by Another Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        -480,\n        -360\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"user_prompt\"\n            },\n            {\n              \"name\": \"route\"\n            },\n            {\n              \"name\": \"db_records\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"e3caa1b3-7bdb-43c1-a749-74ae02912d84\",\n      \"name\": \"query_db_tool\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        720,\n        -1100\n      ],\n      \"parameters\": {\n        \"name\": \"query_database_tool\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{  $workflow.id }}\"\n        },\n        \"description\": \"Use this tool to query the database\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"route\": \"query_database_tool\",\n            \"user_prompt\": \"={{ $('When chat message received').item.json.chatInput }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"user_prompt\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"user_prompt\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"route\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"route\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"user_prompt\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"594e6fd3-084a-4100-ac16-1cc4068e03c1\",\n      \"name\": \"generate_quickchart_tool\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        980,\n        -1100\n      ],\n      \"parameters\": {\n        \"name\": \"generate_chart_tool\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{  $workflow.id }}\"\n        },\n        \"description\": \"Use this tool to generate a chart with QuickChart\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"route\": \"generate_chart_tool\",\n            \"db_records\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('db_records', `The database records`, 'string') }}\",\n            \"user_prompt\": \"={{ $('When chat message received').item.json.chatInput }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"user_prompt\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"user_prompt\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"route\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"route\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"db_records\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"db_records\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"user_prompt\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"580426ac-0fb7-4f14-af7b-e497b7cb08f8\",\n      \"name\": \"Create QuickChart\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        780,\n        -140\n      ],\n      \"parameters\": {\n        \"url\": \"={{ encodeURI($json.url) }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"b7085357-ebe9-4564-868d-b31fc2e9734a\",\n      \"name\": \"QuickChart Object Schema\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        460,\n        140\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\n  \\\"type\\\": \\\"bar\\\",\\n  \\\"data\\\": {\\n    \\\"labels\\\": [\\\"R270684\\\", \\\"R274295\\\", \\\"R276352\\\", \\\"R277914\\\", \\\"R280108\\\"],\\n    \\\"datasets\\\": [\\n      {\\n        \\\"label\\\": \\\"List Price\\\",\\n        \\\"data\\\": [2149000, 924900, 924900, 1288000, 1198000],\\n        \\\"backgroundColor\\\": \\\"#FF6384\\\"\\n      },\\n      {\\n        \\\"label\\\": \\\"Days On Market\\\",\\n        \\\"data\\\": [101, 91, 123, 136, 185],\\n        \\\"backgroundColor\\\": \\\"#36A2EB\\\"\\n      }\\n    ]\\n  },\\n  \\\"options\\\": {\\n    \\\"scales\\\": {\\n      \\\"y\\\": {\\n        \\\"min\\\": 0,\\n        \\\"max\\\": 2200000\\n      }\\n    }\\n  }\\n}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"b1037112-f5af-4e61-8bd1-0d9b0a9ad2e1\",\n      \"name\": \"gpt-4o-mini\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        200,\n        -1100\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {\n          \"responseFormat\": \"text\"\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"5ea5ba56-2368-4e95-a98f-2c7548a66a9b\",\n      \"name\": \"gpt-4o-mini-2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        200,\n        140\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"=gpt-4o-mini\"\n        },\n        \"options\": {\n          \"responseFormat\": \"text\"\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"4b8f9978-9d46-48f5-93ca-002ade008887\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        80,\n        -1500\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1100,\n        \"height\": 600,\n        \"content\": \"## 🤖Primary AI Manager Agent\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f6534374-cc07-429a-b27c-b38835c96465\",\n      \"name\": \"🤖Primary Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        480,\n        -1420\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"systemMessage\": \"You are a helpful assistant that answers the users questions by using the tools provided.\\n\\n## TOOLS\\n- query_database_tool: Use this tool to query the database\\n- generate_chart_tool: Use this tool to generate a chart with QuickChart\\n\\nAlways provide the results of the database query and the link for the chart when applicable.\"\n        }\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"cf246e46-b3e4-4c9f-96f9-be1b91c0a3eb\",\n      \"name\": \"🤖Secondary Postgres Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        480,\n        -780\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.user_prompt }}\",\n        \"options\": {\n          \"systemMessage\": \"You are a helpful assistant with tools for querying a SQL database.  Use the tools provided to query the database.\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"02d741d3-4b6e-4e19-8aca-3e15175e9667\",\n      \"name\": \"🤖Secondary QuickChart Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        240,\n        -140\n      ],\n      \"parameters\": {\n        \"text\": \"=Your task is to generate a Chart.js configuration object with the following specifications:\\n- Chart type: bar unless otherwise indicated\\n- Labels: Use the ML # from each record unless otherwise indicated\\n- Show bar for list price if not otherwise indicated\\n- Return only the raw JSON object without code fences or explanations\\n\\nThis is the user prompt: {{ $json.user_prompt }}\\nThis is the result of the SQL query: {{ $json.db_records }}\",\n        \"options\": {},\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"4f41690b-313a-4ce3-ba65-a2ce2c3ee9b9\",\n      \"name\": \"🔀Tool Agent Router\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -180,\n        -360\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"🔍query\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"35b1e13e-6157-48d0-85af-3cd33260eae1\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.route }}\",\n                    \"rightValue\": \"=query_database_tool\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"📊chart\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"ff5f97fb-0f18-4bf9-b16c-3d0b3bc3c7f4\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.route }}\",\n                    \"rightValue\": \"=generate_chart_tool\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"27c30d2c-3af3-4d05-aadb-9f18751fb9ce\",\n      \"name\": \"Table Definitions\",\n      \"type\": \"n8n-nodes-base.postgresTool\",\n      \"position\": [\n        980,\n        -500\n      ],\n      \"parameters\": {\n        \"query\": \"select\\n  c.column_name,\\n  c.data_type,\\n  c.is_nullable,\\n  c.column_default,\\n  tc.constraint_type,\\n  ccu.table_name AS referenced_table,\\n  ccu.column_name AS referenced_column\\nfrom\\n  information_schema.columns c\\nLEFT join\\n  information_schema.key_column_usage kcu\\n  ON c.table_name = kcu.table_name\\n  AND c.column_name = kcu.column_name\\nLEFT join\\n  information_schema.table_constraints tc\\n  ON kcu.constraint_name = tc.constraint_name\\n  AND tc.constraint_type = 'FOREIGN KEY'\\nLEFT join\\n  information_schema.constraint_column_usage ccu\\n  ON tc.constraint_name = ccu.constraint_name\\nwhere\\n  c.table_name = '{{ $fromAI(\\\"table_name\\\") }}'\\n  AND c.table_schema = '{{ $fromAI(\\\"schema_name\\\") }}'\\norder by\\n  c.ordinal_position\",\n        \"options\": {},\n        \"operation\": \"executeQuery\",\n        \"descriptionType\": \"manual\",\n        \"toolDescription\": \"Use this tool to get table definition to find all columns and types\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"wZnget4L3P3bnlfh\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 2.5\n    },\n    {\n      \"id\": \"59dfd315-fb02-425c-a6ca-2d63167c2e24\",\n      \"name\": \"Postgres Chat Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryPostgresChat\",\n      \"position\": [\n        460,\n        -1100\n      ],\n      \"parameters\": {\n        \"tableName\": \"={{ $workflow.id }}_chat_history\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"wZnget4L3P3bnlfh\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"81dd8b73-0809-4f30-a867-bf98ff6a80bc\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        900,\n        -1180\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"## QuickChart Tool\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1a08bc08-510b-4cda-b96e-179bd3abe164\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        -1180\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"## Postgres Tool\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9cc5e958-0f93-42ad-813e-83c8b5bb126e\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        -1180\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"## LLM\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"920f9fe4-e182-4159-9152-e81586ec5304\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        -1180\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"## Chat Memory\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d2a24dce-1add-49d6-8d2f-6547fca35bfb\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -300,\n        -1500\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 340,\n        \"height\": 280,\n        \"content\": \"## 👍Start Here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d0df3ea6-9765-4f4d-a8f7-b2356ea1cf26\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        80,\n        -860\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 1100,\n        \"height\": 560,\n        \"content\": \"## ⚒️🤖Secondary Postgres Tool Agent \"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fe990853-fce6-4cbe-9cc2-fc04f53742e8\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        -580\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c5086736-4dfe-44a3-a5dc-6cace0593334\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        -580\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6b848863-10b2-42e4-8bd5-ed4663b9e5cb\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        900,\n        -580\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"75231fcf-8314-4ee6-96a7-99d842b6ee4f\",\n      \"name\": \"Sticky Note10\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        -580\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c54439c7-ccb1-41a4-ad76-8ed39f7fc5e6\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -300,\n        -460\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 340,\n        \"height\": 320,\n        \"content\": \"## Tool Agent Router 🔀\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b51ffe20-2ae4-478b-9573-fc5456935483\",\n      \"name\": \"Sticky Note12\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        80,\n        -260\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 1100,\n        \"height\": 600,\n        \"content\": \"## ⚒️🤖Secondary QuickChart Tool Agent\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ffb9da23-f79c-4d20-81a3-656471bdda33\",\n      \"name\": \"Sticky Note13\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        60\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"61532d90-1f65-48d0-a408-2e6edd9511b1\",\n      \"name\": \"Sticky Note15\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        60\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 240,\n        \"content\": \"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5b125fa6-8017-437e-bb20-b9deb5d52c63\",\n      \"name\": \"Final QuickChart URL\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        980,\n        -140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"63bab42a-9b9b-4756-88d2-f41cff9a1ded\",\n              \"name\": \"quickchart_url\",\n              \"type\": \"string\",\n              \"value\": \"={{ encodeURI($json.url) }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"2c66055d-1ca2-40f3-a082-57232402fdd1\",\n      \"name\": \"QuickChart GET URL\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        580,\n        -140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"d69995ae-413e-49e7-b6ec-17e9e034e4b6\",\n              \"name\": \"url\",\n              \"type\": \"string\",\n              \"value\": \"={{ \\\"https://quickchart.io/chart?width=250&height=150&chart=\\\" + $json.output.toJsonString() }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"0a0f024d-24fa-43e9-bfa6-b841902b5e5e\",\n      \"name\": \"Sticky Note14\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -540,\n        -1600\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1760,\n        \"height\": 1980,\n        \"content\": \"# ✨📊Multi-AI Agent Chatbot for Postgres/Supabase DB and QuickCharts + Tool Router\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a50b4d31-7e9e-4cd0-84b9-f4755deb6efd\",\n      \"name\": \"Sticky Note16\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -500,\n        -1180\n      ],\n      \"parameters\": {\n        \"width\": 540,\n        \"height\": 240,\n        \"content\": \"## Setup\\n\\n1. Create a Postgres compatible database (Supabase)\\n\\n2. Add your Postgres and OpenAI credentials\\n\\n3. Click Chat button and start chatting with your database and creating QuickChart to visualize the results\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3df0304a-323b-4bd4-96ce-2907367ede8d\",\n      \"name\": \"Sticky Note17\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -500,\n        -860\n      ],\n      \"parameters\": {\n        \"width\": 542,\n        \"height\": 296,\n        \"content\": \"## Postgres Tools Used\\n\\n1. **Execute SQL Query** \\nUsed to execute any query generated by the agent.\\n\\n2. **DB Schema and Tables** \\nReturns the list of all the tables with its schema name.\\n\\n3. **Table Definition** \\nReturns table details like column names, foreign keys and more of a particular table in a schema.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"feaeaf6d-f5b8-4dbe-a39b-d07882142ead\",\n      \"name\": \"Sticky Note19\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -500,\n        -40\n      ],\n      \"parameters\": {\n        \"width\": 542,\n        \"height\": 376,\n        \"content\": \"## Generate a Quickchart\\n\\n**Secondary QuickChart Agent Tool**\\nThis section handles the chart generation process through several steps by sending the database records and user prompt to OpenAI to create a JSON object based on Chart.js and QuickChart.io definitions\\n\\n**QuickChart GET URL node**\\nThis sections adds chart definitions to a QuickChart.io URL\\n\\n**Create QuickChart node**\\nThis sections sends chart queries to QuickCharts with a defined JSON format\\n\\n\\n\\nThis integration allows you to dynamically generate charts based on data queries, with AI assistance for formatting and optimization.\\n\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6c9be4d2-46e9-44ae-8751-f4f4964323e9\",\n      \"name\": \"DB Schema and Tables\",\n      \"type\": \"n8n-nodes-base.postgresTool\",\n      \"position\": [\n        720,\n        -500\n      ],\n      \"parameters\": {\n        \"query\": \"SELECT \\n    table_schema,\\n    table_name\\nFROM information_schema.tables\\nWHERE table_type = 'BASE TABLE'\\n    AND table_schema NOT IN ('pg_catalog', 'information_schema')\\nORDER BY table_schema, table_name;\",\n        \"options\": {},\n        \"operation\": \"executeQuery\",\n        \"descriptionType\": \"manual\",\n        \"toolDescription\": \"Use this tool to get a list of all tables with their schema in the database\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"wZnget4L3P3bnlfh\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 2.5\n    },\n    {\n      \"id\": \"4e779b6f-963c-4efb-af43-bec0e5c3228c\",\n      \"name\": \"gpt-40-mini-1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        200,\n        -500\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {\n          \"responseFormat\": \"text\"\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a6cc9a4e-b016-47f6-9f9f-9c77a15c2be2\",\n      \"name\": \"Sticky Note18\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        180\n      ],\n      \"parameters\": {\n        \"width\": 440,\n        \"height\": 120,\n        \"content\": \"## QuickChart Schema\\nAdjust the QuickChart Schema to match your use case.\\n\\nhttps://quickchart.io/documentation/\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9855ba6a-d46b-4461-a397-02108023abc5\",\n      \"name\": \"Sticky Note20\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        60\n      ],\n      \"parameters\": {\n        \"width\": 440,\n        \"height\": 100,\n        \"content\": \"## Chart Size\\nAdjust the chart size in the QuickChart GET URL node.\\n\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {\n    \"When Executed by Another Workflow\": [\n      {\n        \"json\": {\n          \"route\": \"generate_chart_tool\",\n          \"db_records\": \"[{\\\"mls_num\\\":\\\"R292309\\\",\\\"list_price\\\":1148000},{\\\"mls_num\\\":\\\"R292302\\\",\\\"list_price\\\":1298000},{\\\"mls_num\\\":\\\"R294786\\\",\\\"list_price\\\":1280000},{\\\"mls_num\\\":\\\"V17840\\\",\\\"list_price\\\":939000},{\\\"mls_num\\\":\\\"V10178\\\",\\\"list_price\\\":420000},{\\\"mls_num\\\":\\\"V18007\\\",\\\"list_price\\\":296500},{\\\"mls_num\\\":\\\"V18136\\\",\\\"list_price\\\":379000},{\\\"mls_num\\\":\\\"V18643\\\",\\\"list_price\\\":329000},{\\\"mls_num\\\":\\\"V17755\\\",\\\"list_price\\\":236000},{\\\"mls_num\\\":\\\"V19126\\\",\\\"list_price\\\":245500}]\",\n          \"user_prompt\": \"provide a bar chart showing mls# and list price\"\n        }\n      }\n    ]\n  },\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"9781f576-38ef-4e18-9fbe-8383565cb032\",\n  \"connections\": {\n    \"gpt-4o-mini\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"🤖Primary Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-40-mini-1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"🤖Secondary Postgres Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini-2\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"🤖Secondary QuickChart Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"query_db_tool\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"🤖Primary Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create QuickChart\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Final QuickChart URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Execute SQL Query\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"🤖Secondary Postgres Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Table Definitions\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"🤖Secondary Postgres Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"🤖Primary Agent\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"QuickChart GET URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create QuickChart\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"DB Schema and Tables\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"🤖Secondary Postgres Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Postgres Chat Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"🤖Primary Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"🔀Tool Agent Router\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"🤖Secondary Postgres Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"🤖Secondary QuickChart Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"QuickChart Object Schema\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"🤖Secondary QuickChart Agent\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"generate_quickchart_tool\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"🤖Primary Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"🤖Primary Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"🤖Secondary Postgres Agent\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"🤖Secondary QuickChart Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"QuickChart GET URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"🔀Tool Agent Router\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "@n8n/n8n-nodes-langchain.chatTrigger",
      "n8n-nodes-base.postgresTool",
      "n8n-nodes-base.executeWorkflowTrigger",
      "@n8n/n8n-nodes-langchain.toolWorkflow",
      "@n8n/n8n-nodes-langchain.toolWorkflow",
      "n8n-nodes-base.httpRequest",
      "@n8n/n8n-nodes-langchain.outputParserStructured",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.stickyNote",
      "@n8n/n8n-nodes-langchain.agent",
      "@n8n/n8n-nodes-langchain.agent",
      "@n8n/n8n-nodes-langchain.agent",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.postgresTool",
      "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.postgresTool",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}