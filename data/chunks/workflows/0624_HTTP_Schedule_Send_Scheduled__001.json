{
  "source": "0624_HTTP_Schedule_Send_Scheduled.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"e4929773-39f9-4b8a-b462-235c37514479\",\n      \"name\": \"Get Elastic Alert\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        620,\n        440\n      ],\n      \"parameters\": {\n        \"url\": \"https://your-prism-elastic-api-endpoint.com/alerts\",\n        \"options\": {}\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"973a8254-5ec0-4ea0-95b5-7e6a0f0625ab\",\n      \"name\": \"Send Email Notification\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1440,\n        220\n      ],\n      \"parameters\": {\n        \"url\": \"https://graph.microsoft.com/v1.0/me/sendMail\",\n        \"options\": {\n          \"bodyContentType\": \"json\"\n        },\n        \"requestMethod\": \"POST\",\n        \"authentication\": \"oAuth2\",\n        \"jsonParameters\": true,\n        \"bodyParametersJson\": \"={\\n  \\\"message\\\": {\\n    \\\"subject\\\": \\\"PRISM Elastic Alert: {{$json[\\\"alert_name\\\"]}}\\\",\\n    \\\"body\\\": {\\n      \\\"contentType\\\": \\\"HTML\\\",\\n      \\\"content\\\": \\\"Hello,<br><br>An alert has been triggered:<br><strong>Alert Name:</strong> {{$json[\\\"alert_name\\\"]}}<br><strong>Severity:</strong> {{$json[\\\"severity\\\"]}}<br><strong>Timestamp:</strong> {{$json[\\\"timestamp\\\"]}}<br><br>Details:<br>{{$json[\\\"alert_message\\\"]}}<br><br>Regards,<br>PRISM Alert System\\\"\\n    },\\n    \\\"toRecipients\\\": [\\n      {\\n        \\\"emailAddress\\\": {\\n          \\\"address\\\": \\\"user@example.com\\\"\\n        }\\n      }\\n    ]\\n  },\\n  \\\"saveToSentItems\\\": \\\"true\\\"\\n}\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"f7f4feee-6854-4997-ae15-870cab4abdbb\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        380,\n        440\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"b8578c55-a052-43f2-9d6a-24d8084dae8a\",\n      \"name\": \"Response is not empty\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        840,\n        440\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"664216e6-c212-4f4b-8b09-60675c4fcd91\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1100,\n        680\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bcead903-56ed-4ae8-bff9-cec274b2fe71\",\n      \"name\": \"Loop Over Each Alert Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        1100,\n        200\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"a5e55903-a245-4d70-88e7-14c1f18cde25\",\n      \"name\": \"No Operation, end of loop\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1440,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get PRISM Elastic Alert\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Response is not empty\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Each Alert Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get PRISM Elastic Alert\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Response is not empty\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send Email Notification\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Each Alert Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Each Alert Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"No Operation, end of loop\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Email Notification\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.noOp"
    ],
    "trigger": "schedule trigger"
  }
}