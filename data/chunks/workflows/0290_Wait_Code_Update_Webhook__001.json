{
  "source": "0290_Wait_Code_Update_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"f0a68da631efd4ed052a324b63ff90f7a844426af0398a68338f44245d1dd9e5\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"04750e9b-6ce3-401b-89e7-f1f17f3a4a28\",\n      \"name\": \"When clicking \\\"Execute Workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -180,\n        300\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7a8bb997-5a2d-4ee0-a1ca-bebe9fe32bc2\",\n      \"name\": \"HTTP Request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        640,\n        460\n      ],\n      \"parameters\": {\n        \"url\": \"=https://www.{{ $node[\\\"Split In Batches\\\"].json[\\\"Domain\\\"] }}\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {\n              \"followRedirects\": true\n            }\n          }\n        }\n      },\n      \"typeVersion\": 3,\n      \"continueOnFail\": true\n    },\n    {\n      \"id\": \"6409f0c4-bf93-4a1d-a74c-e294fb39895f\",\n      \"name\": \"HTML Extract\",\n      \"type\": \"n8n-nodes-base.htmlExtract\",\n      \"position\": [\n        820,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"trimValues\": false\n        },\n        \"extractionValues\": {\n          \"values\": [\n            {\n              \"key\": \"body\",\n              \"cssSelector\": \"html\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1,\n      \"continueOnFail\": true\n    },\n    {\n      \"id\": \"f45fcc6a-9ccd-43c9-9eaf-1797768e1e62\",\n      \"name\": \"OpenAI\",\n      \"type\": \"n8n-nodes-base.openAi\",\n      \"position\": [\n        1140,\n        460\n      ],\n      \"parameters\": {\n        \"prompt\": \"=This is the content of the website {{ $node[\\\"Split In Batches\\\"].json[\\\"Domain\\\"] }}:\\\"{{ $json[\\\"contentShort\\\"] }}\\\"\\n\\nIn a JSON format:\\n\\n- Give me the value proposition of the company. In less than 25 words. In English. Casual Tone. Format is: \\\"[Company Name] helps [target audience] [achieve desired outcome] and [additional benefit]\\\"\\n\\n- Give me the industry of the company. (Classify using this industry list: [Agriculture, Arts, Construction, Consumer Goods, Education, Entertainment, Finance, Other, Health Care, Legal, Manufacturing, Media & Communications, Public Administration, Advertisements, Real Estate, Recreation & Travel, Retail, Software, Transportation & Logistics, Wellness & Fitness] if it's ambiguous between Sofware and Consumer Goods, prefer Consumer Goods)\\n\\n- Guess the target audience of each company.(Classify and choose 1 from this list: [sales teams, marketing teams, HR teams, customer Service teams, consumers, C-levels] Write it in lowercase)\\n\\n- Tell me if they are B2B or B2C\\n\\nformat should be:\\n{\\\"value_proposition\\\": value_proposition,\\n\\\"industry\\\": industry,\\n\\\"target_audience\\\": target_audience, \\n\\\"market\\\": market }\\n\\nJSON:\",\n        \"options\": {\n          \"topP\": 1,\n          \"maxTokens\": 120,\n          \"temperature\": 0\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"67\",\n          \"name\": \"Lucas Open AI\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"continueOnFail\": true\n    },\n    {\n      \"id\": \"8de6c3d4-316f-4e00-a9f5-a4deefce90b3\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1600,\n        320\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combinationMode\": \"mergeByPosition\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"669f888e-1416-4291-a854-07ffbbbfcab1\",\n      \"name\": \"Clean Content\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        980,\n        460\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"if ($input.item.json.body){\\n\\n\\n\\n$input.item.json.content = $input.item.json.body.replaceAll('/^\\\\s+|\\\\s+$/g', '').replace('/(\\\\r\\\\n|\\\\n|\\\\r)/gm', \\\"\\\").replace(/\\\\s+/g, ' ')\\n\\n\\n  $input.item.json.contentShort = $input.item.json.content.slice(0, 10000)\\n}\\n\\n\\n\\n\\nreturn $input.item\"\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 1,\n      \"continueOnFail\": true,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"dbd5f866-2f5e-4adf-b1b5-a27b08c0425a\",\n      \"name\": \"Update Google Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1840,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsUi\": {\n          \"values\": [\n            {\n              \"column\": \"Market\",\n              \"fieldValue\": \"={{ $json[\\\"market\\\"] }}\"\n            },\n            {\n              \"column\": \"Industry\",\n              \"fieldValue\": \"={{ $json[\\\"industry\\\"] }}\"\n            },\n            {\n              \"column\": \"Value Proposition\",\n              \"fieldValue\": \"={{ $json[\\\"value_proposition\\\"] }}\"\n            },\n            {\n              \"column\": \"Target Audience\",\n              \"fieldValue\": \"={{ $json[\\\"target_audience\\\"] }}\"\n            }\n          ]\n        },\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/13h8HPWKha5kZHDeKxAPQvQqAOonof5cgpxzh79tIQfY/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/18iZ59I0q2AeElqcEpyJECNlSv4M6iJll9PQzXQkqEUk/edit#gid=0\",\n          \"__regex\": \"https:\\\\/\\\\/(?:drive|docs)\\\\.google\\\\.com\\\\/\\\\w+\\\\/d\\\\/([0-9a-zA-Z\\\\-_]+)(?:\\\\/.*|)\"\n        },\n        \"valueToMatchOn\": \"={{ $json[\\\"Domain\\\"] }}\",\n        \"columnToMatchOn\": \"Domain\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"2\",\n          \"name\": \"Google Sheets account lucas\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"f8bf8b70-6070-447b-af22-4d4e1ffe3539\",\n      \"name\": \"Parse JSON\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1300,\n        460\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"// Add a new field called 'myNewField' to the\\n// JSON of the item\\n$input.item.json.value_proposition=JSON.parse($input.item.json.text).value_proposition\\n\\n$input.item.json.industry=JSON.parse($input.item.json.text).industry\\n\\n$input.item.json.market=JSON.parse($input.item.json.text).market\\n\\n$input.item.json.target_audience=JSON.parse($input.item.json.text).target_audience\\n\\nreturn $input.item;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2754c6e1-9cf6-47d4-ad97-0797ec9155df\",\n      \"name\": \"Read Google Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        40,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/13h8HPWKha5kZHDeKxAPQvQqAOonof5cgpxzh79tIQfY/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/18iZ59I0q2AeElqcEpyJECNlSv4M6iJll9PQzXQkqEUk/edit#gid=0\",\n          \"__regex\": \"https:\\\\/\\\\/(?:drive|docs)\\\\.google\\\\.com\\\\/\\\\w+\\\\/d\\\\/([0-9a-zA-Z\\\\-_]+)(?:\\\\/.*|)\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"2\",\n          \"name\": \"Google Sheets account lucas\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"c2b93428-0dcc-4c02-bb81-496c12442284\",\n      \"name\": \"Split In Batches\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        260,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"eccf1dc8-a0bb-40f6-9471-95eac8020b02\",\n      \"name\": \"Wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        2060,\n        560\n      ],\n      \"webhookId\": \"d44bc024-1c21-44e0-b2b4-5cff6fb9f402\",\n      \"parameters\": {\n        \"unit\": \"seconds\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split In Batches\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse JSON\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse JSON\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"HTML Extract\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clean Content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTML Extract\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Clean Content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split In Batches\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Read Google Sheets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split In Batches\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Google Sheets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Execute Workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Read Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.htmlExtract",
      "n8n-nodes-base.openAi",
      "n8n-nodes-base.merge",
      "n8n-nodes-base.code",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.code",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.wait"
    ],
    "trigger": null
  }
}