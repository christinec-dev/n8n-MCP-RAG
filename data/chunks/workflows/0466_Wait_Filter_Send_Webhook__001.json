{
  "source": "0466_Wait_Filter_Send_Webhook.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"fdb7302d-9319-4861-abab-557a3c1f1493\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2660,\n        340\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 288.76295784381495,\n        \"height\": 795.272978576365,\n        \"content\": \"### Available source and target languages`*`:\\n\\n`BG` - 🇧🇬 Bulgarian\\n`CS` - 🇨🇿 Czech\\n`DA` - 🇩🇰 Danish\\n`DE` - 🇩🇪 German\\n`EL` - 🇬🇷 Greek\\n`EN-GB` - 🇬🇧 English (British)\\n`EN-US` - 🇺🇸 English (American)\\n`ES` - 🇪🇸 Spanish\\n`ET` - 🇪🇪 Estonian\\n`FI` - 🇫🇮 Finnish\\n`FR` - 🇫🇷 French\\n`HU` - 🇭🇺 Hungarian\\n`ID` - 🇮🇩 Indonesian\\n`IT` - 🇮🇹 Italian\\n`JA` - 🇯🇵 Japanese\\n`KO` - 🇰🇷 Korean\\n`LT` - 🇱🇹 Lithuanian\\n`LV` - 🇱🇻 Latvian\\n`NB` - 🇳🇴 Norwegian (Bokmål)\\n`NL` - 🇳🇱 Dutch\\n`PL` - 🇵🇱 Polish\\n`PT-BR` - 🇧🇷 Portuguese (Brazilian)\\n`PT-PT` - 🇵🇹 Portuguese\\n`RO` - 🇷🇴 Romanian\\n`RU` - 🇷🇺 Russian\\n`SK` - 🇸🇰 Slovak\\n`SL` - 🇸🇮 Slovenian\\n`SV` - 🇸🇪 Swedish\\n`TR` - 🇹🇷 Turkish\\n`UK` - 🇺🇦 Ukrainian\\n`ZH` - 🇨🇳 Chinese (simplified)\\n\\n`*` For more up-to-date list, please consult the official DeepL [API documentation](https://www.deepl.com/docs-api/documents/translate-document)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9cad538a-0efb-4186-b588-ef4d764fdf4e\",\n      \"name\": \"Run manually\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        1100,\n        560\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"242d4895-5b02-46b8-9c87-07fd2e11c9ba\",\n      \"name\": \"Get files from specified folder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1780,\n        560\n      ],\n      \"parameters\": {\n        \"filter\": {\n          \"folderId\": {\n            \"__rl\": true,\n            \"mode\": \"url\",\n            \"value\": \"={{ $json.folder_url }}\"\n          },\n          \"whatToSearch\": \"files\"\n        },\n        \"options\": {\n          \"fields\": [\n            \"kind\",\n            \"id\",\n            \"name\",\n            \"mimeType\"\n          ]\n        },\n        \"resource\": \"fileFolder\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"6q7v3i91ZDHQOKx3\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"1660cf85-af39-4d70-a997-5f4ef2252370\",\n      \"name\": \"Use only PDF documents\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        2000,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"098535fe-164e-4f58-9b35-0628b51ac5d0\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"endsWith\"\n              },\n              \"leftValue\": \"={{ $json.name }}\",\n              \"rightValue\": \".pdf\"\n            },\n            {\n              \"id\": \"a0bb0e8c-25e9-4ee0-a1fd-2d98a7328111\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notContains\"\n              },\n              \"leftValue\": \"={{ $json.name }}\",\n              \"rightValue\": \"=-{{ $('⚙️ config').first().json.target_lang }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"b7cc611e-81a3-4468-bcab-ca6de564fbeb\",\n      \"name\": \"Download files\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        2220,\n        560\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.id }}\"\n        },\n        \"options\": {},\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"6q7v3i91ZDHQOKx3\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"f6e2c1e6-b68d-47b3-8582-7772f8b1ee95\",\n      \"name\": \"Send translate request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2440,\n        560\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.deepl.com/v2/document\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"multipart-form-data\",\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"target_lang\",\n              \"value\": \"={{ $('⚙️ config').first().json.target_lang }}\"\n            },\n            {\n              \"name\": \"file\",\n              \"parameterType\": \"formBinaryData\",\n              \"inputDataFieldName\": \"data\"\n            },\n            {\n              \"name\": \"source_lang\",\n              \"value\": \"={{ $('⚙️ config').first().json.source_lang }}\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"NcB0kuT7IJgHvWlC\",\n          \"name\": \"Deepl API Header auth\"\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"9fab53d1-dfa8-4b27-892f-884853df1e50\",\n      \"name\": \"Check translation status\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1320,\n        820\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.deepl.com/v2/document/{{ $json.document_id }}\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"document_key\",\n              \"value\": \"={{ $('Send translate request').item.json.document_key }}\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"NcB0kuT7IJgHvWlC\",\n          \"name\": \"Deepl API Header auth\"\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"9d320d4c-8398-4af4-8582-bc60ca52b986\",\n      \"name\": \"Wait a bit\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        1540,\n        820\n      ],\n      \"webhookId\": \"9fd126e3-203c-4f11-ad50-d00ff55301a2\",\n      \"parameters\": {\n        \"unit\": \"seconds\",\n        \"amount\": 5\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"657758b1-a5f5-4b0b-bdd0-ef0cdb518863\",\n      \"name\": \"file translated?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1760,\n        820\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"1a7ad415-3d30-4d51-b31e-7a0911391d21\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.status }}\",\n              \"rightValue\": \"done\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2018d45b-8922-4a9c-884b-27cc6903d464\",\n      \"name\": \"Wait between documents\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        2000,\n        800\n      ],\n      \"webhookId\": \"877870bc-5b29-4ce0-82d6-3202d43e89fd\",\n      \"parameters\": {\n        \"unit\": \"seconds\",\n        \"amount\": 2\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"717972fe-45fa-4bd4-acf9-9db2efb45c12\",\n      \"name\": \"Get translated document from deepL\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2240,\n        800\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.deepl.com/v2/document/{{ $json.document_id }}/result\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"timeout\": 30000\n        },\n        \"sendBody\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"document_key\",\n              \"value\": \"={{ $('Send translate request').item.json.document_key }}\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"NcB0kuT7IJgHvWlC\",\n          \"name\": \"Deepl API Header auth\"\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"c9e9b000-8202-410d-9630-b08481ba4e39\",\n      \"name\": \"Uplad to original folder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        2460,\n        800\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Download files').item.json.name.replace('.pdf', '--' + $('⚙️ config').first().json.target_lang) + '.pdf' }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $('⚙️ config').first().json.folder_url }}\"\n        }\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"6q7v3i91ZDHQOKx3\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"698a33ce-8b33-4b33-8236-190b1013cb0d\",\n      \"name\": \"⚙️ config\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1440,\n        560\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"target_lang\"\n            },\n            {\n              \"name\": \"source_lang\"\n            },\n            {\n              \"name\": \"folder_url\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"aeee03fa-f4a6-48fd-b3ca-ff6a6dc20fb4\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1280,\n        367.395398150649\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 444.71526152412946,\n        \"height\": 343.02803459456237,\n        \"content\": \"### Configure your workflow here by setting these parameters:\\n- `folder_url`: URL of your google drive folder\\n- `target_lang`: The language into which the text should be translated\\n- `source_lang`: Language of the text to be translated (optional, if not specified DeepL will try to auto-detect the source language)\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Wait a bit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"file translated?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Run manually\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"⚙️ config\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"⚙️ config\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get files from specified folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send translate request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"file translated?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait between documents\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Check translation status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send translate request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check translation status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Use only PDF documents\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait between documents\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get translated document from deepL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check translation status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait a bit\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get files from specified folder\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Use only PDF documents\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get translated document from deepL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Uplad to original folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.if",
      "n8n-nodes-base.wait",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.googleDrive",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": null
  }
}