{
  "source": "0441_HTTP_GoogleSheets_Create_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"257476b1ef58bf3cb6a46e65fac7ee34a53a5e1a8492d5c6e4da5f87c9b82833\",\n    \"templateId\": \"2141\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"ec952e64-698b-4e3a-a82d-4474a3bf8b6b\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        900,\n        460\n      ],\n      \"webhookId\": \"0f85cfa2-29d7-48c8-bea1-298a61a07b77\",\n      \"parameters\": {\n        \"path\": \"slack-trigger\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c6bc7004-9bec-48a3-99f2-e0d89e32730c\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        240\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 446,\n        \"height\": 321,\n        \"content\": \"## Needed pre-work: Add a Slack App\\n1. Visit https://api.slack.com/apps, click on `New App` and choose a name and workspace.\\n2. Click on `OAuth & Permissions` and scroll down to Scopes -> Bot token Scopes\\n3. Add the `chat:write` scope\\n4. Head over to `Slash Commands` and click on `Create New Command`\\n5. Use `/idea` as the command\\n6. Copy the test URL from the **Webhook** node into `Request URL`\\n7. Add whatever feels best to the description and usage hint\\n8. Go to `Install app` and click install\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e8850a88-b91a-4496-b8d2-a391f17e67ad\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1100,\n        198.48837209302332\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 331,\n        \"height\": 404.36834060988355,\n        \"content\": \"## Setup\\n1. Create a Google Sheets document with the columns `Name` and `Creator`\\n2. Add your Google Sheets credentials \\n3. Fill the setup node below\\n4. Create your Slack app (*see other sticky*)\\n5. Click `Test` workflow and use the `/idea` comment in Slack\\n6. Activate the workflow and exchange the Request URL with the production URL from the webhook\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f1814a18-9301-4e86-9023-e16c5704db65\",\n      \"name\": \"Set me up\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1220,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"9bcc3fa7-a09e-48f0-b4ff-2c78264dec2d\",\n              \"name\": \"Google Sheets URL\",\n              \"type\": \"string\",\n              \"value\": \"https://docs.google.com/spreadsheets/d/17mugx8JYjbxaTMK9aqDkJywbc0NlNmStGYq-M5fKmG8/edit#gid=0\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"4824c23f-6477-4ee7-a6a0-2b83eaf61430\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1460,\n        380\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"height\": 224.48192284396475,\n        \"content\": \"You can easily support more commands, like `/bug` or `/pain` here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f8966efa-0576-48b9-89fe-bf49f10d703b\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1520,\n        460\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"New idea\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('Webhook').item.json.body.command }}\",\n                    \"rightValue\": \"/idea\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Add more here\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"25221a2c-18e9-47f6-a112-0edc85b63cda\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('Webhook').item.json.body.command }}\",\n                    \"rightValue\": \"/some-other-command\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"1caf810e-8b40-4430-8840-8e17a176b67a\",\n      \"name\": \"Add to Google Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1780,\n        360\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Name\": \"={{ $('Webhook').item.json.body.text }}\",\n            \"Creator\": \"={{ $('Webhook').item.json.body.user_name }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"Name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Creator\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Creator\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"Name\"\n          ]\n        },\n        \"options\": {\n          \"cellFormat\": \"USER_ENTERED\"\n        },\n        \"operation\": \"appendOrUpdate\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/17mugx8JYjbxaTMK9aqDkJywbc0NlNmStGYq-M5fKmG8/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $json['Google Sheets URL'] }}\"\n        }\n      },\n      \"typeVersion\": 4.3\n    },\n    {\n      \"id\": \"51f80b29-4b8c-4e2a-9da9-a7409763af0c\",\n      \"name\": \"Hidden message to Slack to add feature details\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2000,\n        360\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('Webhook').item.json.body.response_url }}\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"text\",\n              \"value\": \"=Thanks for adding the idea `{{ $('Webhook').item.json[\\\"body\\\"][\\\"text\\\"] }}` <@{{$('Webhook').item.json[\\\"body\\\"][\\\"user_id\\\"]}}> :rocket: Please make sure to add some details and a hypothesis to it to make it easier for us to work with it.\\n\\n:point_right: <{{ $('Set me up').item.json[\\\"Google Sheets URL\\\"] }}|Add your details here>\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add to Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set me up\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set me up\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add to Google Sheets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Hidden message to Slack to add feature details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.webhook",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.switch",
      "n8n-nodes-base.googleSheets",
      "n8n-nodes-base.httpRequest"
    ],
    "trigger": null
  }
}