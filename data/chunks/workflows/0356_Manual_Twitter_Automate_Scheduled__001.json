{
  "source": "0356_Manual_Twitter_Automate_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"1\",\n  \"name\": \"TwitterWorkflow\",\n  \"nodes\": [\n    {\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"disabled\": true,\n      \"position\": [\n        400,\n        850\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Filter Tweet Data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        680,\n        300\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Tweet\",\n              \"value\": \"={{$node[\\\"n8n.io mentions\\\"].json[\\\"text\\\"]}}\"\n            },\n            {\n              \"name\": \"Tweet ID\",\n              \"value\": \"={{$node[\\\"n8n.io mentions\\\"].json[\\\"id\\\"]}}\"\n            },\n            {\n              \"name\": \"Tweet URL\",\n              \"value\": \"=https://twitter.com/{{$node[\\\"n8n.io mentions\\\"].json[\\\"user\\\"][\\\"screen_name\\\"]}}/status/{{$node[\\\"n8n.io mentions\\\"].json[\\\"id_str\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Only get new tweets\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        910,\n        300\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const staticData = getWorkflowStaticData('global');\\nconst newTweetIds = items.map(item => item.json[\\\"Tweet ID\\\"]);\\nconst oldTweetIds = staticData.oldTweetIds; \\n\\nif (!oldTweetIds) {\\n  staticData.oldTweetIds = newTweetIds;\\n  return items;\\n}\\n\\n\\nconst actualNewTweetIds = newTweetIds.filter((id) => !oldTweetIds.includes(id));\\nconst actualNewTweets = items.filter((data) => actualNewTweetIds.includes(data.json['Tweet ID']));\\nstaticData.oldTweetIds = [...actualNewTweetIds, ...oldTweetIds];\\n\\nreturn actualNewTweets;\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"n8n.io mentions\",\n      \"type\": \"n8n-nodes-base.twitter\",\n      \"position\": [\n        480,\n        300\n      ],\n      \"parameters\": {\n        \"operation\": \"search\",\n        \"searchText\": \"@n8n_io\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"twitterOAuth1Api\": \"Twitter Credentials\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"RocketChat\",\n      \"type\": \"n8n-nodes-base.rocketchat\",\n      \"position\": [\n        1150,\n        300\n      ],\n      \"parameters\": {\n        \"text\": \"=New Mention!: {{$node[\\\"Filter Tweet Data\\\"].json[\\\"Tweet\\\"]}}.\\nSee it here: {{$node[\\\"Only get new tweets\\\"].json[\\\"Tweet URL\\\"]}}\",\n        \"channel\": \"general\",\n        \"options\": {},\n        \"jsonParameters\": true\n      },\n      \"credentials\": {\n        \"rocketchatApi\": \"Rocket Chat API\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Cron\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        270,\n        300\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyX\",\n              \"unit\": \"minutes\",\n              \"value\": 1\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"Cron\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"n8n.io mentions\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"n8n.io mentions\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter Tweet Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter Tweet Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Only get new tweets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Only get new tweets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"RocketChat\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        []\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.set",
      "n8n-nodes-base.function",
      "n8n-nodes-base.twitter",
      "n8n-nodes-base.rocketchat",
      "n8n-nodes-base.cron"
    ],
    "trigger": null
  }
}