{
  "source": "1718_Schedule_Filter_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"id\": \"d45cf237-dbbc-48ed-a7f0-fa9506ae1d67\",\n      \"name\": \"Update priority in todoist\",\n      \"type\": \"n8n-nodes-base.todoist\",\n      \"position\": [\n        2060,\n        520\n      ],\n      \"parameters\": {\n        \"taskId\": \"={{ $('Get inbox tasks').item.json.id }}\",\n        \"operation\": \"update\",\n        \"updateFields\": {\n          \"priority\": \"={{ $('Your Projects').first().json.projects[$json.message.content] }}\"\n        }\n      },\n      \"credentials\": {\n        \"todoistApi\": {\n          \"id\": \"1\",\n          \"name\": \"Todoist account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2,\n      \"waitBetweenTries\": 5000\n    },\n    {\n      \"id\": \"4d0ebf98-5a1d-4dfd-85df-da182b3c5099\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        600,\n        520\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a950e470-6885-42f4-9b17-7b2c2525d3e4\",\n      \"name\": \"Get inbox tasks\",\n      \"type\": \"n8n-nodes-base.todoist\",\n      \"position\": [\n        1020,\n        520\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"projectId\": \"938017196\"\n        },\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"todoistApi\": {\n          \"id\": \"1\",\n          \"name\": \"Todoist account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2,\n      \"waitBetweenTries\": 5000\n    },\n    {\n      \"id\": \"093bcb2e-79b7-427e-b13d-540a5b28f427\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        540,\n        200\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 358.6620209059232,\n        \"height\": 256.5853658536585,\n        \"content\": \"## \\ud83d\\udcab To setup this template\\n\\n1. Add your Todoist credentials\\n2. Add your OpenAI credentials\\n3. Set your project names and add priority\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"430290e7-1732-46fe-a38d-fa6dc7f78a26\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        800,\n        700\n      ],\n      \"parameters\": {\n        \"width\": 192.77351916376313,\n        \"height\": 80,\n        \"content\": \" \\ud83d\\udc46\\ud83c\\udffd Add your projects and priority here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6d5a1b7e-f7fa-4a1b-848c-1b4e79f6f667\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1020,\n        420\n      ],\n      \"parameters\": {\n        \"width\": 192.77351916376313,\n        \"height\": 80,\n        \"content\": \" \\ud83d\\udc47\\ud83c\\udffd Add your Todoist credentials here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"feff35d2-e37d-48a5-9a90-c5a2efde688f\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2060,\n        420\n      ],\n      \"parameters\": {\n        \"width\": 192.77351916376313,\n        \"height\": 80,\n        \"content\": \" \\ud83d\\udc47\\ud83c\\udffd Add your Todoist credentials here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e454ebfe-47f6-4e39-8b89-d706da742911\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1540,\n        700\n      ],\n      \"parameters\": {\n        \"width\": 192.77351916376313,\n        \"height\": 80,\n        \"content\": \" \\ud83d\\udc46\\ud83c\\udffd Add your OpenAI credentials here\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a79effcb-6904-4abf-835b-e1ccd94ca429\",\n      \"name\": \"Your Projects\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        820,\n        520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"50dc1412-21f8-4158-898d-3940a146586b\",\n              \"name\": \"projects\",\n              \"type\": \"object\",\n              \"value\": \"={{ {\\n apartment: 1,\\n health: 2,\\n german: 3\\n} }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b5988629-2225-455f-b579-73e60449d2a3\",\n      \"name\": \"Categorize\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1460,\n        520\n      ],\n      \"parameters\": {\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {},\n        \"messages\": {\n          \"values\": [\n            {\n              \"role\": \"system\",\n              \"content\": \"=Categorize the user's todo item to a project. Return the project name or just \\\"other\\\" if it does not belong to a project.\"\n            },\n            {\n              \"content\": \"=Projects:\\n{{ $('Your Projects').first().json.projects.keys().join('\\\\n') }}\\n\\nTodo item:\\n{{ $('Get inbox tasks').item.json.content }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"9\",\n          \"name\": \"n8n OpenAi\"\n        }\n      },\n      \"typeVersion\": 1.4\n    },\n    {\n      \"id\": \"0dca3953-c0ac-4319-9323-c3aed9488bfb\",\n      \"name\": \"If task is not a subtask\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1240,\n        520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"36dd4bc9-1282-4342-89dd-1dac81c7290e\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"empty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.parent_id }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"12e25a81-dbde-4542-a137-365329da415e\",\n      \"name\": \"If other or ai hallucinates\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1820,\n        520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"c4f69265-abe1-451c-8462-e68ff3b06799\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"contains\",\n                \"rightType\": \"any\"\n              },\n              \"leftValue\": \"={{ $('Your Projects').first().json.projects.keys() }}\",\n              \"rightValue\": \"={{ $json.message.content }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Categorize\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If other or ai hallucinates\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Your Projects\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get inbox tasks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get inbox tasks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If task is not a subtask\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Your Projects\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If task is not a subtask\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Categorize\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If other or ai hallucinates\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update priority in todoist\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.todoist",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.todoist",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "@n8n/n8n-nodes-langchain.openAi",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.filter"
    ],
    "trigger": "schedule trigger"
  }
}