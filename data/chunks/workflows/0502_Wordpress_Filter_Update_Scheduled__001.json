{
  "source": "0502_Wordpress_Filter_Update_Scheduled.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"cb484ba7b742928a2048bf8829668bed5b5ad9787579adea888f05980292a4a7\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"92ffb384-849f-411b-981f-e324190eaae4\",\n      \"name\": \"Post on Wordpress\",\n      \"type\": \"n8n-nodes-base.wordpress\",\n      \"position\": [\n        1340,\n        700\n      ],\n      \"parameters\": {\n        \"title\": \"={{ $json.Title }}\",\n        \"additionalFields\": {\n          \"status\": \"draft\",\n          \"content\": \"={{ $json['Blog Body'] }}\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b3148c02-8088-4b81-afa8-1d57bef570e5\",\n      \"name\": \"Upload Media\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1840,\n        700\n      ],\n      \"parameters\": {\n        \"url\": \"=https://effibotics.com/wp-json/wp/v2/media\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"contentType\": \"binaryData\",\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"content-disposition\",\n              \"value\": \"=attachment; filename={{ $binary.data.fileName }}.{{ $binary.data.fileExtension }}\"\n            },\n            {\n              \"name\": \"content-type\",\n              \"value\": \"={{ $binary.data.mimeType }}\"\n            }\n          ]\n        },\n        \"inputDataFieldName\": \"data\",\n        \"nodeCredentialType\": \"wordpressApi\"\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"d81ab003-fb36-4570-ab58-65b9a5db38be\",\n      \"name\": \"Set Featured Image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2000,\n        700\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('Settings').item.json.wordpress_url }}wp-json/wp/v2/posts/{{ $('Post on Wordpress').item.json.id }}\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"featured_media\",\n              \"value\": \"={{ $json.id }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"wordpressApi\"\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"176ed2b0-2e27-4c04-a3fb-94842a82d3ab\",\n      \"name\": \"Edit Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1040,\n        700\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"66db867d-e056-4713-8877-14c60775738a\",\n              \"name\": \"id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.id }}\"\n            },\n            {\n              \"id\": \"c2e3724a-1406-48a7-b15c-1cda06dd44e9\",\n              \"name\": \"Title\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Title }}\"\n            },\n            {\n              \"id\": \"d47d0436-ae61-4c68-a57f-273e77354050\",\n              \"name\": \"Keyword\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Keyword }}\"\n            },\n            {\n              \"id\": \"34d8bc1f-77f6-496e-a36f-faa06d5cd6dd\",\n              \"name\": \"Blog Body\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json[\\\"Blog Post\\\"].replace($json[\\\"Title\\\"],'') }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"ff8d11c0-a604-4959-8dbd-56a5265a0559\",\n      \"name\": \"Get content to post\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        680,\n        700\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appEanjsKFnMPZZz3\",\n          \"cachedResultUrl\": \"https://airtable.com/appEanjsKFnMPZZz3\",\n          \"cachedResultName\": \"SEO Doctor\"\n        },\n        \"limit\": 3,\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblkWGFcUJ2WVyL9f\",\n          \"cachedResultUrl\": \"https://airtable.com/appEanjsKFnMPZZz3/tblkWGFcUJ2WVyL9f\",\n          \"cachedResultName\": \"AI Generated Blog Posts\"\n        },\n        \"options\": {},\n        \"operation\": \"search\",\n        \"returnAll\": false,\n        \"filterByFormula\": \"SEARCH(\\\"To Post\\\", {Status})\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"43f99839-2690-4324-8d26-201fc55f7b02\",\n      \"name\": \"Filter by existing Blogs\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        860,\n        700\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"d31b3381-dc99-41ae-b309-40e270ebf714\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json['Blog Post'] }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"924eeb0a-ee5d-40f1-915c-19e34018c619\",\n      \"name\": \"Markdown to HTML\",\n      \"type\": \"n8n-nodes-base.markdown\",\n      \"position\": [\n        1180,\n        700\n      ],\n      \"parameters\": {\n        \"mode\": \"markdownToHtml\",\n        \"options\": {},\n        \"markdown\": \"={{ $json['Blog Body'] }} {{ $json['Blog Body'] }} {{ $json['Blog Body'] }}\",\n        \"destinationKey\": \"Blog Body\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3aed566c-04bc-4164-85d7-1f13a7862f5a\",\n      \"name\": \"Get Image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1500,\n        700\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.pexels.com/v1/search?query= {{ $('Edit Fields').item.json.Keyword }}&per_page=1&width=1200&height=675&format=webp\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"lFlHMbYfTkSZ2HupBHDggMucIq38GQ5QICPstDPVdaHVxn9afY983qnS\"\n            },\n            {\n              \"name\": \"content\",\n              \"value\": \"= {{ $('Edit Fields').item.json.Keyword }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"2729c11b-0c94-4e05-9d98-80d70eac1c2d\",\n      \"name\": \"Download the image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1660,\n        700\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.photos[0].src.landscape }}\",\n        \"options\": {},\n        \"responseFormat\": \"file\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"9b31f00c-dad3-403c-953e-21df2cd3af65\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        760,\n        340\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 662.5970350404314,\n        \"height\": 321.75,\n        \"content\": \"## Automating Posting content to WordPress and setting up the featured Image\\nThis workflow aims to simplify the process by which we share content on Wordpress sites with n8n from airtable\\n\\n### Usage\\n1. Get the content from AirTable. SInce we have this as a markdown, we will have to convert it to a html format to make it easier to publish and manage on WordPress\\n2. Upload the blog post with the content, title and all other relevant information needed for an optimized blog\\n3. Once the post is posted, we need to upload the image and set it as a features image for the blogs\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ca838f99-39f7-4641-9293-502a7e0be912\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        520,\n        700\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"7eb92d69-3815-45d3-9da9-63a28b15f661\",\n      \"name\": \"Update POST on Airtable\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        2180,\n        700\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appEanjsKFnMPZZz3\",\n          \"cachedResultUrl\": \"https://airtable.com/appEanjsKFnMPZZz3\",\n          \"cachedResultName\": \"SEO Doctor\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblkWGFcUJ2WVyL9f\",\n          \"cachedResultUrl\": \"https://airtable.com/appEanjsKFnMPZZz3/tblkWGFcUJ2WVyL9f\",\n          \"cachedResultName\": \"AI Generated Blog Posts\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"id\": \"={{ $('Edit Fields').item.json.id }}\",\n            \"Status\": \"Posted\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"id\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"id\",\n              \"defaultMatch\": true\n            },\n            {\n              \"id\": \"Title\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Title\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Blog Post\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Blog Post\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Star\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Star\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Intent\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Intent\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Status\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"Draft\",\n                  \"value\": \"Draft\"\n                },\n                {\n                  \"name\": \"First Copy\",\n                  \"value\": \"First Copy\"\n                },\n                {\n                  \"name\": \"Second Copy\",\n                  \"value\": \"Second Copy\"\n                },\n                {\n                  \"name\": \"To Post\",\n                  \"value\": \"To Post\"\n                },\n                {\n                  \"name\": \"Posted\",\n                  \"value\": \"Posted\"\n                },\n                {\n                  \"name\": \"Review\",\n                  \"value\": \"Review\"\n                },\n                {\n                  \"name\": \"Tracking\",\n                  \"value\": \"Tracking\"\n                }\n              ],\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Keyword\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Keyword\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"count\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"count\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Word count\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Word count\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Last Modified\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Last Modified\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Image\",\n              \"type\": \"array\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Image\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Images\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Images\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"All keyword Data and Tracking\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"All keyword Data and Tracking\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Search Volume\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Search Volume\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Frequency\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Frequency\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"id\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"536659ab-ca94-420f-8110-e277676b939a\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        500,\n        340\n      ],\n      \"parameters\": {\n        \"height\": 323,\n        \"content\": \"## SETUP\\n1. Create a wordpress application and set up the password\\n\\n2. Have an airtable with the columns \\nKeyword | Title | Blog content\\n\\n3. The blog content in this canse is a markdown format generated by AI\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Get Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download the image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Markdown to HTML\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload Media\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Featured Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Markdown to HTML\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Post on Wordpress\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get content to post\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Post on Wordpress\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download the image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload Media\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Featured Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update POST on Airtable\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get content to post\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter by existing Blogs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter by existing Blogs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.wordpress",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.airtable",
      "n8n-nodes-base.filter",
      "n8n-nodes-base.markdown",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.airtable",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}