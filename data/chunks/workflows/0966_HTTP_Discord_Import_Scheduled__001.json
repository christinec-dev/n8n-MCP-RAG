{
  "source": "0966_HTTP_Discord_Import_Scheduled.json",
  "index": 1,
  "content": "{\n  \"nodes\": [\n    {\n      \"name\": \"@Get Issue\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"maxTries\": 3,\n      \"position\": [\n        1050,\n        590\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.github.com/notifications\",\n        \"options\": {},\n        \"authentication\": \"basicAuth\",\n        \"queryParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"since\",\n              \"value\": \"={{$node[\\\"@Get Date 1 min ago\\\"].json[\\\"since\\\"]}}\"\n            }\n          ]\n        },\n        \"headerParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"User-Agent\",\n              \"value\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.246\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpBasicAuth\": \"Github Auth\"\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Cron\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        710,\n        590\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyX\",\n              \"unit\": \"minutes\",\n              \"value\": 1\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Discord\",\n      \"type\": \"n8n-nodes-base.discord\",\n      \"position\": [\n        1610,\n        580\n      ],\n      \"parameters\": {\n        \"text\": \"=Notifications In last minutes: <@userIdForTagging>\\n{{$node[\\\"Function\\\"].json[\\\"reportMessage\\\"]}}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Function\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        1230,\n        590\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const newItems = [];\\n\\nfor (const item of items[0].json) {\\n     newItems.push(`- [${item.reason}] => ${item.subject.title} @ ${item.subject.url.replace('api.','').replace('/repos','')}`);\\n  }\\n\\nreturn [{json: {reportMessage: `${newItems.join('\\\\r\\\\n')}`, hasNotifications: items[0].json.length > 0}}];\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1400,\n        590\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{$node[\\\"Function\\\"].json[\\\"hasNotifications\\\"]}}\",\n              \"value2\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"@Get Date 1 min ago\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        860,\n        590\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const date = new Date(new Date().setMinutes(new Date().getMinutes() - (1))).toISOString()\\nreturn [{json: {since: date}}];\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Discord\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Cron\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"@Get Date 1 min ago\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Function\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"@Get Issue\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Function\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"@Get Date 1 min ago\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"@Get Issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.cron",
      "n8n-nodes-base.discord",
      "n8n-nodes-base.function",
      "n8n-nodes-base.if",
      "n8n-nodes-base.function"
    ],
    "trigger": null
  }
}