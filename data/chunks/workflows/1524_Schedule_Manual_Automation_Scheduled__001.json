{
  "source": "1524_Schedule_Manual_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"JJKkNnO4PQ12gQdE\",\n  \"meta\": {\n    \"instanceId\": \"0c2c4ddeb912d098b1d34ad608a9ee98cbe4700322f0cd2d87fa360b51c1c8a8\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Retry Execution Hourly\",\n  \"tags\": [\n    {\n      \"id\": \"BREwPdgeEC5njFaD\",\n      \"name\": \"In Development\",\n      \"createdAt\": \"2024-04-13T07:17:56.132Z\",\n      \"updatedAt\": \"2024-04-13T07:17:56.132Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"ca8badce-4a43-4e86-acb8-6a3939ffa597\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        580,\n        740\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7867cbd1-bf14-488d-9bbf-11d4478f93f2\",\n      \"name\": \"n8n\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        1160,\n        860\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"status\": \"error\"\n        },\n        \"options\": {\n          \"activeWorkflows\": false\n        },\n        \"resource\": \"execution\",\n        \"returnAll\": true,\n        \"requestOptions\": {}\n      },\n      \"credentials\": {\n        \"n8nApi\": {\n          \"id\": \"m9lkUOoNENYqXZIQ\",\n          \"name\": \"Gatu a/c\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b9826e10-43b9-4a21-b2f8-f91fdee3e6a2\",\n      \"name\": \"Log into n8n\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        960,\n        860\n      ],\n      \"parameters\": {\n        \"url\": \"={{ \\n\\n(() => {\\n  const instance = $json.n8n_instance;\\n  const normalizedUrl = instance.endsWith('/') ? instance + 'rest/login' : instance + '/rest/login';\\n  return normalizedUrl;\\n})()\\n}}\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"fullResponse\": true\n            }\n          }\n        },\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"email\",\n              \"value\": \"={{ $json.username }}\"\n            },\n            {\n              \"name\": \"password\",\n              \"value\": \"={{ $json.password }}\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json, text/plain, */*\"\n            },\n            {\n              \"name\": \"accept-language\",\n              \"value\": \"en-US,en;q=0.9\"\n            },\n            {\n              \"name\": \"user-agent\",\n              \"value\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36\"\n            }\n          ]\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"1ca0527f-ccc4-4b3f-b585-94550987e0d3\",\n      \"name\": \"retry workflow automatically\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"onError\": \"continueRegularOutput\",\n      \"position\": [\n        2080,\n        980\n      ],\n      \"parameters\": {\n        \"url\": \"={{ \\n\\n$('login_details').item.json.n8n_instance.endsWith('/') \\n  ? $('login_details').item.json.n8n_instance + 'rest/executions/' + $json.id + '/retry' \\n  : $('login_details').item.json.n8n_instance + '/rest/executions/' + $('login_details').item.json.executionid + '/retry'\\n\\n }}  \",\n        \"method\": \"POST\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {}\n          }\n        },\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"loadWorkflow\",\n              \"value\": \"true\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json, text/plain, */*\"\n            },\n            {\n              \"name\": \"accept-language\",\n              \"value\": \"en-US,en;q=0.9\"\n            },\n            {\n              \"name\": \"cookie\",\n              \"value\": \"={{ $('Log into n8n').item.json.headers['set-cookie'][0] }}\"\n            },\n            {\n              \"name\": \"user-agent\",\n              \"value\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36\"\n            }\n          ]\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"b0b2f473-e12c-4377-80d3-46b18faa09b9\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1380,\n        860\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"06acbcc4-1a82-4063-8a92-2ebbc6597b4b\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.retrySuccessId }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6ea6fe2c-de31-4628-87b1-69e7ba867030\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1620,\n        680\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"851277e1-5b0e-4391-8174-2c118aacfa30\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        100,\n        780\n      ],\n      \"parameters\": {\n        \"width\": 383.5091496232509,\n        \"height\": 285.0376749192681,\n        \"content\": \"- ## check for failed executions hourly.\\n- ## filter out those that have successful reexecution ids.\\n- ## log into n8n and get the session ids.\\n- ## retry the executions.\\n\\n- h\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5b8bf8c1-f505-42da-936d-637394e71b34\",\n      \"name\": \"login_details\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        760,\n        860\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"3edb7f73-73cb-44f4-b891-8499598d9b0a\",\n              \"name\": \"username\",\n              \"type\": \"string\",\n              \"value\": \"gaturanjenga@gmail.com\"\n            },\n            {\n              \"id\": \"bc07f892-aacf-4f7c-96d1-64a9e28a4d92\",\n              \"name\": \"password\",\n              \"type\": \"string\",\n              \"value\": \"Password123\"\n            },\n            {\n              \"id\": \"59874894-b1ec-4a31-949e-9c3834d68d47\",\n              \"name\": \"n8n_instance\",\n              \"type\": \"string\",\n              \"value\": \"https://ai.gatuservices.info/\"\n            },\n            {\n              \"id\": \"68c77c33-15e0-4505-90d0-8129e7a8fbba\",\n              \"name\": \"executionid\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"74716a90-25a2-48b6-b342-197fe3807a3d\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        1620,\n        940\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 5\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"6439f486-68d4-4f9e-8e7f-3df909e32324\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        580,\n        980\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"hours\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"882c03ea-d9e0-4d00-b4c6-5a1c55994fb0\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        740,\n        740\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 349.5813953488373,\n        \"height\": 278.232558139535,\n        \"content\": \"## Set the login credential details in the set node, and login to n8n via api.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bcc4d7e3-a91e-4c90-a018-56c6321f6ae2\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1140,\n        740\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 343.81395348837225,\n        \"height\": 263.8139534883721,\n        \"content\": \"## Get all `Error` executions.\\n- ### Filter out those that have been successfully retried\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9219f2a8-8b71-45e0-a987-7e8c1a6364fe\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1780,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 444.7441860465116,\n        \"height\": 268.139534883721,\n        \"content\": \"## Retry the executions.\\n- ### Feel free to add notifications error messages for failed one to  email or slack\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"eb687638-734c-4feb-af5a-b49cf1dc661b\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"n8n\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Log into n8n\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"n8n\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"execution_id\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"retry workflow automatically\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"login_details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Log into n8n\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"execution_id\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"login_details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"retry workflow automatically\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"login_details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.manualTrigger",
      "n8n-nodes-base.n8n",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}