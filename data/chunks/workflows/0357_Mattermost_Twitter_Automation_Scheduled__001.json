{
  "source": "0357_Mattermost_Twitter_Automation_Scheduled.json",
  "index": 1,
  "content": "{\n  \"id\": \"1\",\n  \"name\": \"Twitter notifications\",\n  \"nodes\": [\n    {\n      \"name\": \"Twitter\",\n      \"type\": \"n8n-nodes-base.twitter\",\n      \"position\": [\n        610,\n        260\n      ],\n      \"parameters\": {\n        \"operation\": \"search\",\n        \"searchText\": \"n8n_io\",\n        \"additionalFields\": {\n          \"resultType\": \"recent\"\n        }\n      },\n      \"credentials\": {\n        \"twitterOAuth1Api\": \"Twitter\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Cron\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        410,\n        260\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Function\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        940,\n        260\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const new_items = [];\\nconst data = this.getWorkflowStaticData('node');\\n\\ndata.ids = data.ids || [];\\n\\nfor (var i=0; i<items.length; i++) {\\n  if (data.ids.includes(items[i].json.id)) {\\n    break;\\n  } else {\\n    new_items.push({json: {id: items[i].json.id, url: items[i].json.url, tweet: items[i].json.tweet, username: items[i].json.username, photo: items[i].json.photo, name: items[i].json.name, color: items[i].json.color}});\\n  }\\n}\\n\\ndata.ids = items.map(item => item.json.id)\\nreturn new_items;\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Set\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        780,\n        260\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [\n            {\n              \"name\": \"id\",\n              \"value\": \"={{$node[\\\"Twitter\\\"].json[\\\"id\\\"]}}\"\n            }\n          ],\n          \"string\": [\n            {\n              \"name\": \"url\",\n              \"value\": \"=https://twitter.com/{{$node[\\\"Twitter\\\"].json[\\\"user\\\"][\\\"screen_name\\\"]}}/status/{{$node[\\\"Twitter\\\"].json[\\\"id_str\\\"]}}\"\n            },\n            {\n              \"name\": \"tweet\",\n              \"value\": \"={{$node[\\\"Twitter\\\"].json[\\\"text\\\"]}}\"\n            },\n            {\n              \"name\": \"username\",\n              \"value\": \"={{$node[\\\"Twitter\\\"].json[\\\"user\\\"][\\\"screen_name\\\"]}}\"\n            },\n            {\n              \"name\": \"photo\",\n              \"value\": \"={{$node[\\\"Twitter\\\"].json[\\\"user\\\"][\\\"profile_image_url_https\\\"]}}\"\n            },\n            {\n              \"name\": \"name\",\n              \"value\": \"={{$node[\\\"Twitter\\\"].json[\\\"user\\\"][\\\"name\\\"]}}\"\n            },\n            {\n              \"name\": \"color\",\n              \"value\": \"={{$node[\\\"Twitter\\\"].json[\\\"user\\\"][\\\"profile_link_color\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {\n          \"dotNotation\": true\n        },\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Mattermost\",\n      \"type\": \"n8n-nodes-base.mattermost\",\n      \"position\": [\n        1110,\n        260\n      ],\n      \"parameters\": {\n        \"message\": \"={{$node[\\\"Function\\\"].json[\\\"url\\\"]}}\",\n        \"channelId\": \"c81pcft85byeipbp3nptbmicah\",\n        \"attachments\": [\n          {\n            \"text\": \"={{$node[\\\"Function\\\"].json[\\\"tweet\\\"]}}\",\n            \"color\": \"=#{{$node[\\\"Function\\\"].json[\\\"color\\\"]}}\",\n            \"author_icon\": \"={{$node[\\\"Function\\\"].json[\\\"photo\\\"]}}\",\n            \"author_link\": \"=https://twitter.com/{{$node[\\\"Function\\\"].json[\\\"username\\\"]}}\",\n            \"author_name\": \"={{$node[\\\"Function\\\"].json[\\\"name\\\"]}} ({{$node[\\\"Function\\\"].json[\\\"username\\\"]}})\"\n          }\n        ],\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"mattermostApi\": \"Mattermost\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"settings\": {},\n  \"connections\": {\n    \"Set\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Function\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Cron\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Twitter\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Twitter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Function\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Mattermost\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.twitter",
      "n8n-nodes-base.cron",
      "n8n-nodes-base.function",
      "n8n-nodes-base.set",
      "n8n-nodes-base.mattermost"
    ],
    "trigger": null
  }
}