{
  "source": "0643_Splitout_Snowflake_Import_Scheduled.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"21b41c2deb1c9e3f543253a0aa6a6e2c7bd7ef6bab90ffd478aa947c17d3b352\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Import Productboard Notes, Companies and Features into Snowflake\",\n  \"tags\": [\n    {\n      \"id\": \"6Ek7V8f4xbM9vWLj\",\n      \"name\": \"linear\",\n      \"createdAt\": \"2024-11-08T12:12:15.330Z\",\n      \"updatedAt\": \"2024-11-08T12:12:15.330Z\"\n    },\n    {\n      \"id\": \"XpcIJ8IHNenz3bWz\",\n      \"name\": \"productboard\",\n      \"createdAt\": \"2024-11-08T12:12:17.249Z\",\n      \"updatedAt\": \"2024-11-08T12:12:17.249Z\"\n    },\n    {\n      \"id\": \"17\",\n      \"name\": \"snowflake\",\n      \"createdAt\": \"2023-09-18T17:05:02.756Z\",\n      \"updatedAt\": \"2023-09-18T17:05:02.756Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"adcb71e4-880b-4c19-acbb-0708ae4af95f\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        5620,\n        1440\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 442.66083354762577,\n        \"height\": 155.09952210536395,\n        \"content\": \"## Preview Slack Message\\n:productboard: Weekly Update in :snowflake_logo: Completed\\n27 new insights added in the last 7 days.\\n88 insights remain unprocessed.\\nYou can view the updated :metabase: dashboard below:\\n<link metabase>\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8a590e59-cbcd-43f3-a0de-7c1391661fcf\",\n      \"name\": \"Manual mapping feature\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        4380,\n        -180\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"feature_id\",\n              \"stringValue\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"feature_name\",\n              \"stringValue\": \"={{ $json.name }}\"\n            },\n            {\n              \"name\": \"feature_status\",\n              \"stringValue\": \"={{ $json.status.name }}\"\n            },\n            {\n              \"name\": \"feature_start_date\",\n              \"stringValue\": \"={{ $json.timeframe.startDate }}\"\n            },\n            {\n              \"name\": \"feature_end_date\",\n              \"stringValue\": \"={{ $json.timeframe.endDate }}\"\n            },\n            {\n              \"name\": \"feature_owner\",\n              \"stringValue\": \"={{ $json.owner.email }}\"\n            },\n            {\n              \"name\": \"feature_created_at\",\n              \"stringValue\": \"={{ $json.createdAt }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"ca339c8f-71c0-432f-88ef-595b9bc24b98\",\n      \"name\": \"get productboard companies\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        4060,\n        220\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.productboard.com/companies\",\n        \"options\": {\n          \"pagination\": {\n            \"pagination\": {\n              \"nextURL\": \"={{ $response.body[\\\"links\\\"][\\\"next\\\"] }}\",\n              \"paginationMode\": \"responseContainsNextURL\",\n              \"requestInterval\": 2000,\n              \"completeExpression\": \"={{ $response.body[\\\"links\\\"][\\\"next\\\"] === null }}\",\n              \"paginationCompleteWhen\": \"other\"\n            }\n          }\n        },\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Version\",\n              \"value\": \"1\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z0ptr85smbBZBIYx\",\n          \"name\": \"Productboard\"\n        }\n      },\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"ba15244b-4311-4045-8087-47f05bea427e\",\n      \"name\": \"Manual mapping companies\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        4760,\n        220\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"company_id\",\n              \"stringValue\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"company_name\",\n              \"stringValue\": \"={{ $json.name }}\"\n            },\n            {\n              \"name\": \"company_domain\",\n              \"stringValue\": \"={{ $json.domain }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"d7c491cf-6545-40e1-9ee5-429e4f6b8cb4\",\n      \"name\": \"get productboard notes\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        4500,\n        640\n      ],\n      \"parameters\": {\n        \"url\": \" https://api.productboard.com/notes\",\n        \"options\": {\n          \"pagination\": {\n            \"pagination\": {\n              \"parameters\": {\n                \"parameters\": [\n                  {\n                    \"name\": \"pageCursor\",\n                    \"value\": \"={{ $response.body.pageCursor }}\"\n                  }\n                ]\n              },\n              \"requestInterval\": 2000,\n              \"completeExpression\": \"={{ $response.body.pageCursor === null }}\",\n              \"paginationCompleteWhen\": \"other\"\n            }\n          }\n        },\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Version\",\n              \"value\": \"1\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z0ptr85smbBZBIYx\",\n          \"name\": \"Productboard\"\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"beeb2cfc-c017-4691-b92f-ee10b943b08d\",\n      \"name\": \"Manual mapping notes\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        5200,\n        640\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"note_id\",\n              \"stringValue\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"note_title\",\n              \"stringValue\": \"={{ $json.title }}\"\n            },\n            {\n              \"name\": \"note_state\",\n              \"stringValue\": \"={{ $json.state }}\"\n            },\n            {\n              \"name\": \"note_company_id\",\n              \"stringValue\": \"={{ $json.company.id }}\"\n            },\n            {\n              \"name\": \"note_source\",\n              \"stringValue\": \"={{ $json.source.origin }}\"\n            },\n            {\n              \"name\": \"note_content\",\n              \"stringValue\": \"={{ $json.content }}\"\n            },\n            {\n              \"name\": \"note_created_at\",\n              \"stringValue\": \"={{ $json.createdAt }}\"\n            },\n            {\n              \"name\": \"note_created_by\",\n              \"stringValue\": \"={{ $json.createdBy.name }}\"\n            },\n            {\n              \"name\": \"note_owner\",\n              \"stringValue\": \"={{ $json.owner.name }}\"\n            },\n            {\n              \"name\": \"note_url\",\n              \"stringValue\": \"={{ $json.displayUrl }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"770df012-b5a0-49f9-9614-8988c2436c34\",\n      \"name\": \"Split features\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        3920,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"910e27f0-b910-415e-a171-5c6cfce07dc4\",\n      \"name\": \"Split companies\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        4300,\n        220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f57f3865-8970-4771-aee6-2e656215b13e\",\n      \"name\": \"Split notes\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        4740,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d3939c15-9523-49c1-93ba-7942d37a0ec0\",\n      \"name\": \"Split features in notes\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        5400,\n        900\n      ],\n      \"parameters\": {\n        \"include\": \"selectedOtherFields\",\n        \"options\": {},\n        \"fieldToSplitOut\": \"features\",\n        \"fieldsToInclude\": \"id\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bde6dc0c-6104-4b84-8c09-33dbe0cfe69f\",\n      \"name\": \"Combine Feature ID + Note ID\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        5640,\n        900\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"note_id\",\n              \"stringValue\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"feature_id\",\n              \"stringValue\": \"={{ $json.features.id }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"b47db956-ec4f-4342-b973-aa3277e397f2\",\n      \"name\": \"get productboard features\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        3680,\n        -180\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.productboard.com/features\",\n        \"options\": {\n          \"pagination\": {\n            \"pagination\": {\n              \"nextURL\": \"={{ $response.body[\\\"links\\\"][\\\"next\\\"] }}\",\n              \"paginationMode\": \"responseContainsNextURL\",\n              \"requestInterval\": 3000,\n              \"completeExpression\": \"={{ $response.body[\\\"links\\\"][\\\"next\\\"] === null }}\",\n              \"paginationCompleteWhen\": \"other\"\n            }\n          }\n        },\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Version\",\n              \"value\": \"1\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z0ptr85smbBZBIYx\",\n          \"name\": \"Productboard\"\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"ef3cd766-3887-4d6b-981b-d8e72a06a655\",\n      \"name\": \"Update Productboard Notes\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        5940,\n        660\n      ],\n      \"parameters\": {\n        \"table\": \"PRODUCTBOARD_NOTES\",\n        \"columns\": \"NOTE_ID,NOTE_TITLE,NOTE_STATE,NOTE_COMPANY_ID,NOTE_SOURCE,NOTE_CONTENT,NOTE_CREATED_BY,NOTE_OWNER,NOTE_CREATED_AT,NOTE_URL\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8dc03797-1ac9-47a8-8e4c-e85e9539b091\",\n      \"name\": \"Empty Table Productboard Notes\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        4260,\n        640\n      ],\n      \"parameters\": {\n        \"query\": \"TRUNCATE TABLE PRODUCTBOARD_NOTES;\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9d5a6d6f-a672-48b0-baf8-67b608690d28\",\n      \"name\": \"[CREATE] PRODUCTBOARD_NOTES\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3280,\n        1140\n      ],\n      \"parameters\": {\n        \"query\": \"CREATE OR REPLACE TABLE PRODUCTBOARD_NOTES (\\n    note_id STRING NOT NULL,\\n    note_title STRING,\\n    note_state STRING,\\n    note_company_id STRING,\\n    note_source STRING,\\n    note_content STRING,\\n    note_created_by STRING,\\n    note_owner STRING,\\n    note_url STRING,\\n    note_created_at TIMESTAMP_NTZ\\n);\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ea27f38b-3199-46aa-959f-9c1502898696\",\n      \"name\": \"[CREATE] PRODUCTBOARD_COMPANIES\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3520,\n        1140\n      ],\n      \"parameters\": {\n        \"query\": \"CREATE OR REPLACE TABLE PRODUCTBOARD_COMPANIES (\\n    company_id STRING NOT NULL,\\n    company_name STRING,\\n    company_domain STRING\\n);\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7bb94678-d106-4b77-8a96-4c598b057d09\",\n      \"name\": \"Update Productboard Companies\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        5280,\n        220\n      ],\n      \"parameters\": {\n        \"table\": \"PRODUCTBOARD_COMPANIES\",\n        \"columns\": \"COMPANY_ID,COMPANY_NAME,COMPANY_DOMAIN\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"86128f9b-8b16-4dc0-bdf5-1bab946716e2\",\n      \"name\": \"Manual mapping companies db\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        5020,\n        220\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"COMPANY_ID\",\n              \"stringValue\": \"={{ $json.company_id }}\"\n            },\n            {\n              \"name\": \"COMPANY_NAME\",\n              \"stringValue\": \"={{ $json.company_name }}\"\n            },\n            {\n              \"name\": \"COMPANY_DOMAIN\",\n              \"stringValue\": \"={{ $json.company_domain }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"dd2a3264-4171-43af-9409-ad2e79091bfb\",\n      \"name\": \"Manual mapping notes db\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        5720,\n        660\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"NOTE_ID\",\n              \"stringValue\": \"={{ $json.note_id }}\"\n            },\n            {\n              \"name\": \"NOTE_TITLE\",\n              \"stringValue\": \"={{ $json.note_title }}\"\n            },\n            {\n              \"name\": \"NOTE_STATE\",\n              \"stringValue\": \"={{ $json.note_state }}\"\n            },\n            {\n              \"name\": \"NOTE_COMPANY_ID\",\n              \"stringValue\": \"={{ $json.note_company_id }}\"\n            },\n            {\n              \"name\": \"NOTE_CONTENT\",\n              \"stringValue\": \"={{ $json.note_content }}\"\n            },\n            {\n              \"name\": \"NOTE_CREATED_BY\",\n              \"stringValue\": \"={{ $json.note_created_by }}\"\n            },\n            {\n              \"name\": \"NOTE_CREATED_AT\",\n              \"stringValue\": \"={{ $json.note_created_at }}\"\n            },\n            {\n              \"name\": \"NOTE_SOURCE\",\n              \"stringValue\": \"={{ $json.note_source }}\"\n            },\n            {\n              \"name\": \"NOTE_OWNER\",\n              \"stringValue\": \"={{ $json.note_owner }}\"\n            },\n            {\n              \"name\": \"NOTE_URL\",\n              \"stringValue\": \"={{ $json.note_url }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"d163879a-6020-4ace-b3ea-36c3d7b3675a\",\n      \"name\": \"Empty Table Productboard Companies\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3820,\n        220\n      ],\n      \"parameters\": {\n        \"query\": \"TRUNCATE TABLE PRODUCTBOARD_COMPANIES;\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0dbf1a3c-ae8b-4e7b-afb5-d1363d3d7634\",\n      \"name\": \"[CREATE] PRODUCTBOARD_NOTES_FEATURES\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3760,\n        1140\n      ],\n      \"parameters\": {\n        \"query\": \"CREATE OR REPLACE TABLE PRODUCTBOARD_NOTES_FEATURES (\\n    note_id STRING NOT NULL,\\n    feature_id STRING\\n)\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fa9e8744-c348-481c-a6f9-083689ee8ea9\",\n      \"name\": \"Manual mapping feature note IDs db\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        6160,\n        920\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"NOTE_ID\",\n              \"stringValue\": \"={{ $json.note_id }}\"\n            },\n            {\n              \"name\": \"FEATURE_ID\",\n              \"stringValue\": \"={{ $json.feature_id }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"718f041a-dd02-4331-a704-fd1aa809212b\",\n      \"name\": \"Update Productboard Note and Feature IDs\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        6380,\n        920\n      ],\n      \"parameters\": {\n        \"table\": \"PRODUCTBOARD_NOTES_FEATURES\",\n        \"columns\": \"NOTE_ID,FEATURE_ID\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"51430e95-1eb9-4c47-a0cf-e05708e6d41b\",\n      \"name\": \"Empty Table Productboard Note and Feature IDs\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        4040,\n        640\n      ],\n      \"parameters\": {\n        \"query\": \"TRUNCATE TABLE PRODUCTBOARD_NOTES_FEATURES;\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8c03178f-baf1-4ed8-94d8-91e90ef5cd26\",\n      \"name\": \"Loop Over Items notes\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        5460,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 100\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"0c6a787f-48da-479c-b45a-8122b8fada3f\",\n      \"name\": \"Loop Over Items features notes\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        5900,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 100\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"1adb9ff0-be18-4ceb-aae0-62186e75668f\",\n      \"name\": \"[CREATE] PRODUCTBOARD_FEATURES\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3040,\n        1140\n      ],\n      \"parameters\": {\n        \"query\": \"CREATE OR REPLACE TABLE PRODUCTBOARD_FEATURES (\\n    feature_id STRING NOT NULL,\\n    feature_name STRING,\\n    feature_status STRING,\\n    feature_start_date STRING,\\n    feature_end_date STRING,\\n    feature_owner STRING,\\n    feature_created_at STRING\\n);\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0357ba46-4934-4c3f-8f0a-676496a6eee6\",\n      \"name\": \"Empty Table Productboard Features\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3440,\n        -180\n      ],\n      \"parameters\": {\n        \"query\": \"TRUNCATE TABLE PRODUCTBOARD_FEATURES;\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"df076304-ce27-4801-8e0f-c268b313ef4e\",\n      \"name\": \"Loop Over Items features\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        4640,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 100\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"40732e40-5ff2-4b1f-b300-b6b734e31637\",\n      \"name\": \"Manual mapping features db\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        4900,\n        -160\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"FEATURE_ID\",\n              \"stringValue\": \"={{ $json.feature_id }}\"\n            },\n            {\n              \"name\": \"FEATURE_NAME\",\n              \"stringValue\": \"={{ $json.feature_name }}\"\n            },\n            {\n              \"name\": \"FEATURE_STATUS\",\n              \"stringValue\": \"={{ $json.feature_status }}\"\n            },\n            {\n              \"name\": \"FEATURE_START_DATE\",\n              \"stringValue\": \"={{ $json.feature_start_date }}\"\n            },\n            {\n              \"name\": \"FEATURE_END_DATE\",\n              \"stringValue\": \"={{ $json.feature_end_date }}\"\n            },\n            {\n              \"name\": \"FEATURE_OWNER\",\n              \"stringValue\": \"={{ $json.feature_owner }}\"\n            },\n            {\n              \"name\": \"FEATURE_CREATED_AT\",\n              \"stringValue\": \"={{ $json.feature_created_at }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"59a838c4-fef0-4902-b6d6-418934ac986f\",\n      \"name\": \"Update Productboard Features\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        5140,\n        -160\n      ],\n      \"parameters\": {\n        \"table\": \"PRODUCTBOARD_FEATURES\",\n        \"columns\": \"FEATURE_ID,FEATURE_NAME,FEATURE_STATUS,FEATURE_START_DATE,FEATURE_END_DATE,FEATURE_OWNER,FEATURE_CREATED_AT\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"110ebd3a-50ac-4e9f-9297-f64759dfdd18\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        2980,\n        -180\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"weeks\",\n              \"triggerAtDay\": [\n                1\n              ],\n              \"triggerAtHour\": 8\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"3eb88f88-8fad-4aaf-b6f9-6f7d87e30018\",\n      \"name\": \"Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"onError\": \"continueRegularOutput\",\n      \"position\": [\n        5900,\n        1220\n      ],\n      \"parameters\": {\n        \"text\": \"=\",\n        \"select\": \"channel\",\n        \"blocksUi\": \"={\\n  \\\"blocks\\\": [\\n    {\\n      \\\"type\\\": \\\"section\\\",\\n      \\\"text\\\": {\\n        \\\"type\\\": \\\"mrkdwn\\\",\\n        \\\"text\\\": \\\":productboard: Weekly Update in :snowflake_logo: Completed\\\\n\\\\n*{{ $json.NOTES_7_DAYS }}* new insights added in the last 7 days.\\\\n\\\\n*{{ $json.NOTES_UNPROCESSED }}* insights remain unprocessed.\\\\n\\\\nYou can view the updated :metabase: dashboard below:\\\"\\n      }\\n    },\\n    {\\n      \\\"type\\\": \\\"actions\\\",\\n      \\\"elements\\\": [\\n        {\\n          \\\"type\\\": \\\"button\\\",\\n          \\\"text\\\": {\\n            \\\"type\\\": \\\"plain_text\\\",\\n            \\\"text\\\": \\\"Open Dashboard\\\",\\n            \\\"emoji\\\": true\\n          },\\n          \\\"url\\\": \\\"https://metabase.com\\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"#product-notifications\"\n        },\n        \"messageType\": \"block\",\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"SG3oDwwLGpxwoJSO\",\n          \"name\": \"Gardien Slack bot\"\n        }\n      },\n      \"executeOnce\": true,\n      \"retryOnFail\": false,\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"3a16d947-a218-4ec2-8081-19b676bb51c3\",\n      \"name\": \"Count Notes Last 7 days and Unprocessed\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        5660,\n        1220\n      ],\n      \"parameters\": {\n        \"query\": \"SELECT\\n    COUNT(DISTINCT CASE \\n        WHEN DATEDIFF(DAY, NOTE_CREATED_AT, CURRENT_DATE()) <= 7 THEN note_id \\n    END) AS notes_7_days,\\n    COUNT(DISTINCT CASE \\n        WHEN NOTE_STATE = 'unprocessed' THEN note_id \\n    END) AS notes_unprocessed\\nFROM PRODUCTBOARD_NOTES;\\n\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2bdfb96c-1c38-444d-9507-ab74f3572129\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2980,\n        1060\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 983.4896175671602,\n        \"height\": 314.88047081122676,\n        \"content\": \"## Setup snowflake tables\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"\",\n  \"connections\": {\n    \"Split notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Manual mapping notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Split features in notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Count Notes Last 7 days and Unprocessed\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Manual mapping feature\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Manual mapping companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Empty Table Productboard Features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items notes\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Manual mapping notes db\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping feature\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"get productboard notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping notes db\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Productboard Notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split features in notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Combine Feature ID + Note ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Empty Table Productboard Companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Manual mapping features db\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Manual mapping companies db\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Productboard Notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"get productboard features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping features db\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Productboard Features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"get productboard companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping companies db\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Productboard Companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Combine Feature ID + Note ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items features notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Productboard Features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Productboard Companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Empty Table Productboard Note and Feature IDs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Empty Table Productboard Notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"get productboard notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items features notes\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Manual mapping feature note IDs db\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Empty Table Productboard Features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"get productboard features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Empty Table Productboard Companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"get productboard companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping feature note IDs db\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Productboard Note and Feature IDs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Count Notes Last 7 days and Unprocessed\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Productboard Note and Feature IDs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items features notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Empty Table Productboard Note and Feature IDs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Empty Table Productboard Notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.set",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.splitOut",
      "n8n-nodes-base.set",
      "n8n-nodes-base.httpRequest",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.set",
      "n8n-nodes-base.set",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.set",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.splitInBatches",
      "n8n-nodes-base.set",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.scheduleTrigger",
      "n8n-nodes-base.slack",
      "n8n-nodes-base.snowflake",
      "n8n-nodes-base.stickyNote"
    ],
    "trigger": "schedule trigger"
  }
}