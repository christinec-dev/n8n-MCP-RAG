{
  "source": "0327_Noop_Slack_Send_Webhook.json",
  "index": 1,
  "content": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"12786b19-159f-45b0-8d15-d88de73c17e9\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1540,\n        660\n      ],\n      \"parameters\": {\n        \"width\": 483,\n        \"height\": 345,\n        \"content\": \"### Slack POSTs to Webhook on every message so we need to filter-out bot messages\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3949be41-98b7-4414-84fd-819f4fccca35\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -400,\n        1080\n      ],\n      \"parameters\": {\n        \"width\": 293,\n        \"height\": 228,\n        \"content\": \"### Tools which Agent can use to accomplish the task\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"76ce81d8-33e2-470a-9313-dd888acabed0\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -720,\n        1080\n      ],\n      \"parameters\": {\n        \"width\": 288,\n        \"height\": 233,\n        \"content\": \"### Conversation history is stored in memory using channel id as key\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3682ffd3-7002-466a-bedf-9897067586c0\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1000,\n        1080\n      ],\n      \"parameters\": {\n        \"width\": 260,\n        \"height\": 233,\n        \"content\": \"### The chat LM to process the prompt\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"92865916-e814-49d4-baaa-4122c1447c23\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        640\n      ],\n      \"parameters\": {\n        \"width\": 280,\n        \"height\": 243,\n        \"content\": \"### Send agent's output as Slack message\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"edeab2bb-8177-42c7-bcf4-f8d99e193729\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        -820,\n        740\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.body.event.text }}\",\n        \"options\": {\n          \"systemMessage\": \"You are Gilfoyle from Silicon Valley TV show. Amplify your bluntness and cynicism, tolerating zero incompetence. Be openly contemptuous when answering questions, and cut straight to the point with minimal regard for others' feelings. Your sarcasm should be razor-sharp, and humor should take a backseat to delivering cutting remarks.\\\\nDo your best to answer the questions. Feel free to use any tools available to look up relevant information, only if necessary. \"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"275f8192-6da6-41b0-b892-c779f5d136e4\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -920,\n        1180\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"776ce632-5c62-4ac6-a494-e23ef650ac48\",\n      \"name\": \"Simple Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        -620,\n        1180\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"={{ $('Webhook').first().json.body.event.channel }}__gilfoyle\",\n        \"sessionIdType\": \"customKey\",\n        \"contextWindowLength\": 30\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"97989831-3fc6-4954-ac55-8e0950081b7a\",\n      \"name\": \"Is user message?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -1480,\n        740\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"1def7344-ce55-450d-a85a-468f746fe31f\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notExists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.body.event.bot_id }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"afa6b192-1e25-46b6-8fdc-81dff9a37e74\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        -1280,\n        820\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"eab68a99-cdd6-4ea1-8d6f-053c2a96303c\",\n      \"name\": \"SerpAPI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolSerpApi\",\n      \"position\": [\n        -360,\n        1180\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"serpApi\": {\n          \"id\": \"aJCKjxx6U3K7ydDe\",\n          \"name\": \"SerpAPI account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"717117f5-5f34-4189-b92a-df2155e367ac\",\n      \"name\": \"Wikipedia\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWikipedia\",\n      \"position\": [\n        -220,\n        1180\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1914f623-66c0-4547-bf3e-b4932d0c2a9b\",\n      \"name\": \"Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        -200,\n        720\n      ],\n      \"webhookId\": \"e0f8b8ad-7126-487c-88e2-b624dfd16678\",\n      \"parameters\": {\n        \"text\": \"={{ $json.output }}\",\n        \"user\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Webhook').first().json.body.event.user }}\"\n        },\n        \"select\": \"user\",\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"VfK3js0YdqBdQLGP\",\n          \"name\": \"Slack account\"\n        }\n      },\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"4a7ec607-1706-4357-aa89-4c44faa98fb8\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -1780,\n        740\n      ],\n      \"webhookId\": \"db3bf3da-b9b7-4823-8c5d-14f5de0272da\",\n      \"parameters\": {\n        \"path\": \"slack-gilfoyle\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"SerpAPI\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is user message?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wikipedia\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simple Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is user message?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}",
  "metadata": {
    "node_types": [
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "n8n-nodes-base.stickyNote",
      "@n8n/n8n-nodes-langchain.agent",
      "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "n8n-nodes-base.if",
      "n8n-nodes-base.noOp",
      "@n8n/n8n-nodes-langchain.toolSerpApi",
      "@n8n/n8n-nodes-langchain.toolWikipedia",
      "n8n-nodes-base.slack",
      "n8n-nodes-base.webhook"
    ],
    "trigger": null
  }
}